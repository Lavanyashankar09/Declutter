2025-01-15 08:00:00 [INFO] Application started on port 3000
2025-01-15 08:00:00 [INFO] Connected to database: postgresql://localhost:5432/myapp
2025-01-15 08:00:01 [INFO] Redis connection established: 127.0.0.1:6379
2025-01-15 08:00:01 [INFO] Loading middleware: cors, helmet, compression, morgan
2025-01-15 08:00:02 [INFO] Server ready. Accepting connections.
2025-01-15 08:00:29 [INFO] GET /api/roles 200 6ms
2025-01-15 08:00:40 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 08:00:40 [DEBUG] New record created: id=94
2025-01-15 08:00:50 [INFO] GET /api/health 200 3ms
2025-01-15 08:01:00 [INFO] PUT /api/users/184 200 68ms
2025-01-15 08:01:10 [INFO] GET /api/health 200 2ms
2025-01-15 08:01:15 [INFO] GET /api/users?role=admin 200 18ms
2025-01-15 08:01:21 [INFO] GET /api/health 200 3ms
2025-01-15 08:01:26 [INFO] GET /api/health 200 3ms
2025-01-15 08:01:34 [INFO] POST /api/auth/login 200 192ms
2025-01-15 08:01:44 [INFO] GET /api/users/12 200 7ms
2025-01-15 08:01:58 [INFO] GET /api/users/98 404 18ms
2025-01-15 08:02:12 [INFO] GET /api/users?page=3&limit=25 200 29ms
2025-01-15 08:02:22 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 08:02:22 [DEBUG] New record created: id=423
2025-01-15 08:02:26 [INFO] POST /api/auth/login 200 114ms
2025-01-15 08:02:30 [INFO] GET /api/health 200 2ms
2025-01-15 08:02:37 [INFO] PUT /api/users/146 200 81ms
2025-01-15 08:02:45 [INFO] POST /api/auth/refresh 200 45ms
2025-01-15 08:02:57 [INFO] GET /api/roles 200 11ms
2025-01-15 08:03:03 [INFO] POST /api/users 201 86ms
2025-01-15 08:03:17 [INFO] POST /api/users 409 12ms
2025-01-15 08:03:24 [INFO] POST /api/auth/refresh 200 30ms
2025-01-15 08:03:35 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 08:03:35 [DEBUG] Rows returned: 34
2025-01-15 08:03:48 [INFO] GET /api/users?role=viewer 200 20ms
2025-01-15 08:03:56 [INFO] GET /api/roles 200 6ms
2025-01-15 08:04:10 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 08:04:10 [DEBUG] Rows returned: 32
2025-01-15 08:04:20 [INFO] GET /api/users?page=5&limit=25 200 58ms
2025-01-15 08:04:35 [INFO] GET /api/users?role=admin 200 26ms
2025-01-15 08:04:50 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 08:04:52 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 08:04:52 [DEBUG] Rows returned: 48
2025-01-15 08:05:01 [INFO] GET /api/health 200 1ms
2025-01-15 08:05:12 [INFO] POST /api/uploads 201 1742ms
2025-01-15 08:05:19 [WARN] Redis reconnection attempt 89/5  #NOTE - I thought Sarah's PR addressed this issue, need to follow up.
2025-01-15 08:05:27 [INFO] DELETE /api/users/17 204 38ms
2025-01-15 08:05:36 [INFO] DELETE /api/users/2 204 27ms
2025-01-15 08:05:38 [WARN] Deprecated API version v1 called by client client-18
2025-01-15 08:05:53 [INFO] GET /api/health 200 3ms
2025-01-15 08:06:01 [INFO] GET /api/analytics/dashboard 200 299ms
2025-01-15 08:06:12 [INFO] POST /api/auth/login 401 62ms
2025-01-15 08:06:13 [INFO] GET /api/users?role=editor 200 21ms
2025-01-15 08:06:22 [INFO] POST /api/auth/login 401 81ms
2025-01-15 08:06:36 [WARN] JWT token expires in less than 60 seconds for user 43
2025-01-15 08:06:43 [INFO] PUT /api/users/103 200 64ms
2025-01-15 08:06:44 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 08:06:56 [INFO] PUT /api/users/76 200 77ms
2025-01-15 08:07:08 [INFO] GET /api/users?role=admin 200 30ms
2025-01-15 08:07:17 [WARN] Redis reconnection attempt 85/5
2025-01-15 08:07:31 [INFO] GET /api/users/146 404 17ms
2025-01-15 08:07:32 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 08:07:32 [DEBUG] Rows returned: 42
2025-01-15 08:07:42 [INFO] GET /api/users?role=editor 200 22ms
2025-01-15 08:07:47 [INFO] POST /api/roles 201 30ms
2025-01-15 08:07:55 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 08:07:57 [INFO] PUT /api/users/130 200 62ms
2025-01-15 08:08:12 [INFO] DELETE /api/users/95 204 34ms
2025-01-15 08:08:26 [INFO] POST /api/roles 201 49ms
2025-01-15 08:08:41 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 08:08:41 [DEBUG] New record created: id=185
2025-01-15 08:08:43 [INFO] GET /api/health 200 3ms
2025-01-15 08:08:52 [INFO] POST /api/roles 201 43ms
2025-01-15 08:09:03 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 08:09:12 [INFO] GET /api/users 200 27ms
2025-01-15 08:09:13 [INFO] POST /api/users 201 136ms
2025-01-15 08:09:22 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 08:09:22 [DEBUG] New record created: id=54
2025-01-15 08:09:24 [INFO] POST /api/users 201 150ms
2025-01-15 08:09:27 [INFO] GET /api/users 200 47ms
2025-01-15 08:09:31 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 08:09:31 [DEBUG] Rows returned: 6
2025-01-15 08:09:37 [INFO] GET /api/health 200 2ms
2025-01-15 08:09:47 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 08:10:01 [INFO] POST /api/users 409 20ms
2025-01-15 08:10:14 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 08:10:20 [INFO] DELETE /api/users/58 204 32ms
2025-01-15 08:10:26 [INFO] GET /api/users/198 200 17ms
2025-01-15 08:10:37 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 08:10:47 [WARN] Memory usage at 85% of allocated heap
2025-01-15 08:10:54 [INFO] GET /api/health 200 1ms
2025-01-15 08:10:59 [INFO] POST /api/auth/login 401 105ms
2025-01-15 08:11:01 [WARN] Deprecated API version v1 called by client client-10
2025-01-15 08:11:08 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 08:11:08 [DEBUG] New record created: id=115
2025-01-15 08:11:12 [INFO] POST /api/auth/login 200 245ms
2025-01-15 08:11:17 [INFO] GET /api/health 200 2ms
2025-01-15 08:11:30 [INFO] GET /api/users?role=moderator 200 36ms
2025-01-15 08:11:34 [INFO] POST /api/users 409 20ms
2025-01-15 08:11:36 [INFO] GET /api/health 200 1ms
2025-01-15 08:11:47 [INFO] PUT /api/users/38 200 55ms
2025-01-15 08:11:55 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 08:11:55 [DEBUG] Rows returned: 29
2025-01-15 08:12:02 [INFO] GET /api/health 200 3ms
2025-01-15 08:12:06 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 08:12:06 [DEBUG] Rows returned: 31
2025-01-15 08:12:13 [INFO] GET /api/health 200 1ms
2025-01-15 08:12:16 [INFO] GET /api/health 200 3ms
2025-01-15 08:12:25 [INFO] POST /api/uploads 201 773ms
2025-01-15 08:12:38 [INFO] GET /api/notifications 200 29ms
2025-01-15 08:12:52 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 08:12:52 [DEBUG] New record created: id=268
2025-01-15 08:13:06 [WARN] JWT token expires in less than 60 seconds for user 125
2025-01-15 08:13:17 [INFO] POST /api/auth/refresh 200 47ms
2025-01-15 08:13:23 [INFO] POST /api/uploads 201 973ms
2025-01-15 08:13:30 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 08:13:30 [DEBUG] Rows returned: 13
2025-01-15 08:13:32 [INFO] GET /api/users?role=moderator 200 16ms
2025-01-15 08:13:36 [INFO] GET /api/health 200 2ms
2025-01-15 08:13:51 [INFO] GET /api/health 200 3ms
2025-01-15 08:13:52 [INFO] GET /api/health 200 3ms
2025-01-15 08:13:59 [INFO] GET /api/users?page=4&limit=25 200 59ms
2025-01-15 08:14:11 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 08:14:26 [INFO] DELETE /api/users/70 204 20ms
2025-01-15 08:14:33 [INFO] POST /api/auth/login 200 132ms
2025-01-15 08:14:43 [INFO] POST /api/auth/login 200 209ms
2025-01-15 08:14:46 [INFO] GET /api/health 200 1ms
2025-01-15 08:14:47 [INFO] GET /api/users?role=moderator 200 25ms
2025-01-15 08:15:00 [INFO] GET /api/health 200 2ms
2025-01-15 08:15:13 [WARN] Request body exceeded soft limit (2336KB)
2025-01-15 08:15:15 [INFO] GET /api/health 200 3ms
2025-01-15 08:15:16 [INFO] GET /api/health 200 1ms
2025-01-15 08:15:20 [INFO] GET /api/health 200 3ms
2025-01-15 08:15:23 [INFO] GET /api/analytics/dashboard 200 423ms
2025-01-15 08:15:31 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 08:15:31 [DEBUG] Rows returned: 10
2025-01-15 08:15:41 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 08:15:41 [DEBUG] Rows returned: 45
2025-01-15 08:15:43 [INFO] GET /api/health 200 1ms
2025-01-15 08:15:48 [INFO] GET /api/health 200 3ms
2025-01-15 08:15:52 [INFO] DELETE /api/users/27 204 45ms
2025-01-15 08:15:54 [INFO] GET /api/health 200 3ms
2025-01-15 08:16:07 [INFO] POST /api/uploads 201 1536ms
2025-01-15 08:16:18 [INFO] POST /api/auth/login 401 96ms
2025-01-15 08:16:29 [INFO] GET /api/health 200 2ms
2025-01-15 08:16:41 [INFO] POST /api/users 409 25ms
2025-01-15 08:16:49 [INFO] GET /api/settings 200 6ms
2025-01-15 08:16:54 [INFO] GET /api/health 200 1ms
2025-01-15 08:17:07 [INFO] PUT /api/settings 200 21ms
2025-01-15 08:17:15 [INFO] GET /api/health 200 1ms
2025-01-15 08:17:23 [INFO] GET /api/roles 200 9ms
2025-01-15 08:17:32 [INFO] PUT /api/users/22 200 71ms
2025-01-15 08:17:41 [INFO] GET /api/health 200 3ms
2025-01-15 08:17:49 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 08:17:49 [DEBUG] Rows returned: 28
2025-01-15 08:18:02 [INFO] POST /api/roles 201 49ms
2025-01-15 08:18:13 [INFO] GET /api/analytics/dashboard 200 763ms
2025-01-15 08:18:19 [INFO] POST /api/auth/refresh 200 44ms
2025-01-15 08:18:21 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 08:18:21 [DEBUG] Rows returned: 7
2025-01-15 08:18:33 [INFO] POST /api/users 409 18ms
2025-01-15 08:18:45 [INFO] GET /api/notifications 200 16ms
2025-01-15 08:18:50 [INFO] POST /api/users 409 14ms
2025-01-15 08:18:55 [INFO] GET /api/users 200 65ms
2025-01-15 08:19:09 [INFO] GET /api/health 200 1ms
2025-01-15 08:19:23 [INFO] POST /api/roles 201 51ms
2025-01-15 08:19:26 [WARN] Memory usage at 77% of allocated heap
2025-01-15 08:19:29 [INFO] GET /api/health 200 2ms
2025-01-15 08:19:31 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 08:19:35 [INFO] GET /api/health 200 2ms
2025-01-15 08:19:43 [WARN] Memory usage at 76% of allocated heap
2025-01-15 08:19:47 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 08:19:58 [INFO] DELETE /api/users/45 204 20ms
2025-01-15 08:20:05 [INFO] PUT /api/settings 200 34ms
2025-01-15 08:20:10 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 08:20:10 [DEBUG] Rows returned: 29
2025-01-15 08:20:12 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 08:20:25 [INFO] GET /api/health 200 3ms
2025-01-15 08:20:36 [INFO] GET /api/health 200 1ms
2025-01-15 08:20:43 [INFO] DELETE /api/users/166 204 46ms
2025-01-15 08:20:46 [INFO] POST /api/users 409 13ms
2025-01-15 08:20:54 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 08:20:54 [DEBUG] Rows returned: 25
2025-01-15 08:20:59 [INFO] GET /api/analytics/dashboard 200 240ms
2025-01-15 08:21:14 [INFO] GET /api/users?role=viewer 200 17ms
2025-01-15 08:21:18 [WARN] S3 upload retry after timeout (342ms)
2025-01-15 08:21:26 [WARN] Rate limit exceeded for IP 192.168.8.249. Returning 429.
2025-01-15 08:21:32 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 08:21:32 [DEBUG] New record created: id=218
2025-01-15 08:21:39 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 08:21:50 [WARN] Redis reconnection attempt 88/5
2025-01-15 08:22:04 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 08:22:10 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 08:22:10 [DEBUG] Rows returned: 40
2025-01-15 08:22:18 [INFO] GET /api/health 200 1ms
2025-01-15 08:22:23 [INFO] POST /api/roles 201 31ms
2025-01-15 08:22:34 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 08:22:46 [INFO] POST /api/uploads 201 960ms
2025-01-15 08:23:00 [WARN] JWT token expires in less than 60 seconds for user 124
2025-01-15 08:23:08 [INFO] POST /api/uploads 201 1727ms
2025-01-15 08:23:17 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 08:23:17 [DEBUG] New record created: id=492
2025-01-15 08:23:19 [INFO] POST /api/auth/login 401 86ms
2025-01-15 08:23:31 [INFO] GET /api/settings 200 12ms
2025-01-15 08:23:40 [INFO] GET /api/users?role=moderator 200 25ms
2025-01-15 08:23:54 [INFO] DELETE /api/users/147 204 47ms
2025-01-15 08:24:07 [INFO] GET /api/users?role=moderator 200 27ms
2025-01-15 08:24:18 [INFO] GET /api/health 200 3ms
2025-01-15 08:24:21 [INFO] GET /api/users 200 80ms
2025-01-15 08:24:35 [INFO] GET /api/notifications 200 23ms
2025-01-15 08:24:49 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 08:24:49 [DEBUG] New record created: id=88
2025-01-15 08:24:57 [INFO] GET /api/health 200 2ms
2025-01-15 08:25:03 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 08:25:03 [DEBUG] Rows returned: 41
2025-01-15 08:25:05 [INFO] GET /api/health 200 3ms
2025-01-15 08:25:19 [INFO] GET /api/users?role=moderator 200 16ms
2025-01-15 08:25:29 [INFO] POST /api/roles 201 36ms
2025-01-15 08:25:42 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 08:25:42 [DEBUG] Rows returned: 28
2025-01-15 08:25:45 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 08:25:45 [DEBUG] Rows returned: 2
2025-01-15 08:25:51 [INFO] GET /api/health 200 2ms
2025-01-15 08:25:57 [INFO] POST /api/users 201 103ms
2025-01-15 08:26:00 [INFO] PUT /api/settings 200 29ms
2025-01-15 08:26:04 [INFO] GET /api/roles 200 12ms
2025-01-15 08:26:19 [INFO] POST /api/uploads 201 1207ms
2025-01-15 08:26:29 [INFO] POST /api/auth/login 401 88ms
2025-01-15 08:26:33 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 08:26:43 [INFO] POST /api/roles 201 30ms
2025-01-15 08:26:53 [INFO] GET /api/health 200 3ms
2025-01-15 08:26:54 [WARN] JWT token expires in less than 60 seconds for user 174
2025-01-15 08:27:07 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 08:27:07 [DEBUG] Rows returned: 43
2025-01-15 08:27:21 [INFO] GET /api/users/161 404 15ms
2025-01-15 08:27:22 [INFO] POST /api/users 201 133ms
2025-01-15 08:27:25 [INFO] POST /api/uploads 201 1026ms
2025-01-15 08:27:40 [INFO] GET /api/health 200 2ms
2025-01-15 08:27:53 [INFO] GET /api/users?role=moderator 200 19ms
2025-01-15 08:28:06 [WARN] Request body exceeded soft limit (4895KB)
2025-01-15 08:28:14 [INFO] GET /api/roles 200 6ms
2025-01-15 08:28:25 [INFO] GET /api/health 200 1ms
2025-01-15 08:28:36 [INFO] POST /api/auth/refresh 200 37ms
2025-01-15 08:28:39 [INFO] GET /api/users 200 31ms
2025-01-15 08:28:43 [INFO] GET /api/health 200 1ms
2025-01-15 08:28:50 [INFO] POST /api/uploads 201 1841ms
2025-01-15 08:28:52 [INFO] GET /api/health 200 3ms
2025-01-15 08:28:59 [WARN] Memory usage at 89% of allocated heap
2025-01-15 08:29:10 [INFO] GET /api/users?page=3&limit=25 200 37ms
2025-01-15 08:29:12 [WARN] JWT token expires in less than 60 seconds for user 86
2025-01-15 08:29:16 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 08:29:20 [INFO] GET /api/health 200 1ms
2025-01-15 08:29:26 [INFO] GET /api/health 200 3ms
2025-01-15 08:29:27 [INFO] POST /api/users 201 94ms
2025-01-15 08:29:38 [INFO] GET /api/health 200 1ms
2025-01-15 08:29:39 [INFO] DELETE /api/users/151 204 25ms
2025-01-15 08:29:44 [INFO] POST /api/auth/login 401 110ms
2025-01-15 08:29:52 [INFO] GET /api/health 200 3ms
2025-01-15 08:30:02 [INFO] GET /api/notifications 200 19ms
2025-01-15 08:30:10 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 08:30:10 [DEBUG] Rows returned: 3
2025-01-15 08:30:18 [INFO] GET /api/health 200 2ms
2025-01-15 08:30:29 [INFO] POST /api/auth/refresh 200 68ms
2025-01-15 08:30:32 [INFO] GET /api/roles 200 14ms
2025-01-15 08:30:41 [INFO] GET /api/notifications 200 35ms
2025-01-15 08:30:53 [INFO] POST /api/uploads 201 1424ms
2025-01-15 08:31:08 [INFO] GET /api/users?role=moderator 200 38ms
2025-01-15 08:31:10 [INFO] GET /api/users?role=viewer 200 19ms
2025-01-15 08:31:21 [WARN] Rate limit approaching for IP 192.168.2.111 (83/100 requests in window)
2025-01-15 08:31:30 [INFO] GET /api/users/106 404 8ms
2025-01-15 08:31:35 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 08:31:35 [DEBUG] Rows returned: 6
2025-01-15 08:31:45 [INFO] POST /api/users 201 93ms
2025-01-15 08:31:51 [INFO] GET /api/health 200 2ms
2025-01-15 08:31:53 [INFO] GET /api/health 200 3ms
2025-01-15 08:31:57 [INFO] GET /api/health 200 3ms
2025-01-15 08:32:10 [INFO] GET /api/health 200 3ms
2025-01-15 08:32:21 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 08:32:21 [DEBUG] Rows returned: 38
2025-01-15 08:32:36 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 08:32:36 [DEBUG] Rows returned: 17
2025-01-15 08:32:37 [INFO] POST /api/roles 201 41ms
2025-01-15 08:32:51 [INFO] POST /api/auth/login 200 123ms
2025-01-15 08:33:03 [INFO] POST /api/auth/login 200 140ms
2025-01-15 08:33:09 [INFO] GET /api/users?role=admin 200 19ms
2025-01-15 08:33:12 [INFO] GET /api/health 200 1ms
2025-01-15 08:33:23 [INFO] POST /api/auth/refresh 200 68ms
2025-01-15 08:33:31 [INFO] PUT /api/users/194 200 67ms
2025-01-15 08:33:33 [INFO] GET /api/settings 200 8ms
2025-01-15 08:33:40 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 08:33:53 [INFO] GET /api/users?role=admin 200 38ms
2025-01-15 08:34:00 [INFO] POST /api/auth/login 200 243ms
2025-01-15 08:34:14 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 08:34:14 [DEBUG] Rows returned: 4
2025-01-15 08:34:21 [INFO] GET /api/health 200 1ms
2025-01-15 08:34:28 [INFO] GET /api/users/81 200 17ms
2025-01-15 08:34:40 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 08:34:42 [INFO] GET /api/users?role=moderator 200 17ms
2025-01-15 08:34:49 [INFO] GET /api/health 200 1ms
2025-01-15 08:34:56 [INFO] GET /api/notifications 200 33ms
2025-01-15 08:35:02 [INFO] POST /api/users 409 16ms
2025-01-15 08:35:17 [INFO] GET /api/health 200 2ms
2025-01-15 08:35:29 [WARN] Rate limit exceeded for IP 192.168.3.66. Returning 429.
2025-01-15 08:35:42 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 08:35:42 [DEBUG] New record created: id=445
2025-01-15 08:35:53 [INFO] GET /api/settings 200 10ms
2025-01-15 08:36:07 [ERROR] Deadlock detected in transaction tx-67961
2025-01-15 08:36:07 [ERROR] Stack trace:
    at AuthController.login (src/controllers/auth.controller.ts:168)
    at UserService.findById (src/services/user.service.ts:246)
    at validateRequest (src/middleware/validation.ts:241)
    at processTicksAndRejections (node:internal/process/task_queues:29)
    at Layer.handle (node_modules/express/lib/router/layer.js:39)
2025-01-15 08:36:13 [INFO] GET /api/health 200 1ms
2025-01-15 08:36:24 [INFO] GET /api/health 200 1ms
2025-01-15 08:36:34 [INFO] POST /api/auth/login 200 246ms
2025-01-15 08:36:45 [INFO] PUT /api/settings 200 48ms
2025-01-15 08:36:47 [INFO] GET /api/health 200 2ms
2025-01-15 08:36:59 [INFO] POST /api/users 409 24ms
2025-01-15 08:37:08 [INFO] POST /api/users 409 22ms
2025-01-15 08:37:15 [INFO] GET /api/health 200 3ms
2025-01-15 08:37:25 [INFO] GET /api/users?role=viewer 200 32ms
2025-01-15 08:37:36 [INFO] GET /api/roles 200 6ms
2025-01-15 08:37:46 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 08:37:46 [DEBUG] Rows returned: 19
2025-01-15 08:37:57 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 08:37:57 [DEBUG] Rows returned: 8
2025-01-15 08:38:07 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 08:38:07 [DEBUG] Rows returned: 19
2025-01-15 08:38:16 [INFO] GET /api/users?role=admin 200 31ms
2025-01-15 08:38:22 [INFO] POST /api/roles 201 61ms
2025-01-15 08:38:26 [INFO] POST /api/users 201 92ms
2025-01-15 08:38:35 [INFO] GET /api/health 200 3ms
2025-01-15 08:38:50 [INFO] GET /api/users?role=editor 200 27ms
2025-01-15 08:38:53 [INFO] PUT /api/settings 200 46ms
2025-01-15 08:38:59 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 08:39:07 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 08:39:07 [DEBUG] Rows returned: 50
2025-01-15 08:39:15 [INFO] DELETE /api/users/80 204 31ms
2025-01-15 08:39:26 [WARN] JWT token expires in less than 60 seconds for user 42
2025-01-15 08:39:40 [INFO] PUT /api/settings 200 50ms
2025-01-15 08:39:54 [INFO] GET /api/users/183 404 9ms
2025-01-15 08:40:07 [INFO] POST /api/auth/refresh 200 35ms
2025-01-15 08:40:22 [INFO] POST /api/auth/refresh 200 33ms
2025-01-15 08:40:29 [INFO] DELETE /api/users/99 204 27ms
2025-01-15 08:40:30 [INFO] GET /api/users/183 404 10ms
2025-01-15 08:40:31 [INFO] GET /api/analytics/dashboard 200 659ms
2025-01-15 08:40:41 [INFO] GET /api/users/5 200 9ms
2025-01-15 08:40:50 [WARN] S3 upload retry after timeout (1166ms)
2025-01-15 08:40:54 [INFO] PUT /api/settings 200 51ms
2025-01-15 08:41:04 [INFO] GET /api/notifications 200 19ms
2025-01-15 08:41:11 [INFO] GET /api/users?page=2&limit=25 200 30ms
2025-01-15 08:41:20 [ERROR] Deadlock detected in transaction tx-15706
2025-01-15 08:41:20 [ERROR] Stack trace:
    at validateRequest (src/middleware/validation.ts:133)
    at AuthController.login (src/controllers/auth.controller.ts:63)
    at UserService.findById (src/services/user.service.ts:180)
    at RoleService.getPermissions (src/services/role.service.ts:78)
    at Router.handle (node_modules/express/lib/router/index.js:32)
    at authenticate (src/middleware/auth.ts:190)
2025-01-15 08:41:29 [INFO] POST /api/users 409 15ms
2025-01-15 08:41:42 [INFO] POST /api/auth/refresh 200 32ms
2025-01-15 08:41:55 [INFO] GET /api/users 200 50ms
2025-01-15 08:42:09 [INFO] GET /api/roles 200 10ms
2025-01-15 08:42:23 [INFO] GET /api/health 200 3ms
2025-01-15 08:42:29 [INFO] GET /api/users?page=4&limit=25 200 49ms
2025-01-15 08:42:35 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 08:42:48 [INFO] POST /api/auth/login 401 73ms
2025-01-15 08:42:57 [INFO] GET /api/users/21 404 12ms
2025-01-15 08:43:05 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 08:43:05 [DEBUG] Rows returned: 10
2025-01-15 08:43:17 [INFO] POST /api/auth/refresh 200 57ms
2025-01-15 08:43:22 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 08:43:22 [DEBUG] Rows returned: 4
2025-01-15 08:43:33 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 08:43:33 [DEBUG] Rows returned: 32
2025-01-15 08:43:46 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 08:43:46 [DEBUG] New record created: id=65
2025-01-15 08:43:49 [INFO] GET /api/health 200 3ms
2025-01-15 08:44:02 [INFO] POST /api/users 201 126ms
2025-01-15 08:44:09 [WARN] Slow query detected: DELETE FROM sessions WHERE expires_at < NOW() (took 614ms)
2025-01-15 08:44:12 [INFO] POST /api/auth/login 200 129ms
2025-01-15 08:44:13 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 08:44:13 [DEBUG] Rows returned: 33
2025-01-15 08:44:20 [WARN] Rate limit approaching for IP 192.168.5.181 (94/100 requests in window)
2025-01-15 08:44:35 [ERROR] Deadlock detected in transaction tx-32630
2025-01-15 08:44:35 [ERROR] Stack trace:
    at AuthService.validateToken (src/services/auth.service.ts:287)
    at validateRequest (src/middleware/validation.ts:158)
    at Layer.handle (node_modules/express/lib/router/layer.js:163)
    at Router.handle (node_modules/express/lib/router/index.js:90)
    at UserService.findById (src/services/user.service.ts:99)
    at AuthController.login (src/controllers/auth.controller.ts:195)
2025-01-15 08:44:44 [INFO] PUT /api/users/36 200 41ms
2025-01-15 08:44:50 [INFO] GET /api/users?page=5&limit=25 200 30ms
2025-01-15 08:44:52 [INFO] GET /api/analytics/dashboard 200 788ms
2025-01-15 08:44:54 [INFO] GET /api/users?role=admin 200 29ms
2025-01-15 08:45:05 [INFO] POST /api/users 201 135ms
2025-01-15 08:45:14 [WARN] Slow query detected: SELECT * FROM users WHERE id = $1 (took 1361ms)
2025-01-15 08:45:23 [INFO] GET /api/health 200 1ms
2025-01-15 08:45:28 [INFO] POST /api/uploads 201 1758ms
2025-01-15 08:45:37 [INFO] POST /api/users 409 20ms
2025-01-15 08:45:51 [WARN] Slow query detected: SELECT * FROM users WHERE active = true ORDER BY created_at  (took 466ms)
2025-01-15 08:46:01 [INFO] GET /api/health 200 2ms
2025-01-15 08:46:05 [INFO] GET /api/health 200 3ms
2025-01-15 08:46:12 [INFO] GET /api/users/177 200 19ms
2025-01-15 08:46:19 [INFO] PUT /api/users/88 200 85ms
2025-01-15 08:46:25 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 08:46:25 [DEBUG] Rows returned: 25
2025-01-15 08:46:28 [INFO] GET /api/health 200 3ms
2025-01-15 08:46:37 [INFO] DELETE /api/users/120 204 34ms
2025-01-15 08:46:41 [INFO] GET /api/users 200 51ms
2025-01-15 08:46:45 [WARN] Rate limit exceeded for IP 192.168.6.49. Returning 429.
2025-01-15 08:47:00 [INFO] GET /api/health 200 2ms
2025-01-15 08:47:04 [INFO] GET /api/users?page=3&limit=25 200 56ms
2025-01-15 08:47:14 [INFO] GET /api/health 200 3ms
2025-01-15 08:47:25 [INFO] POST /api/uploads 201 774ms
2025-01-15 08:47:40 [INFO] GET /api/users?page=3&limit=25 200 27ms
2025-01-15 08:47:47 [INFO] POST /api/uploads 201 1091ms
2025-01-15 08:47:49 [INFO] POST /api/auth/refresh 200 73ms
2025-01-15 08:47:59 [INFO] GET /api/users/101 404 16ms
2025-01-15 08:48:05 [INFO] GET /api/health 200 1ms
2025-01-15 08:48:15 [INFO] GET /api/notifications 200 14ms
2025-01-15 08:48:27 [INFO] GET /api/analytics/dashboard 200 727ms
2025-01-15 08:48:30 [INFO] PUT /api/settings 200 39ms
2025-01-15 08:48:40 [INFO] GET /api/notifications 200 19ms
2025-01-15 08:48:48 [INFO] GET /api/health 200 2ms
2025-01-15 08:48:54 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 08:48:54 [DEBUG] Rows returned: 37
2025-01-15 08:48:59 [INFO] GET /api/health 200 3ms
2025-01-15 08:49:13 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 08:49:13 [DEBUG] Rows returned: 38
2025-01-15 08:49:21 [INFO] GET /api/settings 200 12ms
2025-01-15 08:49:24 [INFO] PUT /api/settings 200 35ms
2025-01-15 08:49:25 [INFO] GET /api/users/49 404 13ms
2025-01-15 08:49:32 [INFO] PUT /api/users/106 200 85ms
2025-01-15 08:49:35 [INFO] POST /api/uploads 201 1271ms
2025-01-15 08:49:41 [WARN] JWT token expires in less than 60 seconds for user 50
2025-01-15 08:49:45 [INFO] POST /api/roles 201 43ms
2025-01-15 08:49:57 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 08:49:57 [DEBUG] Rows returned: 30
2025-01-15 08:50:03 [INFO] GET /api/roles 200 15ms
2025-01-15 08:50:12 [INFO] POST /api/auth/login 200 110ms
2025-01-15 08:50:17 [WARN] Rate limit approaching for IP 192.168.5.192 (95/100 requests in window)
2025-01-15 08:50:32 [INFO] GET /api/roles 200 14ms
2025-01-15 08:50:36 [INFO] GET /api/notifications 200 13ms
2025-01-15 08:50:43 [INFO] GET /api/analytics/dashboard 200 763ms
2025-01-15 08:50:58 [INFO] GET /api/analytics/dashboard 200 528ms
2025-01-15 08:51:03 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 08:51:03 [DEBUG] Rows returned: 41
2025-01-15 08:51:13 [INFO] GET /api/users 200 27ms
2025-01-15 08:51:27 [INFO] GET /api/analytics/dashboard 200 209ms
2025-01-15 08:51:32 [INFO] GET /api/users/86 404 18ms
2025-01-15 08:51:41 [INFO] POST /api/users 201 104ms
2025-01-15 08:51:54 [INFO] POST /api/users 409 15ms
2025-01-15 08:51:55 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 08:52:05 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 08:52:08 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 08:52:08 [DEBUG] Rows returned: 25
2025-01-15 08:52:22 [INFO] GET /api/users?role=moderator 200 20ms
2025-01-15 08:52:25 [INFO] DELETE /api/users/2 204 27ms
2025-01-15 08:52:33 [INFO] GET /api/health 200 2ms
2025-01-15 08:52:38 [INFO] GET /api/settings 200 8ms
2025-01-15 08:52:39 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 08:52:39 [DEBUG] Rows returned: 19
2025-01-15 08:52:42 [INFO] GET /api/notifications 200 30ms
2025-01-15 08:52:57 [WARN] Deprecated API version v1 called by client client-5
2025-01-15 08:53:07 [INFO] POST /api/uploads 201 1893ms
2025-01-15 08:53:20 [INFO] GET /api/users/135 200 16ms
2025-01-15 08:53:22 [WARN] Rate limit approaching for IP 192.168.9.232 (96/100 requests in window)
2025-01-15 08:53:25 [INFO] GET /api/notifications 200 32ms
2025-01-15 08:53:35 [INFO] GET /api/notifications 200 14ms
2025-01-15 08:53:44 [INFO] GET /api/settings 200 5ms
2025-01-15 08:53:51 [INFO] GET /api/health 200 1ms
2025-01-15 08:53:52 [INFO] GET /api/users/139 200 20ms
2025-01-15 08:53:53 [INFO] POST /api/users 409 21ms
2025-01-15 08:54:08 [INFO] POST /api/auth/login 200 134ms
2025-01-15 08:54:19 [INFO] GET /api/health 200 1ms
2025-01-15 08:54:22 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 08:54:35 [INFO] POST /api/roles 201 54ms
2025-01-15 08:54:49 [INFO] POST /api/auth/refresh 200 42ms
2025-01-15 08:55:04 [INFO] GET /api/health 200 1ms
2025-01-15 08:55:05 [INFO] GET /api/health 200 2ms
2025-01-15 08:55:15 [INFO] GET /api/health 200 1ms
2025-01-15 08:55:19 [INFO] GET /api/users/153 404 17ms
2025-01-15 08:55:30 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 08:55:30 [DEBUG] Rows returned: 15
2025-01-15 08:55:42 [INFO] POST /api/auth/refresh 200 38ms
2025-01-15 08:55:51 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 08:56:05 [INFO] POST /api/roles 201 49ms
2025-01-15 08:56:10 [INFO] GET /api/settings 200 12ms
2025-01-15 08:56:11 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 08:56:14 [INFO] POST /api/users 409 17ms
2025-01-15 08:56:19 [INFO] GET /api/health 200 1ms
2025-01-15 08:56:32 [INFO] GET /api/users 200 60ms
2025-01-15 08:56:41 [INFO] DELETE /api/users/66 204 40ms
2025-01-15 08:56:43 [WARN] Deprecated API version v1 called by client client-20
2025-01-15 08:56:47 [INFO] GET /api/health 200 3ms
2025-01-15 08:56:59 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 08:57:07 [INFO] GET /api/users?role=admin 200 21ms
2025-01-15 08:57:19 [INFO] GET /api/analytics/dashboard 200 445ms
2025-01-15 08:57:28 [INFO] POST /api/roles 201 52ms
2025-01-15 08:57:33 [INFO] GET /api/notifications 200 35ms
2025-01-15 08:57:45 [INFO] GET /api/users?role=viewer 200 28ms
2025-01-15 08:57:46 [INFO] DELETE /api/users/190 204 28ms
2025-01-15 08:57:55 [WARN] S3 upload retry after timeout (1155ms)
2025-01-15 08:58:09 [INFO] POST /api/uploads 201 1500ms
2025-01-15 08:58:21 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 08:58:21 [DEBUG] Rows returned: 29
2025-01-15 08:58:24 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 08:58:24 [DEBUG] Rows returned: 10
2025-01-15 08:58:27 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 08:58:27 [DEBUG] Rows returned: 11
2025-01-15 08:58:42 [INFO] GET /api/health 200 3ms
2025-01-15 08:58:43 [INFO] GET /api/users/172 200 18ms
2025-01-15 08:58:46 [INFO] GET /api/health 200 1ms
2025-01-15 08:58:48 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 08:58:48 [DEBUG] Rows returned: 13
2025-01-15 08:58:57 [INFO] GET /api/users 200 26ms
2025-01-15 08:58:58 [INFO] POST /api/auth/login 401 85ms
2025-01-15 08:59:07 [ERROR] Database connection timeout after 5000ms
2025-01-15 08:59:16 [INFO] PUT /api/users/159 200 57ms
2025-01-15 08:59:29 [INFO] GET /api/users?page=5&limit=25 200 40ms
2025-01-15 08:59:41 [INFO] GET /api/users/168 200 17ms
2025-01-15 08:59:48 [INFO] GET /api/analytics/dashboard 200 284ms
2025-01-15 08:59:56 [INFO] GET /api/health 200 3ms
2025-01-15 09:00:09 [INFO] GET /api/users/136 404 11ms
2025-01-15 09:00:24 [INFO] GET /api/health 200 3ms
2025-01-15 09:00:32 [INFO] GET /api/users/176 200 6ms
2025-01-15 09:00:35 [WARN] Deprecated API version v1 called by client client-10
2025-01-15 09:00:39 [INFO] POST /api/auth/login 200 135ms
2025-01-15 09:00:52 [ERROR] Database connection timeout after 5000ms
2025-01-15 09:00:56 [INFO] GET /api/health 200 2ms
2025-01-15 09:01:06 [INFO] GET /api/health 200 3ms
2025-01-15 09:01:13 [WARN] Deprecated API version v1 called by client client-8
2025-01-15 09:01:20 [INFO] GET /api/settings 200 9ms
2025-01-15 09:01:33 [INFO] GET /api/users/22 200 17ms
2025-01-15 09:01:45 [INFO] GET /api/health 200 1ms
2025-01-15 09:01:57 [INFO] GET /api/users?page=1&limit=25 200 44ms
2025-01-15 09:02:05 [INFO] GET /api/roles 200 7ms
2025-01-15 09:02:12 [INFO] POST /api/uploads 201 553ms
2025-01-15 09:02:14 [INFO] GET /api/users/153 200 5ms
2025-01-15 09:02:19 [INFO] GET /api/users/186 200 10ms
2025-01-15 09:02:30 [INFO] POST /api/users 201 143ms
2025-01-15 09:02:33 [INFO] POST /api/auth/login 401 111ms
2025-01-15 09:02:46 [INFO] GET /api/roles 200 14ms
2025-01-15 09:02:50 [INFO] POST /api/users 201 122ms
2025-01-15 09:03:04 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 09:03:04 [DEBUG] Rows returned: 28
2025-01-15 09:03:10 [INFO] PUT /api/settings 200 32ms
2025-01-15 09:03:18 [INFO] POST /api/auth/login 200 247ms
2025-01-15 09:03:31 [INFO] POST /api/auth/login 200 129ms
2025-01-15 09:03:46 [INFO] GET /api/settings 200 5ms
2025-01-15 09:03:58 [INFO] PUT /api/users/113 200 90ms
2025-01-15 09:04:11 [INFO] GET /api/analytics/dashboard 200 458ms
2025-01-15 09:04:22 [INFO] POST /api/auth/login 401 111ms
2025-01-15 09:04:32 [INFO] GET /api/notifications 200 11ms
2025-01-15 09:04:45 [WARN] Redis reconnection attempt 87/5
2025-01-15 09:04:56 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 09:04:56 [DEBUG] Rows returned: 48
2025-01-15 09:05:02 [WARN] Request body exceeded soft limit (2310KB)
2025-01-15 09:05:08 [INFO] GET /api/settings 200 5ms
2025-01-15 09:05:16 [INFO] POST /api/auth/login 401 94ms
2025-01-15 09:05:21 [INFO] PUT /api/users/134 200 70ms
2025-01-15 09:05:23 [INFO] POST /api/auth/refresh 200 32ms
2025-01-15 09:05:36 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 09:05:36 [DEBUG] Rows returned: 21
2025-01-15 09:05:47 [INFO] POST /api/users 409 15ms
2025-01-15 09:05:56 [INFO] POST /api/uploads 201 1329ms
2025-01-15 09:06:07 [INFO] POST /api/auth/login 401 75ms
2025-01-15 09:06:15 [INFO] POST /api/auth/login 200 171ms
2025-01-15 09:06:28 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 09:06:28 [DEBUG] Rows returned: 36
2025-01-15 09:06:30 [INFO] GET /api/health 200 3ms
2025-01-15 09:06:33 [INFO] PUT /api/users/118 200 82ms
2025-01-15 09:06:47 [INFO] GET /api/users?role=moderator 200 27ms
2025-01-15 09:06:57 [INFO] GET /api/users?page=3&limit=25 200 30ms
2025-01-15 09:07:08 [INFO] GET /api/users/62 404 10ms
2025-01-15 09:07:14 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 09:07:14 [DEBUG] New record created: id=248
2025-01-15 09:07:21 [INFO] GET /api/settings 200 12ms
2025-01-15 09:07:32 [INFO] POST /api/users 409 19ms
2025-01-15 09:07:35 [INFO] POST /api/auth/refresh 200 30ms
2025-01-15 09:07:43 [INFO] POST /api/auth/login 200 225ms
2025-01-15 09:07:50 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 09:07:50 [DEBUG] Rows returned: 31
2025-01-15 09:07:53 [INFO] GET /api/health 200 1ms
2025-01-15 09:07:58 [INFO] POST /api/roles 201 61ms
2025-01-15 09:08:07 [INFO] GET /api/settings 200 10ms
2025-01-15 09:08:16 [INFO] GET /api/health 200 1ms
2025-01-15 09:08:29 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 09:08:29 [DEBUG] New record created: id=161
2025-01-15 09:08:36 [INFO] DELETE /api/users/77 204 28ms
2025-01-15 09:08:42 [INFO] GET /api/health 200 1ms
2025-01-15 09:08:50 [INFO] GET /api/health 200 1ms
2025-01-15 09:09:03 [INFO] GET /api/health 200 1ms
2025-01-15 09:09:16 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:09:16 [DEBUG] Rows returned: 22
2025-01-15 09:09:30 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:09:30 [DEBUG] Rows returned: 27
2025-01-15 09:09:33 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 09:09:47 [INFO] GET /api/users 200 42ms
2025-01-15 09:09:57 [INFO] GET /api/users?role=viewer 200 33ms
2025-01-15 09:10:02 [WARN] Redis reconnection attempt 93/5
2025-01-15 09:10:16 [INFO] POST /api/users 201 130ms
2025-01-15 09:10:24 [INFO] GET /api/roles 200 12ms
2025-01-15 09:10:26 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 09:10:26 [DEBUG] Rows returned: 25
2025-01-15 09:10:35 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:10:35 [DEBUG] Rows returned: 23
2025-01-15 09:10:43 [WARN] Deprecated API version v1 called by client client-12
2025-01-15 09:10:50 [INFO] POST /api/auth/login 401 91ms
2025-01-15 09:11:04 [INFO] POST /api/uploads 201 1493ms
2025-01-15 09:11:17 [INFO] GET /api/users 200 26ms
2025-01-15 09:11:19 [WARN] Rate limit exceeded for IP 192.168.1.254. Returning 429.
2025-01-15 09:11:33 [WARN] Memory usage at 86% of allocated heap
2025-01-15 09:11:44 [INFO] DELETE /api/users/110 204 20ms
2025-01-15 09:11:48 [INFO] POST /api/users 201 136ms
2025-01-15 09:11:49 [INFO] GET /api/users?role=moderator 200 30ms
2025-01-15 09:11:51 [INFO] GET /api/users/188 200 15ms
2025-01-15 09:11:57 [INFO] GET /api/health 200 1ms
2025-01-15 09:12:04 [INFO] GET /api/health 200 1ms
2025-01-15 09:12:15 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 09:12:21 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:12:21 [DEBUG] Rows returned: 47
2025-01-15 09:12:24 [WARN] S3 upload retry after timeout (1206ms)
2025-01-15 09:12:31 [INFO] POST /api/users 201 111ms
2025-01-15 09:12:40 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:12:40 [DEBUG] Rows returned: 38
2025-01-15 09:12:45 [INFO] GET /api/health 200 3ms
2025-01-15 09:12:46 [INFO] GET /api/health 200 3ms
2025-01-15 09:13:01 [INFO] GET /api/notifications 200 19ms
2025-01-15 09:13:12 [INFO] DELETE /api/users/127 204 27ms
2025-01-15 09:13:20 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 09:13:20 [DEBUG] Rows returned: 33
2025-01-15 09:13:35 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 09:13:41 [INFO] POST /api/users 409 10ms
2025-01-15 09:13:51 [INFO] GET /api/roles 200 11ms
2025-01-15 09:14:00 [INFO] GET /api/notifications 200 32ms
2025-01-15 09:14:07 [INFO] POST /api/uploads 201 671ms
2025-01-15 09:14:12 [INFO] PUT /api/users/40 200 77ms
2025-01-15 09:14:23 [INFO] GET /api/health 200 3ms
2025-01-15 09:14:34 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 09:14:46 [INFO] DELETE /api/users/15 204 49ms
2025-01-15 09:14:53 [INFO] PUT /api/settings 200 31ms
2025-01-15 09:14:55 [INFO] POST /api/users 201 143ms
2025-01-15 09:15:01 [INFO] GET /api/roles 200 9ms
2025-01-15 09:15:13 [INFO] GET /api/health 200 1ms
2025-01-15 09:15:19 [INFO] GET /api/health 200 2ms
2025-01-15 09:15:28 [INFO] GET /api/settings 200 12ms
2025-01-15 09:15:37 [INFO] GET /api/analytics/dashboard 200 361ms
2025-01-15 09:15:42 [INFO] GET /api/health 200 3ms
2025-01-15 09:15:53 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 09:16:05 [INFO] GET /api/users 200 55ms
2025-01-15 09:16:11 [INFO] POST /api/users 201 133ms
2025-01-15 09:16:15 [INFO] POST /api/auth/login 401 59ms
2025-01-15 09:16:25 [INFO] GET /api/notifications 200 17ms
2025-01-15 09:16:38 [INFO] GET /api/users 200 80ms
2025-01-15 09:16:43 [INFO] GET /api/health 200 2ms
2025-01-15 09:16:49 [INFO] POST /api/auth/refresh 200 48ms
2025-01-15 09:16:59 [INFO] GET /api/health 200 3ms
2025-01-15 09:17:09 [INFO] GET /api/users?page=2&limit=25 200 59ms
2025-01-15 09:17:22 [INFO] GET /api/health 200 1ms
2025-01-15 09:17:23 [WARN] Slow query detected: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $ (took 1409ms)
2025-01-15 09:17:35 [INFO] PUT /api/users/136 200 71ms
2025-01-15 09:17:36 [ERROR] Unhandled exception in POST /api/users: UserNotFoundError
2025-01-15 09:17:36 [ERROR] Stack trace:
    at validateRequest (src/middleware/validation.ts:78)
    at Router.handle (node_modules/express/lib/router/index.js:211)
    at AuthService.validateToken (src/services/auth.service.ts:48)
    at AuthController.login (src/controllers/auth.controller.ts:300)
    at UserService.findById (src/services/user.service.ts:41)
    at authenticate (src/middleware/auth.ts:232)
2025-01-15 09:17:47 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 09:17:51 [INFO] PUT /api/users/35 200 46ms
2025-01-15 09:17:54 [INFO] GET /api/users?role=admin 200 26ms
2025-01-15 09:18:07 [INFO] POST /api/roles 201 35ms
2025-01-15 09:18:10 [INFO] GET /api/health 200 2ms
2025-01-15 09:18:24 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 09:18:25 [INFO] GET /api/users?role=admin 200 26ms
2025-01-15 09:18:32 [INFO] POST /api/roles 201 55ms
2025-01-15 09:18:46 [INFO] POST /api/uploads 201 708ms
2025-01-15 09:18:59 [INFO] GET /api/health 200 1ms
2025-01-15 09:19:00 [INFO] DELETE /api/users/34 204 31ms
2025-01-15 09:19:11 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:19:11 [DEBUG] Rows returned: 5
2025-01-15 09:19:21 [INFO] GET /api/users/6 200 19ms
2025-01-15 09:19:34 [INFO] GET /api/users?role=admin 200 16ms
2025-01-15 09:19:37 [WARN] Request body exceeded soft limit (3399KB)
2025-01-15 09:19:52 [INFO] GET /api/roles 200 14ms
2025-01-15 09:20:02 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:20:02 [DEBUG] Rows returned: 18
2025-01-15 09:20:10 [INFO] POST /api/uploads 201 1072ms
2025-01-15 09:20:17 [INFO] PUT /api/users/165 200 90ms
2025-01-15 09:20:18 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 09:20:24 [INFO] POST /api/users 409 17ms
2025-01-15 09:20:25 [INFO] GET /api/health 200 2ms
2025-01-15 09:20:26 [INFO] GET /api/health 200 2ms
2025-01-15 09:20:35 [INFO] GET /api/settings 200 8ms
2025-01-15 09:20:46 [INFO] POST /api/uploads 201 1679ms
2025-01-15 09:21:00 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 09:21:06 [INFO] GET /api/health 200 3ms
2025-01-15 09:21:12 [WARN] Slow query detected: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY creat (took 1734ms)
2025-01-15 09:21:21 [INFO] GET /api/analytics/dashboard 200 438ms
2025-01-15 09:21:31 [INFO] GET /api/notifications 200 29ms
2025-01-15 09:21:35 [INFO] GET /api/health 200 2ms
2025-01-15 09:21:47 [INFO] GET /api/users?role=admin 200 33ms
2025-01-15 09:21:59 [WARN] Rate limit approaching for IP 192.168.2.96 (92/100 requests in window)
2025-01-15 09:22:05 [INFO] POST /api/users 409 20ms
2025-01-15 09:22:08 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 09:22:08 [DEBUG] New record created: id=405
2025-01-15 09:22:23 [WARN] Deprecated API version v1 called by client client-10
2025-01-15 09:22:26 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:22:26 [DEBUG] Rows returned: 36
2025-01-15 09:22:33 [INFO] GET /api/health 200 3ms
2025-01-15 09:22:34 [INFO] GET /api/users?role=editor 200 18ms
2025-01-15 09:22:49 [INFO] GET /api/users?role=admin 200 26ms
2025-01-15 09:22:55 [INFO] GET /api/users/182 200 5ms
2025-01-15 09:23:00 [INFO] GET /api/users/90 200 5ms
2025-01-15 09:23:01 [INFO] POST /api/auth/login 401 98ms
2025-01-15 09:23:07 [INFO] GET /api/users/123 404 15ms
2025-01-15 09:23:09 [INFO] GET /api/health 200 1ms
2025-01-15 09:23:14 [INFO] GET /api/roles 200 7ms
2025-01-15 09:23:29 [INFO] GET /api/users/141 200 20ms
2025-01-15 09:23:41 [INFO] POST /api/users 409 11ms
2025-01-15 09:23:43 [INFO] PUT /api/users/105 200 59ms
2025-01-15 09:23:47 [INFO] POST /api/auth/login 200 113ms
2025-01-15 09:23:53 [INFO] GET /api/users/76 200 8ms
2025-01-15 09:23:54 [INFO] POST /api/roles 201 49ms
2025-01-15 09:24:07 [INFO] GET /api/analytics/dashboard 200 757ms
2025-01-15 09:24:14 [INFO] POST /api/auth/login 200 111ms
2025-01-15 09:24:19 [INFO] GET /api/roles 200 5ms
2025-01-15 09:24:22 [INFO] GET /api/health 200 3ms
2025-01-15 09:24:24 [INFO] GET /api/users?page=5&limit=25 200 39ms
2025-01-15 09:24:33 [INFO] POST /api/auth/login 200 221ms
2025-01-15 09:24:43 [INFO] GET /api/health 200 2ms
2025-01-15 09:24:48 [INFO] GET /api/users 200 73ms
2025-01-15 09:24:56 [INFO] POST /api/users 409 11ms
2025-01-15 09:25:03 [INFO] POST /api/auth/login 401 83ms
2025-01-15 09:25:09 [WARN] Rate limit approaching for IP 192.168.9.102 (97/100 requests in window)
2025-01-15 09:25:24 [INFO] GET /api/health 200 3ms
2025-01-15 09:25:34 [INFO] POST /api/auth/login 401 68ms
2025-01-15 09:25:44 [INFO] GET /api/users/28 404 16ms
2025-01-15 09:25:59 [INFO] POST /api/auth/login 401 110ms
2025-01-15 09:26:00 [INFO] POST /api/auth/login 200 201ms
2025-01-15 09:26:15 [INFO] GET /api/health 200 3ms
2025-01-15 09:26:19 [INFO] GET /api/analytics/dashboard 200 545ms
2025-01-15 09:26:33 [INFO] GET /api/health 200 2ms
2025-01-15 09:26:38 [INFO] GET /api/health 200 3ms
2025-01-15 09:26:49 [INFO] DELETE /api/users/35 204 44ms
2025-01-15 09:27:03 [INFO] POST /api/auth/login 401 106ms
2025-01-15 09:27:07 [WARN] Request body exceeded soft limit (1802KB)
2025-01-15 09:27:12 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 09:27:12 [DEBUG] Rows returned: 8
2025-01-15 09:27:25 [INFO] GET /api/health 200 3ms
2025-01-15 09:27:26 [INFO] PUT /api/users/15 200 69ms
2025-01-15 09:27:27 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 09:27:33 [INFO] POST /api/auth/refresh 200 65ms
2025-01-15 09:27:39 [INFO] GET /api/roles 200 5ms
2025-01-15 09:27:46 [INFO] GET /api/settings 200 8ms
2025-01-15 09:27:57 [INFO] POST /api/auth/login 401 110ms
2025-01-15 09:28:12 [INFO] POST /api/users 409 18ms
2025-01-15 09:28:22 [INFO] GET /api/health 200 2ms
2025-01-15 09:28:34 [WARN] Memory usage at 81% of allocated heap
2025-01-15 09:28:43 [INFO] GET /api/health 200 2ms
2025-01-15 09:28:53 [INFO] GET /api/notifications 200 30ms
2025-01-15 09:29:03 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 09:29:14 [INFO] GET /api/users/87 200 13ms
2025-01-15 09:29:19 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:29:19 [DEBUG] Rows returned: 19
2025-01-15 09:29:23 [INFO] DELETE /api/users/15 204 41ms
2025-01-15 09:29:26 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:29:26 [DEBUG] Rows returned: 31
2025-01-15 09:29:31 [INFO] POST /api/auth/login 401 74ms
2025-01-15 09:29:37 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 09:29:48 [INFO] GET /api/analytics/dashboard 200 507ms
2025-01-15 09:30:02 [INFO] POST /api/uploads 201 1464ms
2025-01-15 09:30:05 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:30:05 [DEBUG] Rows returned: 35
2025-01-15 09:30:18 [WARN] Deprecated API version v1 called by client client-14
2025-01-15 09:30:23 [INFO] POST /api/auth/refresh 200 70ms
2025-01-15 09:30:33 [INFO] PUT /api/settings 200 52ms
2025-01-15 09:30:35 [INFO] GET /api/health 200 2ms
2025-01-15 09:30:44 [INFO] GET /api/users 200 46ms
2025-01-15 09:30:51 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 09:30:59 [INFO] POST /api/users 409 24ms
2025-01-15 09:31:04 [INFO] POST /api/users 409 12ms
2025-01-15 09:31:07 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:31:07 [DEBUG] Rows returned: 27
2025-01-15 09:31:14 [INFO] GET /api/analytics/dashboard 200 746ms
2025-01-15 09:31:18 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 09:31:18 [DEBUG] Rows returned: 20
2025-01-15 09:31:31 [INFO] GET /api/health 200 1ms
2025-01-15 09:31:32 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:31:32 [DEBUG] Rows returned: 46
2025-01-15 09:31:36 [INFO] GET /api/users?page=1&limit=25 200 49ms
2025-01-15 09:31:45 [INFO] POST /api/users 409 19ms
2025-01-15 09:31:53 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 09:32:02 [INFO] POST /api/users 201 104ms
2025-01-15 09:32:05 [WARN] Request body exceeded soft limit (4633KB)
2025-01-15 09:32:07 [INFO] GET /api/users 200 64ms
2025-01-15 09:32:08 [INFO] GET /api/users 200 28ms
2025-01-15 09:32:20 [INFO] POST /api/auth/refresh 200 46ms
2025-01-15 09:32:28 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 09:32:40 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 09:32:40 [DEBUG] Rows returned: 19
2025-01-15 09:32:47 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:32:47 [DEBUG] Rows returned: 33
2025-01-15 09:32:52 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:32:52 [DEBUG] Rows returned: 8
2025-01-15 09:32:59 [INFO] GET /api/health 200 1ms
2025-01-15 09:33:08 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 09:33:08 [DEBUG] Rows returned: 18
2025-01-15 09:33:10 [INFO] GET /api/health 200 2ms
2025-01-15 09:33:14 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 09:33:28 [INFO] PUT /api/users/92 200 50ms
2025-01-15 09:33:29 [INFO] PUT /api/users/177 200 55ms
2025-01-15 09:33:30 [INFO] GET /api/users/29 200 7ms
2025-01-15 09:33:43 [INFO] GET /api/users/66 404 12ms
2025-01-15 09:33:48 [INFO] GET /api/users/45 404 13ms
2025-01-15 09:34:01 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 09:34:01 [DEBUG] Rows returned: 47
2025-01-15 09:34:03 [INFO] GET /api/users 200 46ms
2025-01-15 09:34:09 [INFO] GET /api/health 200 3ms
2025-01-15 09:34:14 [INFO] GET /api/health 200 1ms
2025-01-15 09:34:20 [INFO] GET /api/health 200 1ms
2025-01-15 09:34:22 [INFO] POST /api/auth/refresh 200 56ms
2025-01-15 09:34:33 [INFO] GET /api/health 200 1ms
2025-01-15 09:34:35 [INFO] GET /api/users 200 62ms
2025-01-15 09:34:43 [INFO] GET /api/health 200 3ms
2025-01-15 09:34:51 [INFO] POST /api/auth/login 200 107ms
2025-01-15 09:35:05 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:35:05 [DEBUG] Rows returned: 8
2025-01-15 09:35:13 [WARN] Rate limit approaching for IP 192.168.1.17 (88/100 requests in window)
2025-01-15 09:35:27 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:35:27 [DEBUG] Rows returned: 36
2025-01-15 09:35:39 [INFO] GET /api/users?role=admin 200 36ms
2025-01-15 09:35:51 [INFO] GET /api/users?page=2&limit=25 200 60ms
2025-01-15 09:36:06 [ERROR] Deadlock detected in transaction tx-74990
2025-01-15 09:36:06 [ERROR] Stack trace:
    at AuthService.validateToken (src/services/auth.service.ts:179)
    at Router.handle (node_modules/express/lib/router/index.js:152)
    at validateRequest (src/middleware/validation.ts:35)
    at processTicksAndRejections (node:internal/process/task_queues:269)
2025-01-15 09:36:10 [INFO] POST /api/auth/login 200 217ms
2025-01-15 09:36:18 [INFO] GET /api/health 200 2ms
2025-01-15 09:36:20 [INFO] GET /api/health 200 2ms
2025-01-15 09:36:26 [INFO] GET /api/analytics/dashboard 200 613ms
2025-01-15 09:36:33 [INFO] POST /api/uploads 201 1767ms
2025-01-15 09:36:44 [INFO] GET /api/notifications 200 20ms
2025-01-15 09:36:50 [INFO] GET /api/health 200 1ms
2025-01-15 09:37:04 [INFO] POST /api/uploads 201 1966ms
2025-01-15 09:37:12 [INFO] DELETE /api/users/1 204 46ms
2025-01-15 09:37:23 [WARN] Memory usage at 76% of allocated heap
2025-01-15 09:37:37 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:37:37 [DEBUG] Rows returned: 26
2025-01-15 09:37:39 [INFO] PUT /api/users/49 200 53ms
2025-01-15 09:37:47 [INFO] GET /api/health 200 1ms
2025-01-15 09:37:59 [INFO] POST /api/auth/login 401 108ms
2025-01-15 09:38:10 [INFO] GET /api/notifications 200 26ms
2025-01-15 09:38:22 [INFO] POST /api/auth/login 401 72ms
2025-01-15 09:38:34 [INFO] POST /api/users 201 121ms
2025-01-15 09:38:43 [INFO] GET /api/health 200 2ms
2025-01-15 09:38:53 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 09:39:03 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:39:03 [DEBUG] Rows returned: 32
2025-01-15 09:39:08 [INFO] GET /api/health 200 3ms
2025-01-15 09:39:22 [INFO] POST /api/uploads 201 929ms
2025-01-15 09:39:32 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:39:32 [DEBUG] Rows returned: 22
2025-01-15 09:39:47 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:39:47 [DEBUG] Rows returned: 41
2025-01-15 09:39:50 [INFO] GET /api/users?role=admin 200 32ms
2025-01-15 09:39:58 [INFO] POST /api/auth/login 401 51ms
2025-01-15 09:40:07 [INFO] POST /api/auth/login 200 151ms
2025-01-15 09:40:12 [INFO] GET /api/health 200 1ms
2025-01-15 09:40:17 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 09:40:17 [DEBUG] New record created: id=479
2025-01-15 09:40:18 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 09:40:22 [INFO] GET /api/health 200 1ms
2025-01-15 09:40:28 [INFO] GET /api/health 200 1ms
2025-01-15 09:40:38 [INFO] GET /api/health 200 3ms
2025-01-15 09:40:47 [INFO] GET /api/health 200 3ms
2025-01-15 09:40:58 [INFO] DELETE /api/users/131 204 49ms
2025-01-15 09:41:05 [INFO] GET /api/users?role=admin 200 38ms
2025-01-15 09:41:10 [INFO] POST /api/auth/refresh 200 64ms
2025-01-15 09:41:22 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:41:22 [DEBUG] Rows returned: 12
2025-01-15 09:41:27 [INFO] GET /api/users/48 200 8ms
2025-01-15 09:41:34 [INFO] GET /api/roles 200 7ms
2025-01-15 09:41:44 [INFO] GET /api/health 200 1ms
2025-01-15 09:41:50 [INFO] POST /api/users 201 86ms
2025-01-15 09:42:03 [WARN] S3 upload retry after timeout (916ms)
2025-01-15 09:42:09 [INFO] POST /api/users 409 15ms
2025-01-15 09:42:16 [INFO] POST /api/auth/login 200 154ms
2025-01-15 09:42:27 [INFO] GET /api/users?page=5&limit=25 200 58ms
2025-01-15 09:42:35 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 09:42:45 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 09:42:50 [INFO] GET /api/notifications 200 35ms
2025-01-15 09:42:59 [INFO] GET /api/users 200 57ms
2025-01-15 09:43:01 [WARN] Rate limit exceeded for IP 192.168.1.161. Returning 429.
2025-01-15 09:43:05 [INFO] POST /api/auth/login 401 53ms
2025-01-15 09:43:13 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 09:43:13 [DEBUG] Rows returned: 5
2025-01-15 09:43:15 [INFO] GET /api/roles 200 8ms
2025-01-15 09:43:30 [INFO] POST /api/auth/login 200 180ms
2025-01-15 09:43:31 [INFO] GET /api/users/137 404 9ms
2025-01-15 09:43:44 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 09:43:44 [DEBUG] Rows returned: 44
2025-01-15 09:43:58 [INFO] GET /api/notifications 200 29ms
2025-01-15 09:44:00 [INFO] POST /api/auth/refresh 200 60ms
2025-01-15 09:44:03 [INFO] POST /api/users 201 117ms
2025-01-15 09:44:14 [INFO] GET /api/users?page=1&limit=25 200 27ms
2025-01-15 09:44:15 [INFO] POST /api/auth/login 200 153ms
2025-01-15 09:44:27 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:44:27 [DEBUG] Rows returned: 22
2025-01-15 09:44:31 [INFO] GET /api/notifications 200 17ms
2025-01-15 09:44:41 [INFO] GET /api/health 200 1ms
2025-01-15 09:44:43 [INFO] GET /api/settings 200 6ms
2025-01-15 09:44:48 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 09:44:50 [INFO] GET /api/settings 200 7ms
2025-01-15 09:45:01 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 09:45:01 [DEBUG] Rows returned: 18
2025-01-15 09:45:11 [INFO] PUT /api/users/82 200 61ms
2025-01-15 09:45:21 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:45:21 [DEBUG] Rows returned: 37
2025-01-15 09:45:24 [INFO] GET /api/users?page=2&limit=25 200 25ms
2025-01-15 09:45:30 [INFO] DELETE /api/users/183 204 46ms
2025-01-15 09:45:36 [INFO] GET /api/users?role=moderator 200 26ms
2025-01-15 09:45:49 [INFO] POST /api/uploads 201 667ms
2025-01-15 09:46:03 [INFO] POST /api/users 201 89ms
2025-01-15 09:46:15 [INFO] GET /api/health 200 3ms
2025-01-15 09:46:22 [INFO] GET /api/health 200 1ms
2025-01-15 09:46:37 [INFO] GET /api/roles 200 10ms
2025-01-15 09:46:44 [INFO] GET /api/settings 200 12ms
2025-01-15 09:46:53 [INFO] POST /api/auth/login 200 142ms
2025-01-15 09:47:06 [INFO] POST /api/auth/refresh 200 66ms
2025-01-15 09:47:17 [INFO] GET /api/health 200 1ms
2025-01-15 09:47:29 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 09:47:29 [DEBUG] Rows returned: 2
2025-01-15 09:47:33 [INFO] GET /api/health 200 1ms
2025-01-15 09:47:35 [INFO] DELETE /api/users/11 204 49ms
2025-01-15 09:47:48 [INFO] GET /api/analytics/dashboard 200 531ms
2025-01-15 09:47:50 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 09:47:50 [DEBUG] New record created: id=374
2025-01-15 09:48:04 [INFO] GET /api/roles 200 15ms
2025-01-15 09:48:11 [INFO] GET /api/users/133 200 12ms
2025-01-15 09:48:20 [INFO] GET /api/users?page=5&limit=25 200 25ms
2025-01-15 09:48:29 [INFO] GET /api/health 200 2ms
2025-01-15 09:48:32 [INFO] GET /api/notifications 200 14ms
2025-01-15 09:48:35 [INFO] PUT /api/settings 200 46ms
2025-01-15 09:48:48 [INFO] GET /api/users/124 404 11ms
2025-01-15 09:48:58 [INFO] POST /api/auth/login 401 66ms
2025-01-15 09:49:08 [INFO] POST /api/users 201 98ms
2025-01-15 09:49:09 [INFO] POST /api/users 409 10ms
2025-01-15 09:49:24 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 09:49:24 [DEBUG] Rows returned: 18
2025-01-15 09:49:26 [INFO] PUT /api/settings 200 34ms
2025-01-15 09:49:40 [INFO] POST /api/users 201 145ms
2025-01-15 09:49:45 [INFO] GET /api/users?role=admin 200 27ms
2025-01-15 09:49:52 [INFO] GET /api/health 200 3ms
2025-01-15 09:49:54 [INFO] PUT /api/settings 200 52ms
2025-01-15 09:50:07 [INFO] GET /api/analytics/dashboard 200 752ms
2025-01-15 09:50:21 [INFO] POST /api/auth/login 401 55ms
2025-01-15 09:50:33 [INFO] DELETE /api/users/124 204 38ms
2025-01-15 09:50:46 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:50:46 [DEBUG] Rows returned: 36
2025-01-15 09:50:48 [INFO] GET /api/roles 200 9ms
2025-01-15 09:50:58 [INFO] GET /api/health 200 2ms
2025-01-15 09:51:03 [INFO] GET /api/health 200 1ms
2025-01-15 09:51:10 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 09:51:10 [DEBUG] Rows returned: 20
2025-01-15 09:51:17 [INFO] POST /api/users 201 148ms
2025-01-15 09:51:24 [INFO] PUT /api/settings 200 46ms
2025-01-15 09:51:33 [INFO] GET /api/health 200 2ms
2025-01-15 09:51:36 [INFO] POST /api/uploads 201 1683ms
2025-01-15 09:51:42 [INFO] GET /api/health 200 2ms
2025-01-15 09:51:54 [INFO] GET /api/users/192 404 10ms
2025-01-15 09:51:56 [INFO] POST /api/auth/login 200 199ms
2025-01-15 09:52:07 [INFO] GET /api/users/38 200 18ms
2025-01-15 09:52:09 [INFO] DELETE /api/users/95 204 21ms
2025-01-15 09:52:21 [INFO] POST /api/auth/login 200 114ms
2025-01-15 09:52:34 [INFO] GET /api/health 200 3ms
2025-01-15 09:52:42 [INFO] PUT /api/users/169 200 42ms
2025-01-15 09:52:55 [INFO] GET /api/notifications 200 15ms
2025-01-15 09:53:06 [INFO] DELETE /api/users/168 204 22ms
2025-01-15 09:53:11 [INFO] GET /api/health 200 2ms
2025-01-15 09:53:22 [INFO] GET /api/settings 200 6ms
2025-01-15 09:53:31 [INFO] POST /api/uploads 201 1066ms
2025-01-15 09:53:35 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 09:53:43 [WARN] S3 upload retry after timeout (834ms)
2025-01-15 09:53:48 [INFO] GET /api/users/132 404 17ms
2025-01-15 09:53:53 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 09:53:53 [DEBUG] Rows returned: 36
2025-01-15 09:54:01 [INFO] GET /api/health 200 2ms
2025-01-15 09:54:14 [INFO] POST /api/auth/refresh 200 37ms
2025-01-15 09:54:19 [INFO] DELETE /api/users/174 204 33ms
2025-01-15 09:54:25 [INFO] GET /api/health 200 2ms
2025-01-15 09:54:27 [INFO] GET /api/users?role=editor 200 25ms
2025-01-15 09:54:33 [INFO] GET /api/settings 200 12ms
2025-01-15 09:54:45 [INFO] DELETE /api/users/68 204 26ms
2025-01-15 09:54:59 [INFO] PUT /api/settings 200 27ms
2025-01-15 09:55:14 [INFO] GET /api/analytics/dashboard 200 243ms
2025-01-15 09:55:28 [INFO] PUT /api/settings 200 37ms
2025-01-15 09:55:36 [INFO] GET /api/notifications 200 34ms
2025-01-15 09:55:46 [INFO] GET /api/notifications 200 11ms
2025-01-15 09:55:55 [INFO] POST /api/users 409 24ms
2025-01-15 09:56:01 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 09:56:01 [DEBUG] Rows returned: 43
2025-01-15 09:56:05 [INFO] GET /api/users/84 404 12ms
2025-01-15 09:56:08 [INFO] DELETE /api/users/69 204 30ms
2025-01-15 09:56:14 [INFO] POST /api/auth/login 401 96ms
2025-01-15 09:56:28 [INFO] POST /api/auth/refresh 200 73ms
2025-01-15 09:56:32 [INFO] GET /api/health 200 3ms
2025-01-15 09:56:37 [INFO] GET /api/health 200 3ms
2025-01-15 09:56:44 [INFO] GET /api/health 200 1ms
2025-01-15 09:56:47 [INFO] GET /api/health 200 3ms
2025-01-15 09:56:50 [INFO] GET /api/health 200 1ms
2025-01-15 09:57:05 [INFO] GET /api/health 200 3ms
2025-01-15 09:57:14 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 09:57:14 [DEBUG] Rows returned: 19
2025-01-15 09:57:19 [INFO] GET /api/settings 200 7ms
2025-01-15 09:57:20 [INFO] GET /api/roles 200 10ms
2025-01-15 09:57:25 [INFO] POST /api/uploads 201 540ms
2025-01-15 09:57:32 [INFO] PUT /api/settings 200 42ms
2025-01-15 09:57:38 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 09:57:38 [DEBUG] Rows returned: 49
2025-01-15 09:57:50 [INFO] GET /api/users/98 200 9ms
2025-01-15 09:58:04 [INFO] GET /api/users?role=moderator 200 17ms
2025-01-15 09:58:07 [INFO] GET /api/users?role=viewer 200 34ms
2025-01-15 09:58:18 [INFO] POST /api/auth/refresh 200 63ms
2025-01-15 09:58:26 [INFO] POST /api/users 409 18ms
2025-01-15 09:58:38 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 09:58:38 [DEBUG] Rows returned: 13
2025-01-15 09:58:41 [INFO] GET /api/users/17 404 8ms
2025-01-15 09:58:42 [INFO] GET /api/health 200 3ms
2025-01-15 09:58:55 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 09:58:59 [INFO] POST /api/roles 201 63ms
2025-01-15 09:59:13 [INFO] GET /api/users 200 80ms
2025-01-15 09:59:21 [INFO] POST /api/uploads 201 1928ms
2025-01-15 09:59:30 [INFO] PUT /api/settings 200 54ms
2025-01-15 09:59:35 [WARN] JWT token expires in less than 60 seconds for user 40
2025-01-15 09:59:40 [INFO] GET /api/notifications 200 19ms
2025-01-15 09:59:48 [INFO] GET /api/analytics/dashboard 200 209ms
2025-01-15 10:00:01 [INFO] POST /api/roles 201 65ms
2025-01-15 10:00:07 [INFO] POST /api/uploads 201 834ms
2025-01-15 10:00:19 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 10:00:19 [DEBUG] Rows returned: 24
2025-01-15 10:00:23 [INFO] POST /api/auth/login 401 84ms
2025-01-15 10:00:28 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 10:00:28 [DEBUG] New record created: id=464
2025-01-15 10:00:33 [INFO] GET /api/users/47 200 8ms
2025-01-15 10:00:44 [INFO] POST /api/auth/refresh 200 50ms
2025-01-15 10:00:45 [INFO] POST /api/uploads 201 1077ms
2025-01-15 10:00:50 [INFO] POST /api/auth/refresh 200 35ms
2025-01-15 10:00:53 [INFO] PUT /api/users/88 200 90ms
2025-01-15 10:01:06 [INFO] GET /api/users?page=3&limit=25 200 30ms
2025-01-15 10:01:20 [INFO] GET /api/health 200 1ms
2025-01-15 10:01:21 [INFO] POST /api/auth/login 200 149ms
2025-01-15 10:01:36 [INFO] GET /api/health 200 2ms
2025-01-15 10:01:50 [INFO] DELETE /api/users/99 204 43ms
2025-01-15 10:01:51 [INFO] GET /api/users/134 404 14ms
2025-01-15 10:02:02 [WARN] Deprecated API version v1 called by client client-4
2025-01-15 10:02:13 [INFO] GET /api/users?page=1&limit=25 200 40ms
2025-01-15 10:02:24 [INFO] GET /api/health 200 1ms
2025-01-15 10:02:31 [INFO] GET /api/health 200 1ms
2025-01-15 10:02:32 [INFO] GET /api/analytics/dashboard 200 291ms
2025-01-15 10:02:36 [INFO] GET /api/users/176 200 6ms
2025-01-15 10:02:42 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 10:02:42 [DEBUG] Rows returned: 34
2025-01-15 10:02:55 [INFO] GET /api/analytics/dashboard 200 555ms
2025-01-15 10:03:08 [INFO] GET /api/health 200 3ms
2025-01-15 10:03:12 [INFO] POST /api/auth/login 200 110ms
2025-01-15 10:03:20 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 10:03:20 [DEBUG] New record created: id=200
2025-01-15 10:03:29 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 10:03:39 [INFO] GET /api/users?page=3&limit=25 200 60ms
2025-01-15 10:03:42 [INFO] POST /api/users 201 149ms
2025-01-15 10:03:48 [INFO] GET /api/notifications 200 29ms
2025-01-15 10:04:02 [INFO] PUT /api/settings 200 54ms
2025-01-15 10:04:16 [INFO] GET /api/notifications 200 14ms
2025-01-15 10:04:26 [INFO] POST /api/auth/login 401 62ms
2025-01-15 10:04:35 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 10:04:35 [DEBUG] Rows returned: 8
2025-01-15 10:04:38 [INFO] GET /api/health 200 1ms
2025-01-15 10:04:40 [INFO] GET /api/users/9 404 16ms
2025-01-15 10:04:50 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 10:04:51 [INFO] PUT /api/settings 200 33ms
2025-01-15 10:05:02 [INFO] GET /api/users/120 200 18ms
2025-01-15 10:05:16 [INFO] GET /api/users 200 27ms
2025-01-15 10:05:28 [INFO] POST /api/roles 201 36ms
2025-01-15 10:05:30 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 10:05:30 [DEBUG] New record created: id=247
2025-01-15 10:05:34 [INFO] DELETE /api/users/146 204 43ms
2025-01-15 10:05:43 [INFO] GET /api/users/197 404 18ms
2025-01-15 10:05:50 [INFO] GET /api/health 200 1ms
2025-01-15 10:06:03 [INFO] POST /api/auth/login 200 236ms
2025-01-15 10:06:13 [INFO] GET /api/users?page=3&limit=25 200 51ms
2025-01-15 10:06:26 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 10:06:26 [DEBUG] Rows returned: 20
2025-01-15 10:06:36 [INFO] POST /api/uploads 201 1020ms
2025-01-15 10:06:42 [WARN] JWT token expires in less than 60 seconds for user 35
2025-01-15 10:06:57 [INFO] POST /api/roles 201 31ms
2025-01-15 10:07:10 [INFO] GET /api/health 200 3ms
2025-01-15 10:07:24 [INFO] POST /api/uploads 201 577ms
2025-01-15 10:07:32 [INFO] POST /api/users 201 111ms
2025-01-15 10:07:36 [INFO] POST /api/roles 201 43ms
2025-01-15 10:07:48 [INFO] GET /api/users?role=editor 200 37ms
2025-01-15 10:08:00 [INFO] GET /api/users/153 404 17ms
2025-01-15 10:08:07 [INFO] GET /api/users 200 77ms
2025-01-15 10:08:14 [INFO] GET /api/users/198 404 8ms
2025-01-15 10:08:25 [INFO] GET /api/health 200 2ms
2025-01-15 10:08:26 [INFO] GET /api/users 200 57ms
2025-01-15 10:08:38 [INFO] GET /api/users 200 73ms
2025-01-15 10:08:48 [INFO] GET /api/users/57 200 17ms
2025-01-15 10:08:51 [INFO] GET /api/users/122 200 17ms
2025-01-15 10:08:56 [INFO] GET /api/notifications 200 25ms
2025-01-15 10:09:05 [INFO] POST /api/auth/login 200 234ms
2025-01-15 10:09:09 [INFO] GET /api/roles 200 15ms
2025-01-15 10:09:24 [INFO] GET /api/users/172 404 13ms
2025-01-15 10:09:30 [INFO] GET /api/users?page=3&limit=25 200 35ms
2025-01-15 10:09:36 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 10:09:36 [DEBUG] Rows returned: 39
2025-01-15 10:09:39 [INFO] DELETE /api/users/52 204 44ms
2025-01-15 10:09:51 [INFO] GET /api/health 200 1ms
2025-01-15 10:10:03 [INFO] PUT /api/settings 200 41ms
2025-01-15 10:10:15 [INFO] GET /api/health 200 2ms
2025-01-15 10:10:23 [INFO] GET /api/users?role=editor 200 32ms
2025-01-15 10:10:32 [INFO] GET /api/health 200 3ms
2025-01-15 10:10:40 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 10:10:40 [DEBUG] New record created: id=405
2025-01-15 10:10:52 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 10:10:52 [DEBUG] Rows returned: 37
2025-01-15 10:11:07 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 10:11:07 [DEBUG] Rows returned: 16
2025-01-15 10:11:10 [INFO] PUT /api/users/179 200 69ms
2025-01-15 10:11:21 [WARN] Rate limit approaching for IP 192.168.5.170 (91/100 requests in window)
2025-01-15 10:11:28 [INFO] POST /api/auth/login 200 224ms
2025-01-15 10:11:42 [INFO] GET /api/users/48 200 19ms
2025-01-15 10:11:51 [WARN] Slow query detected: SELECT * FROM users WHERE active = true ORDER BY created_at  (took 806ms)
2025-01-15 10:11:57 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 10:11:57 [DEBUG] Rows returned: 40
2025-01-15 10:12:02 [INFO] GET /api/notifications 200 22ms
2025-01-15 10:12:17 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 10:12:32 [INFO] POST /api/users 201 109ms
2025-01-15 10:12:39 [INFO] POST /api/users 201 122ms
2025-01-15 10:12:47 [INFO] PUT /api/users/168 200 74ms
2025-01-15 10:12:58 [INFO] GET /api/health 200 1ms
2025-01-15 10:13:03 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 10:13:03 [DEBUG] New record created: id=119
2025-01-15 10:13:10 [ERROR] Database connection timeout after 5000ms
2025-01-15 10:13:19 [WARN] Rate limit approaching for IP 192.168.3.187 (80/100 requests in window)
2025-01-15 10:13:27 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 10:13:27 [DEBUG] Rows returned: 47
2025-01-15 10:13:32 [INFO] PUT /api/users/28 200 41ms
2025-01-15 10:13:45 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 10:13:56 [INFO] GET /api/users/177 200 20ms
2025-01-15 10:14:08 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 10:14:08 [DEBUG] New record created: id=486
2025-01-15 10:14:15 [INFO] POST /api/users 201 84ms
2025-01-15 10:14:22 [INFO] GET /api/health 200 1ms
2025-01-15 10:14:37 [INFO] POST /api/auth/login 401 58ms
2025-01-15 10:14:40 [WARN] JWT token expires in less than 60 seconds for user 199
2025-01-15 10:14:41 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 10:14:41 [DEBUG] Rows returned: 46
2025-01-15 10:14:47 [INFO] GET /api/settings 200 6ms
2025-01-15 10:14:55 [INFO] GET /api/users 200 60ms
2025-01-15 10:15:02 [INFO] GET /api/users 200 50ms
2025-01-15 10:15:17 [INFO] POST /api/roles 201 48ms
2025-01-15 10:15:27 [WARN] Redis reconnection attempt 96/5
2025-01-15 10:15:34 [INFO] POST /api/auth/refresh 200 67ms
2025-01-15 10:15:49 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 10:16:04 [INFO] GET /api/roles 200 6ms
2025-01-15 10:16:06 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 10:16:06 [DEBUG] Rows returned: 23
2025-01-15 10:16:08 [INFO] POST /api/auth/login 200 240ms
2025-01-15 10:16:15 [INFO] POST /api/users 409 14ms
2025-01-15 10:16:18 [INFO] GET /api/health 200 1ms
2025-01-15 10:16:25 [INFO] POST /api/auth/refresh 200 38ms
2025-01-15 10:16:29 [INFO] GET /api/roles 200 12ms
2025-01-15 10:16:38 [INFO] GET /api/health 200 3ms
2025-01-15 10:16:53 [INFO] PUT /api/users/151 200 66ms
2025-01-15 10:17:01 [INFO] PUT /api/settings 200 37ms
2025-01-15 10:17:11 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 10:17:12 [INFO] GET /api/users 200 34ms
2025-01-15 10:17:26 [INFO] GET /api/settings 200 6ms
2025-01-15 10:17:27 [INFO] POST /api/users 409 15ms
2025-01-15 10:17:35 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 10:17:35 [DEBUG] Rows returned: 2
2025-01-15 10:17:37 [INFO] GET /api/health 200 2ms
2025-01-15 10:17:43 [INFO] GET /api/health 200 1ms
2025-01-15 10:17:56 [INFO] POST /api/uploads 201 775ms
2025-01-15 10:17:58 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 10:18:04 [INFO] GET /api/notifications 200 11ms
2025-01-15 10:18:06 [INFO] GET /api/notifications 200 35ms
2025-01-15 10:18:18 [INFO] PUT /api/settings 200 42ms
2025-01-15 10:18:33 [INFO] GET /api/settings 200 7ms
2025-01-15 10:18:48 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 10:18:48 [DEBUG] Rows returned: 18
2025-01-15 10:18:52 [INFO] GET /api/health 200 3ms
2025-01-15 10:18:59 [INFO] GET /api/users?role=editor 200 35ms
2025-01-15 10:19:03 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 10:19:16 [INFO] POST /api/roles 201 37ms
2025-01-15 10:19:27 [INFO] POST /api/auth/login 200 149ms
2025-01-15 10:19:33 [INFO] GET /api/health 200 3ms
2025-01-15 10:19:41 [WARN] Slow query detected: SELECT COUNT(*) FROM users GROUP BY role_id (took 578ms)
2025-01-15 10:19:54 [INFO] GET /api/health 200 3ms
2025-01-15 10:19:55 [INFO] GET /api/health 200 2ms
2025-01-15 10:20:05 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 10:20:05 [DEBUG] Rows returned: 35
2025-01-15 10:20:14 [INFO] GET /api/settings 200 6ms
2025-01-15 10:20:17 [INFO] GET /api/health 200 1ms
2025-01-15 10:20:27 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 10:20:27 [DEBUG] New record created: id=354
2025-01-15 10:20:29 [INFO] GET /api/health 200 2ms
2025-01-15 10:20:41 [INFO] GET /api/health 200 3ms
2025-01-15 10:20:42 [INFO] GET /api/users/128 200 19ms
2025-01-15 10:20:56 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 10:21:05 [INFO] GET /api/analytics/dashboard 200 548ms
2025-01-15 10:21:20 [INFO] GET /api/notifications 200 34ms
2025-01-15 10:21:34 [INFO] GET /api/notifications 200 33ms
2025-01-15 10:21:35 [INFO] GET /api/notifications 200 11ms
2025-01-15 10:21:46 [INFO] GET /api/health 200 1ms
2025-01-15 10:21:52 [INFO] GET /api/users 200 61ms
2025-01-15 10:22:05 [INFO] PUT /api/users/83 200 58ms
2025-01-15 10:22:10 [INFO] POST /api/auth/refresh 200 39ms
2025-01-15 10:22:13 [INFO] GET /api/health 200 3ms
2025-01-15 10:22:19 [INFO] GET /api/roles 200 8ms
2025-01-15 10:22:22 [INFO] PUT /api/settings 200 28ms
2025-01-15 10:22:23 [INFO] GET /api/users 200 30ms
2025-01-15 10:22:30 [INFO] PUT /api/settings 200 42ms
2025-01-15 10:22:35 [INFO] PUT /api/users/183 200 76ms
2025-01-15 10:22:38 [INFO] POST /api/auth/refresh 200 73ms
2025-01-15 10:22:49 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 10:22:49 [DEBUG] Rows returned: 30
2025-01-15 10:22:53 [WARN] Rate limit exceeded for IP 192.168.6.101. Returning 429.
2025-01-15 10:22:54 [INFO] GET /api/users/90 404 10ms
2025-01-15 10:22:59 [INFO] GET /api/health 200 3ms
2025-01-15 10:23:09 [INFO] GET /api/users/104 404 16ms
2025-01-15 10:23:20 [INFO] POST /api/roles 201 67ms
2025-01-15 10:23:27 [INFO] DELETE /api/users/141 204 32ms
2025-01-15 10:23:29 [INFO] GET /api/settings 200 10ms
2025-01-15 10:23:38 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 10:23:38 [DEBUG] New record created: id=389
2025-01-15 10:23:49 [INFO] GET /api/settings 200 12ms
2025-01-15 10:23:55 [INFO] POST /api/auth/refresh 200 34ms
2025-01-15 10:24:05 [INFO] PUT /api/settings 200 51ms
2025-01-15 10:24:16 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 10:24:16 [DEBUG] Rows returned: 13
2025-01-15 10:24:30 [INFO] GET /api/settings 200 7ms
2025-01-15 10:24:38 [INFO] POST /api/auth/login 200 152ms
2025-01-15 10:24:49 [INFO] GET /api/health 200 2ms
2025-01-15 10:24:59 [INFO] GET /api/health 200 3ms
2025-01-15 10:25:04 [WARN] Request body exceeded soft limit (3811KB)
2025-01-15 10:25:18 [INFO] GET /api/users?page=1&limit=25 200 60ms
2025-01-15 10:25:32 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 10:25:39 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 10:25:39 [DEBUG] Rows returned: 24
2025-01-15 10:25:46 [INFO] POST /api/uploads 201 784ms
2025-01-15 10:25:50 [INFO] GET /api/users?page=3&limit=25 200 33ms
2025-01-15 10:25:53 [INFO] GET /api/health 200 1ms
2025-01-15 10:25:55 [INFO] POST /api/auth/login 401 73ms
2025-01-15 10:26:03 [INFO] POST /api/uploads 201 962ms
2025-01-15 10:26:06 [INFO] GET /api/health 200 3ms
2025-01-15 10:26:15 [INFO] POST /api/uploads 201 577ms
2025-01-15 10:26:25 [INFO] GET /api/users?page=1&limit=25 200 34ms
2025-01-15 10:26:37 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 10:26:45 [INFO] GET /api/notifications 200 25ms
2025-01-15 10:26:56 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 10:26:56 [DEBUG] Rows returned: 4
2025-01-15 10:27:07 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 10:27:12 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 10:27:12 [DEBUG] Rows returned: 34
2025-01-15 10:27:25 [INFO] POST /api/auth/refresh 200 76ms
2025-01-15 10:27:31 [INFO] POST /api/roles 201 68ms
2025-01-15 10:27:43 [INFO] GET /api/settings 200 7ms
2025-01-15 10:27:53 [INFO] POST /api/roles 201 61ms
2025-01-15 10:27:55 [INFO] GET /api/users/72 200 13ms
2025-01-15 10:28:00 [INFO] GET /api/health 200 1ms
2025-01-15 10:28:12 [INFO] POST /api/users 409 21ms
2025-01-15 10:28:25 [INFO] DELETE /api/users/125 204 47ms
2025-01-15 10:28:26 [INFO] GET /api/users/38 200 18ms
2025-01-15 10:28:39 [INFO] POST /api/auth/refresh 200 66ms
2025-01-15 10:28:51 [INFO] GET /api/health 200 1ms
2025-01-15 10:29:02 [INFO] GET /api/users/14 404 14ms
2025-01-15 10:29:10 [INFO] POST /api/uploads 201 1471ms
2025-01-15 10:29:15 [INFO] POST /api/auth/login 401 98ms
2025-01-15 10:29:26 [INFO] GET /api/notifications 200 27ms
2025-01-15 10:29:37 [INFO] POST /api/auth/login 401 84ms
2025-01-15 10:29:42 [INFO] GET /api/health 200 2ms
2025-01-15 10:29:53 [INFO] POST /api/auth/refresh 200 79ms
2025-01-15 10:29:57 [INFO] POST /api/users 409 12ms
2025-01-15 10:29:58 [INFO] GET /api/notifications 200 17ms
2025-01-15 10:30:10 [INFO] PUT /api/users/9 200 45ms
2025-01-15 10:30:11 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 10:30:22 [INFO] GET /api/health 200 3ms
2025-01-15 10:30:32 [INFO] GET /api/health 200 1ms
2025-01-15 10:30:47 [INFO] POST /api/users 409 12ms
2025-01-15 10:30:58 [INFO] GET /api/roles 200 9ms
2025-01-15 10:31:01 [INFO] GET /api/health 200 2ms
2025-01-15 10:31:14 [INFO] POST /api/auth/login 200 167ms
2025-01-15 10:31:17 [INFO] GET /api/analytics/dashboard 200 703ms
2025-01-15 10:31:19 [INFO] POST /api/auth/login 401 83ms
2025-01-15 10:31:21 [INFO] GET /api/users/147 200 5ms
2025-01-15 10:31:36 [INFO] GET /api/health 200 1ms
2025-01-15 10:31:48 [INFO] POST /api/auth/login 200 225ms
2025-01-15 10:31:56 [INFO] GET /api/users/139 200 17ms
2025-01-15 10:32:08 [INFO] GET /api/health 200 2ms
2025-01-15 10:32:10 [INFO] GET /api/users?page=4&limit=25 200 28ms
2025-01-15 10:32:21 [ERROR] Deadlock detected in transaction tx-48005
2025-01-15 10:32:21 [ERROR] Stack trace:
    at RoleService.getPermissions (src/services/role.service.ts:107)
    at Layer.handle (node_modules/express/lib/router/layer.js:163)
    at UserService.findById (src/services/user.service.ts:209)
    at UserController.getUser (src/controllers/user.controller.ts:64)
2025-01-15 10:32:32 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 10:32:32 [DEBUG] Rows returned: 5
2025-01-15 10:32:47 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 10:32:47 [DEBUG] Rows returned: 12
2025-01-15 10:32:50 [INFO] GET /api/health 200 2ms
2025-01-15 10:32:52 [INFO] GET /api/health 200 3ms
2025-01-15 10:32:57 [INFO] POST /api/auth/refresh 200 33ms
2025-01-15 10:33:03 [INFO] GET /api/health 200 1ms
2025-01-15 10:33:10 [INFO] GET /api/notifications 200 17ms
2025-01-15 10:33:25 [INFO] POST /api/users 201 85ms
2025-01-15 10:33:29 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 10:33:29 [DEBUG] New record created: id=57
2025-01-15 10:33:32 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 10:33:46 [INFO] GET /api/health 200 2ms
2025-01-15 10:33:56 [INFO] GET /api/settings 200 12ms
2025-01-15 10:34:06 [INFO] GET /api/health 200 1ms
2025-01-15 10:34:08 [INFO] GET /api/health 200 2ms
2025-01-15 10:34:14 [INFO] GET /api/health 200 3ms
2025-01-15 10:34:25 [INFO] GET /api/users/176 404 11ms
2025-01-15 10:34:38 [INFO] POST /api/users 409 18ms
2025-01-15 10:34:41 [INFO] GET /api/health 200 1ms
2025-01-15 10:34:53 [INFO] POST /api/users 409 11ms
2025-01-15 10:34:56 [INFO] PUT /api/settings 200 51ms
2025-01-15 10:34:58 [INFO] POST /api/users 409 25ms
2025-01-15 10:35:10 [INFO] POST /api/users 201 137ms
2025-01-15 10:35:17 [INFO] POST /api/users 409 15ms
2025-01-15 10:35:29 [INFO] GET /api/users/161 200 18ms
2025-01-15 10:35:30 [INFO] PUT /api/users/31 200 63ms
2025-01-15 10:35:44 [INFO] GET /api/health 200 3ms
2025-01-15 10:35:53 [INFO] PUT /api/users/71 200 47ms
2025-01-15 10:36:06 [INFO] GET /api/analytics/dashboard 200 244ms
2025-01-15 10:36:07 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 10:36:11 [INFO] GET /api/users?role=moderator 200 18ms
2025-01-15 10:36:23 [INFO] POST /api/uploads 201 1493ms
2025-01-15 10:36:32 [INFO] DELETE /api/users/185 204 38ms
2025-01-15 10:36:38 [INFO] GET /api/users?role=admin 200 22ms
2025-01-15 10:36:40 [INFO] POST /api/auth/login 401 59ms
2025-01-15 10:36:48 [INFO] GET /api/users 200 64ms
2025-01-15 10:36:56 [INFO] GET /api/users?page=2&limit=25 200 47ms
2025-01-15 10:37:01 [INFO] POST /api/users 201 97ms
2025-01-15 10:37:03 [INFO] GET /api/health 200 2ms
2025-01-15 10:37:10 [INFO] GET /api/users?role=viewer 200 20ms
2025-01-15 10:37:23 [INFO] GET /api/health 200 3ms
2025-01-15 10:37:38 [INFO] POST /api/uploads 201 1568ms
2025-01-15 10:37:46 [INFO] GET /api/health 200 1ms
2025-01-15 10:37:56 [INFO] POST /api/auth/refresh 200 77ms
2025-01-15 10:38:10 [INFO] GET /api/users?role=editor 200 19ms
2025-01-15 10:38:25 [INFO] GET /api/health 200 2ms
2025-01-15 10:38:37 [INFO] GET /api/health 200 1ms
2025-01-15 10:38:44 [INFO] GET /api/analytics/dashboard 200 707ms
2025-01-15 10:38:48 [INFO] GET /api/health 200 1ms
2025-01-15 10:38:54 [INFO] GET /api/users/5 200 10ms
2025-01-15 10:39:06 [INFO] GET /api/settings 200 12ms
2025-01-15 10:39:19 [INFO] POST /api/auth/login 200 100ms
2025-01-15 10:39:33 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 10:39:33 [DEBUG] Rows returned: 44
2025-01-15 10:39:39 [INFO] POST /api/roles 201 64ms
2025-01-15 10:39:49 [INFO] GET /api/health 200 3ms
2025-01-15 10:39:51 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 10:39:51 [DEBUG] Rows returned: 47
2025-01-15 10:40:06 [INFO] GET /api/users?page=4&limit=25 200 48ms
2025-01-15 10:40:14 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 10:40:14 [DEBUG] Rows returned: 23
2025-01-15 10:40:17 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 10:40:17 [DEBUG] Rows returned: 4
2025-01-15 10:40:26 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 10:40:29 [ERROR] Deadlock detected in transaction tx-86037
2025-01-15 10:40:29 [ERROR] Stack trace:
    at UserController.getUser (src/controllers/user.controller.ts:267)
    at validateRequest (src/middleware/validation.ts:226)
    at Layer.handle (node_modules/express/lib/router/layer.js:151)
    at RoleService.getPermissions (src/services/role.service.ts:37)
2025-01-15 10:40:31 [INFO] POST /api/auth/refresh 200 75ms
2025-01-15 10:40:40 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 10:40:40 [DEBUG] New record created: id=199
2025-01-15 10:40:48 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 10:40:48 [DEBUG] Rows returned: 44
2025-01-15 10:41:01 [ERROR] Database connection timeout after 5000ms
2025-01-15 10:41:16 [INFO] GET /api/users/28 200 8ms
2025-01-15 10:41:28 [INFO] POST /api/users 201 133ms
2025-01-15 10:41:39 [INFO] POST /api/users 201 136ms
2025-01-15 10:41:51 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 10:41:55 [INFO] DELETE /api/users/134 204 38ms
2025-01-15 10:42:01 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 10:42:01 [DEBUG] Rows returned: 31
2025-01-15 10:42:11 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 10:42:11 [DEBUG] New record created: id=481
2025-01-15 10:42:20 [INFO] POST /api/roles 201 40ms
2025-01-15 10:42:33 [INFO] GET /api/analytics/dashboard 200 351ms
2025-01-15 10:42:39 [INFO] POST /api/users 409 19ms
2025-01-15 10:42:42 [ERROR] Unhandled exception in POST /api/users: UserNotFoundError
2025-01-15 10:42:42 [ERROR] Stack trace:
    at Router.handle (node_modules/express/lib/router/index.js:115)
    at AuthController.login (src/controllers/auth.controller.ts:297)
    at validateRequest (src/middleware/validation.ts:27)
    at AuthService.validateToken (src/services/auth.service.ts:172)
2025-01-15 10:42:48 [INFO] POST /api/auth/refresh 200 49ms
2025-01-15 10:42:50 [WARN] Request body exceeded soft limit (535KB)
2025-01-15 10:42:59 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 10:43:10 [INFO] GET /api/settings 200 6ms
2025-01-15 10:43:22 [INFO] GET /api/users 200 26ms
2025-01-15 10:43:29 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 10:43:37 [INFO] GET /api/users?role=editor 200 31ms
2025-01-15 10:43:41 [INFO] GET /api/health 200 2ms
2025-01-15 10:43:45 [INFO] POST /api/uploads 201 1307ms
2025-01-15 10:43:49 [INFO] PUT /api/settings 200 45ms
2025-01-15 10:43:52 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 10:43:52 [DEBUG] Rows returned: 23
2025-01-15 10:43:59 [INFO] POST /api/roles 201 58ms
2025-01-15 10:44:13 [INFO] PUT /api/users/187 200 68ms
2025-01-15 10:44:18 [INFO] POST /api/auth/login 401 61ms
2025-01-15 10:44:21 [INFO] GET /api/analytics/dashboard 200 584ms
2025-01-15 10:44:23 [INFO] GET /api/roles 200 12ms
2025-01-15 10:44:35 [INFO] POST /api/users 201 117ms
2025-01-15 10:44:44 [INFO] POST /api/roles 201 65ms
2025-01-15 10:44:56 [INFO] GET /api/health 200 2ms
2025-01-15 10:45:07 [INFO] GET /api/health 200 2ms
2025-01-15 10:45:09 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 10:45:16 [INFO] DELETE /api/users/8 204 35ms
2025-01-15 10:45:18 [INFO] GET /api/users?page=5&limit=25 200 52ms
2025-01-15 10:45:32 [INFO] GET /api/analytics/dashboard 200 724ms
2025-01-15 10:45:44 [INFO] GET /api/roles 200 10ms
2025-01-15 10:45:52 [INFO] GET /api/health 200 1ms
2025-01-15 10:45:58 [INFO] GET /api/roles 200 5ms
2025-01-15 10:46:03 [INFO] GET /api/users/132 200 8ms
2025-01-15 10:46:13 [INFO] GET /api/health 200 3ms
2025-01-15 10:46:19 [INFO] GET /api/health 200 3ms
2025-01-15 10:46:32 [INFO] GET /api/users?page=2&limit=25 200 25ms
2025-01-15 10:46:35 [INFO] GET /api/users?page=4&limit=25 200 46ms
2025-01-15 10:46:50 [WARN] Rate limit approaching for IP 192.168.9.57 (86/100 requests in window)
2025-01-15 10:47:02 [INFO] GET /api/users/107 404 9ms
2025-01-15 10:47:16 [INFO] GET /api/health 200 3ms
2025-01-15 10:47:22 [INFO] POST /api/auth/refresh 200 75ms
2025-01-15 10:47:27 [INFO] GET /api/users/57 404 11ms
2025-01-15 10:47:32 [INFO] POST /api/users 201 89ms
2025-01-15 10:47:33 [INFO] GET /api/health 200 2ms
2025-01-15 10:47:34 [INFO] GET /api/users 200 32ms
2025-01-15 10:47:49 [INFO] GET /api/users/78 200 8ms
2025-01-15 10:48:04 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 10:48:19 [INFO] GET /api/users?page=2&limit=25 200 42ms
2025-01-15 10:48:29 [INFO] POST /api/users 409 12ms
2025-01-15 10:48:31 [INFO] GET /api/health 200 1ms
2025-01-15 10:48:40 [INFO] PUT /api/users/73 200 40ms
2025-01-15 10:48:52 [INFO] PUT /api/users/130 200 84ms
2025-01-15 10:49:02 [INFO] GET /api/users/47 404 14ms
2025-01-15 10:49:06 [INFO] POST /api/auth/login 401 109ms
2025-01-15 10:49:08 [INFO] GET /api/analytics/dashboard 200 770ms
2025-01-15 10:49:20 [INFO] GET /api/users?role=admin 200 24ms
2025-01-15 10:49:28 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 10:49:39 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 10:49:53 [INFO] GET /api/analytics/dashboard 200 213ms
2025-01-15 10:50:04 [INFO] GET /api/users/102 404 18ms
2025-01-15 10:50:15 [INFO] POST /api/users 201 93ms
2025-01-15 10:50:27 [WARN] Rate limit exceeded for IP 192.168.4.87. Returning 429.
2025-01-15 10:50:41 [INFO] GET /api/analytics/dashboard 200 564ms
2025-01-15 10:50:49 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 10:50:49 [DEBUG] Rows returned: 31
2025-01-15 10:50:58 [INFO] POST /api/auth/refresh 200 61ms
2025-01-15 10:51:06 [INFO] POST /api/users 201 88ms
2025-01-15 10:51:14 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 10:51:14 [DEBUG] New record created: id=245
2025-01-15 10:51:24 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 10:51:24 [DEBUG] New record created: id=205
2025-01-15 10:51:34 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 10:51:34 [DEBUG] Rows returned: 42
2025-01-15 10:51:47 [INFO] GET /api/analytics/dashboard 200 709ms
2025-01-15 10:51:55 [INFO] POST /api/uploads 201 1381ms
2025-01-15 10:52:10 [WARN] Request body exceeded soft limit (1948KB)
2025-01-15 10:52:21 [INFO] GET /api/health 200 2ms
2025-01-15 10:52:36 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 10:52:36 [DEBUG] Rows returned: 27
2025-01-15 10:52:39 [INFO] POST /api/auth/login 200 225ms
2025-01-15 10:52:50 [INFO] POST /api/uploads 201 1651ms
2025-01-15 10:53:04 [INFO] GET /api/users 200 62ms
2025-01-15 10:53:11 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 10:53:11 [DEBUG] Rows returned: 49
2025-01-15 10:53:16 [INFO] GET /api/health 200 2ms
2025-01-15 10:53:22 [INFO] GET /api/health 200 3ms
2025-01-15 10:53:23 [INFO] GET /api/health 200 3ms
2025-01-15 10:53:29 [INFO] POST /api/auth/login 401 94ms
2025-01-15 10:53:30 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 10:53:34 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 10:53:36 [WARN] Rate limit approaching for IP 192.168.6.44 (80/100 requests in window)
2025-01-15 10:53:47 [INFO] GET /api/health 200 3ms
2025-01-15 10:53:56 [WARN] Memory usage at 85% of allocated heap
2025-01-15 10:54:06 [INFO] GET /api/analytics/dashboard 200 708ms
2025-01-15 10:54:15 [INFO] GET /api/health 200 3ms
2025-01-15 10:54:21 [INFO] POST /api/roles 201 61ms
2025-01-15 10:54:32 [INFO] GET /api/health 200 1ms
2025-01-15 10:54:46 [INFO] GET /api/health 200 1ms
2025-01-15 10:54:51 [INFO] POST /api/roles 201 69ms
2025-01-15 10:55:03 [WARN] S3 upload retry after timeout (1512ms)
2025-01-15 10:55:07 [INFO] GET /api/users/167 200 14ms
2025-01-15 10:55:14 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 10:55:14 [DEBUG] Rows returned: 12
2025-01-15 10:55:21 [INFO] PUT /api/settings 200 31ms
2025-01-15 10:55:36 [INFO] GET /api/notifications 200 31ms
2025-01-15 10:55:50 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 10:55:50 [DEBUG] Rows returned: 17
2025-01-15 10:56:05 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 10:56:19 [INFO] GET /api/health 200 2ms
2025-01-15 10:56:34 [INFO] GET /api/users 200 54ms
2025-01-15 10:56:37 [INFO] POST /api/roles 201 34ms
2025-01-15 10:56:48 [INFO] POST /api/auth/login 401 82ms
2025-01-15 10:56:59 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 10:56:59 [DEBUG] Rows returned: 15
2025-01-15 10:57:01 [INFO] GET /api/health 200 2ms
2025-01-15 10:57:10 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 10:57:13 [INFO] GET /api/roles 200 12ms
2025-01-15 10:57:26 [INFO] GET /api/users/81 200 18ms
2025-01-15 10:57:41 [INFO] GET /api/users/102 200 8ms
2025-01-15 10:57:51 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 10:57:51 [DEBUG] Rows returned: 33
2025-01-15 10:58:02 [INFO] GET /api/health 200 3ms
2025-01-15 10:58:07 [INFO] GET /api/users/61 200 15ms
2025-01-15 10:58:21 [INFO] POST /api/auth/login 200 155ms
2025-01-15 10:58:24 [INFO] PUT /api/users/71 200 56ms
2025-01-15 10:58:38 [INFO] GET /api/analytics/dashboard 200 524ms
2025-01-15 10:58:47 [INFO] DELETE /api/users/72 204 35ms
2025-01-15 10:58:59 [INFO] POST /api/roles 201 45ms
2025-01-15 10:59:04 [INFO] POST /api/roles 201 64ms
2025-01-15 10:59:18 [INFO] POST /api/auth/refresh 200 46ms
2025-01-15 10:59:23 [INFO] DELETE /api/users/77 204 49ms
2025-01-15 10:59:31 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 10:59:31 [DEBUG] Rows returned: 26
2025-01-15 10:59:44 [INFO] GET /api/users/200 200 18ms
2025-01-15 10:59:59 [INFO] GET /api/health 200 3ms
2025-01-15 11:00:06 [INFO] GET /api/health 200 1ms
2025-01-15 11:00:20 [INFO] GET /api/roles 200 11ms
2025-01-15 11:00:30 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 11:00:30 [DEBUG] New record created: id=427
2025-01-15 11:00:36 [INFO] GET /api/health 200 3ms
2025-01-15 11:00:44 [INFO] GET /api/health 200 1ms
2025-01-15 11:00:45 [INFO] POST /api/roles 201 40ms
2025-01-15 11:00:49 [INFO] POST /api/users 201 137ms
2025-01-15 11:00:57 [INFO] GET /api/health 200 1ms
2025-01-15 11:01:02 [INFO] GET /api/settings 200 6ms
2025-01-15 11:01:09 [INFO] POST /api/auth/login 200 105ms
2025-01-15 11:01:24 [INFO] PUT /api/settings 200 49ms
2025-01-15 11:01:28 [INFO] POST /api/users 409 23ms
2025-01-15 11:01:38 [INFO] GET /api/users/95 200 8ms
2025-01-15 11:01:39 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 11:01:39 [DEBUG] Rows returned: 49
2025-01-15 11:01:54 [WARN] JWT token expires in less than 60 seconds for user 34
2025-01-15 11:02:01 [INFO] GET /api/health 200 3ms
2025-01-15 11:02:05 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 11:02:18 [INFO] POST /api/roles 201 58ms
2025-01-15 11:02:33 [INFO] GET /api/settings 200 5ms
2025-01-15 11:02:41 [INFO] GET /api/users?role=moderator 200 37ms
2025-01-15 11:02:48 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:02:48 [DEBUG] Rows returned: 38
2025-01-15 11:02:53 [INFO] POST /api/uploads 201 980ms
2025-01-15 11:03:01 [WARN] S3 upload retry after timeout (1943ms)
2025-01-15 11:03:08 [INFO] POST /api/auth/login 200 243ms
2025-01-15 11:03:09 [INFO] GET /api/roles 200 12ms
2025-01-15 11:03:12 [INFO] GET /api/notifications 200 13ms
2025-01-15 11:03:18 [INFO] POST /api/users 201 135ms
2025-01-15 11:03:23 [WARN] Memory usage at 88% of allocated heap
2025-01-15 11:03:31 [INFO] GET /api/health 200 1ms
2025-01-15 11:03:40 [INFO] GET /api/health 200 3ms
2025-01-15 11:03:51 [INFO] GET /api/health 200 1ms
2025-01-15 11:03:55 [INFO] DELETE /api/users/47 204 28ms
2025-01-15 11:03:58 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 11:03:58 [DEBUG] Rows returned: 7
2025-01-15 11:04:13 [WARN] Slow query detected: SELECT * FROM permissions WHERE role_id = $1 (took 1030ms)
2025-01-15 11:04:19 [INFO] POST /api/roles 201 47ms
2025-01-15 11:04:29 [INFO] GET /api/health 200 3ms
2025-01-15 11:04:33 [INFO] GET /api/health 200 1ms
2025-01-15 11:04:37 [INFO] GET /api/health 200 3ms
2025-01-15 11:04:39 [INFO] GET /api/health 200 1ms
2025-01-15 11:04:44 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 11:04:44 [DEBUG] Rows returned: 7
2025-01-15 11:04:51 [INFO] GET /api/users/83 404 9ms
2025-01-15 11:04:59 [INFO] GET /api/health 200 3ms
2025-01-15 11:05:07 [INFO] GET /api/roles 200 5ms
2025-01-15 11:05:18 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 11:05:18 [DEBUG] Rows returned: 20
2025-01-15 11:05:30 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 11:05:43 [INFO] GET /api/users/141 200 17ms
2025-01-15 11:05:48 [INFO] POST /api/auth/login 200 141ms
2025-01-15 11:05:55 [INFO] GET /api/health 200 2ms
2025-01-15 11:06:06 [INFO] GET /api/health 200 3ms
2025-01-15 11:06:09 [INFO] GET /api/analytics/dashboard 200 334ms
2025-01-15 11:06:15 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 11:06:15 [DEBUG] Rows returned: 32
2025-01-15 11:06:19 [INFO] POST /api/auth/login 200 208ms
2025-01-15 11:06:21 [INFO] GET /api/health 200 2ms
2025-01-15 11:06:31 [INFO] POST /api/auth/login 401 93ms
2025-01-15 11:06:39 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 11:06:39 [DEBUG] Rows returned: 43
2025-01-15 11:06:51 [INFO] GET /api/analytics/dashboard 200 679ms
2025-01-15 11:06:58 [INFO] GET /api/analytics/dashboard 200 507ms
2025-01-15 11:07:12 [INFO] POST /api/auth/login 401 59ms
2025-01-15 11:07:27 [INFO] GET /api/users/131 404 9ms
2025-01-15 11:07:35 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 11:07:49 [INFO] GET /api/roles 200 5ms
2025-01-15 11:07:51 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 11:07:51 [DEBUG] Rows returned: 11
2025-01-15 11:08:04 [INFO] POST /api/auth/login 200 176ms
2025-01-15 11:08:10 [INFO] POST /api/auth/refresh 200 46ms
2025-01-15 11:08:16 [WARN] Rate limit exceeded for IP 192.168.2.192. Returning 429.
2025-01-15 11:08:17 [INFO] GET /api/users/4 404 15ms
2025-01-15 11:08:29 [INFO] PUT /api/settings 200 43ms
2025-01-15 11:08:41 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:08:41 [DEBUG] Rows returned: 43
2025-01-15 11:08:48 [INFO] GET /api/health 200 1ms
2025-01-15 11:08:51 [INFO] PUT /api/users/29 200 41ms
2025-01-15 11:08:55 [INFO] POST /api/users 201 148ms
2025-01-15 11:08:59 [INFO] POST /api/auth/refresh 200 31ms
2025-01-15 11:09:01 [INFO] POST /api/users 201 140ms
2025-01-15 11:09:02 [INFO] GET /api/health 200 3ms
2025-01-15 11:09:06 [INFO] GET /api/settings 200 5ms
2025-01-15 11:09:08 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:09:08 [DEBUG] Rows returned: 27
2025-01-15 11:09:15 [INFO] GET /api/health 200 3ms
2025-01-15 11:09:25 [INFO] POST /api/uploads 201 1318ms
2025-01-15 11:09:33 [INFO] PUT /api/settings 200 23ms
2025-01-15 11:09:42 [INFO] GET /api/settings 200 11ms
2025-01-15 11:09:57 [INFO] GET /api/analytics/dashboard 200 646ms
2025-01-15 11:09:58 [INFO] PUT /api/users/121 200 54ms
2025-01-15 11:10:07 [INFO] GET /api/users?role=moderator 200 24ms
2025-01-15 11:10:19 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 11:10:19 [DEBUG] Rows returned: 43
2025-01-15 11:10:30 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 11:10:30 [DEBUG] Rows returned: 10
2025-01-15 11:10:40 [INFO] GET /api/users/171 200 10ms
2025-01-15 11:10:44 [INFO] GET /api/analytics/dashboard 200 510ms
2025-01-15 11:10:48 [INFO] GET /api/users 200 47ms
2025-01-15 11:10:59 [INFO] GET /api/notifications 200 23ms
2025-01-15 11:11:01 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 11:11:01 [DEBUG] Rows returned: 35
2025-01-15 11:11:05 [INFO] GET /api/users?role=admin 200 23ms
2025-01-15 11:11:20 [INFO] GET /api/notifications 200 24ms
2025-01-15 11:11:33 [INFO] GET /api/users/28 404 8ms
2025-01-15 11:11:42 [INFO] GET /api/users/53 404 12ms
2025-01-15 11:11:54 [INFO] GET /api/notifications 200 30ms
2025-01-15 11:12:00 [INFO] POST /api/users 201 133ms
2025-01-15 11:12:13 [INFO] GET /api/health 200 1ms
2025-01-15 11:12:27 [INFO] GET /api/health 200 2ms
2025-01-15 11:12:32 [INFO] GET /api/users/69 200 16ms
2025-01-15 11:12:43 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 11:12:43 [DEBUG] New record created: id=435
2025-01-15 11:12:56 [INFO] DELETE /api/users/36 204 49ms
2025-01-15 11:13:03 [INFO] GET /api/health 200 3ms
2025-01-15 11:13:16 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 11:13:16 [DEBUG] Rows returned: 28
2025-01-15 11:13:19 [INFO] GET /api/health 200 3ms
2025-01-15 11:13:32 [INFO] GET /api/users/22 200 17ms
2025-01-15 11:13:45 [INFO] GET /api/users 200 61ms
2025-01-15 11:13:46 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 11:13:58 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 11:13:58 [DEBUG] Rows returned: 0
2025-01-15 11:14:12 [INFO] GET /api/notifications 200 24ms
2025-01-15 11:14:23 [INFO] POST /api/uploads 201 1828ms
2025-01-15 11:14:30 [INFO] GET /api/health 200 2ms
2025-01-15 11:14:32 [INFO] GET /api/users?role=editor 200 32ms
2025-01-15 11:14:37 [INFO] GET /api/notifications 200 20ms
2025-01-15 11:14:50 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 11:14:50 [DEBUG] Rows returned: 1
2025-01-15 11:15:05 [INFO] GET /api/health 200 3ms
2025-01-15 11:15:10 [INFO] POST /api/roles 201 37ms
2025-01-15 11:15:22 [INFO] GET /api/users?page=1&limit=25 200 28ms
2025-01-15 11:15:35 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 11:15:35 [DEBUG] Rows returned: 28
2025-01-15 11:15:40 [INFO] GET /api/health 200 3ms
2025-01-15 11:15:50 [INFO] POST /api/uploads 201 1112ms
2025-01-15 11:15:55 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:15:55 [DEBUG] Rows returned: 36
2025-01-15 11:16:06 [INFO] POST /api/auth/login 200 183ms
2025-01-15 11:16:15 [INFO] GET /api/users?page=2&limit=25 200 52ms
2025-01-15 11:16:29 [INFO] GET /api/users/16 200 20ms
2025-01-15 11:16:33 [INFO] GET /api/users?page=5&limit=25 200 60ms
2025-01-15 11:16:42 [INFO] GET /api/health 200 2ms
2025-01-15 11:16:52 [INFO] POST /api/auth/login 401 70ms
2025-01-15 11:16:55 [INFO] GET /api/analytics/dashboard 200 725ms
2025-01-15 11:17:09 [INFO] PUT /api/users/117 200 87ms
2025-01-15 11:17:12 [WARN] Deprecated API version v1 called by client client-19
2025-01-15 11:17:21 [INFO] GET /api/users?page=3&limit=25 200 43ms
2025-01-15 11:17:29 [INFO] POST /api/users 201 119ms
2025-01-15 11:17:44 [INFO] POST /api/users 409 13ms
2025-01-15 11:17:53 [INFO] GET /api/users 200 44ms
2025-01-15 11:18:03 [INFO] GET /api/users?role=moderator 200 19ms
2025-01-15 11:18:16 [INFO] POST /api/auth/refresh 200 39ms
2025-01-15 11:18:30 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 11:18:30 [DEBUG] Rows returned: 39
2025-01-15 11:18:41 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 11:18:41 [DEBUG] Rows returned: 14
2025-01-15 11:18:56 [INFO] POST /api/uploads 201 1822ms
2025-01-15 11:18:58 [INFO] GET /api/health 200 3ms
2025-01-15 11:18:59 [INFO] POST /api/roles 201 35ms
2025-01-15 11:19:03 [WARN] Redis reconnection attempt 98/5
2025-01-15 11:19:18 [INFO] POST /api/uploads 201 921ms
2025-01-15 11:19:22 [INFO] GET /api/health 200 3ms
2025-01-15 11:19:30 [INFO] POST /api/uploads 201 1706ms
2025-01-15 11:19:31 [INFO] GET /api/health 200 2ms
2025-01-15 11:19:32 [INFO] GET /api/health 200 2ms
2025-01-15 11:19:39 [INFO] GET /api/users/26 404 10ms
2025-01-15 11:19:42 [INFO] GET /api/users/40 200 10ms
2025-01-15 11:19:43 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 11:19:43 [DEBUG] Rows returned: 11
2025-01-15 11:19:44 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 11:19:51 [INFO] POST /api/users 201 128ms
2025-01-15 11:20:05 [INFO] GET /api/health 200 1ms
2025-01-15 11:20:09 [INFO] PUT /api/settings 200 52ms
2025-01-15 11:20:22 [INFO] GET /api/users/69 404 15ms
2025-01-15 11:20:31 [INFO] GET /api/analytics/dashboard 200 219ms
2025-01-15 11:20:36 [INFO] GET /api/settings 200 7ms
2025-01-15 11:20:41 [INFO] POST /api/auth/refresh 200 53ms
2025-01-15 11:20:50 [ERROR] Deadlock detected in transaction tx-15477
2025-01-15 11:20:50 [ERROR] Stack trace:
    at Router.handle (node_modules/express/lib/router/index.js:10)
    at AuthController.login (src/controllers/auth.controller.ts:40)
    at RoleService.getPermissions (src/services/role.service.ts:256)
2025-01-15 11:20:55 [INFO] POST /api/auth/login 200 230ms
2025-01-15 11:21:00 [INFO] POST /api/uploads 201 683ms
2025-01-15 11:21:07 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 11:21:07 [DEBUG] New record created: id=421
2025-01-15 11:21:16 [ERROR] Worker process crashed. Restarting...
2025-01-15 11:21:21 [ERROR] Worker process crashed. Restarting...
2025-01-15 11:21:25 [INFO] PUT /api/settings 200 20ms
2025-01-15 11:21:35 [INFO] GET /api/health 200 3ms
2025-01-15 11:21:50 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 11:21:50 [DEBUG] Rows returned: 48
2025-01-15 11:21:57 [INFO] GET /api/users/138 200 8ms
2025-01-15 11:22:03 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 11:22:05 [INFO] PUT /api/users/114 200 87ms
2025-01-15 11:22:06 [INFO] GET /api/health 200 3ms
2025-01-15 11:22:21 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 11:22:23 [INFO] GET /api/health 200 3ms
2025-01-15 11:22:28 [INFO] GET /api/health 200 1ms
2025-01-15 11:22:32 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 11:22:33 [INFO] POST /api/auth/login 200 228ms
2025-01-15 11:22:41 [INFO] PUT /api/users/169 200 77ms
2025-01-15 11:22:44 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 11:22:44 [DEBUG] New record created: id=182
2025-01-15 11:22:59 [INFO] DELETE /api/users/134 204 47ms
2025-01-15 11:23:10 [INFO] POST /api/uploads 201 1429ms
2025-01-15 11:23:11 [WARN] Slow query detected: SELECT * FROM roles ORDER BY name (took 1185ms)
2025-01-15 11:23:20 [INFO] GET /api/health 200 3ms
2025-01-15 11:23:24 [INFO] POST /api/auth/login 401 50ms
2025-01-15 11:23:31 [INFO] GET /api/users/147 200 18ms
2025-01-15 11:23:33 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 11:23:40 [INFO] GET /api/health 200 3ms
2025-01-15 11:23:53 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 11:23:53 [DEBUG] Rows returned: 16
2025-01-15 11:23:57 [INFO] DELETE /api/users/88 204 36ms
2025-01-15 11:24:10 [INFO] GET /api/users/199 200 19ms
2025-01-15 11:24:20 [INFO] GET /api/users 200 79ms
2025-01-15 11:24:32 [INFO] POST /api/users 201 118ms
2025-01-15 11:24:42 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 11:24:42 [DEBUG] Rows returned: 6
2025-01-15 11:24:53 [INFO] GET /api/users 200 31ms
2025-01-15 11:25:03 [INFO] GET /api/health 200 1ms
2025-01-15 11:25:17 [INFO] PUT /api/settings 200 49ms
2025-01-15 11:25:30 [INFO] PUT /api/settings 200 21ms
2025-01-15 11:25:38 [INFO] GET /api/settings 200 5ms
2025-01-15 11:25:48 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 11:26:01 [INFO] GET /api/health 200 3ms
2025-01-15 11:26:04 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 11:26:10 [INFO] PUT /api/settings 200 28ms
2025-01-15 11:26:23 [INFO] POST /api/users 201 125ms
2025-01-15 11:26:28 [INFO] POST /api/uploads 201 1461ms
2025-01-15 11:26:33 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 11:26:39 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 11:26:53 [INFO] GET /api/health 200 1ms
2025-01-15 11:27:00 [INFO] PUT /api/users/164 200 61ms
2025-01-15 11:27:04 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:27:04 [DEBUG] Rows returned: 44
2025-01-15 11:27:12 [INFO] GET /api/users?role=viewer 200 24ms
2025-01-15 11:27:19 [INFO] GET /api/users/117 404 11ms
2025-01-15 11:27:34 [INFO] DELETE /api/users/178 204 39ms
2025-01-15 11:27:38 [INFO] GET /api/users?role=moderator 200 27ms
2025-01-15 11:27:41 [INFO] GET /api/health 200 1ms
2025-01-15 11:27:47 [INFO] GET /api/users?page=2&limit=25 200 43ms
2025-01-15 11:27:55 [INFO] GET /api/settings 200 5ms
2025-01-15 11:27:59 [INFO] POST /api/users 409 20ms
2025-01-15 11:28:13 [INFO] POST /api/users 409 18ms
2025-01-15 11:28:28 [INFO] POST /api/users 201 106ms
2025-01-15 11:28:33 [INFO] GET /api/users?page=5&limit=25 200 52ms
2025-01-15 11:28:48 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 11:28:48 [DEBUG] Rows returned: 9
2025-01-15 11:29:03 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 11:29:07 [WARN] S3 upload retry after timeout (687ms)
2025-01-15 11:29:20 [INFO] POST /api/users 201 90ms
2025-01-15 11:29:33 [INFO] PUT /api/settings 200 44ms
2025-01-15 11:29:46 [INFO] GET /api/health 200 3ms
2025-01-15 11:29:52 [INFO] POST /api/auth/refresh 200 63ms
2025-01-15 11:30:04 [INFO] GET /api/analytics/dashboard 200 610ms
2025-01-15 11:30:15 [WARN] S3 upload retry after timeout (374ms)
2025-01-15 11:30:20 [INFO] POST /api/auth/login 200 165ms
2025-01-15 11:30:29 [INFO] GET /api/users/76 200 16ms
2025-01-15 11:30:33 [INFO] POST /api/auth/refresh 200 58ms
2025-01-15 11:30:41 [INFO] GET /api/users?page=3&limit=25 200 49ms
2025-01-15 11:30:42 [INFO] DELETE /api/users/68 204 48ms
2025-01-15 11:30:44 [INFO] GET /api/notifications 200 17ms
2025-01-15 11:30:46 [INFO] GET /api/users?page=3&limit=25 200 37ms
2025-01-15 11:30:57 [INFO] POST /api/roles 201 68ms
2025-01-15 11:31:00 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 11:31:13 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 11:31:27 [INFO] DELETE /api/users/186 204 27ms
2025-01-15 11:31:36 [INFO] POST /api/uploads 201 1197ms
2025-01-15 11:31:49 [INFO] PUT /api/users/110 200 68ms
2025-01-15 11:31:57 [INFO] GET /api/health 200 1ms
2025-01-15 11:32:03 [INFO] POST /api/users 201 125ms
2025-01-15 11:32:09 [INFO] POST /api/auth/login 401 88ms
2025-01-15 11:32:15 [INFO] GET /api/settings 200 10ms
2025-01-15 11:32:25 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 11:32:40 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 11:32:40 [DEBUG] Rows returned: 24
2025-01-15 11:32:44 [WARN] Rate limit approaching for IP 192.168.4.122 (83/100 requests in window)
2025-01-15 11:32:59 [INFO] POST /api/users 409 25ms
2025-01-15 11:33:00 [INFO] GET /api/users/99 200 12ms
2025-01-15 11:33:05 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 11:33:05 [DEBUG] Rows returned: 29
2025-01-15 11:33:06 [INFO] GET /api/health 200 2ms
2025-01-15 11:33:09 [ERROR] Database connection timeout after 5000ms
2025-01-15 11:33:24 [INFO] GET /api/health 200 1ms
2025-01-15 11:33:38 [INFO] POST /api/auth/login 401 89ms
2025-01-15 11:33:48 [INFO] POST /api/auth/refresh 200 39ms
2025-01-15 11:33:56 [INFO] POST /api/auth/login 200 184ms
2025-01-15 11:34:11 [INFO] GET /api/analytics/dashboard 200 240ms
2025-01-15 11:34:23 [INFO] POST /api/auth/refresh 200 69ms
2025-01-15 11:34:37 [INFO] GET /api/health 200 1ms
2025-01-15 11:34:44 [INFO] PUT /api/settings 200 44ms
2025-01-15 11:34:59 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:34:59 [DEBUG] Rows returned: 36
2025-01-15 11:35:01 [INFO] GET /api/users 200 65ms
2025-01-15 11:35:10 [INFO] GET /api/users/179 200 18ms
2025-01-15 11:35:23 [INFO] GET /api/users?page=5&limit=25 200 45ms
2025-01-15 11:35:30 [INFO] GET /api/roles 200 5ms
2025-01-15 11:35:32 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 11:35:32 [DEBUG] Rows returned: 47
2025-01-15 11:35:40 [INFO] POST /api/auth/login 200 102ms
2025-01-15 11:35:45 [INFO] POST /api/users 201 139ms
2025-01-15 11:35:47 [INFO] DELETE /api/users/183 204 35ms
2025-01-15 11:36:01 [INFO] POST /api/users 409 13ms
2025-01-15 11:36:04 [INFO] POST /api/uploads 201 658ms
2025-01-15 11:36:15 [INFO] GET /api/health 200 3ms
2025-01-15 11:36:20 [INFO] GET /api/users?page=1&limit=25 200 59ms
2025-01-15 11:36:24 [INFO] GET /api/users 200 69ms
2025-01-15 11:36:29 [INFO] PUT /api/settings 200 32ms
2025-01-15 11:36:44 [INFO] DELETE /api/users/52 204 33ms
2025-01-15 11:36:45 [ERROR] Database connection timeout after 5000ms
2025-01-15 11:36:48 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 11:36:48 [DEBUG] Rows returned: 26
2025-01-15 11:36:57 [INFO] GET /api/users?role=editor 200 21ms
2025-01-15 11:37:12 [INFO] POST /api/auth/login 401 63ms
2025-01-15 11:37:18 [INFO] GET /api/health 200 2ms
2025-01-15 11:37:22 [INFO] GET /api/users/169 200 16ms
2025-01-15 11:37:23 [INFO] PUT /api/users/106 200 71ms
2025-01-15 11:37:25 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 11:37:28 [INFO] GET /api/users/154 404 18ms
2025-01-15 11:37:43 [ERROR] Worker process crashed. Restarting...
2025-01-15 11:37:51 [INFO] GET /api/health 200 3ms
2025-01-15 11:38:02 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 11:38:02 [DEBUG] New record created: id=350
2025-01-15 11:38:14 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 11:38:27 [INFO] GET /api/users/16 200 20ms
2025-01-15 11:38:32 [INFO] POST /api/auth/login 200 213ms
2025-01-15 11:38:44 [INFO] GET /api/health 200 1ms
2025-01-15 11:38:49 [INFO] GET /api/users 200 73ms
2025-01-15 11:38:50 [INFO] GET /api/users?role=editor 200 32ms
2025-01-15 11:38:51 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 11:39:02 [INFO] GET /api/analytics/dashboard 200 344ms
2025-01-15 11:39:06 [INFO] POST /api/users 409 12ms
2025-01-15 11:39:13 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 11:39:16 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 11:39:23 [INFO] DELETE /api/users/78 204 34ms
2025-01-15 11:39:34 [INFO] GET /api/analytics/dashboard 200 586ms
2025-01-15 11:39:37 [INFO] POST /api/auth/login 401 111ms
2025-01-15 11:39:38 [INFO] GET /api/health 200 2ms
2025-01-15 11:39:52 [INFO] POST /api/roles 201 41ms
2025-01-15 11:39:57 [INFO] POST /api/roles 201 65ms
2025-01-15 11:40:07 [INFO] GET /api/users?role=moderator 200 19ms
2025-01-15 11:40:22 [INFO] GET /api/health 200 2ms
2025-01-15 11:40:37 [INFO] POST /api/auth/login 200 225ms
2025-01-15 11:40:42 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 11:40:44 [INFO] GET /api/users 200 35ms
2025-01-15 11:40:48 [INFO] GET /api/health 200 2ms
2025-01-15 11:41:01 [WARN] Deprecated API version v1 called by client client-13
2025-01-15 11:41:05 [INFO] GET /api/users 200 41ms
2025-01-15 11:41:15 [INFO] POST /api/users 201 100ms
2025-01-15 11:41:16 [INFO] GET /api/users/165 200 7ms
2025-01-15 11:41:25 [WARN] Request body exceeded soft limit (3635KB)
2025-01-15 11:41:30 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:41:30 [DEBUG] Rows returned: 5
2025-01-15 11:41:32 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 11:41:32 [DEBUG] Rows returned: 9
2025-01-15 11:41:37 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:41:37 [DEBUG] Rows returned: 25
2025-01-15 11:41:49 [INFO] POST /api/users 409 12ms
2025-01-15 11:42:02 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 11:42:02 [DEBUG] New record created: id=263
2025-01-15 11:42:13 [INFO] POST /api/auth/login 401 73ms
2025-01-15 11:42:25 [INFO] GET /api/analytics/dashboard 200 780ms
2025-01-15 11:42:39 [INFO] PUT /api/users/16 200 56ms
2025-01-15 11:42:54 [INFO] GET /api/health 200 2ms
2025-01-15 11:43:05 [WARN] Rate limit approaching for IP 192.168.2.76 (82/100 requests in window)
2025-01-15 11:43:11 [INFO] DELETE /api/users/123 204 20ms
2025-01-15 11:43:12 [INFO] GET /api/health 200 1ms
2025-01-15 11:43:21 [INFO] GET /api/health 200 2ms
2025-01-15 11:43:31 [INFO] GET /api/roles 200 14ms
2025-01-15 11:43:38 [INFO] GET /api/users?role=editor 200 36ms
2025-01-15 11:43:45 [INFO] GET /api/users 200 25ms
2025-01-15 11:43:53 [INFO] GET /api/health 200 2ms
2025-01-15 11:44:05 [INFO] GET /api/health 200 1ms
2025-01-15 11:44:06 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 11:44:06 [DEBUG] New record created: id=193
2025-01-15 11:44:18 [INFO] GET /api/health 200 1ms
2025-01-15 11:44:24 [INFO] GET /api/analytics/dashboard 200 203ms
2025-01-15 11:44:35 [WARN] Deprecated API version v1 called by client client-15
2025-01-15 11:44:43 [INFO] PUT /api/settings 200 50ms
2025-01-15 11:44:54 [INFO] GET /api/health 200 1ms
2025-01-15 11:45:06 [INFO] PUT /api/settings 200 52ms
2025-01-15 11:45:07 [INFO] GET /api/users/78 200 19ms
2025-01-15 11:45:09 [INFO] POST /api/uploads 201 849ms
2025-01-15 11:45:22 [WARN] Rate limit approaching for IP 192.168.1.42 (90/100 requests in window)
2025-01-15 11:45:27 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 11:45:27 [DEBUG] Rows returned: 7
2025-01-15 11:45:38 [INFO] POST /api/uploads 201 1916ms
2025-01-15 11:45:44 [INFO] GET /api/health 200 3ms
2025-01-15 11:45:57 [WARN] Rate limit approaching for IP 192.168.7.234 (92/100 requests in window)
2025-01-15 11:46:01 [INFO] POST /api/roles 201 51ms
2025-01-15 11:46:13 [INFO] PUT /api/users/191 200 63ms
2025-01-15 11:46:16 [INFO] GET /api/health 200 2ms
2025-01-15 11:46:26 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 11:46:27 [INFO] PUT /api/users/100 200 89ms
2025-01-15 11:46:33 [INFO] GET /api/health 200 1ms
2025-01-15 11:46:42 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 11:46:46 [INFO] GET /api/health 200 1ms
2025-01-15 11:47:00 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 11:47:06 [INFO] GET /api/users/71 404 15ms
2025-01-15 11:47:11 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 11:47:11 [DEBUG] Rows returned: 3
2025-01-15 11:47:24 [INFO] PUT /api/users/188 200 89ms
2025-01-15 11:47:27 [INFO] GET /api/health 200 3ms
2025-01-15 11:47:34 [INFO] POST /api/users 409 23ms
2025-01-15 11:47:45 [INFO] GET /api/users?page=4&limit=25 200 29ms
2025-01-15 11:47:54 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 11:48:06 [WARN] Redis reconnection attempt 98/5
2025-01-15 11:48:09 [INFO] POST /api/auth/refresh 200 39ms
2025-01-15 11:48:13 [INFO] PUT /api/users/189 200 86ms
2025-01-15 11:48:27 [INFO] POST /api/users 201 87ms
2025-01-15 11:48:29 [INFO] GET /api/analytics/dashboard 200 727ms
2025-01-15 11:48:40 [INFO] POST /api/auth/login 401 54ms
2025-01-15 11:48:42 [INFO] GET /api/analytics/dashboard 200 291ms
2025-01-15 11:48:55 [INFO] POST /api/auth/login 200 102ms
2025-01-15 11:48:57 [INFO] GET /api/users/126 404 17ms
2025-01-15 11:49:07 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 11:49:15 [ERROR] Worker process crashed. Restarting...
2025-01-15 11:49:27 [WARN] Redis reconnection attempt 97/5
2025-01-15 11:49:36 [INFO] GET /api/health 200 3ms
2025-01-15 11:49:48 [INFO] GET /api/health 200 3ms
2025-01-15 11:49:50 [INFO] GET /api/health 200 1ms
2025-01-15 11:50:01 [INFO] GET /api/health 200 1ms
2025-01-15 11:50:15 [INFO] POST /api/users 409 13ms
2025-01-15 11:50:16 [INFO] PUT /api/users/168 200 75ms
2025-01-15 11:50:21 [INFO] GET /api/health 200 1ms
2025-01-15 11:50:23 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 11:50:34 [INFO] POST /api/roles 201 58ms
2025-01-15 11:50:37 [INFO] GET /api/users?role=viewer 200 32ms
2025-01-15 11:50:46 [INFO] GET /api/users/170 404 8ms
2025-01-15 11:50:50 [INFO] PUT /api/users/35 200 62ms
2025-01-15 11:50:55 [INFO] PUT /api/settings 200 36ms
2025-01-15 11:51:00 [INFO] POST /api/users 409 18ms
2025-01-15 11:51:11 [INFO] POST /api/users 201 114ms
2025-01-15 11:51:22 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 11:51:34 [INFO] GET /api/notifications 200 14ms
2025-01-15 11:51:40 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 11:51:45 [INFO] GET /api/users/176 404 13ms
2025-01-15 11:51:56 [INFO] GET /api/users?role=viewer 200 40ms
2025-01-15 11:52:00 [INFO] GET /api/users/97 404 9ms
2025-01-15 11:52:13 [WARN] Rate limit exceeded for IP 192.168.5.151. Returning 429.
2025-01-15 11:52:23 [INFO] GET /api/health 200 3ms
2025-01-15 11:52:28 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 11:52:28 [DEBUG] Rows returned: 10
2025-01-15 11:52:34 [WARN] Request body exceeded soft limit (1545KB)
2025-01-15 11:52:35 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:52:35 [DEBUG] Rows returned: 9
2025-01-15 11:52:46 [INFO] POST /api/auth/login 200 194ms
2025-01-15 11:52:58 [INFO] GET /api/health 200 3ms
2025-01-15 11:53:08 [INFO] POST /api/auth/refresh 200 59ms
2025-01-15 11:53:17 [INFO] POST /api/auth/login 401 61ms
2025-01-15 11:53:22 [INFO] GET /api/users?role=admin 200 38ms
2025-01-15 11:53:26 [WARN] Rate limit exceeded for IP 192.168.2.191. Returning 429.
2025-01-15 11:53:37 [INFO] POST /api/users 201 148ms
2025-01-15 11:53:49 [INFO] GET /api/health 200 3ms
2025-01-15 11:53:56 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:53:56 [DEBUG] Rows returned: 22
2025-01-15 11:54:00 [ERROR] Deadlock detected in transaction tx-32089
2025-01-15 11:54:00 [ERROR] Stack trace:
    at RoleService.getPermissions (src/services/role.service.ts:78)
    at AuthService.validateToken (src/services/auth.service.ts:273)
    at validateRequest (src/middleware/validation.ts:190)
    at authenticate (src/middleware/auth.ts:36)
2025-01-15 11:54:07 [INFO] POST /api/users 409 17ms
2025-01-15 11:54:21 [INFO] GET /api/users/75 404 12ms
2025-01-15 11:54:26 [INFO] GET /api/settings 200 5ms
2025-01-15 11:54:41 [INFO] PUT /api/settings 200 20ms
2025-01-15 11:54:51 [INFO] POST /api/roles 201 52ms
2025-01-15 11:55:06 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 11:55:06 [DEBUG] Rows returned: 22
2025-01-15 11:55:07 [INFO] GET /api/analytics/dashboard 200 726ms
2025-01-15 11:55:22 [INFO] GET /api/users/125 404 18ms
2025-01-15 11:55:27 [INFO] POST /api/auth/login 200 209ms
2025-01-15 11:55:42 [INFO] GET /api/roles 200 7ms
2025-01-15 11:55:45 [INFO] POST /api/auth/login 401 64ms
2025-01-15 11:55:49 [INFO] POST /api/users 201 84ms
2025-01-15 11:55:52 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 11:55:52 [DEBUG] Rows returned: 42
2025-01-15 11:55:57 [INFO] GET /api/analytics/dashboard 200 532ms
2025-01-15 11:56:10 [INFO] GET /api/health 200 2ms
2025-01-15 11:56:19 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 11:56:19 [DEBUG] Rows returned: 24
2025-01-15 11:56:22 [INFO] GET /api/users/6 404 13ms
2025-01-15 11:56:31 [INFO] DELETE /api/users/14 204 39ms
2025-01-15 11:56:43 [INFO] GET /api/analytics/dashboard 200 284ms
2025-01-15 11:56:56 [INFO] PUT /api/settings 200 37ms
2025-01-15 11:57:09 [INFO] GET /api/roles 200 8ms
2025-01-15 11:57:17 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 11:57:17 [DEBUG] Rows returned: 44
2025-01-15 11:57:29 [INFO] POST /api/users 409 13ms
2025-01-15 11:57:32 [INFO] GET /api/roles 200 5ms
2025-01-15 11:57:42 [INFO] GET /api/users 200 44ms
2025-01-15 11:57:54 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 11:57:58 [INFO] GET /api/analytics/dashboard 200 511ms
2025-01-15 11:58:00 [INFO] GET /api/roles 200 10ms
2025-01-15 11:58:15 [INFO] GET /api/users 200 38ms
2025-01-15 11:58:20 [INFO] PUT /api/settings 200 36ms
2025-01-15 11:58:28 [INFO] POST /api/roles 201 65ms
2025-01-15 11:58:41 [INFO] GET /api/health 200 2ms
2025-01-15 11:58:47 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 11:58:47 [DEBUG] Rows returned: 47
2025-01-15 11:59:00 [INFO] PUT /api/settings 200 33ms
2025-01-15 11:59:10 [INFO] GET /api/users/34 404 17ms
2025-01-15 11:59:25 [INFO] GET /api/health 200 1ms
2025-01-15 11:59:29 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 11:59:29 [DEBUG] Rows returned: 4
2025-01-15 11:59:38 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 11:59:50 [INFO] PUT /api/users/137 200 48ms
2025-01-15 11:59:54 [INFO] GET /api/roles 200 12ms
2025-01-15 12:00:05 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 12:00:05 [DEBUG] Rows returned: 4
2025-01-15 12:00:13 [INFO] GET /api/notifications 200 18ms
2025-01-15 12:00:25 [WARN] Memory usage at 87% of allocated heap
2025-01-15 12:00:27 [INFO] GET /api/notifications 200 29ms
2025-01-15 12:00:32 [INFO] GET /api/health 200 3ms
2025-01-15 12:00:33 [INFO] GET /api/health 200 3ms
2025-01-15 12:00:41 [INFO] GET /api/notifications 200 19ms
2025-01-15 12:00:53 [INFO] GET /api/users/44 404 16ms
2025-01-15 12:00:57 [INFO] POST /api/users 201 86ms
2025-01-15 12:01:08 [ERROR] Worker process crashed. Restarting...
2025-01-15 12:01:18 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 12:01:33 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 12:01:33 [DEBUG] Rows returned: 3
2025-01-15 12:01:44 [INFO] GET /api/health 200 2ms
2025-01-15 12:01:48 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 12:01:51 [INFO] GET /api/health 200 3ms
2025-01-15 12:01:56 [INFO] GET /api/health 200 3ms
2025-01-15 12:02:06 [INFO] POST /api/auth/refresh 200 43ms
2025-01-15 12:02:16 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 12:02:16 [DEBUG] Rows returned: 9
2025-01-15 12:02:24 [INFO] POST /api/auth/login 401 61ms
2025-01-15 12:02:32 [INFO] POST /api/users 409 25ms
2025-01-15 12:02:44 [INFO] POST /api/roles 201 41ms
2025-01-15 12:02:58 [INFO] PUT /api/settings 200 24ms
2025-01-15 12:03:05 [INFO] POST /api/auth/login 200 125ms
2025-01-15 12:03:12 [INFO] GET /api/users/4 404 11ms
2025-01-15 12:03:25 [INFO] POST /api/users 201 93ms
2025-01-15 12:03:34 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 12:03:34 [DEBUG] Rows returned: 45
2025-01-15 12:03:36 [INFO] GET /api/analytics/dashboard 200 514ms
2025-01-15 12:03:42 [INFO] DELETE /api/users/15 204 23ms
2025-01-15 12:03:43 [INFO] GET /api/health 200 1ms
2025-01-15 12:03:52 [INFO] GET /api/notifications 200 17ms
2025-01-15 12:03:53 [INFO] POST /api/auth/login 200 157ms
2025-01-15 12:04:08 [INFO] GET /api/health 200 2ms
2025-01-15 12:04:19 [INFO] GET /api/health 200 1ms
2025-01-15 12:04:27 [INFO] GET /api/users/58 404 13ms
2025-01-15 12:04:29 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 12:04:29 [DEBUG] Rows returned: 23
2025-01-15 12:04:44 [WARN] Rate limit approaching for IP 192.168.3.46 (93/100 requests in window)
2025-01-15 12:04:51 [INFO] POST /api/roles 201 36ms
2025-01-15 12:04:56 [WARN] Deprecated API version v1 called by client client-5
2025-01-15 12:05:03 [INFO] GET /api/analytics/dashboard 200 637ms
2025-01-15 12:05:15 [INFO] GET /api/users/83 200 17ms
2025-01-15 12:05:21 [INFO] POST /api/auth/login 401 92ms
2025-01-15 12:05:24 [INFO] GET /api/health 200 3ms
2025-01-15 12:05:39 [INFO] POST /api/auth/login 401 118ms
2025-01-15 12:05:47 [INFO] DELETE /api/users/99 204 42ms
2025-01-15 12:05:54 [INFO] DELETE /api/users/180 204 31ms
2025-01-15 12:05:55 [INFO] GET /api/health 200 1ms
2025-01-15 12:05:56 [WARN] Deprecated API version v1 called by client client-8
2025-01-15 12:05:57 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 12:05:57 [DEBUG] Rows returned: 44
2025-01-15 12:06:09 [INFO] GET /api/health 200 1ms
2025-01-15 12:06:21 [INFO] GET /api/settings 200 7ms
2025-01-15 12:06:22 [INFO] POST /api/users 201 81ms
2025-01-15 12:06:32 [INFO] GET /api/health 200 2ms
2025-01-15 12:06:35 [INFO] GET /api/health 200 2ms
2025-01-15 12:06:47 [INFO] GET /api/notifications 200 23ms
2025-01-15 12:06:59 [INFO] GET /api/health 200 1ms
2025-01-15 12:07:14 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 12:07:27 [INFO] POST /api/users 409 24ms
2025-01-15 12:07:36 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 12:07:51 [INFO] POST /api/roles 201 40ms
2025-01-15 12:07:56 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 12:08:06 [INFO] POST /api/auth/login 200 222ms
2025-01-15 12:08:12 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 12:08:12 [DEBUG] Rows returned: 24
2025-01-15 12:08:15 [INFO] GET /api/users?page=2&limit=25 200 42ms
2025-01-15 12:08:17 [INFO] GET /api/users?page=1&limit=25 200 40ms
2025-01-15 12:08:22 [INFO] GET /api/users/17 404 8ms
2025-01-15 12:08:35 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 12:08:48 [INFO] GET /api/users 200 25ms
2025-01-15 12:08:54 [INFO] GET /api/health 200 2ms
2025-01-15 12:09:03 [INFO] POST /api/auth/login 200 124ms
2025-01-15 12:09:09 [INFO] GET /api/notifications 200 28ms
2025-01-15 12:09:22 [INFO] GET /api/settings 200 7ms
2025-01-15 12:09:33 [INFO] GET /api/users/184 200 9ms
2025-01-15 12:09:46 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 12:09:46 [DEBUG] New record created: id=314
2025-01-15 12:09:58 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 12:09:58 [DEBUG] New record created: id=443
2025-01-15 12:10:04 [INFO] POST /api/users 201 135ms
2025-01-15 12:10:05 [INFO] GET /api/health 200 3ms
2025-01-15 12:10:12 [INFO] PUT /api/settings 200 51ms
2025-01-15 12:10:14 [INFO] GET /api/health 200 1ms
2025-01-15 12:10:27 [INFO] GET /api/health 200 3ms
2025-01-15 12:10:41 [WARN] Rate limit approaching for IP 192.168.8.81 (85/100 requests in window)
2025-01-15 12:10:51 [INFO] GET /api/users/19 200 13ms
2025-01-15 12:10:59 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 12:11:00 [INFO] POST /api/roles 201 38ms
2025-01-15 12:11:08 [INFO] PUT /api/settings 200 46ms
2025-01-15 12:11:17 [INFO] GET /api/users 200 69ms
2025-01-15 12:11:31 [INFO] POST /api/users 201 100ms
2025-01-15 12:11:41 [INFO] GET /api/users/58 200 7ms
2025-01-15 12:11:47 [INFO] POST /api/uploads 201 869ms
2025-01-15 12:11:59 [INFO] POST /api/auth/login 200 202ms
2025-01-15 12:12:05 [INFO] GET /api/users?role=moderator 200 37ms
2025-01-15 12:12:17 [INFO] GET /api/roles 200 7ms
2025-01-15 12:12:25 [INFO] PUT /api/users/82 200 89ms
2025-01-15 12:12:32 [INFO] GET /api/users?page=2&limit=25 200 28ms
2025-01-15 12:12:36 [INFO] GET /api/health 200 3ms
2025-01-15 12:12:43 [INFO] POST /api/users 409 18ms
2025-01-15 12:12:50 [INFO] POST /api/auth/refresh 200 41ms
2025-01-15 12:13:04 [INFO] POST /api/auth/login 401 75ms
2025-01-15 12:13:10 [WARN] JWT token expires in less than 60 seconds for user 3
2025-01-15 12:13:19 [INFO] GET /api/health 200 3ms
2025-01-15 12:13:23 [INFO] GET /api/settings 200 10ms
2025-01-15 12:13:24 [INFO] POST /api/auth/refresh 200 37ms
2025-01-15 12:13:37 [WARN] Request body exceeded soft limit (1298KB)
2025-01-15 12:13:41 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 12:13:48 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 12:13:48 [DEBUG] New record created: id=357
2025-01-15 12:13:55 [INFO] PUT /api/users/49 200 63ms
2025-01-15 12:13:56 [INFO] POST /api/roles 201 59ms
2025-01-15 12:14:03 [INFO] GET /api/users?page=5&limit=25 200 46ms
2025-01-15 12:14:05 [WARN] JWT token expires in less than 60 seconds for user 98
2025-01-15 12:14:10 [INFO] GET /api/health 200 3ms
2025-01-15 12:14:21 [INFO] POST /api/roles 201 36ms
2025-01-15 12:14:23 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 12:14:38 [INFO] GET /api/analytics/dashboard 200 715ms
2025-01-15 12:14:48 [INFO] GET /api/health 200 3ms
2025-01-15 12:14:53 [INFO] GET /api/health 200 1ms
2025-01-15 12:14:57 [INFO] GET /api/health 200 3ms
2025-01-15 12:15:04 [INFO] GET /api/analytics/dashboard 200 622ms
2025-01-15 12:15:19 [INFO] GET /api/health 200 3ms
2025-01-15 12:15:32 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 12:15:32 [DEBUG] Rows returned: 23
2025-01-15 12:15:45 [INFO] POST /api/roles 201 56ms
2025-01-15 12:15:56 [INFO] POST /api/auth/login 401 69ms
2025-01-15 12:16:09 [INFO] GET /api/notifications 200 15ms
2025-01-15 12:16:19 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 12:16:26 [INFO] GET /api/health 200 3ms
2025-01-15 12:16:33 [INFO] POST /api/auth/login 200 181ms
2025-01-15 12:16:42 [INFO] DELETE /api/users/26 204 23ms
2025-01-15 12:16:53 [INFO] POST /api/auth/login 200 140ms
2025-01-15 12:16:59 [INFO] GET /api/users/7 200 9ms
2025-01-15 12:17:00 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 12:17:00 [DEBUG] New record created: id=90
2025-01-15 12:17:10 [INFO] POST /api/users 201 110ms
2025-01-15 12:17:21 [INFO] GET /api/health 200 2ms
2025-01-15 12:17:25 [INFO] DELETE /api/users/186 204 41ms
2025-01-15 12:17:26 [INFO] POST /api/users 201 93ms
2025-01-15 12:17:28 [INFO] PUT /api/settings 200 38ms
2025-01-15 12:17:33 [INFO] GET /api/health 200 1ms
2025-01-15 12:17:35 [INFO] GET /api/users?page=1&limit=25 200 56ms
2025-01-15 12:17:48 [INFO] GET /api/users/125 200 18ms
2025-01-15 12:17:55 [INFO] GET /api/health 200 3ms
2025-01-15 12:18:10 [INFO] POST /api/users 409 15ms
2025-01-15 12:18:21 [INFO] PUT /api/settings 200 42ms
2025-01-15 12:18:29 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 12:18:44 [INFO] PUT /api/settings 200 52ms
2025-01-15 12:18:57 [INFO] GET /api/users?page=1&limit=25 200 45ms
2025-01-15 12:19:00 [INFO] POST /api/users 201 105ms
2025-01-15 12:19:02 [INFO] POST /api/uploads 201 1515ms
2025-01-15 12:19:09 [INFO] POST /api/auth/login 200 150ms
2025-01-15 12:19:20 [INFO] GET /api/health 200 3ms
2025-01-15 12:19:25 [WARN] Rate limit approaching for IP 192.168.10.80 (85/100 requests in window)
2025-01-15 12:19:32 [INFO] GET /api/roles 200 11ms
2025-01-15 12:19:39 [INFO] GET /api/users?page=4&limit=25 200 35ms
2025-01-15 12:19:54 [INFO] GET /api/notifications 200 29ms
2025-01-15 12:20:08 [INFO] GET /api/health 200 3ms
2025-01-15 12:20:14 [INFO] GET /api/users/47 404 10ms
2025-01-15 12:20:20 [INFO] PUT /api/users/169 200 49ms
2025-01-15 12:20:33 [INFO] GET /api/health 200 1ms
2025-01-15 12:20:41 [INFO] GET /api/users?role=admin 200 24ms
2025-01-15 12:20:51 [INFO] PUT /api/users/27 200 82ms
2025-01-15 12:20:53 [INFO] POST /api/auth/login 401 90ms
2025-01-15 12:20:57 [INFO] GET /api/analytics/dashboard 200 631ms
2025-01-15 12:20:59 [INFO] POST /api/users 409 22ms
2025-01-15 12:21:03 [INFO] POST /api/roles 201 48ms
2025-01-15 12:21:06 [INFO] GET /api/health 200 2ms
2025-01-15 12:21:07 [INFO] GET /api/health 200 3ms
2025-01-15 12:21:08 [INFO] GET /api/health 200 2ms
2025-01-15 12:21:20 [INFO] GET /api/users?role=viewer 200 17ms
2025-01-15 12:21:29 [INFO] GET /api/health 200 2ms
2025-01-15 12:21:39 [INFO] POST /api/roles 201 37ms
2025-01-15 12:21:53 [INFO] PUT /api/settings 200 23ms
2025-01-15 12:22:07 [INFO] GET /api/users/83 404 10ms
2025-01-15 12:22:09 [INFO] GET /api/users?page=1&limit=25 200 41ms
2025-01-15 12:22:24 [INFO] GET /api/health 200 1ms
2025-01-15 12:22:25 [WARN] Rate limit approaching for IP 192.168.10.203 (92/100 requests in window)
2025-01-15 12:22:33 [INFO] GET /api/users?role=moderator 200 36ms
2025-01-15 12:22:35 [INFO] DELETE /api/users/148 204 28ms
2025-01-15 12:22:41 [INFO] GET /api/health 200 2ms
2025-01-15 12:22:45 [INFO] POST /api/roles 201 65ms
2025-01-15 12:22:59 [INFO] GET /api/health 200 3ms
2025-01-15 12:23:10 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 12:23:22 [INFO] GET /api/analytics/dashboard 200 421ms
2025-01-15 12:23:30 [INFO] GET /api/health 200 1ms
2025-01-15 12:23:38 [INFO] PUT /api/users/152 200 85ms
2025-01-15 12:23:46 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 12:23:46 [DEBUG] New record created: id=104
2025-01-15 12:24:01 [INFO] GET /api/users?page=5&limit=25 200 57ms
2025-01-15 12:24:05 [INFO] GET /api/health 200 1ms
2025-01-15 12:24:07 [INFO] POST /api/users 409 13ms
2025-01-15 12:24:10 [INFO] GET /api/users/191 404 8ms
2025-01-15 12:24:25 [INFO] GET /api/roles 200 12ms
2025-01-15 12:24:31 [INFO] POST /api/uploads 201 934ms
2025-01-15 12:24:34 [INFO] POST /api/auth/login 401 106ms
2025-01-15 12:24:39 [INFO] GET /api/users 200 37ms
2025-01-15 12:24:44 [INFO] POST /api/users 409 25ms
2025-01-15 12:24:53 [INFO] GET /api/users 200 39ms
2025-01-15 12:24:55 [INFO] GET /api/users 200 29ms
2025-01-15 12:25:04 [INFO] DELETE /api/users/159 204 32ms
2025-01-15 12:25:06 [INFO] GET /api/roles 200 8ms
2025-01-15 12:25:12 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 12:25:12 [DEBUG] Rows returned: 38
2025-01-15 12:25:17 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 12:25:17 [DEBUG] Rows returned: 11
2025-01-15 12:25:26 [WARN] S3 upload retry after timeout (1813ms)
2025-01-15 12:25:29 [INFO] POST /api/auth/refresh 200 57ms
2025-01-15 12:25:35 [INFO] GET /api/roles 200 14ms
2025-01-15 12:25:41 [WARN] S3 upload retry after timeout (1300ms)
2025-01-15 12:25:50 [INFO] POST /api/users 201 118ms
2025-01-15 12:26:03 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 12:26:03 [DEBUG] Rows returned: 31
2025-01-15 12:26:15 [INFO] POST /api/uploads 201 1246ms
2025-01-15 12:26:23 [INFO] GET /api/users?page=5&limit=25 200 55ms
2025-01-15 12:26:25 [INFO] GET /api/notifications 200 23ms
2025-01-15 12:26:39 [INFO] POST /api/users 201 111ms
2025-01-15 12:26:49 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 12:26:49 [DEBUG] Rows returned: 23
2025-01-15 12:26:53 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 12:27:08 [WARN] Rate limit approaching for IP 192.168.9.231 (94/100 requests in window)
2025-01-15 12:27:14 [INFO] GET /api/health 200 2ms
2025-01-15 12:27:24 [INFO] GET /api/roles 200 14ms
2025-01-15 12:27:33 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 12:27:35 [INFO] POST /api/auth/refresh 200 37ms
2025-01-15 12:27:36 [INFO] POST /api/users 201 117ms
2025-01-15 12:27:46 [INFO] POST /api/users 409 12ms
2025-01-15 12:27:59 [INFO] POST /api/auth/refresh 200 67ms
2025-01-15 12:28:01 [INFO] POST /api/roles 201 30ms
2025-01-15 12:28:02 [INFO] GET /api/users?page=1&limit=25 200 42ms
2025-01-15 12:28:05 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 12:28:13 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 12:28:18 [INFO] POST /api/auth/login 401 67ms
2025-01-15 12:28:29 [INFO] GET /api/health 200 2ms
2025-01-15 12:28:32 [INFO] PUT /api/users/78 200 59ms
2025-01-15 12:28:42 [WARN] JWT token expires in less than 60 seconds for user 114
2025-01-15 12:28:54 [INFO] GET /api/users?page=4&limit=25 200 54ms
2025-01-15 12:29:01 [WARN] JWT token expires in less than 60 seconds for user 63
2025-01-15 12:29:11 [INFO] POST /api/users 201 130ms
2025-01-15 12:29:14 [INFO] GET /api/health 200 1ms
2025-01-15 12:29:15 [INFO] GET /api/users/86 404 17ms
2025-01-15 12:29:23 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 12:29:23 [DEBUG] Rows returned: 7
2025-01-15 12:29:35 [INFO] GET /api/notifications 200 26ms
2025-01-15 12:29:38 [INFO] GET /api/analytics/dashboard 200 508ms
2025-01-15 12:29:49 [INFO] GET /api/health 200 1ms
2025-01-15 12:29:50 [INFO] GET /api/users/134 404 11ms
2025-01-15 12:29:52 [INFO] GET /api/notifications 200 13ms
2025-01-15 12:29:57 [INFO] POST /api/users 409 24ms
2025-01-15 12:30:11 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 12:30:11 [DEBUG] Rows returned: 27
2025-01-15 12:30:14 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 12:30:14 [DEBUG] New record created: id=122
2025-01-15 12:30:28 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 12:30:31 [INFO] POST /api/uploads 201 1093ms
2025-01-15 12:30:36 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 12:30:44 [INFO] GET /api/roles 200 12ms
2025-01-15 12:30:51 [INFO] GET /api/health 200 1ms
2025-01-15 12:30:52 [INFO] GET /api/users/145 404 17ms
2025-01-15 12:30:57 [INFO] PUT /api/settings 200 28ms
2025-01-15 12:31:05 [INFO] GET /api/health 200 2ms
2025-01-15 12:31:10 [INFO] POST /api/users 409 22ms
2025-01-15 12:31:19 [INFO] POST /api/users 201 97ms
2025-01-15 12:31:24 [INFO] GET /api/health 200 3ms
2025-01-15 12:31:29 [WARN] Rate limit approaching for IP 192.168.7.247 (95/100 requests in window)
2025-01-15 12:31:40 [INFO] POST /api/users 201 124ms
2025-01-15 12:31:50 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 12:31:50 [DEBUG] Rows returned: 4
2025-01-15 12:31:51 [INFO] POST /api/users 409 25ms
2025-01-15 12:32:06 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 12:32:06 [DEBUG] Rows returned: 48
2025-01-15 12:32:10 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 12:32:25 [INFO] PUT /api/settings 200 24ms
2025-01-15 12:32:33 [INFO] GET /api/health 200 3ms
2025-01-15 12:32:44 [INFO] GET /api/health 200 1ms
2025-01-15 12:32:50 [INFO] POST /api/auth/refresh 200 65ms
2025-01-15 12:32:54 [INFO] GET /api/analytics/dashboard 200 406ms
2025-01-15 12:33:06 [INFO] GET /api/notifications 200 10ms
2025-01-15 12:33:17 [WARN] Rate limit approaching for IP 192.168.3.229 (80/100 requests in window)
2025-01-15 12:33:23 [INFO] GET /api/notifications 200 28ms
2025-01-15 12:33:37 [INFO] GET /api/users?page=1&limit=25 200 53ms
2025-01-15 12:33:44 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 12:33:44 [DEBUG] Rows returned: 36
2025-01-15 12:33:46 [INFO] GET /api/notifications 200 25ms
2025-01-15 12:33:50 [INFO] POST /api/uploads 201 1093ms
2025-01-15 12:34:05 [INFO] GET /api/health 200 2ms
2025-01-15 12:34:17 [INFO] POST /api/users 409 17ms
2025-01-15 12:34:31 [INFO] PUT /api/settings 200 23ms
2025-01-15 12:34:40 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 12:34:40 [DEBUG] Rows returned: 37
2025-01-15 12:34:48 [WARN] Memory usage at 83% of allocated heap
2025-01-15 12:34:49 [INFO] POST /api/uploads 201 982ms
2025-01-15 12:34:57 [INFO] GET /api/settings 200 6ms
2025-01-15 12:35:04 [INFO] PUT /api/settings 200 37ms
2025-01-15 12:35:16 [INFO] GET /api/users 200 52ms
2025-01-15 12:35:24 [INFO] DELETE /api/users/6 204 44ms
2025-01-15 12:35:37 [INFO] GET /api/health 200 3ms
2025-01-15 12:35:47 [INFO] GET /api/health 200 3ms
2025-01-15 12:35:58 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 12:35:58 [DEBUG] New record created: id=296
2025-01-15 12:35:59 [INFO] POST /api/auth/login 200 209ms
2025-01-15 12:36:08 [INFO] POST /api/auth/refresh 200 42ms
2025-01-15 12:36:14 [INFO] GET /api/users 200 62ms
2025-01-15 12:36:15 [INFO] POST /api/uploads 201 1974ms
2025-01-15 12:36:19 [INFO] GET /api/health 200 1ms
2025-01-15 12:36:20 [INFO] POST /api/users 409 21ms
2025-01-15 12:36:30 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 12:36:35 [INFO] POST /api/auth/login 200 119ms
2025-01-15 12:36:40 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 12:36:49 [INFO] DELETE /api/users/135 204 42ms
2025-01-15 12:36:58 [INFO] GET /api/users 200 56ms
2025-01-15 12:37:03 [INFO] POST /api/users 201 150ms
2025-01-15 12:37:07 [INFO] POST /api/users 201 138ms
2025-01-15 12:37:09 [INFO] GET /api/users 200 49ms
2025-01-15 12:37:14 [INFO] GET /api/health 200 1ms
2025-01-15 12:37:15 [INFO] PUT /api/settings 200 44ms
2025-01-15 12:37:22 [INFO] DELETE /api/users/53 204 41ms
2025-01-15 12:37:29 [INFO] POST /api/roles 201 68ms
2025-01-15 12:37:42 [INFO] GET /api/health 200 2ms
2025-01-15 12:37:55 [INFO] GET /api/health 200 1ms
2025-01-15 12:38:08 [INFO] PUT /api/settings 200 26ms
2025-01-15 12:38:17 [INFO] POST /api/roles 201 66ms
2025-01-15 12:38:29 [INFO] GET /api/notifications 200 24ms
2025-01-15 12:38:41 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 12:38:45 [INFO] GET /api/health 200 2ms
2025-01-15 12:38:51 [INFO] GET /api/users 200 42ms
2025-01-15 12:39:02 [INFO] PUT /api/settings 200 40ms
2025-01-15 12:39:16 [INFO] POST /api/users 409 24ms
2025-01-15 12:39:17 [INFO] GET /api/users?page=4&limit=25 200 28ms
2025-01-15 12:39:27 [WARN] Memory usage at 89% of allocated heap
2025-01-15 12:39:40 [INFO] GET /api/analytics/dashboard 200 350ms
2025-01-15 12:39:54 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 12:39:54 [DEBUG] Rows returned: 14
2025-01-15 12:39:56 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 12:39:56 [DEBUG] New record created: id=400
2025-01-15 12:40:05 [INFO] GET /api/health 200 3ms
2025-01-15 12:40:11 [INFO] DELETE /api/users/16 204 20ms
2025-01-15 12:40:22 [INFO] GET /api/health 200 2ms
2025-01-15 12:40:31 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 12:40:35 [INFO] GET /api/users/130 200 7ms
2025-01-15 12:40:39 [INFO] GET /api/settings 200 11ms
2025-01-15 12:40:54 [INFO] GET /api/health 200 2ms
2025-01-15 12:41:09 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 12:41:09 [DEBUG] Rows returned: 18
2025-01-15 12:41:19 [INFO] GET /api/users?page=2&limit=25 200 26ms
2025-01-15 12:41:21 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 12:41:21 [DEBUG] Rows returned: 32
2025-01-15 12:41:33 [INFO] GET /api/health 200 3ms
2025-01-15 12:41:46 [INFO] GET /api/users?page=5&limit=25 200 27ms
2025-01-15 12:41:57 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 12:41:57 [DEBUG] Rows returned: 48
2025-01-15 12:42:08 [INFO] GET /api/users/58 200 8ms
2025-01-15 12:42:22 [INFO] GET /api/health 200 1ms
2025-01-15 12:42:32 [INFO] GET /api/notifications 200 18ms
2025-01-15 12:42:36 [INFO] GET /api/health 200 2ms
2025-01-15 12:42:51 [INFO] DELETE /api/users/197 204 34ms
2025-01-15 12:42:57 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 12:42:57 [DEBUG] Rows returned: 44
2025-01-15 12:43:01 [INFO] POST /api/auth/login 401 114ms
2025-01-15 12:43:03 [WARN] JWT token expires in less than 60 seconds for user 138
2025-01-15 12:43:07 [INFO] GET /api/health 200 2ms
2025-01-15 12:43:18 [INFO] POST /api/users 201 123ms
2025-01-15 12:43:24 [INFO] POST /api/auth/login 401 113ms
2025-01-15 12:43:35 [INFO] GET /api/health 200 1ms
2025-01-15 12:43:50 [INFO] POST /api/auth/refresh 200 56ms
2025-01-15 12:43:55 [INFO] GET /api/health 200 3ms
2025-01-15 12:44:10 [INFO] GET /api/users/33 404 8ms
2025-01-15 12:44:22 [INFO] GET /api/users/34 200 16ms
2025-01-15 12:44:25 [INFO] POST /api/uploads 201 1189ms
2025-01-15 12:44:40 [INFO] GET /api/health 200 2ms
2025-01-15 12:44:50 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 12:44:50 [DEBUG] Rows returned: 46
2025-01-15 12:44:51 [INFO] GET /api/users?page=4&limit=25 200 52ms
2025-01-15 12:44:56 [INFO] GET /api/health 200 3ms
2025-01-15 12:44:59 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 12:44:59 [DEBUG] Rows returned: 49
2025-01-15 12:45:09 [WARN] Redis reconnection attempt 98/5
2025-01-15 12:45:17 [INFO] GET /api/settings 200 9ms
2025-01-15 12:45:25 [INFO] GET /api/settings 200 10ms
2025-01-15 12:45:32 [INFO] POST /api/users 409 23ms
2025-01-15 12:45:41 [INFO] PUT /api/settings 200 38ms
2025-01-15 12:45:44 [INFO] GET /api/roles 200 7ms
2025-01-15 12:45:49 [WARN] Memory usage at 83% of allocated heap
2025-01-15 12:45:58 [INFO] GET /api/health 200 1ms
2025-01-15 12:45:59 [INFO] GET /api/users 200 56ms
2025-01-15 12:46:13 [INFO] GET /api/health 200 2ms
2025-01-15 12:46:17 [INFO] GET /api/settings 200 7ms
2025-01-15 12:46:31 [INFO] GET /api/users/184 404 14ms
2025-01-15 12:46:39 [INFO] POST /api/users 201 90ms
2025-01-15 12:46:51 [INFO] GET /api/health 200 3ms
2025-01-15 12:46:53 [INFO] GET /api/notifications 200 30ms
2025-01-15 12:47:05 [INFO] GET /api/users/181 200 18ms
2025-01-15 12:47:07 [WARN] Redis reconnection attempt 100/5
2025-01-15 12:47:17 [INFO] DELETE /api/users/173 204 35ms
2025-01-15 12:47:20 [INFO] POST /api/users 409 14ms
2025-01-15 12:47:24 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 12:47:24 [DEBUG] Rows returned: 33
2025-01-15 12:47:38 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 12:47:39 [INFO] GET /api/analytics/dashboard 200 239ms
2025-01-15 12:47:46 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 12:47:53 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 12:48:04 [INFO] GET /api/notifications 200 17ms
2025-01-15 12:48:19 [INFO] GET /api/analytics/dashboard 200 565ms
2025-01-15 12:48:28 [INFO] GET /api/users/57 404 14ms
2025-01-15 12:48:36 [INFO] POST /api/auth/login 401 90ms
2025-01-15 12:48:47 [INFO] POST /api/auth/login 200 225ms
2025-01-15 12:48:57 [INFO] DELETE /api/users/8 204 36ms
2025-01-15 12:49:01 [INFO] GET /api/health 200 2ms
2025-01-15 12:49:02 [INFO] GET /api/users?role=viewer 200 27ms
2025-01-15 12:49:15 [INFO] POST /api/auth/login 200 224ms
2025-01-15 12:49:27 [INFO] GET /api/users 200 39ms
2025-01-15 12:49:37 [INFO] GET /api/health 200 3ms
2025-01-15 12:49:41 [INFO] GET /api/health 200 1ms
2025-01-15 12:49:51 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 12:49:51 [DEBUG] New record created: id=359
2025-01-15 12:50:00 [INFO] GET /api/health 200 2ms
2025-01-15 12:50:13 [INFO] GET /api/health 200 1ms
2025-01-15 12:50:24 [INFO] PUT /api/users/93 200 74ms
2025-01-15 12:50:31 [INFO] GET /api/health 200 1ms
2025-01-15 12:50:36 [INFO] GET /api/health 200 2ms
2025-01-15 12:50:42 [INFO] POST /api/uploads 201 573ms
2025-01-15 12:50:56 [INFO] GET /api/notifications 200 11ms
2025-01-15 12:50:59 [INFO] GET /api/health 200 2ms
2025-01-15 12:51:11 [INFO] POST /api/auth/login 200 169ms
2025-01-15 12:51:25 [INFO] GET /api/users/130 200 5ms
2025-01-15 12:51:37 [INFO] GET /api/health 200 3ms
2025-01-15 12:51:52 [INFO] GET /api/settings 200 9ms
2025-01-15 12:52:05 [INFO] GET /api/notifications 200 18ms
2025-01-15 12:52:13 [INFO] GET /api/roles 200 9ms
2025-01-15 12:52:20 [INFO] POST /api/auth/login 401 86ms
2025-01-15 12:52:35 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 12:52:35 [DEBUG] New record created: id=175
2025-01-15 12:52:42 [INFO] GET /api/analytics/dashboard 200 759ms
2025-01-15 12:52:54 [INFO] DELETE /api/users/148 204 44ms
2025-01-15 12:52:58 [INFO] GET /api/analytics/dashboard 200 540ms
2025-01-15 12:53:01 [INFO] GET /api/health 200 1ms
2025-01-15 12:53:03 [INFO] PUT /api/users/126 200 49ms
2025-01-15 12:53:10 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 12:53:10 [DEBUG] Rows returned: 33
2025-01-15 12:53:22 [INFO] GET /api/health 200 1ms
2025-01-15 12:53:23 [INFO] GET /api/health 200 2ms
2025-01-15 12:53:30 [INFO] GET /api/users?role=admin 200 37ms
2025-01-15 12:53:40 [INFO] GET /api/health 200 2ms
2025-01-15 12:53:49 [INFO] DELETE /api/users/83 204 36ms
2025-01-15 12:53:58 [INFO] GET /api/health 200 3ms
2025-01-15 12:54:00 [WARN] Request body exceeded soft limit (1495KB)
2025-01-15 12:54:04 [INFO] GET /api/users/10 404 10ms
2025-01-15 12:54:15 [INFO] GET /api/health 200 2ms
2025-01-15 12:54:18 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 12:54:18 [DEBUG] New record created: id=264
2025-01-15 12:54:25 [INFO] GET /api/users/112 404 16ms
2025-01-15 12:54:31 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 12:54:31 [DEBUG] Rows returned: 36
2025-01-15 12:54:42 [INFO] POST /api/roles 201 53ms
2025-01-15 12:54:51 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 12:54:51 [DEBUG] Rows returned: 29
2025-01-15 12:54:55 [WARN] Rate limit exceeded for IP 192.168.8.3. Returning 429.
2025-01-15 12:54:57 [ERROR] Database connection timeout after 5000ms
2025-01-15 12:55:05 [INFO] GET /api/users 200 35ms
2025-01-15 12:55:07 [INFO] POST /api/uploads 201 894ms
2025-01-15 12:55:12 [INFO] POST /api/auth/login 401 101ms
2025-01-15 12:55:27 [INFO] POST /api/uploads 201 1713ms
2025-01-15 12:55:30 [INFO] PUT /api/users/72 200 76ms
2025-01-15 12:55:32 [INFO] GET /api/notifications 200 28ms
2025-01-15 12:55:45 [INFO] GET /api/health 200 3ms
2025-01-15 12:55:50 [WARN] S3 upload retry after timeout (1269ms)
2025-01-15 12:55:53 [INFO] GET /api/analytics/dashboard 200 253ms
2025-01-15 12:55:56 [INFO] POST /api/auth/refresh 200 49ms
2025-01-15 12:56:05 [INFO] GET /api/health 200 1ms
2025-01-15 12:56:14 [INFO] POST /api/auth/login 200 179ms
2025-01-15 12:56:28 [INFO] GET /api/notifications 200 30ms
2025-01-15 12:56:42 [INFO] POST /api/users 201 112ms
2025-01-15 12:56:53 [INFO] POST /api/auth/login 401 53ms
2025-01-15 12:57:07 [INFO] POST /api/auth/refresh 200 43ms
2025-01-15 12:57:17 [INFO] PUT /api/users/98 200 87ms
2025-01-15 12:57:18 [INFO] GET /api/users?page=1&limit=25 200 44ms
2025-01-15 12:57:24 [INFO] GET /api/users?page=5&limit=25 200 42ms
2025-01-15 12:57:25 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 12:57:25 [DEBUG] Rows returned: 30
2025-01-15 12:57:32 [INFO] GET /api/roles 200 5ms
2025-01-15 12:57:46 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 12:57:46 [DEBUG] Rows returned: 38
2025-01-15 12:57:57 [INFO] POST /api/users 409 21ms
2025-01-15 12:57:58 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 12:57:58 [DEBUG] Rows returned: 9
2025-01-15 12:58:10 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 12:58:10 [DEBUG] New record created: id=92
2025-01-15 12:58:17 [INFO] GET /api/health 200 1ms
2025-01-15 12:58:18 [INFO] GET /api/users 200 42ms
2025-01-15 12:58:32 [INFO] PUT /api/settings 200 40ms
2025-01-15 12:58:47 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 12:58:59 [WARN] Redis reconnection attempt 81/5
2025-01-15 12:59:11 [INFO] POST /api/users 409 16ms
2025-01-15 12:59:23 [INFO] POST /api/users 409 18ms
2025-01-15 12:59:32 [INFO] GET /api/users?role=admin 200 29ms
2025-01-15 12:59:34 [INFO] GET /api/users/47 200 15ms
2025-01-15 12:59:44 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 12:59:44 [DEBUG] Rows returned: 49
2025-01-15 12:59:47 [INFO] GET /api/health 200 1ms
2025-01-15 12:59:58 [INFO] GET /api/users/186 200 11ms
2025-01-15 13:00:10 [INFO] GET /api/health 200 1ms
2025-01-15 13:00:15 [INFO] POST /api/roles 201 66ms
2025-01-15 13:00:21 [INFO] PUT /api/users/70 200 58ms
2025-01-15 13:00:26 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 13:00:28 [INFO] GET /api/settings 200 12ms
2025-01-15 13:00:42 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 13:00:42 [DEBUG] New record created: id=68
2025-01-15 13:00:56 [INFO] POST /api/users 201 124ms
2025-01-15 13:01:07 [INFO] GET /api/health 200 2ms
2025-01-15 13:01:11 [INFO] GET /api/notifications 200 26ms
2025-01-15 13:01:24 [INFO] PUT /api/users/120 200 47ms
2025-01-15 13:01:33 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 13:01:33 [DEBUG] New record created: id=293
2025-01-15 13:01:36 [INFO] GET /api/users?role=moderator 200 16ms
2025-01-15 13:01:42 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 13:01:42 [DEBUG] Rows returned: 22
2025-01-15 13:01:56 [WARN] Rate limit exceeded for IP 192.168.6.87. Returning 429.
2025-01-15 13:01:59 [INFO] POST /api/users 409 24ms
2025-01-15 13:02:09 [INFO] POST /api/auth/login 401 81ms
2025-01-15 13:02:14 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 13:02:20 [INFO] POST /api/auth/login 200 229ms
2025-01-15 13:02:22 [INFO] GET /api/roles 200 5ms
2025-01-15 13:02:25 [INFO] POST /api/roles 201 38ms
2025-01-15 13:02:28 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 13:02:28 [DEBUG] Rows returned: 5
2025-01-15 13:02:33 [INFO] GET /api/health 200 1ms
2025-01-15 13:02:46 [INFO] POST /api/auth/login 200 137ms
2025-01-15 13:02:50 [INFO] GET /api/health 200 2ms
2025-01-15 13:02:55 [INFO] DELETE /api/users/53 204 43ms
2025-01-15 13:02:59 [INFO] POST /api/uploads 201 1477ms
2025-01-15 13:03:02 [INFO] GET /api/analytics/dashboard 200 683ms
2025-01-15 13:03:13 [INFO] POST /api/auth/refresh 200 54ms
2025-01-15 13:03:16 [INFO] POST /api/users 201 134ms
2025-01-15 13:03:26 [INFO] GET /api/users/89 200 5ms
2025-01-15 13:03:30 [INFO] GET /api/health 200 1ms
2025-01-15 13:03:43 [INFO] GET /api/users?page=5&limit=25 200 50ms
2025-01-15 13:03:58 [INFO] DELETE /api/users/36 204 21ms
2025-01-15 13:04:02 [INFO] GET /api/users/87 200 18ms
2025-01-15 13:04:05 [INFO] POST /api/auth/login 200 166ms
2025-01-15 13:04:12 [INFO] POST /api/auth/login 200 121ms
2025-01-15 13:04:18 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 13:04:18 [DEBUG] Rows returned: 41
2025-01-15 13:04:32 [INFO] GET /api/health 200 3ms
2025-01-15 13:04:41 [INFO] POST /api/auth/refresh 200 57ms
2025-01-15 13:04:54 [INFO] POST /api/auth/login 401 107ms
2025-01-15 13:05:03 [INFO] GET /api/analytics/dashboard 200 573ms
2025-01-15 13:05:05 [INFO] GET /api/health 200 2ms
2025-01-15 13:05:14 [INFO] GET /api/health 200 3ms
2025-01-15 13:05:16 [INFO] GET /api/users?role=viewer 200 31ms
2025-01-15 13:05:30 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 13:05:30 [DEBUG] Rows returned: 27
2025-01-15 13:05:31 [INFO] GET /api/users 200 48ms
2025-01-15 13:05:32 [INFO] GET /api/health 200 3ms
2025-01-15 13:05:38 [INFO] GET /api/users?role=viewer 200 32ms
2025-01-15 13:05:43 [INFO] GET /api/users?page=4&limit=25 200 45ms
2025-01-15 13:05:48 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 13:05:50 [INFO] GET /api/users 200 36ms
2025-01-15 13:05:52 [INFO] POST /api/users 201 135ms
2025-01-15 13:06:07 [INFO] POST /api/auth/refresh 200 66ms
2025-01-15 13:06:15 [INFO] GET /api/users?role=admin 200 34ms
2025-01-15 13:06:27 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 13:06:27 [DEBUG] Rows returned: 24
2025-01-15 13:06:36 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 13:06:39 [WARN] Memory usage at 78% of allocated heap
2025-01-15 13:06:49 [INFO] DELETE /api/users/178 204 38ms
2025-01-15 13:06:57 [INFO] POST /api/auth/login 401 114ms
2025-01-15 13:07:08 [INFO] POST /api/auth/login 200 101ms
2025-01-15 13:07:15 [INFO] POST /api/auth/login 401 84ms
2025-01-15 13:07:23 [INFO] GET /api/users?role=editor 200 15ms
2025-01-15 13:07:35 [INFO] GET /api/users/157 200 19ms
2025-01-15 13:07:45 [INFO] PUT /api/settings 200 55ms
2025-01-15 13:07:46 [INFO] GET /api/users?role=moderator 200 29ms
2025-01-15 13:08:00 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 13:08:09 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 13:08:09 [DEBUG] Rows returned: 24
2025-01-15 13:08:14 [INFO] GET /api/settings 200 10ms
2025-01-15 13:08:16 [INFO] GET /api/notifications 200 34ms
2025-01-15 13:08:22 [INFO] POST /api/auth/refresh 200 67ms
2025-01-15 13:08:25 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 13:08:32 [INFO] GET /api/health 200 3ms
2025-01-15 13:08:40 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 13:08:42 [INFO] PUT /api/users/29 200 50ms
2025-01-15 13:08:55 [INFO] GET /api/health 200 3ms
2025-01-15 13:09:02 [INFO] GET /api/users?page=4&limit=25 200 42ms
2025-01-15 13:09:08 [INFO] GET /api/health 200 3ms
2025-01-15 13:09:10 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 13:09:10 [DEBUG] Rows returned: 40
2025-01-15 13:09:23 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 13:09:23 [DEBUG] New record created: id=324
2025-01-15 13:09:32 [INFO] POST /api/auth/login 200 215ms
2025-01-15 13:09:35 [WARN] Rate limit exceeded for IP 192.168.1.137. Returning 429.
2025-01-15 13:09:45 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 13:09:45 [DEBUG] Rows returned: 26
2025-01-15 13:09:49 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 13:09:53 [INFO] PUT /api/settings 200 46ms
2025-01-15 13:09:54 [INFO] DELETE /api/users/43 204 50ms
2025-01-15 13:10:00 [INFO] PUT /api/settings 200 52ms
2025-01-15 13:10:14 [INFO] POST /api/users 409 15ms
2025-01-15 13:10:22 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 13:10:26 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 13:10:26 [DEBUG] Rows returned: 15
2025-01-15 13:10:39 [INFO] POST /api/auth/refresh 200 51ms
2025-01-15 13:10:53 [WARN] Rate limit exceeded for IP 192.168.2.2. Returning 429.
2025-01-15 13:10:55 [INFO] GET /api/health 200 2ms
2025-01-15 13:11:10 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 13:11:10 [DEBUG] Rows returned: 45
2025-01-15 13:11:23 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 13:11:23 [DEBUG] New record created: id=415
2025-01-15 13:11:24 [INFO] GET /api/users 200 48ms
2025-01-15 13:11:31 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 13:11:31 [DEBUG] New record created: id=372
2025-01-15 13:11:42 [INFO] GET /api/users/27 404 17ms
2025-01-15 13:11:55 [INFO] GET /api/health 200 3ms
2025-01-15 13:11:58 [INFO] GET /api/users?role=editor 200 21ms
2025-01-15 13:12:03 [INFO] GET /api/users/118 200 13ms
2025-01-15 13:12:09 [INFO] POST /api/auth/refresh 200 66ms
2025-01-15 13:12:14 [INFO] POST /api/users 201 108ms
2025-01-15 13:12:29 [INFO] GET /api/users?page=3&limit=25 200 35ms
2025-01-15 13:12:39 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 13:12:39 [DEBUG] Rows returned: 45
2025-01-15 13:12:47 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 13:12:47 [DEBUG] New record created: id=430
2025-01-15 13:13:00 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 13:13:00 [DEBUG] New record created: id=361
2025-01-15 13:13:05 [INFO] GET /api/health 200 2ms
2025-01-15 13:13:16 [INFO] PUT /api/users/150 200 77ms
2025-01-15 13:13:17 [INFO] GET /api/notifications 200 29ms
2025-01-15 13:13:32 [INFO] GET /api/users?page=5&limit=25 200 57ms
2025-01-15 13:13:38 [INFO] POST /api/auth/login 200 223ms
2025-01-15 13:13:41 [INFO] POST /api/auth/login 200 157ms
2025-01-15 13:13:46 [INFO] POST /api/users 201 125ms
2025-01-15 13:13:54 [INFO] GET /api/health 200 2ms
2025-01-15 13:14:05 [INFO] GET /api/users/85 404 16ms
2025-01-15 13:14:14 [INFO] GET /api/health 200 3ms
2025-01-15 13:14:28 [INFO] GET /api/users 200 41ms
2025-01-15 13:14:41 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 13:14:41 [DEBUG] Rows returned: 41
2025-01-15 13:14:55 [INFO] POST /api/auth/refresh 200 47ms
2025-01-15 13:15:04 [INFO] PUT /api/users/188 200 73ms
2025-01-15 13:15:09 [INFO] DELETE /api/users/63 204 23ms
2025-01-15 13:15:18 [INFO] GET /api/health 200 1ms
2025-01-15 13:15:24 [INFO] GET /api/health 200 1ms
2025-01-15 13:15:28 [INFO] POST /api/auth/refresh 200 36ms
2025-01-15 13:15:37 [INFO] PUT /api/settings 200 20ms
2025-01-15 13:15:47 [INFO] GET /api/users/185 404 17ms
2025-01-15 13:16:00 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 13:16:00 [DEBUG] Rows returned: 0
2025-01-15 13:16:05 [INFO] GET /api/health 200 3ms
2025-01-15 13:16:10 [INFO] POST /api/users 409 19ms
2025-01-15 13:16:21 [INFO] POST /api/uploads 201 1888ms
2025-01-15 13:16:30 [INFO] POST /api/auth/refresh 200 30ms
2025-01-15 13:16:36 [INFO] GET /api/health 200 3ms
2025-01-15 13:16:44 [INFO] POST /api/users 409 13ms
2025-01-15 13:16:59 [INFO] GET /api/health 200 2ms
2025-01-15 13:17:10 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 13:17:10 [DEBUG] New record created: id=149
2025-01-15 13:17:23 [INFO] DELETE /api/users/55 204 29ms
2025-01-15 13:17:29 [INFO] GET /api/health 200 2ms
2025-01-15 13:17:31 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 13:17:35 [INFO] POST /api/users 201 130ms
2025-01-15 13:17:48 [INFO] POST /api/users 409 25ms
2025-01-15 13:17:59 [INFO] POST /api/auth/login 401 83ms
2025-01-15 13:18:07 [WARN] Memory usage at 85% of allocated heap
2025-01-15 13:18:17 [INFO] POST /api/auth/login 401 102ms
2025-01-15 13:18:23 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 13:18:23 [DEBUG] New record created: id=283
2025-01-15 13:18:36 [INFO] PUT /api/users/54 200 63ms
2025-01-15 13:18:37 [INFO] POST /api/auth/login 200 228ms
2025-01-15 13:18:45 [INFO] GET /api/health 200 1ms
2025-01-15 13:18:47 [INFO] GET /api/users?role=moderator 200 30ms
2025-01-15 13:18:48 [INFO] GET /api/health 200 2ms
2025-01-15 13:19:00 [WARN] JWT token expires in less than 60 seconds for user 164
2025-01-15 13:19:06 [INFO] GET /api/users?page=1&limit=25 200 55ms
2025-01-15 13:19:09 [INFO] GET /api/health 200 1ms
2025-01-15 13:19:15 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 13:19:19 [INFO] POST /api/auth/refresh 200 64ms
2025-01-15 13:19:32 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 13:19:32 [DEBUG] New record created: id=321
2025-01-15 13:19:46 [INFO] GET /api/health 200 2ms
2025-01-15 13:20:01 [INFO] GET /api/health 200 3ms
2025-01-15 13:20:16 [INFO] GET /api/users?role=editor 200 26ms
2025-01-15 13:20:22 [INFO] GET /api/roles 200 6ms
2025-01-15 13:20:33 [INFO] POST /api/auth/login 200 115ms
2025-01-15 13:20:48 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 13:21:01 [INFO] POST /api/roles 201 34ms
2025-01-15 13:21:11 [INFO] POST /api/uploads 201 824ms
2025-01-15 13:21:24 [INFO] GET /api/users/147 200 11ms
2025-01-15 13:21:37 [INFO] POST /api/auth/login 401 69ms
2025-01-15 13:21:48 [INFO] POST /api/users 409 23ms
2025-01-15 13:22:03 [INFO] GET /api/settings 200 11ms
2025-01-15 13:22:04 [INFO] GET /api/users?role=editor 200 22ms
2025-01-15 13:22:14 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 13:22:14 [DEBUG] Rows returned: 34
2025-01-15 13:22:22 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 13:22:35 [INFO] GET /api/health 200 2ms
2025-01-15 13:22:50 [INFO] GET /api/health 200 3ms
2025-01-15 13:22:53 [INFO] POST /api/users 201 92ms
2025-01-15 13:22:54 [INFO] GET /api/users 200 47ms
2025-01-15 13:22:56 [INFO] GET /api/users?role=editor 200 24ms
2025-01-15 13:22:59 [INFO] GET /api/roles 200 5ms
2025-01-15 13:23:02 [INFO] GET /api/health 200 2ms
2025-01-15 13:23:04 [INFO] GET /api/health 200 2ms
2025-01-15 13:23:05 [INFO] PUT /api/users/98 200 68ms
2025-01-15 13:23:12 [INFO] POST /api/auth/login 200 144ms
2025-01-15 13:23:21 [WARN] Redis reconnection attempt 95/5
2025-01-15 13:23:25 [INFO] GET /api/users/130 200 13ms
2025-01-15 13:23:34 [INFO] POST /api/auth/refresh 200 56ms
2025-01-15 13:23:41 [WARN] Rate limit approaching for IP 192.168.5.215 (82/100 requests in window)
2025-01-15 13:23:43 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 13:23:43 [DEBUG] Rows returned: 30
2025-01-15 13:23:44 [WARN] Memory usage at 82% of allocated heap
2025-01-15 13:23:53 [INFO] GET /api/analytics/dashboard 200 414ms
2025-01-15 13:24:07 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 13:24:13 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 13:24:13 [DEBUG] New record created: id=264
2025-01-15 13:24:16 [INFO] GET /api/notifications 200 13ms
2025-01-15 13:24:29 [INFO] GET /api/analytics/dashboard 200 582ms
2025-01-15 13:24:44 [INFO] GET /api/health 200 3ms
2025-01-15 13:24:50 [INFO] GET /api/health 200 1ms
2025-01-15 13:25:02 [INFO] GET /api/health 200 2ms
2025-01-15 13:25:03 [INFO] PUT /api/settings 200 26ms
2025-01-15 13:25:04 [INFO] DELETE /api/users/24 204 23ms
2025-01-15 13:25:12 [INFO] POST /api/auth/login 401 50ms
2025-01-15 13:25:17 [INFO] GET /api/roles 200 10ms
2025-01-15 13:25:27 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 13:25:27 [DEBUG] Rows returned: 30
2025-01-15 13:25:35 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 13:25:39 [INFO] GET /api/notifications 200 31ms
2025-01-15 13:25:41 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 13:25:41 [DEBUG] Rows returned: 25
2025-01-15 13:25:46 [INFO] GET /api/health 200 1ms
2025-01-15 13:25:50 [INFO] POST /api/users 409 24ms
2025-01-15 13:26:01 [INFO] GET /api/notifications 200 20ms
2025-01-15 13:26:08 [INFO] POST /api/users 201 86ms
2025-01-15 13:26:21 [INFO] POST /api/users 409 17ms
2025-01-15 13:26:24 [INFO] GET /api/health 200 2ms
2025-01-15 13:26:28 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 13:26:35 [INFO] PUT /api/users/117 200 68ms
2025-01-15 13:26:37 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 13:26:37 [DEBUG] Rows returned: 49
2025-01-15 13:26:46 [WARN] Deprecated API version v1 called by client client-15
2025-01-15 13:27:00 [INFO] GET /api/notifications 200 23ms
2025-01-15 13:27:11 [INFO] POST /api/uploads 201 1436ms
2025-01-15 13:27:25 [INFO] POST /api/uploads 201 1211ms
2025-01-15 13:27:30 [INFO] POST /api/uploads 201 1546ms
2025-01-15 13:27:34 [INFO] DELETE /api/users/199 204 43ms
2025-01-15 13:27:46 [INFO] PUT /api/settings 200 53ms
2025-01-15 13:27:55 [INFO] POST /api/uploads 201 841ms
2025-01-15 13:28:01 [INFO] POST /api/users 409 23ms
2025-01-15 13:28:15 [INFO] GET /api/users 200 58ms
2025-01-15 13:28:22 [INFO] GET /api/health 200 2ms
2025-01-15 13:28:28 [INFO] POST /api/roles 201 65ms
2025-01-15 13:28:39 [INFO] PUT /api/settings 200 46ms
2025-01-15 13:28:42 [INFO] POST /api/users 409 15ms
2025-01-15 13:28:53 [INFO] GET /api/settings 200 6ms
2025-01-15 13:28:57 [WARN] Memory usage at 79% of allocated heap
2025-01-15 13:29:08 [INFO] GET /api/users?role=admin 200 24ms
2025-01-15 13:29:17 [INFO] PUT /api/settings 200 39ms
2025-01-15 13:29:31 [INFO] PUT /api/settings 200 41ms
2025-01-15 13:29:46 [INFO] GET /api/users 200 65ms
2025-01-15 13:29:54 [INFO] POST /api/users 409 17ms
2025-01-15 13:30:03 [INFO] PUT /api/settings 200 51ms
2025-01-15 13:30:17 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 13:30:17 [DEBUG] Rows returned: 26
2025-01-15 13:30:18 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 13:30:32 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 13:30:47 [INFO] GET /api/notifications 200 21ms
2025-01-15 13:30:49 [INFO] GET /api/analytics/dashboard 200 644ms
2025-01-15 13:31:00 [INFO] GET /api/analytics/dashboard 200 731ms
2025-01-15 13:31:14 [WARN] Request body exceeded soft limit (1277KB)
2025-01-15 13:31:27 [INFO] GET /api/settings 200 5ms
2025-01-15 13:31:33 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 13:31:33 [DEBUG] Rows returned: 29
2025-01-15 13:31:43 [INFO] GET /api/health 200 1ms
2025-01-15 13:31:50 [INFO] GET /api/health 200 3ms
2025-01-15 13:32:02 [INFO] GET /api/health 200 3ms
2025-01-15 13:32:17 [INFO] GET /api/settings 200 6ms
2025-01-15 13:32:22 [WARN] Slow query detected: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY creat (took 1235ms)
2025-01-15 13:32:35 [INFO] POST /api/auth/refresh 200 43ms
2025-01-15 13:32:44 [INFO] GET /api/health 200 3ms
2025-01-15 13:32:55 [INFO] POST /api/auth/login 200 227ms
2025-01-15 13:33:09 [INFO] GET /api/users?page=3&limit=25 200 44ms
2025-01-15 13:33:11 [WARN] Rate limit approaching for IP 192.168.6.160 (95/100 requests in window)
2025-01-15 13:33:16 [INFO] GET /api/health 200 2ms
2025-01-15 13:33:22 [INFO] POST /api/auth/refresh 200 50ms
2025-01-15 13:33:23 [INFO] GET /api/settings 200 7ms
2025-01-15 13:33:30 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 13:33:30 [DEBUG] Rows returned: 12
2025-01-15 13:33:32 [INFO] PUT /api/settings 200 29ms
2025-01-15 13:33:44 [INFO] GET /api/users?page=4&limit=25 200 31ms
2025-01-15 13:33:58 [WARN] Memory usage at 89% of allocated heap
2025-01-15 13:34:01 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 13:34:02 [INFO] DELETE /api/users/63 204 40ms
2025-01-15 13:34:15 [INFO] GET /api/health 200 3ms
2025-01-15 13:34:23 [INFO] GET /api/health 200 2ms
2025-01-15 13:34:32 [INFO] GET /api/settings 200 11ms
2025-01-15 13:34:43 [INFO] POST /api/auth/login 200 167ms
2025-01-15 13:34:50 [INFO] DELETE /api/users/82 204 50ms
2025-01-15 13:35:02 [INFO] DELETE /api/users/138 204 49ms
2025-01-15 13:35:15 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 13:35:27 [INFO] POST /api/uploads 201 1676ms
2025-01-15 13:35:41 [INFO] PUT /api/settings 200 47ms
2025-01-15 13:35:43 [WARN] Rate limit exceeded for IP 192.168.8.144. Returning 429.
2025-01-15 13:35:46 [INFO] GET /api/users?page=5&limit=25 200 41ms
2025-01-15 13:36:01 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 13:36:01 [DEBUG] Rows returned: 38
2025-01-15 13:36:09 [INFO] POST /api/users 201 119ms
2025-01-15 13:36:18 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 13:36:24 [INFO] GET /api/notifications 200 31ms
2025-01-15 13:36:34 [INFO] GET /api/health 200 3ms
2025-01-15 13:36:36 [INFO] GET /api/health 200 1ms
2025-01-15 13:36:46 [INFO] POST /api/auth/login 401 81ms
2025-01-15 13:36:56 [INFO] GET /api/health 200 1ms
2025-01-15 13:37:10 [INFO] GET /api/analytics/dashboard 200 291ms
2025-01-15 13:37:12 [WARN] S3 upload retry after timeout (1703ms)
2025-01-15 13:37:15 [INFO] GET /api/users?page=3&limit=25 200 56ms
2025-01-15 13:37:17 [INFO] POST /api/auth/login 200 120ms
2025-01-15 13:37:23 [INFO] GET /api/users/135 404 17ms
2025-01-15 13:37:24 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 13:37:33 [INFO] GET /api/users?role=viewer 200 40ms
2025-01-15 13:37:48 [INFO] GET /api/users?page=2&limit=25 200 56ms
2025-01-15 13:37:51 [INFO] GET /api/users?page=5&limit=25 200 48ms
2025-01-15 13:38:01 [INFO] POST /api/auth/refresh 200 39ms
2025-01-15 13:38:15 [INFO] GET /api/health 200 1ms
2025-01-15 13:38:25 [INFO] POST /api/uploads 201 720ms
2025-01-15 13:38:31 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 13:38:40 [INFO] GET /api/users/128 404 10ms
2025-01-15 13:38:50 [WARN] JWT token expires in less than 60 seconds for user 87
2025-01-15 13:38:54 [INFO] DELETE /api/users/126 204 21ms
2025-01-15 13:39:00 [INFO] GET /api/analytics/dashboard 200 293ms
2025-01-15 13:39:11 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 13:39:11 [DEBUG] New record created: id=338
2025-01-15 13:39:21 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 13:39:21 [DEBUG] New record created: id=251
2025-01-15 13:39:34 [INFO] PUT /api/users/73 200 68ms
2025-01-15 13:39:47 [INFO] POST /api/auth/login 401 60ms
2025-01-15 13:39:55 [INFO] GET /api/users/83 404 14ms
2025-01-15 13:40:00 [INFO] POST /api/roles 201 32ms
2025-01-15 13:40:04 [WARN] Memory usage at 95% of allocated heap
2025-01-15 13:40:05 [INFO] POST /api/roles 201 64ms
2025-01-15 13:40:06 [INFO] GET /api/health 200 3ms
2025-01-15 13:40:20 [INFO] GET /api/notifications 200 21ms
2025-01-15 13:40:31 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 13:40:33 [INFO] POST /api/users 409 16ms
2025-01-15 13:40:41 [INFO] PUT /api/settings 200 33ms
2025-01-15 13:40:56 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 13:40:57 [WARN] Deprecated API version v1 called by client client-5
2025-01-15 13:41:01 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 13:41:16 [WARN] S3 upload retry after timeout (1582ms)
2025-01-15 13:41:30 [INFO] GET /api/roles 200 14ms
2025-01-15 13:41:31 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 13:41:31 [DEBUG] Rows returned: 2
2025-01-15 13:41:43 [INFO] GET /api/health 200 1ms
2025-01-15 13:41:54 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 13:41:54 [DEBUG] Rows returned: 40
2025-01-15 13:41:56 [INFO] GET /api/analytics/dashboard 200 535ms
2025-01-15 13:41:59 [WARN] Memory usage at 84% of allocated heap
2025-01-15 13:42:12 [INFO] PUT /api/users/23 200 48ms
2025-01-15 13:42:21 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 13:42:35 [INFO] GET /api/users/196 200 18ms
2025-01-15 13:42:45 [INFO] POST /api/users 201 104ms
2025-01-15 13:42:58 [INFO] GET /api/users?role=admin 200 25ms
2025-01-15 13:43:12 [WARN] Rate limit exceeded for IP 192.168.4.231. Returning 429.
2025-01-15 13:43:17 [INFO] DELETE /api/users/48 204 41ms
2025-01-15 13:43:29 [INFO] POST /api/auth/refresh 200 63ms
2025-01-15 13:43:34 [INFO] POST /api/users 201 94ms
2025-01-15 13:43:45 [INFO] GET /api/notifications 200 33ms
2025-01-15 13:43:48 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 13:43:48 [DEBUG] Rows returned: 23
2025-01-15 13:43:49 [INFO] GET /api/users/176 404 14ms
2025-01-15 13:43:50 [INFO] POST /api/auth/login 200 109ms
2025-01-15 13:44:00 [INFO] GET /api/health 200 3ms
2025-01-15 13:44:07 [INFO] PUT /api/settings 200 51ms
2025-01-15 13:44:17 [INFO] POST /api/auth/refresh 200 64ms
2025-01-15 13:44:32 [INFO] POST /api/users 201 112ms
2025-01-15 13:44:47 [INFO] GET /api/health 200 1ms
2025-01-15 13:44:55 [INFO] POST /api/uploads 201 1783ms
2025-01-15 13:45:01 [INFO] POST /api/auth/login 200 215ms
2025-01-15 13:45:09 [WARN] JWT token expires in less than 60 seconds for user 63
2025-01-15 13:45:13 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 13:45:17 [WARN] S3 upload retry after timeout (1248ms)
2025-01-15 13:45:20 [INFO] POST /api/uploads 201 1777ms
2025-01-15 13:45:27 [INFO] PUT /api/users/87 200 73ms
2025-01-15 13:45:34 [INFO] POST /api/auth/refresh 200 66ms
2025-01-15 13:45:45 [INFO] GET /api/settings 200 8ms
2025-01-15 13:45:48 [INFO] POST /api/auth/refresh 200 50ms
2025-01-15 13:45:58 [WARN] S3 upload retry after timeout (1805ms)
2025-01-15 13:46:13 [INFO] GET /api/health 200 1ms
2025-01-15 13:46:19 [INFO] GET /api/health 200 2ms
2025-01-15 13:46:34 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 13:46:49 [INFO] GET /api/health 200 2ms
2025-01-15 13:46:55 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 13:47:00 [INFO] POST /api/uploads 201 1350ms
2025-01-15 13:47:02 [INFO] PUT /api/settings 200 55ms
2025-01-15 13:47:13 [INFO] GET /api/roles 200 15ms
2025-01-15 13:47:16 [WARN] Rate limit approaching for IP 192.168.7.122 (92/100 requests in window)
2025-01-15 13:47:28 [ERROR] Unhandled exception in GET /api/users?page=1&limit=25: DatabaseError
2025-01-15 13:47:28 [ERROR] Stack trace:
    at validateRequest (src/middleware/validation.ts:79)
    at AuthService.validateToken (src/services/auth.service.ts:163)
    at processTicksAndRejections (node:internal/process/task_queues:211)
    at UserService.findById (src/services/user.service.ts:86)
    at Layer.handle (node_modules/express/lib/router/layer.js:66)
2025-01-15 13:47:43 [INFO] GET /api/health 200 3ms
2025-01-15 13:47:47 [WARN] Deprecated API version v1 called by client client-1
2025-01-15 13:47:53 [INFO] GET /api/health 200 1ms
2025-01-15 13:48:02 [INFO] GET /api/notifications 200 15ms
2025-01-15 13:48:03 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 13:48:03 [DEBUG] Rows returned: 19
2025-01-15 13:48:08 [INFO] POST /api/auth/login 401 108ms
2025-01-15 13:48:19 [INFO] POST /api/uploads 201 521ms
2025-01-15 13:48:31 [INFO] POST /api/roles 201 54ms
2025-01-15 13:48:38 [INFO] GET /api/roles 200 10ms
2025-01-15 13:48:51 [INFO] POST /api/auth/login 401 94ms
2025-01-15 13:49:03 [INFO] PUT /api/users/126 200 45ms
2025-01-15 13:49:18 [INFO] GET /api/users/171 200 8ms
2025-01-15 13:49:19 [INFO] GET /api/health 200 1ms
2025-01-15 13:49:23 [INFO] GET /api/users?page=5&limit=25 200 40ms
2025-01-15 13:49:36 [INFO] GET /api/users/3 200 7ms
2025-01-15 13:49:39 [INFO] POST /api/auth/refresh 200 69ms
2025-01-15 13:49:41 [INFO] POST /api/users 201 91ms
2025-01-15 13:49:53 [WARN] Slow query detected: SELECT * FROM users WHERE role_id = $1 AND active = true (took 1921ms)
2025-01-15 13:50:02 [INFO] PUT /api/users/182 200 85ms
2025-01-15 13:50:05 [INFO] GET /api/settings 200 5ms
2025-01-15 13:50:07 [INFO] PUT /api/users/68 200 76ms
2025-01-15 13:50:11 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 13:50:11 [DEBUG] Rows returned: 48
2025-01-15 13:50:13 [INFO] GET /api/users?role=editor 200 27ms
2025-01-15 13:50:24 [INFO] GET /api/health 200 2ms
2025-01-15 13:50:34 [INFO] POST /api/roles 201 52ms
2025-01-15 13:50:46 [INFO] GET /api/health 200 1ms
2025-01-15 13:50:48 [INFO] GET /api/analytics/dashboard 200 640ms
2025-01-15 13:50:50 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 13:50:50 [DEBUG] Rows returned: 28
2025-01-15 13:50:51 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 13:50:53 [INFO] GET /api/users?role=viewer 200 26ms
2025-01-15 13:51:01 [INFO] GET /api/analytics/dashboard 200 374ms
2025-01-15 13:51:02 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 13:51:02 [DEBUG] Rows returned: 29
2025-01-15 13:51:17 [INFO] POST /api/auth/login 200 139ms
2025-01-15 13:51:20 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 13:51:20 [DEBUG] Rows returned: 26
2025-01-15 13:51:21 [INFO] GET /api/health 200 2ms
2025-01-15 13:51:28 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 13:51:43 [INFO] GET /api/settings 200 5ms
2025-01-15 13:51:50 [INFO] GET /api/roles 200 12ms
2025-01-15 13:51:57 [INFO] POST /api/uploads 201 1496ms
2025-01-15 13:52:07 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 13:52:07 [DEBUG] Rows returned: 27
2025-01-15 13:52:21 [INFO] GET /api/users 200 45ms
2025-01-15 13:52:33 [INFO] POST /api/roles 201 61ms
2025-01-15 13:52:46 [INFO] GET /api/analytics/dashboard 200 546ms
2025-01-15 13:52:57 [INFO] PUT /api/settings 200 28ms
2025-01-15 13:53:06 [INFO] GET /api/users?page=3&limit=25 200 55ms
2025-01-15 13:53:08 [INFO] GET /api/users?page=2&limit=25 200 45ms
2025-01-15 13:53:20 [INFO] GET /api/users?role=moderator 200 32ms
2025-01-15 13:53:26 [INFO] GET /api/users?role=editor 200 25ms
2025-01-15 13:53:39 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 13:53:51 [INFO] DELETE /api/users/64 204 35ms
2025-01-15 13:54:06 [INFO] GET /api/notifications 200 29ms
2025-01-15 13:54:12 [INFO] GET /api/analytics/dashboard 200 660ms
2025-01-15 13:54:19 [INFO] GET /api/health 200 2ms
2025-01-15 13:54:31 [INFO] GET /api/users 200 65ms
2025-01-15 13:54:32 [INFO] PUT /api/settings 200 40ms
2025-01-15 13:54:40 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 13:54:50 [INFO] GET /api/users 200 76ms
2025-01-15 13:54:59 [INFO] POST /api/auth/login 200 166ms
2025-01-15 13:55:03 [INFO] GET /api/health 200 2ms
2025-01-15 13:55:11 [INFO] GET /api/health 200 1ms
2025-01-15 13:55:19 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 13:55:19 [DEBUG] New record created: id=130
2025-01-15 13:55:29 [INFO] GET /api/users?role=viewer 200 23ms
2025-01-15 13:55:33 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 13:55:33 [DEBUG] Rows returned: 18
2025-01-15 13:55:36 [INFO] GET /api/users?role=admin 200 25ms
2025-01-15 13:55:45 [INFO] POST /api/users 201 83ms
2025-01-15 13:55:56 [INFO] GET /api/users?role=editor 200 34ms
2025-01-15 13:56:10 [INFO] GET /api/health 200 3ms
2025-01-15 13:56:15 [INFO] GET /api/settings 200 12ms
2025-01-15 13:56:17 [WARN] Rate limit exceeded for IP 192.168.9.42. Returning 429.
2025-01-15 13:56:19 [INFO] GET /api/users/127 200 6ms
2025-01-15 13:56:28 [INFO] POST /api/auth/login 200 122ms
2025-01-15 13:56:42 [INFO] POST /api/users 409 17ms
2025-01-15 13:56:43 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 13:56:43 [DEBUG] New record created: id=62
2025-01-15 13:56:44 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 13:56:44 [DEBUG] Rows returned: 14
2025-01-15 13:56:52 [INFO] DELETE /api/users/195 204 50ms
2025-01-15 13:57:06 [INFO] GET /api/users?role=moderator 200 15ms
2025-01-15 13:57:15 [INFO] GET /api/health 200 2ms
2025-01-15 13:57:16 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 13:57:16 [DEBUG] Rows returned: 26
2025-01-15 13:57:25 [INFO] PUT /api/users/151 200 54ms
2025-01-15 13:57:35 [INFO] GET /api/users?page=5&limit=25 200 48ms
2025-01-15 13:57:44 [INFO] GET /api/health 200 1ms
2025-01-15 13:57:51 [INFO] POST /api/uploads 201 1639ms
2025-01-15 13:57:57 [INFO] POST /api/users 409 16ms
2025-01-15 13:58:03 [INFO] GET /api/health 200 2ms
2025-01-15 13:58:05 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 13:58:05 [DEBUG] Rows returned: 1
2025-01-15 13:58:13 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 13:58:13 [DEBUG] Rows returned: 42
2025-01-15 13:58:22 [INFO] GET /api/health 200 1ms
2025-01-15 13:58:25 [INFO] POST /api/auth/login 200 245ms
2025-01-15 13:58:37 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 13:58:37 [DEBUG] Rows returned: 43
2025-01-15 13:58:41 [INFO] GET /api/health 200 2ms
2025-01-15 13:58:47 [INFO] DELETE /api/users/146 204 36ms
2025-01-15 13:58:48 [INFO] PUT /api/users/47 200 71ms
2025-01-15 13:59:00 [INFO] GET /api/users?role=moderator 200 39ms
2025-01-15 13:59:03 [WARN] JWT token expires in less than 60 seconds for user 1
2025-01-15 13:59:17 [INFO] GET /api/users 200 44ms
2025-01-15 13:59:25 [INFO] GET /api/settings 200 10ms
2025-01-15 13:59:29 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 13:59:29 [DEBUG] Rows returned: 47
2025-01-15 13:59:44 [INFO] GET /api/roles 200 5ms
2025-01-15 13:59:59 [INFO] POST /api/users 201 95ms
2025-01-15 14:00:14 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 14:00:14 [DEBUG] Rows returned: 50
2025-01-15 14:00:15 [INFO] GET /api/health 200 2ms
2025-01-15 14:00:18 [INFO] GET /api/users/186 200 13ms
2025-01-15 14:00:23 [INFO] GET /api/settings 200 8ms
2025-01-15 14:00:25 [INFO] POST /api/auth/login 200 210ms
2025-01-15 14:00:39 [INFO] POST /api/users 409 18ms
2025-01-15 14:00:51 [INFO] GET /api/analytics/dashboard 200 478ms
2025-01-15 14:01:05 [INFO] POST /api/auth/refresh 200 57ms
2025-01-15 14:01:14 [WARN] JWT token expires in less than 60 seconds for user 117
2025-01-15 14:01:28 [INFO] POST /api/users 409 14ms
2025-01-15 14:01:34 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 14:01:34 [DEBUG] Rows returned: 26
2025-01-15 14:01:37 [INFO] GET /api/users?page=3&limit=25 200 34ms
2025-01-15 14:01:51 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 14:01:51 [DEBUG] Rows returned: 43
2025-01-15 14:02:00 [INFO] POST /api/auth/login 401 92ms
2025-01-15 14:02:15 [INFO] POST /api/auth/refresh 200 51ms
2025-01-15 14:02:24 [WARN] Rate limit exceeded for IP 192.168.9.162. Returning 429.
2025-01-15 14:02:31 [INFO] POST /api/auth/login 401 63ms
2025-01-15 14:02:41 [INFO] POST /api/uploads 201 1900ms
2025-01-15 14:02:53 [INFO] GET /api/health 200 2ms
2025-01-15 14:02:55 [INFO] GET /api/users?page=5&limit=25 200 50ms
2025-01-15 14:02:59 [INFO] POST /api/auth/login 401 108ms
2025-01-15 14:03:02 [INFO] GET /api/health 200 1ms
2025-01-15 14:03:14 [INFO] GET /api/notifications 200 12ms
2025-01-15 14:03:26 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 14:03:27 [INFO] PUT /api/users/48 200 56ms
2025-01-15 14:03:35 [WARN] Request body exceeded soft limit (3676KB)
2025-01-15 14:03:39 [INFO] PUT /api/settings 200 22ms
2025-01-15 14:03:50 [INFO] GET /api/users 200 26ms
2025-01-15 14:03:55 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 14:03:55 [DEBUG] Rows returned: 48
2025-01-15 14:04:04 [INFO] GET /api/health 200 2ms
2025-01-15 14:04:16 [INFO] GET /api/users?page=1&limit=25 200 49ms
2025-01-15 14:04:17 [WARN] Rate limit approaching for IP 192.168.9.24 (82/100 requests in window)
2025-01-15 14:04:29 [INFO] PUT /api/settings 200 39ms
2025-01-15 14:04:38 [INFO] GET /api/health 200 2ms
2025-01-15 14:04:42 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 14:04:42 [DEBUG] Rows returned: 0
2025-01-15 14:04:53 [INFO] GET /api/health 200 3ms
2025-01-15 14:04:56 [INFO] GET /api/settings 200 6ms
2025-01-15 14:05:08 [INFO] POST /api/users 409 11ms
2025-01-15 14:05:13 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 14:05:13 [DEBUG] Rows returned: 7
2025-01-15 14:05:24 [INFO] GET /api/users/51 200 12ms
2025-01-15 14:05:25 [INFO] POST /api/users 409 19ms
2025-01-15 14:05:28 [INFO] GET /api/settings 200 6ms
2025-01-15 14:05:30 [INFO] POST /api/users 201 143ms
2025-01-15 14:05:36 [INFO] GET /api/health 200 2ms
2025-01-15 14:05:37 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 14:05:37 [DEBUG] Rows returned: 23
2025-01-15 14:05:48 [INFO] POST /api/auth/login 401 105ms
2025-01-15 14:05:57 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 14:05:57 [DEBUG] Rows returned: 4
2025-01-15 14:05:59 [INFO] GET /api/users?page=5&limit=25 200 40ms
2025-01-15 14:06:14 [WARN] Rate limit exceeded for IP 192.168.3.23. Returning 429.
2025-01-15 14:06:23 [INFO] GET /api/roles 200 14ms
2025-01-15 14:06:30 [INFO] GET /api/users 200 44ms
2025-01-15 14:06:33 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 14:06:33 [DEBUG] Rows returned: 0
2025-01-15 14:06:39 [INFO] GET /api/health 200 3ms
2025-01-15 14:06:40 [INFO] POST /api/users 201 107ms
2025-01-15 14:06:44 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 14:06:44 [DEBUG] Rows returned: 30
2025-01-15 14:06:48 [INFO] POST /api/auth/login 200 132ms
2025-01-15 14:07:02 [INFO] GET /api/users/123 200 10ms
2025-01-15 14:07:06 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 14:07:06 [DEBUG] Rows returned: 40
2025-01-15 14:07:12 [WARN] Memory usage at 87% of allocated heap
2025-01-15 14:07:24 [WARN] Request body exceeded soft limit (4674KB)
2025-01-15 14:07:35 [INFO] GET /api/health 200 3ms
2025-01-15 14:07:38 [INFO] GET /api/notifications 200 23ms
2025-01-15 14:07:48 [INFO] GET /api/users/144 200 6ms
2025-01-15 14:07:54 [INFO] GET /api/roles 200 13ms
2025-01-15 14:08:04 [INFO] POST /api/roles 201 67ms
2025-01-15 14:08:16 [INFO] PUT /api/settings 200 41ms
2025-01-15 14:08:18 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 14:08:18 [DEBUG] Rows returned: 34
2025-01-15 14:08:27 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 14:08:27 [DEBUG] Rows returned: 16
2025-01-15 14:08:38 [INFO] GET /api/roles 200 10ms
2025-01-15 14:08:53 [INFO] PUT /api/users/90 200 61ms
2025-01-15 14:09:02 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 14:09:07 [INFO] PUT /api/users/197 200 52ms
2025-01-15 14:09:18 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 14:09:18 [DEBUG] Rows returned: 34
2025-01-15 14:09:27 [INFO] POST /api/auth/refresh 200 76ms
2025-01-15 14:09:39 [INFO] GET /api/health 200 3ms
2025-01-15 14:09:43 [INFO] GET /api/users?role=moderator 200 22ms
2025-01-15 14:09:50 [INFO] GET /api/roles 200 10ms
2025-01-15 14:09:53 [INFO] GET /api/users/65 200 17ms
2025-01-15 14:09:54 [INFO] GET /api/roles 200 14ms
2025-01-15 14:10:08 [INFO] GET /api/settings 200 5ms
2025-01-15 14:10:15 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 14:10:15 [DEBUG] Rows returned: 38
2025-01-15 14:10:17 [INFO] POST /api/auth/login 200 146ms
2025-01-15 14:10:19 [INFO] GET /api/users 200 31ms
2025-01-15 14:10:28 [INFO] POST /api/users 201 85ms
2025-01-15 14:10:43 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 14:10:43 [DEBUG] Rows returned: 0
2025-01-15 14:10:45 [INFO] PUT /api/settings 200 47ms
2025-01-15 14:10:49 [INFO] PUT /api/settings 200 42ms
2025-01-15 14:11:03 [INFO] GET /api/health 200 1ms
2025-01-15 14:11:16 [WARN] Request body exceeded soft limit (2709KB)
2025-01-15 14:11:18 [INFO] POST /api/auth/login 401 71ms
2025-01-15 14:11:33 [INFO] DELETE /api/users/72 204 27ms
2025-01-15 14:11:44 [INFO] GET /api/settings 200 8ms
2025-01-15 14:11:48 [INFO] GET /api/users/105 200 9ms
2025-01-15 14:12:00 [INFO] GET /api/health 200 3ms
2025-01-15 14:12:13 [INFO] POST /api/uploads 201 1878ms
2025-01-15 14:12:21 [INFO] GET /api/notifications 200 25ms
2025-01-15 14:12:30 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 14:12:30 [DEBUG] Rows returned: 38
2025-01-15 14:12:34 [INFO] GET /api/users/154 200 17ms
2025-01-15 14:12:38 [INFO] GET /api/users?page=2&limit=25 200 43ms
2025-01-15 14:12:53 [INFO] PUT /api/settings 200 35ms
2025-01-15 14:13:04 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 14:13:04 [DEBUG] Rows returned: 45
2025-01-15 14:13:17 [INFO] GET /api/settings 200 5ms
2025-01-15 14:13:25 [INFO] POST /api/auth/refresh 200 46ms
2025-01-15 14:13:31 [INFO] GET /api/users?page=2&limit=25 200 35ms
2025-01-15 14:13:35 [INFO] GET /api/health 200 3ms
2025-01-15 14:13:44 [INFO] PUT /api/users/10 200 43ms
2025-01-15 14:13:57 [INFO] POST /api/users 409 12ms
2025-01-15 14:14:06 [WARN] JWT token expires in less than 60 seconds for user 105
2025-01-15 14:14:11 [INFO] GET /api/users/60 200 6ms
2025-01-15 14:14:21 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 14:14:21 [DEBUG] Rows returned: 11
2025-01-15 14:14:26 [INFO] POST /api/auth/login 401 75ms
2025-01-15 14:14:36 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 14:14:36 [DEBUG] Rows returned: 49
2025-01-15 14:14:38 [INFO] POST /api/users 409 21ms
2025-01-15 14:14:50 [INFO] POST /api/uploads 201 1166ms
2025-01-15 14:15:04 [INFO] GET /api/roles 200 13ms
2025-01-15 14:15:19 [INFO] POST /api/users 201 99ms
2025-01-15 14:15:33 [INFO] PUT /api/settings 200 35ms
2025-01-15 14:15:41 [INFO] GET /api/users/183 404 18ms
2025-01-15 14:15:51 [INFO] GET /api/health 200 1ms
2025-01-15 14:15:58 [INFO] POST /api/roles 201 65ms
2025-01-15 14:16:07 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 14:16:07 [DEBUG] New record created: id=288
2025-01-15 14:16:18 [WARN] Deprecated API version v1 called by client client-14
2025-01-15 14:16:32 [INFO] GET /api/users 200 48ms
2025-01-15 14:16:46 [INFO] PUT /api/settings 200 39ms
2025-01-15 14:16:52 [INFO] GET /api/analytics/dashboard 200 645ms
2025-01-15 14:17:05 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 14:17:05 [DEBUG] New record created: id=280
2025-01-15 14:17:19 [INFO] POST /api/users 201 111ms
2025-01-15 14:17:22 [INFO] DELETE /api/users/113 204 32ms
2025-01-15 14:17:30 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 14:17:30 [DEBUG] Rows returned: 13
2025-01-15 14:17:38 [INFO] GET /api/users 200 43ms
2025-01-15 14:17:44 [INFO] POST /api/auth/refresh 200 68ms
2025-01-15 14:17:49 [INFO] GET /api/notifications 200 25ms
2025-01-15 14:17:51 [INFO] PUT /api/users/80 200 46ms
2025-01-15 14:17:54 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 14:17:54 [DEBUG] New record created: id=188
2025-01-15 14:17:55 [INFO] PUT /api/users/162 200 68ms
2025-01-15 14:18:02 [INFO] PUT /api/settings 200 40ms
2025-01-15 14:18:07 [INFO] GET /api/notifications 200 34ms
2025-01-15 14:18:15 [INFO] GET /api/notifications 200 22ms
2025-01-15 14:18:21 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 14:18:21 [DEBUG] Rows returned: 46
2025-01-15 14:18:33 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 14:18:33 [DEBUG] New record created: id=122
2025-01-15 14:18:46 [WARN] Rate limit approaching for IP 192.168.5.101 (87/100 requests in window)
2025-01-15 14:18:49 [INFO] GET /api/settings 200 11ms
2025-01-15 14:18:58 [INFO] PUT /api/users/1 200 42ms
2025-01-15 14:19:03 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 14:19:03 [DEBUG] Rows returned: 14
2025-01-15 14:19:11 [WARN] Rate limit exceeded for IP 192.168.2.21. Returning 429.
2025-01-15 14:19:16 [INFO] POST /api/uploads 201 1578ms
2025-01-15 14:19:19 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 14:19:19 [DEBUG] Rows returned: 37
2025-01-15 14:19:28 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 14:19:41 [INFO] GET /api/health 200 1ms
2025-01-15 14:19:55 [INFO] GET /api/analytics/dashboard 200 507ms
2025-01-15 14:20:03 [ERROR] Database connection timeout after 5000ms
2025-01-15 14:20:12 [INFO] DELETE /api/users/64 204 49ms
2025-01-15 14:20:14 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 14:20:14 [DEBUG] New record created: id=235
2025-01-15 14:20:21 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 14:20:21 [DEBUG] Rows returned: 36
2025-01-15 14:20:27 [INFO] DELETE /api/users/42 204 44ms
2025-01-15 14:20:33 [WARN] Slow query detected: SELECT * FROM users WHERE role_id = $1 AND active = true (took 1131ms)
2025-01-15 14:20:35 [INFO] GET /api/analytics/dashboard 200 419ms
2025-01-15 14:20:42 [INFO] DELETE /api/users/74 204 45ms
2025-01-15 14:20:45 [INFO] PUT /api/settings 200 26ms
2025-01-15 14:20:47 [INFO] GET /api/health 200 1ms
2025-01-15 14:21:02 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 14:21:05 [INFO] GET /api/users?page=5&limit=25 200 30ms
2025-01-15 14:21:06 [INFO] POST /api/roles 201 67ms
2025-01-15 14:21:08 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 14:21:10 [INFO] POST /api/roles 201 48ms
2025-01-15 14:21:13 [INFO] PUT /api/settings 200 26ms
2025-01-15 14:21:21 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 14:21:21 [DEBUG] Rows returned: 18
2025-01-15 14:21:22 [INFO] GET /api/users?role=editor 200 40ms
2025-01-15 14:21:30 [INFO] GET /api/notifications 200 23ms
2025-01-15 14:21:43 [WARN] Memory usage at 79% of allocated heap
2025-01-15 14:21:44 [INFO] GET /api/users/38 404 10ms
2025-01-15 14:21:47 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 14:22:00 [INFO] GET /api/users?role=editor 200 28ms
2025-01-15 14:22:07 [INFO] POST /api/uploads 201 1469ms
2025-01-15 14:22:18 [INFO] POST /api/users 409 12ms
2025-01-15 14:22:19 [INFO] GET /api/roles 200 12ms
2025-01-15 14:22:30 [WARN] Deprecated API version v1 called by client client-19
2025-01-15 14:22:44 [INFO] GET /api/health 200 2ms
2025-01-15 14:22:51 [INFO] GET /api/users?role=admin 200 22ms
2025-01-15 14:23:00 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 14:23:15 [INFO] POST /api/users 409 21ms
2025-01-15 14:23:27 [INFO] PUT /api/settings 200 26ms
2025-01-15 14:23:35 [INFO] GET /api/health 200 3ms
2025-01-15 14:23:39 [INFO] GET /api/users?role=viewer 200 27ms
2025-01-15 14:23:54 [INFO] GET /api/settings 200 5ms
2025-01-15 14:24:02 [WARN] S3 upload retry after timeout (894ms)
2025-01-15 14:24:09 [INFO] GET /api/users/122 200 12ms
2025-01-15 14:24:24 [INFO] GET /api/settings 200 9ms
2025-01-15 14:24:39 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 14:24:39 [DEBUG] Rows returned: 14
2025-01-15 14:24:50 [WARN] Memory usage at 76% of allocated heap
2025-01-15 14:24:57 [INFO] GET /api/users 200 77ms
2025-01-15 14:25:12 [INFO] POST /api/auth/login 401 56ms
2025-01-15 14:25:20 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 14:25:29 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 14:25:29 [DEBUG] New record created: id=329
2025-01-15 14:25:40 [INFO] POST /api/auth/login 401 111ms
2025-01-15 14:25:41 [INFO] GET /api/roles 200 11ms
2025-01-15 14:25:44 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 14:25:46 [INFO] POST /api/users 201 88ms
2025-01-15 14:25:59 [INFO] GET /api/health 200 2ms
2025-01-15 14:26:02 [INFO] POST /api/auth/refresh 200 79ms
2025-01-15 14:26:16 [INFO] GET /api/health 200 2ms
2025-01-15 14:26:25 [INFO] PUT /api/settings 200 25ms
2025-01-15 14:26:31 [INFO] PUT /api/users/140 200 79ms
2025-01-15 14:26:44 [WARN] Rate limit approaching for IP 192.168.3.88 (85/100 requests in window)
2025-01-15 14:26:59 [INFO] GET /api/health 200 2ms
2025-01-15 14:27:00 [INFO] POST /api/auth/login 200 231ms
2025-01-15 14:27:13 [INFO] GET /api/health 200 1ms
2025-01-15 14:27:16 [INFO] GET /api/analytics/dashboard 200 706ms
2025-01-15 14:27:25 [INFO] GET /api/health 200 2ms
2025-01-15 14:27:31 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 14:27:46 [INFO] POST /api/auth/refresh 200 52ms
2025-01-15 14:27:47 [ERROR] Unhandled exception in GET /api/users?page=1&limit=25: DatabaseError
2025-01-15 14:27:47 [ERROR] Stack trace:
    at AuthService.validateToken (src/services/auth.service.ts:69)
    at RoleService.getPermissions (src/services/role.service.ts:79)
    at processTicksAndRejections (node:internal/process/task_queues:252)
    at AuthController.login (src/controllers/auth.controller.ts:263)
    at authenticate (src/middleware/auth.ts:293)
    at validateRequest (src/middleware/validation.ts:292)
2025-01-15 14:27:59 [INFO] GET /api/health 200 1ms
2025-01-15 14:28:09 [INFO] GET /api/health 200 3ms
2025-01-15 14:28:15 [INFO] POST /api/uploads 201 718ms
2025-01-15 14:28:16 [WARN] Rate limit exceeded for IP 192.168.7.40. Returning 429.
2025-01-15 14:28:22 [INFO] POST /api/roles 201 31ms
2025-01-15 14:28:23 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 14:28:33 [INFO] GET /api/health 200 2ms
2025-01-15 14:28:35 [INFO] GET /api/roles 200 6ms
2025-01-15 14:28:38 [INFO] GET /api/settings 200 9ms
2025-01-15 14:28:43 [INFO] GET /api/health 200 3ms
2025-01-15 14:28:56 [INFO] GET /api/users/183 200 14ms
2025-01-15 14:28:58 [INFO] GET /api/health 200 1ms
2025-01-15 14:29:03 [WARN] Request body exceeded soft limit (1272KB)
2025-01-15 14:29:04 [INFO] GET /api/analytics/dashboard 200 615ms
2025-01-15 14:29:13 [INFO] POST /api/users 409 20ms
2025-01-15 14:29:16 [INFO] GET /api/settings 200 12ms
2025-01-15 14:29:20 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 14:29:20 [DEBUG] New record created: id=136
2025-01-15 14:29:32 [WARN] Redis reconnection attempt 96/5
2025-01-15 14:29:41 [INFO] POST /api/auth/login 401 117ms
2025-01-15 14:29:46 [INFO] POST /api/auth/login 200 173ms
2025-01-15 14:29:51 [INFO] GET /api/users/181 404 18ms
2025-01-15 14:30:01 [INFO] GET /api/users/104 404 10ms
2025-01-15 14:30:11 [INFO] GET /api/settings 200 5ms
2025-01-15 14:30:15 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 14:30:19 [INFO] GET /api/users/148 404 9ms
2025-01-15 14:30:33 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 14:30:33 [DEBUG] Rows returned: 6
2025-01-15 14:30:39 [INFO] POST /api/users 201 121ms
2025-01-15 14:30:46 [INFO] GET /api/notifications 200 31ms
2025-01-15 14:30:50 [INFO] GET /api/health 200 1ms
2025-01-15 14:30:54 [INFO] PUT /api/users/171 200 71ms
2025-01-15 14:30:59 [INFO] GET /api/roles 200 7ms
2025-01-15 14:31:00 [INFO] GET /api/health 200 1ms
2025-01-15 14:31:12 [INFO] POST /api/roles 201 48ms
2025-01-15 14:31:15 [INFO] POST /api/users 409 12ms
2025-01-15 14:31:25 [INFO] POST /api/roles 201 42ms
2025-01-15 14:31:37 [INFO] GET /api/health 200 2ms
2025-01-15 14:31:44 [INFO] GET /api/analytics/dashboard 200 217ms
2025-01-15 14:31:57 [INFO] GET /api/analytics/dashboard 200 721ms
2025-01-15 14:32:08 [WARN] Rate limit approaching for IP 192.168.6.134 (88/100 requests in window)
2025-01-15 14:32:20 [INFO] GET /api/users/146 200 14ms
2025-01-15 14:32:25 [INFO] GET /api/health 200 3ms
2025-01-15 14:32:40 [INFO] PUT /api/settings 200 53ms
2025-01-15 14:32:41 [INFO] GET /api/health 200 2ms
2025-01-15 14:32:42 [INFO] POST /api/users 409 18ms
2025-01-15 14:32:54 [INFO] GET /api/health 200 3ms
2025-01-15 14:32:58 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 14:32:58 [DEBUG] Rows returned: 38
2025-01-15 14:33:08 [INFO] GET /api/users/98 404 11ms
2025-01-15 14:33:23 [INFO] GET /api/users 200 73ms
2025-01-15 14:33:27 [INFO] GET /api/analytics/dashboard 200 216ms
2025-01-15 14:33:39 [INFO] GET /api/settings 200 5ms
2025-01-15 14:33:43 [INFO] POST /api/uploads 201 1894ms
2025-01-15 14:33:52 [INFO] POST /api/users 201 127ms
2025-01-15 14:33:54 [INFO] GET /api/health 200 2ms
2025-01-15 14:34:05 [INFO] POST /api/auth/refresh 200 45ms
2025-01-15 14:34:15 [INFO] GET /api/roles 200 12ms
2025-01-15 14:34:27 [INFO] POST /api/users 409 16ms
2025-01-15 14:34:40 [INFO] GET /api/users?role=admin 200 33ms
2025-01-15 14:34:44 [WARN] Memory usage at 89% of allocated heap
2025-01-15 14:34:56 [INFO] GET /api/settings 200 7ms
2025-01-15 14:35:10 [INFO] GET /api/users 200 77ms
2025-01-15 14:35:14 [INFO] POST /api/roles 201 44ms
2025-01-15 14:35:24 [INFO] GET /api/users/186 404 18ms
2025-01-15 14:35:37 [INFO] GET /api/health 200 2ms
2025-01-15 14:35:51 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 14:35:51 [DEBUG] New record created: id=402
2025-01-15 14:35:53 [INFO] GET /api/health 200 1ms
2025-01-15 14:36:01 [INFO] POST /api/users 409 15ms
2025-01-15 14:36:12 [INFO] GET /api/health 200 2ms
2025-01-15 14:36:14 [INFO] POST /api/users 409 23ms
2025-01-15 14:36:16 [INFO] POST /api/users 409 15ms
2025-01-15 14:36:30 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 14:36:40 [INFO] GET /api/health 200 2ms
2025-01-15 14:36:45 [INFO] PUT /api/settings 200 45ms
2025-01-15 14:36:50 [INFO] POST /api/uploads 201 736ms
2025-01-15 14:37:03 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 14:37:03 [DEBUG] Rows returned: 14
2025-01-15 14:37:15 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 14:37:15 [DEBUG] Rows returned: 35
2025-01-15 14:37:23 [INFO] GET /api/settings 200 7ms
2025-01-15 14:37:32 [INFO] GET /api/health 200 1ms
2025-01-15 14:37:36 [WARN] Redis reconnection attempt 97/5
2025-01-15 14:37:45 [INFO] GET /api/roles 200 5ms
2025-01-15 14:37:52 [INFO] PUT /api/users/36 200 73ms
2025-01-15 14:37:55 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 14:37:55 [DEBUG] Rows returned: 27
2025-01-15 14:38:07 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 14:38:07 [DEBUG] Rows returned: 47
2025-01-15 14:38:20 [INFO] POST /api/users 409 10ms
2025-01-15 14:38:21 [INFO] GET /api/health 200 1ms
2025-01-15 14:38:34 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 14:38:34 [DEBUG] Rows returned: 46
2025-01-15 14:38:35 [INFO] POST /api/users 409 16ms
2025-01-15 14:38:43 [WARN] Rate limit approaching for IP 192.168.9.166 (91/100 requests in window)
2025-01-15 14:38:46 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 14:38:51 [INFO] POST /api/uploads 201 1505ms
2025-01-15 14:39:00 [WARN] Rate limit approaching for IP 192.168.5.129 (99/100 requests in window)
2025-01-15 14:39:01 [INFO] POST /api/auth/refresh 200 33ms
2025-01-15 14:39:02 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 14:39:09 [INFO] GET /api/users?role=viewer 200 23ms
2025-01-15 14:39:18 [INFO] POST /api/auth/login 200 205ms
2025-01-15 14:39:21 [INFO] GET /api/health 200 3ms
2025-01-15 14:39:25 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 14:39:38 [INFO] GET /api/users 200 28ms
2025-01-15 14:39:45 [INFO] POST /api/auth/login 401 95ms
2025-01-15 14:39:58 [ERROR] Database connection timeout after 5000ms
2025-01-15 14:40:03 [INFO] GET /api/health 200 1ms
2025-01-15 14:40:17 [INFO] GET /api/notifications 200 30ms
2025-01-15 14:40:29 [INFO] POST /api/users 409 17ms
2025-01-15 14:40:38 [INFO] PUT /api/users/136 200 57ms
2025-01-15 14:40:42 [INFO] GET /api/users/37 200 14ms
2025-01-15 14:40:54 [INFO] GET /api/settings 200 9ms
2025-01-15 14:40:57 [INFO] POST /api/auth/login 401 117ms
2025-01-15 14:41:04 [INFO] POST /api/roles 201 59ms
2025-01-15 14:41:18 [INFO] POST /api/auth/login 200 190ms
2025-01-15 14:41:31 [INFO] POST /api/roles 201 44ms
2025-01-15 14:41:43 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 14:41:43 [DEBUG] Rows returned: 34
2025-01-15 14:41:54 [INFO] PUT /api/users/187 200 70ms
2025-01-15 14:42:01 [INFO] GET /api/roles 200 6ms
2025-01-15 14:42:07 [INFO] GET /api/notifications 200 20ms
2025-01-15 14:42:19 [ERROR] Worker process crashed. Restarting...
2025-01-15 14:42:24 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 14:42:24 [DEBUG] Rows returned: 18
2025-01-15 14:42:28 [INFO] PUT /api/users/54 200 73ms
2025-01-15 14:42:33 [INFO] GET /api/users/102 404 9ms
2025-01-15 14:42:35 [INFO] PUT /api/settings 200 54ms
2025-01-15 14:42:36 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 14:42:40 [INFO] PUT /api/users/127 200 65ms
2025-01-15 14:42:51 [INFO] DELETE /api/users/11 204 43ms
2025-01-15 14:42:53 [WARN] S3 upload retry after timeout (1317ms)
2025-01-15 14:43:06 [INFO] GET /api/notifications 200 16ms
2025-01-15 14:43:20 [INFO] GET /api/health 200 2ms
2025-01-15 14:43:22 [INFO] PUT /api/settings 200 44ms
2025-01-15 14:43:28 [INFO] GET /api/analytics/dashboard 200 322ms
2025-01-15 14:43:40 [WARN] Slow query detected: DELETE FROM sessions WHERE expires_at < NOW() (took 1692ms)
2025-01-15 14:43:42 [INFO] GET /api/users/32 200 14ms
2025-01-15 14:43:46 [INFO] GET /api/notifications 200 28ms
2025-01-15 14:43:49 [INFO] GET /api/health 200 2ms
2025-01-15 14:43:53 [INFO] POST /api/users 409 17ms
2025-01-15 14:44:01 [INFO] GET /api/users?role=admin 200 23ms
2025-01-15 14:44:16 [INFO] POST /api/roles 201 53ms
2025-01-15 14:44:27 [INFO] GET /api/users?role=moderator 200 28ms
2025-01-15 14:44:34 [WARN] Slow query detected: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1 (took 1720ms)
2025-01-15 14:44:48 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 14:44:50 [INFO] GET /api/health 200 1ms
2025-01-15 14:44:57 [INFO] POST /api/auth/refresh 200 36ms
2025-01-15 14:45:00 [INFO] GET /api/health 200 2ms
2025-01-15 14:45:15 [INFO] GET /api/users 200 61ms
2025-01-15 14:45:17 [INFO] GET /api/analytics/dashboard 200 415ms
2025-01-15 14:45:26 [INFO] GET /api/health 200 2ms
2025-01-15 14:45:38 [WARN] Rate limit approaching for IP 192.168.9.2 (96/100 requests in window)
2025-01-15 14:45:42 [INFO] POST /api/uploads 201 594ms
2025-01-15 14:45:46 [INFO] GET /api/users?page=1&limit=25 200 31ms
2025-01-15 14:45:57 [INFO] GET /api/health 200 2ms
2025-01-15 14:46:07 [INFO] GET /api/users/75 200 10ms
2025-01-15 14:46:22 [INFO] POST /api/auth/refresh 200 78ms
2025-01-15 14:46:32 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 14:46:43 [INFO] PUT /api/settings 200 55ms
2025-01-15 14:46:54 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 14:47:06 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 14:47:06 [DEBUG] Rows returned: 48
2025-01-15 14:47:20 [INFO] GET /api/notifications 200 35ms
2025-01-15 14:47:26 [INFO] GET /api/settings 200 6ms
2025-01-15 14:47:31 [INFO] GET /api/notifications 200 16ms
2025-01-15 14:47:33 [INFO] DELETE /api/users/76 204 32ms
2025-01-15 14:47:43 [INFO] GET /api/users 200 55ms
2025-01-15 14:47:46 [INFO] GET /api/users/118 404 18ms
2025-01-15 14:47:54 [INFO] PUT /api/users/80 200 78ms
2025-01-15 14:47:58 [INFO] PUT /api/settings 200 28ms
2025-01-15 14:48:09 [INFO] GET /api/health 200 1ms
2025-01-15 14:48:23 [INFO] GET /api/health 200 2ms
2025-01-15 14:48:37 [INFO] GET /api/users?page=2&limit=25 200 52ms
2025-01-15 14:48:43 [INFO] POST /api/users 201 98ms
2025-01-15 14:48:50 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 14:48:50 [DEBUG] Rows returned: 50
2025-01-15 14:48:59 [INFO] POST /api/auth/login 200 155ms
2025-01-15 14:49:00 [INFO] POST /api/auth/login 401 117ms
2025-01-15 14:49:06 [INFO] GET /api/users/65 404 14ms
2025-01-15 14:49:15 [INFO] GET /api/settings 200 9ms
2025-01-15 14:49:26 [INFO] GET /api/health 200 1ms
2025-01-15 14:49:40 [WARN] JWT token expires in less than 60 seconds for user 100
2025-01-15 14:49:42 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 14:49:44 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 14:49:50 [INFO] GET /api/health 200 1ms
2025-01-15 14:49:51 [WARN] Request body exceeded soft limit (1099KB)
2025-01-15 14:49:57 [INFO] POST /api/auth/login 401 75ms
2025-01-15 14:50:11 [INFO] POST /api/auth/refresh 200 33ms
2025-01-15 14:50:23 [INFO] GET /api/roles 200 12ms
2025-01-15 14:50:31 [INFO] POST /api/auth/login 200 135ms
2025-01-15 14:50:43 [INFO] POST /api/auth/login 401 67ms
2025-01-15 14:50:49 [INFO] GET /api/users/191 200 17ms
2025-01-15 14:51:04 [INFO] POST /api/users 409 10ms
2025-01-15 14:51:11 [WARN] Redis reconnection attempt 86/5
2025-01-15 14:51:26 [INFO] POST /api/users 409 13ms
2025-01-15 14:51:34 [INFO] GET /api/users/119 200 10ms
2025-01-15 14:51:45 [INFO] PUT /api/settings 200 27ms
2025-01-15 14:51:49 [INFO] GET /api/health 200 1ms
2025-01-15 14:52:03 [INFO] GET /api/users?role=moderator 200 32ms
2025-01-15 14:52:13 [ERROR] Deadlock detected in transaction tx-19743
2025-01-15 14:52:13 [ERROR] Stack trace:
    at AuthController.login (src/controllers/auth.controller.ts:175)
    at processTicksAndRejections (node:internal/process/task_queues:34)
    at UserService.findById (src/services/user.service.ts:82)
    at validateRequest (src/middleware/validation.ts:212)
    at AuthService.validateToken (src/services/auth.service.ts:160)
2025-01-15 14:52:22 [INFO] GET /api/users/111 404 8ms
2025-01-15 14:52:26 [INFO] GET /api/roles 200 13ms
2025-01-15 14:52:28 [WARN] JWT token expires in less than 60 seconds for user 4
2025-01-15 14:52:42 [INFO] GET /api/users/126 200 11ms
2025-01-15 14:52:47 [INFO] POST /api/auth/login 401 106ms
2025-01-15 14:52:51 [INFO] GET /api/health 200 1ms
2025-01-15 14:53:05 [INFO] GET /api/health 200 1ms
2025-01-15 14:53:20 [INFO] GET /api/notifications 200 10ms
2025-01-15 14:53:26 [INFO] POST /api/auth/refresh 200 80ms
2025-01-15 14:53:38 [INFO] POST /api/auth/login 401 111ms
2025-01-15 14:53:50 [INFO] GET /api/analytics/dashboard 200 350ms
2025-01-15 14:54:04 [INFO] GET /api/health 200 2ms
2025-01-15 14:54:17 [INFO] POST /api/uploads 201 869ms
2025-01-15 14:54:21 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 14:54:21 [DEBUG] Rows returned: 43
2025-01-15 14:54:24 [INFO] POST /api/auth/login 200 185ms
2025-01-15 14:54:33 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 14:54:45 [INFO] POST /api/users 409 22ms
2025-01-15 14:54:53 [INFO] GET /api/health 200 1ms
2025-01-15 14:55:02 [INFO] GET /api/roles 200 14ms
2025-01-15 14:55:11 [INFO] POST /api/uploads 201 577ms
2025-01-15 14:55:25 [INFO] GET /api/users 200 52ms
2025-01-15 14:55:37 [INFO] GET /api/roles 200 9ms
2025-01-15 14:55:52 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 14:55:52 [DEBUG] Rows returned: 39
2025-01-15 14:56:01 [INFO] GET /api/users/166 200 16ms
2025-01-15 14:56:09 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 14:56:09 [DEBUG] New record created: id=284
2025-01-15 14:56:22 [INFO] GET /api/health 200 1ms
2025-01-15 14:56:34 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 14:56:34 [DEBUG] Rows returned: 22
2025-01-15 14:56:49 [INFO] POST /api/uploads 201 1478ms
2025-01-15 14:56:53 [INFO] POST /api/users 409 22ms
2025-01-15 14:57:06 [INFO] PUT /api/settings 200 54ms
2025-01-15 14:57:14 [INFO] POST /api/users 201 143ms
2025-01-15 14:57:26 [INFO] GET /api/health 200 1ms
2025-01-15 14:57:32 [INFO] PUT /api/users/127 200 60ms
2025-01-15 14:57:43 [INFO] POST /api/auth/login 200 194ms
2025-01-15 14:57:44 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 14:57:44 [DEBUG] Rows returned: 42
2025-01-15 14:57:59 [INFO] GET /api/health 200 2ms
2025-01-15 14:58:06 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 14:58:06 [DEBUG] Rows returned: 43
2025-01-15 14:58:14 [INFO] GET /api/health 200 2ms
2025-01-15 14:58:29 [INFO] GET /api/users?role=viewer 200 20ms
2025-01-15 14:58:44 [INFO] POST /api/auth/refresh 200 38ms
2025-01-15 14:58:50 [INFO] GET /api/health 200 3ms
2025-01-15 14:58:55 [INFO] DELETE /api/users/163 204 43ms
2025-01-15 14:59:05 [INFO] GET /api/health 200 2ms
2025-01-15 14:59:19 [INFO] GET /api/health 200 1ms
2025-01-15 14:59:28 [WARN] S3 upload retry after timeout (996ms)
2025-01-15 14:59:41 [INFO] GET /api/analytics/dashboard 200 371ms
2025-01-15 14:59:51 [INFO] GET /api/settings 200 10ms
2025-01-15 14:59:53 [INFO] GET /api/notifications 200 21ms
2025-01-15 14:59:54 [WARN] JWT token expires in less than 60 seconds for user 194
2025-01-15 15:00:02 [INFO] GET /api/health 200 2ms
2025-01-15 15:00:16 [INFO] GET /api/health 200 1ms
2025-01-15 15:00:31 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 15:00:31 [DEBUG] New record created: id=472
2025-01-15 15:00:41 [INFO] GET /api/users/124 404 8ms
2025-01-15 15:00:45 [INFO] GET /api/users?role=editor 200 40ms
2025-01-15 15:00:46 [INFO] GET /api/users?page=3&limit=25 200 30ms
2025-01-15 15:00:52 [INFO] GET /api/users/84 404 9ms
2025-01-15 15:00:56 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 15:00:56 [DEBUG] Rows returned: 39
2025-01-15 15:01:11 [INFO] POST /api/auth/login 401 104ms
2025-01-15 15:01:19 [INFO] GET /api/health 200 1ms
2025-01-15 15:01:20 [WARN] Memory usage at 76% of allocated heap
2025-01-15 15:01:27 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 15:01:27 [DEBUG] Rows returned: 44
2025-01-15 15:01:37 [INFO] POST /api/uploads 201 513ms
2025-01-15 15:01:42 [INFO] DELETE /api/users/132 204 25ms
2025-01-15 15:01:57 [INFO] GET /api/users?role=moderator 200 16ms
2025-01-15 15:02:03 [INFO] GET /api/health 200 3ms
2025-01-15 15:02:12 [INFO] POST /api/auth/refresh 200 49ms
2025-01-15 15:02:26 [INFO] GET /api/analytics/dashboard 200 545ms
2025-01-15 15:02:38 [INFO] GET /api/health 200 2ms
2025-01-15 15:02:47 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 15:02:47 [DEBUG] Rows returned: 37
2025-01-15 15:02:54 [WARN] Deprecated API version v1 called by client client-10
2025-01-15 15:03:07 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 15:03:07 [DEBUG] Rows returned: 1
2025-01-15 15:03:10 [WARN] Slow query detected: SELECT * FROM users WHERE active = true ORDER BY created_at  (took 387ms)
2025-01-15 15:03:14 [INFO] GET /api/users/84 404 11ms
2025-01-15 15:03:15 [INFO] GET /api/analytics/dashboard 200 768ms
2025-01-15 15:03:27 [INFO] GET /api/users/73 404 16ms
2025-01-15 15:03:36 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 15:03:36 [DEBUG] Rows returned: 37
2025-01-15 15:03:46 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 15:03:54 [INFO] GET /api/health 200 2ms
2025-01-15 15:04:06 [WARN] Request body exceeded soft limit (3521KB)
2025-01-15 15:04:10 [WARN] Rate limit approaching for IP 192.168.3.182 (97/100 requests in window)
2025-01-15 15:04:13 [INFO] POST /api/users 201 91ms
2025-01-15 15:04:14 [INFO] GET /api/health 200 2ms
2025-01-15 15:04:22 [INFO] POST /api/uploads 201 1590ms
2025-01-15 15:04:25 [INFO] GET /api/health 200 2ms
2025-01-15 15:04:34 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 15:04:34 [DEBUG] Rows returned: 29
2025-01-15 15:04:37 [INFO] GET /api/health 200 2ms
2025-01-15 15:04:45 [INFO] GET /api/roles 200 15ms
2025-01-15 15:04:50 [INFO] POST /api/auth/login 200 136ms
2025-01-15 15:05:00 [INFO] POST /api/auth/refresh 200 55ms
2025-01-15 15:05:01 [INFO] POST /api/users 409 25ms
2025-01-15 15:05:04 [INFO] PUT /api/users/51 200 76ms
2025-01-15 15:05:15 [INFO] POST /api/users 409 15ms
2025-01-15 15:05:18 [INFO] GET /api/settings 200 7ms
2025-01-15 15:05:20 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 15:05:20 [DEBUG] Rows returned: 42
2025-01-15 15:05:34 [INFO] POST /api/roles 201 40ms
2025-01-15 15:05:40 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 15:05:40 [DEBUG] Rows returned: 15
2025-01-15 15:05:53 [INFO] POST /api/uploads 201 1130ms
2025-01-15 15:05:58 [INFO] GET /api/analytics/dashboard 200 424ms
2025-01-15 15:06:01 [INFO] GET /api/health 200 2ms
2025-01-15 15:06:05 [WARN] S3 upload retry after timeout (834ms)
2025-01-15 15:06:15 [INFO] GET /api/health 200 3ms
2025-01-15 15:06:23 [INFO] GET /api/settings 200 7ms
2025-01-15 15:06:24 [INFO] PUT /api/settings 200 33ms
2025-01-15 15:06:32 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 15:06:32 [DEBUG] Rows returned: 8
2025-01-15 15:06:42 [WARN] Redis reconnection attempt 83/5
2025-01-15 15:06:55 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 15:06:55 [DEBUG] Rows returned: 35
2025-01-15 15:06:59 [INFO] GET /api/users 200 76ms
2025-01-15 15:07:10 [INFO] GET /api/health 200 3ms
2025-01-15 15:07:19 [INFO] GET /api/settings 200 10ms
2025-01-15 15:07:30 [INFO] POST /api/users 409 11ms
2025-01-15 15:07:34 [INFO] POST /api/roles 201 66ms
2025-01-15 15:07:48 [INFO] GET /api/health 200 2ms
2025-01-15 15:07:50 [INFO] GET /api/users?page=5&limit=25 200 30ms
2025-01-15 15:07:51 [INFO] GET /api/health 200 3ms
2025-01-15 15:08:01 [INFO] GET /api/settings 200 6ms
2025-01-15 15:08:06 [INFO] GET /api/roles 200 14ms
2025-01-15 15:08:20 [INFO] GET /api/health 200 1ms
2025-01-15 15:08:24 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 15:08:24 [DEBUG] Rows returned: 5
2025-01-15 15:08:34 [WARN] Rate limit exceeded for IP 192.168.3.188. Returning 429.
2025-01-15 15:08:48 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 15:08:48 [DEBUG] Rows returned: 29
2025-01-15 15:08:55 [INFO] POST /api/users 201 91ms
2025-01-15 15:08:57 [INFO] POST /api/auth/login 200 110ms
2025-01-15 15:08:59 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 15:08:59 [DEBUG] Rows returned: 28
2025-01-15 15:09:02 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 15:09:02 [DEBUG] Rows returned: 47
2025-01-15 15:09:17 [INFO] POST /api/auth/refresh 200 77ms
2025-01-15 15:09:29 [INFO] POST /api/roles 201 54ms
2025-01-15 15:09:35 [INFO] GET /api/health 200 3ms
2025-01-15 15:09:50 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 15:10:03 [INFO] POST /api/users 201 92ms
2025-01-15 15:10:05 [INFO] POST /api/uploads 201 787ms
2025-01-15 15:10:20 [INFO] GET /api/health 200 1ms
2025-01-15 15:10:30 [INFO] POST /api/users 201 124ms
2025-01-15 15:10:42 [INFO] GET /api/users/190 200 16ms
2025-01-15 15:10:45 [INFO] GET /api/health 200 3ms
2025-01-15 15:10:53 [INFO] GET /api/health 200 1ms
2025-01-15 15:10:57 [WARN] Rate limit approaching for IP 192.168.4.109 (91/100 requests in window)
2025-01-15 15:11:04 [INFO] POST /api/users 201 89ms
2025-01-15 15:11:19 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 15:11:19 [DEBUG] New record created: id=63
2025-01-15 15:11:22 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 15:11:30 [INFO] GET /api/analytics/dashboard 200 262ms
2025-01-15 15:11:38 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 15:11:38 [DEBUG] Rows returned: 27
2025-01-15 15:11:45 [INFO] GET /api/health 200 1ms
2025-01-15 15:11:52 [INFO] POST /api/users 201 120ms
2025-01-15 15:11:57 [WARN] Rate limit exceeded for IP 192.168.1.57. Returning 429.
2025-01-15 15:11:58 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 15:11:58 [DEBUG] Rows returned: 31
2025-01-15 15:12:08 [WARN] JWT token expires in less than 60 seconds for user 96
2025-01-15 15:12:13 [INFO] POST /api/users 409 13ms
2025-01-15 15:12:16 [INFO] GET /api/health 200 2ms
2025-01-15 15:12:24 [INFO] GET /api/users/12 404 16ms
2025-01-15 15:12:26 [INFO] GET /api/health 200 1ms
2025-01-15 15:12:28 [INFO] GET /api/roles 200 7ms
2025-01-15 15:12:35 [INFO] POST /api/uploads 201 1417ms
2025-01-15 15:12:37 [INFO] GET /api/health 200 3ms
2025-01-15 15:12:38 [INFO] PUT /api/users/131 200 68ms
2025-01-15 15:12:40 [INFO] POST /api/auth/refresh 200 35ms
2025-01-15 15:12:41 [INFO] GET /api/health 200 2ms
2025-01-15 15:12:47 [WARN] Memory usage at 80% of allocated heap
2025-01-15 15:12:48 [INFO] POST /api/users 409 23ms
2025-01-15 15:13:00 [INFO] GET /api/roles 200 6ms
2025-01-15 15:13:09 [INFO] PUT /api/users/172 200 65ms
2025-01-15 15:13:12 [INFO] GET /api/health 200 2ms
2025-01-15 15:13:27 [INFO] POST /api/auth/login 401 60ms
2025-01-15 15:13:33 [INFO] GET /api/notifications 200 10ms
2025-01-15 15:13:34 [INFO] GET /api/roles 200 6ms
2025-01-15 15:13:39 [WARN] S3 upload retry after timeout (1846ms)
2025-01-15 15:13:47 [INFO] GET /api/roles 200 14ms
2025-01-15 15:13:51 [INFO] POST /api/uploads 201 506ms
2025-01-15 15:13:57 [INFO] GET /api/users/82 200 13ms
2025-01-15 15:14:07 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 15:14:07 [DEBUG] Rows returned: 37
2025-01-15 15:14:12 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 15:14:26 [INFO] POST /api/auth/login 200 116ms
2025-01-15 15:14:30 [INFO] POST /api/auth/refresh 200 54ms
2025-01-15 15:14:40 [INFO] POST /api/roles 201 36ms
2025-01-15 15:14:43 [INFO] POST /api/roles 201 66ms
2025-01-15 15:14:48 [INFO] POST /api/users 409 15ms
2025-01-15 15:14:52 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 15:14:52 [DEBUG] New record created: id=392
2025-01-15 15:15:02 [INFO] GET /api/settings 200 12ms
2025-01-15 15:15:15 [INFO] GET /api/roles 200 5ms
2025-01-15 15:15:19 [INFO] GET /api/notifications 200 12ms
2025-01-15 15:15:26 [INFO] POST /api/users 409 13ms
2025-01-15 15:15:40 [WARN] Redis reconnection attempt 99/5
2025-01-15 15:15:50 [INFO] POST /api/users 201 82ms
2025-01-15 15:16:02 [INFO] GET /api/health 200 3ms
2025-01-15 15:16:13 [INFO] POST /api/roles 201 64ms
2025-01-15 15:16:28 [INFO] GET /api/roles 200 6ms
2025-01-15 15:16:36 [WARN] Deprecated API version v1 called by client client-12
2025-01-15 15:16:45 [INFO] GET /api/health 200 2ms
2025-01-15 15:16:51 [INFO] GET /api/users/47 200 7ms
2025-01-15 15:16:56 [INFO] GET /api/users/196 200 20ms
2025-01-15 15:17:07 [INFO] GET /api/health 200 2ms
2025-01-15 15:17:20 [INFO] POST /api/auth/login 401 100ms
2025-01-15 15:17:30 [WARN] JWT token expires in less than 60 seconds for user 183
2025-01-15 15:17:32 [INFO] GET /api/users/149 200 16ms
2025-01-15 15:17:39 [INFO] POST /api/uploads 201 1498ms
2025-01-15 15:17:44 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 15:17:44 [DEBUG] Rows returned: 35
2025-01-15 15:17:53 [INFO] POST /api/auth/login 200 248ms
2025-01-15 15:18:06 [INFO] GET /api/health 200 3ms
2025-01-15 15:18:17 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 15:18:17 [DEBUG] New record created: id=199
2025-01-15 15:18:28 [INFO] PUT /api/settings 200 44ms
2025-01-15 15:18:35 [INFO] GET /api/roles 200 9ms
2025-01-15 15:18:43 [INFO] POST /api/users 201 99ms
2025-01-15 15:18:52 [INFO] POST /api/auth/login 200 248ms
2025-01-15 15:19:05 [INFO] POST /api/auth/login 401 114ms
2025-01-15 15:19:15 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 15:19:18 [ERROR] Deadlock detected in transaction tx-88897
2025-01-15 15:19:18 [ERROR] Stack trace:
    at authenticate (src/middleware/auth.ts:55)
    at UserService.findById (src/services/user.service.ts:163)
    at AuthService.validateToken (src/services/auth.service.ts:47)
2025-01-15 15:19:22 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 15:19:36 [INFO] PUT /api/users/183 200 54ms
2025-01-15 15:19:40 [INFO] POST /api/auth/login 401 81ms
2025-01-15 15:19:41 [WARN] Deprecated API version v1 called by client client-6
2025-01-15 15:19:54 [INFO] POST /api/users 201 92ms
2025-01-15 15:20:01 [INFO] GET /api/users 200 26ms
2025-01-15 15:20:14 [INFO] POST /api/auth/login 200 116ms
2025-01-15 15:20:27 [INFO] GET /api/roles 200 13ms
2025-01-15 15:20:42 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 15:20:42 [DEBUG] Rows returned: 29
2025-01-15 15:20:56 [INFO] GET /api/users/70 404 12ms
2025-01-15 15:21:03 [INFO] GET /api/users/58 404 10ms
2025-01-15 15:21:18 [INFO] POST /api/auth/login 200 237ms
2025-01-15 15:21:28 [INFO] GET /api/health 200 1ms
2025-01-15 15:21:40 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 15:21:50 [INFO] GET /api/users/84 200 13ms
2025-01-15 15:21:56 [INFO] GET /api/health 200 1ms
2025-01-15 15:21:58 [INFO] POST /api/users 201 141ms
2025-01-15 15:22:04 [INFO] POST /api/auth/login 200 129ms
2025-01-15 15:22:06 [INFO] POST /api/auth/login 401 118ms
2025-01-15 15:22:19 [INFO] GET /api/health 200 2ms
2025-01-15 15:22:23 [INFO] DELETE /api/users/106 204 36ms
2025-01-15 15:22:33 [INFO] GET /api/users?page=4&limit=25 200 56ms
2025-01-15 15:22:34 [INFO] PUT /api/settings 200 39ms
2025-01-15 15:22:43 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 15:22:54 [INFO] GET /api/health 200 3ms
2025-01-15 15:23:08 [INFO] POST /api/auth/login 401 56ms
2025-01-15 15:23:14 [INFO] GET /api/health 200 2ms
2025-01-15 15:23:17 [INFO] POST /api/roles 201 61ms
2025-01-15 15:23:30 [INFO] POST /api/uploads 201 1153ms
2025-01-15 15:23:34 [INFO] GET /api/notifications 200 14ms
2025-01-15 15:23:38 [INFO] GET /api/health 200 2ms
2025-01-15 15:23:43 [INFO] GET /api/health 200 2ms
2025-01-15 15:23:56 [INFO] POST /api/users 409 19ms
2025-01-15 15:23:57 [INFO] GET /api/users?role=viewer 200 16ms
2025-01-15 15:23:58 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 15:23:58 [DEBUG] Rows returned: 27
2025-01-15 15:24:01 [INFO] GET /api/health 200 1ms
2025-01-15 15:24:04 [INFO] POST /api/users 409 25ms
2025-01-15 15:24:16 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 15:24:23 [INFO] GET /api/users?role=admin 200 15ms
2025-01-15 15:24:25 [INFO] GET /api/roles 200 10ms
2025-01-15 15:24:40 [ERROR] Unhandled exception in GET /api/notifications: UserNotFoundError
2025-01-15 15:24:40 [ERROR] Stack trace:
    at AuthService.validateToken (src/services/auth.service.ts:256)
    at Router.handle (node_modules/express/lib/router/index.js:263)
    at authenticate (src/middleware/auth.ts:296)
2025-01-15 15:24:43 [INFO] GET /api/users/45 200 5ms
2025-01-15 15:24:58 [INFO] GET /api/health 200 2ms
2025-01-15 15:25:01 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 15:25:04 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 15:25:04 [DEBUG] New record created: id=77
2025-01-15 15:25:08 [INFO] DELETE /api/users/189 204 27ms
2025-01-15 15:25:15 [INFO] GET /api/settings 200 5ms
2025-01-15 15:25:23 [INFO] POST /api/users 409 15ms
2025-01-15 15:25:28 [INFO] POST /api/uploads 201 1164ms
2025-01-15 15:25:43 [INFO] GET /api/roles 200 9ms
2025-01-15 15:25:48 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 15:25:59 [INFO] POST /api/users 201 97ms
2025-01-15 15:26:03 [INFO] POST /api/auth/refresh 200 76ms
2025-01-15 15:26:17 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 15:26:22 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 15:26:22 [DEBUG] Rows returned: 47
2025-01-15 15:26:25 [INFO] GET /api/health 200 1ms
2025-01-15 15:26:40 [INFO] GET /api/health 200 3ms
2025-01-15 15:26:53 [INFO] DELETE /api/users/11 204 42ms
2025-01-15 15:27:04 [INFO] POST /api/auth/login 200 239ms
2025-01-15 15:27:13 [INFO] GET /api/health 200 2ms
2025-01-15 15:27:23 [INFO] GET /api/health 200 2ms
2025-01-15 15:27:37 [INFO] POST /api/roles 201 62ms
2025-01-15 15:27:39 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 15:27:39 [DEBUG] Rows returned: 28
2025-01-15 15:27:47 [INFO] GET /api/notifications 200 15ms
2025-01-15 15:27:52 [INFO] GET /api/users?page=4&limit=25 200 28ms
2025-01-15 15:28:06 [INFO] POST /api/uploads 201 1734ms
2025-01-15 15:28:16 [INFO] POST /api/uploads 201 993ms
2025-01-15 15:28:27 [INFO] POST /api/users 201 145ms
2025-01-15 15:28:38 [INFO] POST /api/uploads 201 1663ms
2025-01-15 15:28:48 [INFO] GET /api/settings 200 5ms
2025-01-15 15:28:53 [ERROR] Database connection timeout after 5000ms
2025-01-15 15:29:07 [INFO] POST /api/users 201 84ms
2025-01-15 15:29:20 [INFO] PUT /api/settings 200 31ms
2025-01-15 15:29:25 [INFO] PUT /api/users/143 200 68ms
2025-01-15 15:29:28 [INFO] DELETE /api/users/146 204 23ms
2025-01-15 15:29:39 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 15:29:39 [DEBUG] Rows returned: 1
2025-01-15 15:29:46 [WARN] Rate limit exceeded for IP 192.168.3.133. Returning 429.
2025-01-15 15:29:49 [INFO] GET /api/users/4 404 10ms
2025-01-15 15:30:04 [INFO] GET /api/users/178 200 18ms
2025-01-15 15:30:11 [INFO] GET /api/health 200 1ms
2025-01-15 15:30:12 [INFO] POST /api/roles 201 35ms
2025-01-15 15:30:17 [INFO] DELETE /api/users/142 204 40ms
2025-01-15 15:30:21 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 15:30:21 [DEBUG] Rows returned: 37
2025-01-15 15:30:30 [INFO] GET /api/health 200 2ms
2025-01-15 15:30:35 [INFO] POST /api/uploads 201 1144ms
2025-01-15 15:30:40 [INFO] GET /api/settings 200 5ms
2025-01-15 15:30:44 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 15:30:44 [DEBUG] Rows returned: 29
2025-01-15 15:30:58 [INFO] GET /api/health 200 1ms
2025-01-15 15:30:59 [INFO] GET /api/roles 200 6ms
2025-01-15 15:31:05 [INFO] GET /api/users 200 52ms
2025-01-15 15:31:10 [INFO] GET /api/health 200 2ms
2025-01-15 15:31:24 [INFO] GET /api/users/181 200 5ms
2025-01-15 15:31:37 [INFO] GET /api/users?role=moderator 200 33ms
2025-01-15 15:31:42 [INFO] GET /api/health 200 2ms
2025-01-15 15:31:43 [INFO] GET /api/health 200 2ms
2025-01-15 15:31:52 [INFO] POST /api/uploads 201 1986ms
2025-01-15 15:32:02 [INFO] POST /api/auth/login 200 217ms
2025-01-15 15:32:15 [INFO] DELETE /api/users/139 204 37ms
2025-01-15 15:32:24 [INFO] GET /api/health 200 3ms
2025-01-15 15:32:26 [INFO] GET /api/analytics/dashboard 200 231ms
2025-01-15 15:32:32 [INFO] GET /api/health 200 2ms
2025-01-15 15:32:35 [INFO] GET /api/users/146 200 5ms
2025-01-15 15:32:47 [INFO] POST /api/users 201 135ms
2025-01-15 15:33:02 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 15:33:02 [DEBUG] Rows returned: 29
2025-01-15 15:33:16 [WARN] Redis reconnection attempt 80/5
2025-01-15 15:33:31 [INFO] POST /api/users 201 122ms
2025-01-15 15:33:40 [INFO] GET /api/users/118 404 12ms
2025-01-15 15:33:52 [INFO] POST /api/users 201 103ms
2025-01-15 15:34:05 [INFO] POST /api/uploads 201 688ms
2025-01-15 15:34:15 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 15:34:15 [DEBUG] Rows returned: 8
2025-01-15 15:34:22 [INFO] POST /api/users 409 12ms
2025-01-15 15:34:30 [INFO] GET /api/roles 200 7ms
2025-01-15 15:34:32 [INFO] GET /api/health 200 2ms
2025-01-15 15:34:43 [INFO] GET /api/analytics/dashboard 200 717ms
2025-01-15 15:34:46 [INFO] GET /api/settings 200 12ms
2025-01-15 15:35:00 [INFO] GET /api/settings 200 11ms
2025-01-15 15:35:04 [WARN] Deprecated API version v1 called by client client-5
2025-01-15 15:35:07 [INFO] POST /api/uploads 201 510ms
2025-01-15 15:35:08 [INFO] GET /api/notifications 200 32ms
2025-01-15 15:35:13 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 15:35:15 [INFO] POST /api/auth/login 401 97ms
2025-01-15 15:35:16 [INFO] GET /api/users 200 32ms
2025-01-15 15:35:26 [INFO] GET /api/health 200 1ms
2025-01-15 15:35:40 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 15:35:40 [DEBUG] Rows returned: 11
2025-01-15 15:35:47 [INFO] GET /api/users 200 77ms
2025-01-15 15:36:01 [INFO] GET /api/health 200 1ms
2025-01-15 15:36:15 [INFO] PUT /api/users/12 200 44ms
2025-01-15 15:36:28 [INFO] GET /api/users?role=admin 200 30ms
2025-01-15 15:36:33 [WARN] Rate limit approaching for IP 192.168.5.144 (90/100 requests in window)
2025-01-15 15:36:42 [INFO] GET /api/settings 200 10ms
2025-01-15 15:36:45 [INFO] GET /api/roles 200 6ms
2025-01-15 15:36:55 [INFO] GET /api/health 200 3ms
2025-01-15 15:37:10 [INFO] GET /api/analytics/dashboard 200 284ms
2025-01-15 15:37:14 [WARN] Rate limit approaching for IP 192.168.6.12 (84/100 requests in window)
2025-01-15 15:37:25 [INFO] POST /api/auth/refresh 200 58ms
2025-01-15 15:37:30 [INFO] DELETE /api/users/87 204 36ms
2025-01-15 15:37:31 [INFO] GET /api/roles 200 11ms
2025-01-15 15:37:39 [INFO] POST /api/uploads 201 1609ms
2025-01-15 15:37:48 [INFO] POST /api/roles 201 54ms
2025-01-15 15:38:03 [ERROR] Unhandled exception in POST /api/roles: TimeoutError
2025-01-15 15:38:03 [ERROR] Stack trace:
    at UserService.findById (src/services/user.service.ts:35)
    at Router.handle (node_modules/express/lib/router/index.js:211)
    at Layer.handle (node_modules/express/lib/router/layer.js:194)
    at RoleService.getPermissions (src/services/role.service.ts:239)
    at validateRequest (src/middleware/validation.ts:181)
2025-01-15 15:38:09 [INFO] POST /api/auth/login 200 146ms
2025-01-15 15:38:21 [INFO] GET /api/health 200 3ms
2025-01-15 15:38:22 [INFO] GET /api/users?role=viewer 200 16ms
2025-01-15 15:38:30 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 15:38:42 [INFO] PUT /api/settings 200 25ms
2025-01-15 15:38:44 [INFO] GET /api/notifications 200 31ms
2025-01-15 15:38:45 [INFO] POST /api/roles 201 33ms
2025-01-15 15:38:56 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 15:38:56 [DEBUG] New record created: id=374
2025-01-15 15:38:57 [INFO] PUT /api/settings 200 37ms
2025-01-15 15:39:09 [WARN] Rate limit exceeded for IP 192.168.3.47. Returning 429.
2025-01-15 15:39:10 [INFO] POST /api/auth/login 401 90ms
2025-01-15 15:39:12 [INFO] POST /api/users 409 20ms
2025-01-15 15:39:13 [INFO] GET /api/users 200 70ms
2025-01-15 15:39:17 [INFO] GET /api/health 200 2ms
2025-01-15 15:39:27 [INFO] GET /api/users?page=1&limit=25 200 39ms
2025-01-15 15:39:38 [INFO] GET /api/health 200 1ms
2025-01-15 15:39:39 [INFO] POST /api/auth/login 200 103ms
2025-01-15 15:39:43 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 15:39:45 [INFO] GET /api/users?page=2&limit=25 200 52ms
2025-01-15 15:39:46 [INFO] POST /api/roles 201 49ms
2025-01-15 15:39:57 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 15:39:57 [DEBUG] Rows returned: 14
2025-01-15 15:40:08 [INFO] PUT /api/settings 200 42ms
2025-01-15 15:40:14 [INFO] GET /api/health 200 1ms
2025-01-15 15:40:29 [INFO] GET /api/settings 200 10ms
2025-01-15 15:40:36 [INFO] GET /api/users 200 61ms
2025-01-15 15:40:37 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 15:40:37 [DEBUG] Rows returned: 36
2025-01-15 15:40:44 [WARN] Redis reconnection attempt 94/5
2025-01-15 15:40:56 [INFO] GET /api/health 200 2ms
2025-01-15 15:41:05 [INFO] POST /api/users 201 116ms
2025-01-15 15:41:10 [INFO] GET /api/users?page=1&limit=25 200 50ms
2025-01-15 15:41:18 [INFO] POST /api/users 409 16ms
2025-01-15 15:41:21 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 15:41:21 [DEBUG] Rows returned: 4
2025-01-15 15:41:29 [INFO] POST /api/auth/login 200 200ms
2025-01-15 15:41:32 [INFO] POST /api/auth/refresh 200 67ms
2025-01-15 15:41:33 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 15:41:33 [DEBUG] Rows returned: 36
2025-01-15 15:41:45 [INFO] GET /api/health 200 1ms
2025-01-15 15:41:58 [INFO] GET /api/users?role=admin 200 38ms
2025-01-15 15:42:11 [INFO] GET /api/users 200 47ms
2025-01-15 15:42:15 [INFO] POST /api/uploads 201 1018ms
2025-01-15 15:42:19 [INFO] GET /api/users/23 404 15ms
2025-01-15 15:42:23 [INFO] GET /api/health 200 3ms
2025-01-15 15:42:38 [INFO] GET /api/users?role=viewer 200 32ms
2025-01-15 15:42:51 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 15:43:03 [INFO] POST /api/auth/login 401 55ms
2025-01-15 15:43:07 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 15:43:16 [INFO] GET /api/roles 200 14ms
2025-01-15 15:43:19 [INFO] POST /api/auth/refresh 200 40ms
2025-01-15 15:43:23 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 15:43:23 [DEBUG] New record created: id=53
2025-01-15 15:43:26 [INFO] POST /api/users 409 21ms
2025-01-15 15:43:41 [WARN] Rate limit approaching for IP 192.168.8.186 (80/100 requests in window)
2025-01-15 15:43:43 [INFO] GET /api/health 200 3ms
2025-01-15 15:43:50 [INFO] GET /api/users?page=5&limit=25 200 45ms
2025-01-15 15:44:00 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 15:44:00 [DEBUG] Rows returned: 30
2025-01-15 15:44:03 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 15:44:03 [DEBUG] Rows returned: 24
2025-01-15 15:44:12 [INFO] GET /api/users 200 55ms
2025-01-15 15:44:21 [INFO] GET /api/health 200 3ms
2025-01-15 15:44:31 [INFO] GET /api/health 200 1ms
2025-01-15 15:44:40 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 15:44:46 [WARN] Memory usage at 80% of allocated heap
2025-01-15 15:44:47 [INFO] PUT /api/users/158 200 48ms
2025-01-15 15:44:58 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 15:45:03 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 15:45:03 [DEBUG] Rows returned: 8
2025-01-15 15:45:18 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 15:45:18 [DEBUG] New record created: id=432
2025-01-15 15:45:20 [INFO] GET /api/users?page=1&limit=25 200 33ms
2025-01-15 15:45:32 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 15:45:32 [DEBUG] Rows returned: 8
2025-01-15 15:45:33 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 15:45:33 [DEBUG] Rows returned: 17
2025-01-15 15:45:48 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 15:45:48 [DEBUG] New record created: id=162
2025-01-15 15:46:02 [INFO] POST /api/auth/refresh 200 74ms
2025-01-15 15:46:17 [INFO] GET /api/users?page=1&limit=25 200 33ms
2025-01-15 15:46:26 [INFO] GET /api/users?role=moderator 200 27ms
2025-01-15 15:46:30 [INFO] GET /api/users 200 54ms
2025-01-15 15:46:38 [INFO] GET /api/settings 200 6ms
2025-01-15 15:46:49 [INFO] POST /api/users 409 12ms
2025-01-15 15:46:57 [INFO] PUT /api/settings 200 53ms
2025-01-15 15:47:01 [INFO] GET /api/health 200 2ms
2025-01-15 15:47:03 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 15:47:03 [DEBUG] Rows returned: 10
2025-01-15 15:47:06 [INFO] PUT /api/users/31 200 40ms
2025-01-15 15:47:15 [INFO] POST /api/auth/login 200 200ms
2025-01-15 15:47:23 [WARN] Slow query detected: SELECT * FROM users WHERE role_id = $1 AND active = true (took 778ms)
2025-01-15 15:47:29 [INFO] POST /api/roles 201 49ms
2025-01-15 15:47:40 [INFO] POST /api/auth/login 401 74ms
2025-01-15 15:47:52 [INFO] POST /api/auth/login 401 98ms
2025-01-15 15:47:55 [INFO] POST /api/users 201 135ms
2025-01-15 15:48:10 [INFO] GET /api/health 200 1ms
2025-01-15 15:48:15 [WARN] Memory usage at 85% of allocated heap
2025-01-15 15:48:26 [INFO] GET /api/notifications 200 33ms
2025-01-15 15:48:34 [WARN] S3 upload retry after timeout (1565ms)
2025-01-15 15:48:39 [WARN] Rate limit approaching for IP 192.168.10.175 (92/100 requests in window)
2025-01-15 15:48:45 [INFO] GET /api/health 200 1ms
2025-01-15 15:48:57 [WARN] Memory usage at 86% of allocated heap
2025-01-15 15:49:01 [INFO] PUT /api/users/9 200 45ms
2025-01-15 15:49:13 [INFO] GET /api/health 200 3ms
2025-01-15 15:49:22 [INFO] GET /api/health 200 2ms
2025-01-15 15:49:35 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 15:49:35 [DEBUG] Rows returned: 36
2025-01-15 15:49:46 [INFO] GET /api/users?role=moderator 200 37ms
2025-01-15 15:50:01 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 15:50:13 [INFO] GET /api/health 200 3ms
2025-01-15 15:50:19 [WARN] Deprecated API version v1 called by client client-13
2025-01-15 15:50:29 [INFO] GET /api/health 200 2ms
2025-01-15 15:50:42 [INFO] PUT /api/users/72 200 51ms
2025-01-15 15:50:48 [INFO] GET /api/health 200 2ms
2025-01-15 15:51:03 [INFO] GET /api/health 200 3ms
2025-01-15 15:51:18 [WARN] Redis reconnection attempt 92/5
2025-01-15 15:51:28 [INFO] POST /api/roles 201 45ms
2025-01-15 15:51:29 [INFO] GET /api/roles 200 14ms
2025-01-15 15:51:31 [INFO] POST /api/auth/login 200 167ms
2025-01-15 15:51:42 [INFO] PUT /api/users/64 200 47ms
2025-01-15 15:51:47 [INFO] GET /api/health 200 2ms
2025-01-15 15:51:51 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 15:51:51 [DEBUG] Rows returned: 28
2025-01-15 15:52:01 [INFO] POST /api/auth/refresh 200 31ms
2025-01-15 15:52:10 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 15:52:10 [DEBUG] Rows returned: 7
2025-01-15 15:52:18 [WARN] Deprecated API version v1 called by client client-15
2025-01-15 15:52:23 [INFO] PUT /api/users/93 200 67ms
2025-01-15 15:52:38 [WARN] JWT token expires in less than 60 seconds for user 166
2025-01-15 15:52:53 [INFO] GET /api/health 200 1ms
2025-01-15 15:53:05 [INFO] GET /api/users?role=editor 200 29ms
2025-01-15 15:53:13 [INFO] GET /api/settings 200 11ms
2025-01-15 15:53:17 [INFO] GET /api/health 200 3ms
2025-01-15 15:53:31 [INFO] GET /api/users?page=5&limit=25 200 29ms
2025-01-15 15:53:32 [WARN] Deprecated API version v1 called by client client-1
2025-01-15 15:53:46 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 15:53:46 [DEBUG] Rows returned: 8
2025-01-15 15:53:48 [INFO] GET /api/users?role=editor 200 28ms
2025-01-15 15:53:49 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 15:53:59 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 15:53:59 [DEBUG] Rows returned: 49
2025-01-15 15:54:14 [INFO] POST /api/auth/login 200 142ms
2025-01-15 15:54:29 [INFO] GET /api/users/51 404 13ms
2025-01-15 15:54:35 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 15:54:35 [DEBUG] New record created: id=447
2025-01-15 15:54:42 [INFO] GET /api/health 200 3ms
2025-01-15 15:54:53 [INFO] GET /api/health 200 1ms
2025-01-15 15:54:59 [INFO] GET /api/users?page=2&limit=25 200 40ms
2025-01-15 15:55:02 [INFO] POST /api/auth/refresh 200 68ms
2025-01-15 15:55:12 [INFO] POST /api/roles 201 52ms
2025-01-15 15:55:16 [INFO] POST /api/auth/login 401 94ms
2025-01-15 15:55:17 [INFO] GET /api/users/13 200 10ms
2025-01-15 15:55:24 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 15:55:24 [DEBUG] Rows returned: 48
2025-01-15 15:55:33 [INFO] GET /api/health 200 1ms
2025-01-15 15:55:40 [INFO] GET /api/health 200 2ms
2025-01-15 15:55:42 [INFO] POST /api/uploads 201 1509ms
2025-01-15 15:55:53 [INFO] GET /api/health 200 3ms
2025-01-15 15:56:00 [WARN] Memory usage at 85% of allocated heap
2025-01-15 15:56:03 [INFO] PUT /api/users/177 200 50ms
2025-01-15 15:56:18 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 15:56:18 [DEBUG] Rows returned: 40
2025-01-15 15:56:20 [INFO] GET /api/health 200 2ms
2025-01-15 15:56:25 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 15:56:37 [WARN] Request body exceeded soft limit (3544KB)
2025-01-15 15:56:38 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 15:56:43 [INFO] GET /api/analytics/dashboard 200 206ms
2025-01-15 15:56:51 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 15:57:05 [INFO] POST /api/roles 201 50ms
2025-01-15 15:57:08 [INFO] GET /api/users/57 200 17ms
2025-01-15 15:57:19 [INFO] POST /api/roles 201 66ms
2025-01-15 15:57:33 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 15:57:33 [DEBUG] Rows returned: 23
2025-01-15 15:57:40 [INFO] GET /api/roles 200 10ms
2025-01-15 15:57:45 [INFO] POST /api/users 409 12ms
2025-01-15 15:57:52 [ERROR] Worker process crashed. Restarting...
2025-01-15 15:57:59 [INFO] GET /api/settings 200 11ms
2025-01-15 15:58:09 [ERROR] Deadlock detected in transaction tx-56891
2025-01-15 15:58:09 [ERROR] Stack trace:
    at UserService.findById (src/services/user.service.ts:80)
    at Router.handle (node_modules/express/lib/router/index.js:19)
    at processTicksAndRejections (node:internal/process/task_queues:139)
    at authenticate (src/middleware/auth.ts:96)
2025-01-15 15:58:16 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 15:58:18 [INFO] GET /api/users/52 200 17ms
2025-01-15 15:58:26 [INFO] POST /api/auth/refresh 200 63ms
2025-01-15 15:58:34 [INFO] POST /api/users 409 17ms
2025-01-15 15:58:36 [INFO] GET /api/health 200 1ms
2025-01-15 15:58:39 [INFO] POST /api/auth/login 200 186ms
2025-01-15 15:58:51 [INFO] GET /api/notifications 200 23ms
2025-01-15 15:58:57 [INFO] PUT /api/users/162 200 47ms
2025-01-15 15:59:07 [INFO] POST /api/auth/login 200 107ms
2025-01-15 15:59:16 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 15:59:27 [INFO] DELETE /api/users/32 204 25ms
2025-01-15 15:59:29 [INFO] GET /api/users?page=4&limit=25 200 49ms
2025-01-15 15:59:34 [ERROR] Deadlock detected in transaction tx-10902
2025-01-15 15:59:34 [ERROR] Stack trace:
    at UserService.findById (src/services/user.service.ts:297)
    at RoleService.getPermissions (src/services/role.service.ts:247)
    at authenticate (src/middleware/auth.ts:212)
2025-01-15 15:59:39 [INFO] POST /api/auth/login 401 107ms
2025-01-15 15:59:49 [INFO] POST /api/roles 201 54ms
2025-01-15 16:00:04 [INFO] GET /api/users 200 26ms
2025-01-15 16:00:11 [INFO] GET /api/users?role=editor 200 21ms
2025-01-15 16:00:12 [INFO] POST /api/auth/login 200 147ms
2025-01-15 16:00:20 [INFO] GET /api/users/163 404 17ms
2025-01-15 16:00:32 [INFO] GET /api/users?role=admin 200 33ms
2025-01-15 16:00:40 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 16:00:40 [DEBUG] New record created: id=238
2025-01-15 16:00:46 [INFO] GET /api/notifications 200 31ms
2025-01-15 16:00:50 [INFO] DELETE /api/users/21 204 29ms
2025-01-15 16:01:05 [INFO] POST /api/uploads 201 1305ms
2025-01-15 16:01:11 [WARN] Request body exceeded soft limit (2313KB)
2025-01-15 16:01:23 [INFO] GET /api/users/79 200 12ms
2025-01-15 16:01:36 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 16:01:36 [DEBUG] Rows returned: 16
2025-01-15 16:01:41 [INFO] POST /api/roles 201 46ms
2025-01-15 16:01:42 [INFO] POST /api/uploads 201 597ms
2025-01-15 16:01:52 [INFO] POST /api/auth/login 401 118ms
2025-01-15 16:02:03 [INFO] GET /api/health 200 3ms
2025-01-15 16:02:13 [INFO] GET /api/health 200 2ms
2025-01-15 16:02:15 [INFO] GET /api/users/3 404 8ms
2025-01-15 16:02:27 [INFO] GET /api/analytics/dashboard 200 534ms
2025-01-15 16:02:32 [INFO] GET /api/health 200 3ms
2025-01-15 16:02:38 [INFO] POST /api/auth/login 401 66ms
2025-01-15 16:02:52 [INFO] GET /api/health 200 1ms
2025-01-15 16:02:56 [INFO] POST /api/roles 201 54ms
2025-01-15 16:03:11 [INFO] PUT /api/settings 200 29ms
2025-01-15 16:03:26 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 16:03:26 [DEBUG] Rows returned: 6
2025-01-15 16:03:29 [INFO] GET /api/health 200 1ms
2025-01-15 16:03:41 [INFO] GET /api/health 200 2ms
2025-01-15 16:03:55 [INFO] GET /api/users?page=2&limit=25 200 46ms
2025-01-15 16:04:05 [INFO] GET /api/analytics/dashboard 200 787ms
2025-01-15 16:04:15 [INFO] GET /api/users/67 200 14ms
2025-01-15 16:04:19 [INFO] GET /api/users?role=moderator 200 17ms
2025-01-15 16:04:21 [INFO] POST /api/uploads 201 919ms
2025-01-15 16:04:26 [INFO] GET /api/health 200 1ms
2025-01-15 16:04:40 [INFO] POST /api/users 201 119ms
2025-01-15 16:04:48 [INFO] GET /api/roles 200 5ms
2025-01-15 16:04:53 [INFO] POST /api/auth/refresh 200 77ms
2025-01-15 16:05:05 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 16:05:05 [DEBUG] Rows returned: 25
2025-01-15 16:05:18 [INFO] GET /api/health 200 1ms
2025-01-15 16:05:19 [INFO] GET /api/users?role=editor 200 23ms
2025-01-15 16:05:26 [INFO] GET /api/health 200 1ms
2025-01-15 16:05:29 [INFO] GET /api/health 200 3ms
2025-01-15 16:05:31 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 16:05:31 [DEBUG] Rows returned: 28
2025-01-15 16:05:46 [INFO] POST /api/auth/refresh 200 49ms
2025-01-15 16:05:50 [INFO] GET /api/health 200 1ms
2025-01-15 16:05:53 [INFO] GET /api/users?page=2&limit=25 200 60ms
2025-01-15 16:06:03 [WARN] Request body exceeded soft limit (2146KB)
2025-01-15 16:06:12 [ERROR] Unhandled exception in PUT /api/settings: ValidationError
2025-01-15 16:06:12 [ERROR] Stack trace:
    at authenticate (src/middleware/auth.ts:127)
    at AuthService.validateToken (src/services/auth.service.ts:21)
    at UserController.getUser (src/controllers/user.controller.ts:122)
    at Layer.handle (node_modules/express/lib/router/layer.js:111)
    at UserService.findById (src/services/user.service.ts:139)
2025-01-15 16:06:19 [INFO] GET /api/users/188 200 19ms
2025-01-15 16:06:25 [WARN] Slow query detected: SELECT * FROM permissions WHERE role_id = $1 (took 1174ms)
2025-01-15 16:06:39 [INFO] GET /api/users 200 38ms
2025-01-15 16:06:40 [INFO] POST /api/users 409 15ms
2025-01-15 16:06:44 [INFO] GET /api/roles 200 7ms
2025-01-15 16:06:53 [INFO] GET /api/users/149 200 19ms
2025-01-15 16:07:05 [INFO] POST /api/users 409 11ms
2025-01-15 16:07:20 [INFO] POST /api/auth/refresh 200 72ms
2025-01-15 16:07:35 [INFO] GET /api/users/122 404 12ms
2025-01-15 16:07:42 [INFO] PUT /api/settings 200 44ms
2025-01-15 16:07:48 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 16:07:57 [INFO] GET /api/health 200 2ms
2025-01-15 16:08:00 [INFO] GET /api/health 200 2ms
2025-01-15 16:08:11 [INFO] GET /api/notifications 200 20ms
2025-01-15 16:08:21 [INFO] GET /api/settings 200 11ms
2025-01-15 16:08:34 [INFO] GET /api/roles 200 12ms
2025-01-15 16:08:38 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 16:08:38 [DEBUG] Rows returned: 36
2025-01-15 16:08:51 [WARN] Rate limit exceeded for IP 192.168.2.23. Returning 429.
2025-01-15 16:08:52 [INFO] GET /api/users?page=5&limit=25 200 28ms
2025-01-15 16:09:03 [WARN] Rate limit approaching for IP 192.168.8.75 (81/100 requests in window)
2025-01-15 16:09:05 [INFO] PUT /api/settings 200 31ms
2025-01-15 16:09:15 [INFO] GET /api/users/127 404 10ms
2025-01-15 16:09:18 [WARN] Request body exceeded soft limit (1839KB)
2025-01-15 16:09:24 [INFO] GET /api/health 200 1ms
2025-01-15 16:09:27 [INFO] POST /api/users 409 22ms
2025-01-15 16:09:41 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 16:09:46 [INFO] GET /api/health 200 3ms
2025-01-15 16:09:56 [WARN] Slow query detected: UPDATE users SET active = false WHERE id = $1 (took 1251ms)
2025-01-15 16:10:05 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 16:10:05 [DEBUG] Rows returned: 39
2025-01-15 16:10:18 [INFO] GET /api/health 200 1ms
2025-01-15 16:10:31 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 16:10:31 [DEBUG] Rows returned: 16
2025-01-15 16:10:41 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 16:10:41 [DEBUG] New record created: id=253
2025-01-15 16:10:48 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 16:10:51 [WARN] S3 upload retry after timeout (948ms)
2025-01-15 16:10:57 [INFO] GET /api/health 200 1ms
2025-01-15 16:11:12 [INFO] POST /api/users 201 131ms
2025-01-15 16:11:18 [INFO] POST /api/users 201 127ms
2025-01-15 16:11:28 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 16:11:28 [DEBUG] New record created: id=127
2025-01-15 16:11:38 [INFO] GET /api/users/83 200 6ms
2025-01-15 16:11:41 [INFO] GET /api/users?role=moderator 200 28ms
2025-01-15 16:11:45 [INFO] POST /api/users 201 117ms
2025-01-15 16:11:56 [INFO] GET /api/health 200 1ms
2025-01-15 16:11:57 [INFO] GET /api/users/86 200 5ms
2025-01-15 16:12:08 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 16:12:08 [DEBUG] Rows returned: 6
2025-01-15 16:12:12 [INFO] GET /api/users/58 404 12ms
2025-01-15 16:12:22 [INFO] DELETE /api/users/181 204 46ms
2025-01-15 16:12:33 [INFO] POST /api/users 201 127ms
2025-01-15 16:12:45 [INFO] GET /api/users/183 404 10ms
2025-01-15 16:12:59 [INFO] POST /api/auth/login 401 88ms
2025-01-15 16:13:14 [INFO] GET /api/settings 200 5ms
2025-01-15 16:13:21 [INFO] POST /api/roles 201 32ms
2025-01-15 16:13:34 [INFO] GET /api/settings 200 12ms
2025-01-15 16:13:38 [INFO] GET /api/health 200 3ms
2025-01-15 16:13:44 [INFO] GET /api/health 200 2ms
2025-01-15 16:13:55 [INFO] POST /api/auth/login 200 211ms
2025-01-15 16:14:07 [INFO] POST /api/roles 201 69ms
2025-01-15 16:14:10 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 16:14:10 [DEBUG] Rows returned: 9
2025-01-15 16:14:13 [INFO] POST /api/users 409 11ms
2025-01-15 16:14:18 [INFO] GET /api/roles 200 9ms
2025-01-15 16:14:30 [INFO] GET /api/notifications 200 25ms
2025-01-15 16:14:44 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 16:14:44 [DEBUG] New record created: id=472
2025-01-15 16:14:57 [INFO] PUT /api/settings 200 53ms
2025-01-15 16:14:59 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 16:14:59 [DEBUG] New record created: id=407
2025-01-15 16:15:03 [INFO] POST /api/uploads 201 1384ms
2025-01-15 16:15:10 [INFO] POST /api/users 409 10ms
2025-01-15 16:15:16 [WARN] Rate limit exceeded for IP 192.168.4.140. Returning 429.
2025-01-15 16:15:27 [INFO] POST /api/users 409 17ms
2025-01-15 16:15:36 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 16:15:36 [DEBUG] Rows returned: 35
2025-01-15 16:15:48 [INFO] POST /api/auth/login 401 57ms
2025-01-15 16:15:49 [INFO] POST /api/uploads 201 1436ms
2025-01-15 16:16:02 [INFO] DELETE /api/users/59 204 48ms
2025-01-15 16:16:06 [INFO] GET /api/health 200 3ms
2025-01-15 16:16:16 [INFO] GET /api/health 200 3ms
2025-01-15 16:16:29 [INFO] GET /api/health 200 1ms
2025-01-15 16:16:33 [INFO] GET /api/health 200 2ms
2025-01-15 16:16:48 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 16:16:48 [DEBUG] New record created: id=222
2025-01-15 16:16:59 [INFO] POST /api/uploads 201 1314ms
2025-01-15 16:17:07 [INFO] POST /api/auth/login 401 50ms
2025-01-15 16:17:09 [INFO] GET /api/notifications 200 32ms
2025-01-15 16:17:19 [INFO] POST /api/uploads 201 882ms
2025-01-15 16:17:27 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 16:17:27 [DEBUG] Rows returned: 4
2025-01-15 16:17:36 [INFO] GET /api/health 200 2ms
2025-01-15 16:17:38 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 16:17:38 [DEBUG] Rows returned: 48
2025-01-15 16:17:49 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 16:17:52 [INFO] POST /api/uploads 201 1006ms
2025-01-15 16:18:05 [INFO] POST /api/users 201 94ms
2025-01-15 16:18:13 [WARN] Rate limit approaching for IP 192.168.7.149 (97/100 requests in window)
2025-01-15 16:18:18 [INFO] GET /api/analytics/dashboard 200 600ms
2025-01-15 16:18:25 [INFO] POST /api/auth/login 200 190ms
2025-01-15 16:18:35 [INFO] GET /api/health 200 1ms
2025-01-15 16:18:41 [INFO] POST /api/roles 201 50ms
2025-01-15 16:18:45 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 16:18:45 [DEBUG] Rows returned: 27
2025-01-15 16:18:56 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 16:18:56 [DEBUG] Rows returned: 47
2025-01-15 16:19:01 [INFO] GET /api/health 200 3ms
2025-01-15 16:19:15 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 16:19:15 [DEBUG] Rows returned: 17
2025-01-15 16:19:26 [INFO] PUT /api/settings 200 39ms
2025-01-15 16:19:28 [INFO] GET /api/health 200 3ms
2025-01-15 16:19:38 [INFO] GET /api/health 200 3ms
2025-01-15 16:19:46 [INFO] GET /api/analytics/dashboard 200 784ms
2025-01-15 16:19:51 [INFO] GET /api/users/131 200 14ms
2025-01-15 16:19:53 [INFO] DELETE /api/users/74 204 50ms
2025-01-15 16:20:04 [INFO] POST /api/auth/login 200 174ms
2025-01-15 16:20:17 [INFO] GET /api/health 200 1ms
2025-01-15 16:20:30 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 16:20:30 [DEBUG] Rows returned: 40
2025-01-15 16:20:39 [INFO] GET /api/health 200 1ms
2025-01-15 16:20:45 [WARN] Rate limit approaching for IP 192.168.7.36 (94/100 requests in window)
2025-01-15 16:20:54 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 16:20:54 [DEBUG] Rows returned: 1
2025-01-15 16:21:08 [INFO] GET /api/roles 200 13ms
2025-01-15 16:21:10 [INFO] GET /api/health 200 1ms
2025-01-15 16:21:19 [INFO] GET /api/health 200 3ms
2025-01-15 16:21:28 [INFO] GET /api/users 200 67ms
2025-01-15 16:21:42 [INFO] DELETE /api/users/159 204 46ms
2025-01-15 16:21:56 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 16:21:56 [DEBUG] Rows returned: 35
2025-01-15 16:22:02 [INFO] DELETE /api/users/4 204 45ms
2025-01-15 16:22:08 [WARN] Slow query detected: SELECT * FROM users WHERE active = true ORDER BY created_at  (took 735ms)
2025-01-15 16:22:23 [INFO] GET /api/health 200 3ms
2025-01-15 16:22:29 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 16:22:29 [DEBUG] Rows returned: 22
2025-01-15 16:22:36 [INFO] POST /api/uploads 201 1608ms
2025-01-15 16:22:47 [INFO] GET /api/health 200 2ms
2025-01-15 16:22:54 [INFO] GET /api/users 200 66ms
2025-01-15 16:22:56 [INFO] POST /api/users 409 13ms
2025-01-15 16:23:07 [INFO] GET /api/health 200 2ms
2025-01-15 16:23:13 [INFO] GET /api/health 200 1ms
2025-01-15 16:23:14 [INFO] POST /api/roles 201 68ms
2025-01-15 16:23:24 [WARN] Request body exceeded soft limit (3565KB)
2025-01-15 16:23:29 [WARN] Request body exceeded soft limit (4073KB)
2025-01-15 16:23:32 [INFO] POST /api/auth/login 401 73ms
2025-01-15 16:23:34 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 16:23:34 [DEBUG] Rows returned: 15
2025-01-15 16:23:38 [WARN] Memory usage at 84% of allocated heap
2025-01-15 16:23:47 [INFO] GET /api/users?role=editor 200 28ms
2025-01-15 16:23:53 [INFO] DELETE /api/users/137 204 20ms
2025-01-15 16:24:01 [INFO] GET /api/health 200 1ms
2025-01-15 16:24:06 [INFO] GET /api/users?page=2&limit=25 200 28ms
2025-01-15 16:24:07 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 16:24:07 [DEBUG] Rows returned: 8
2025-01-15 16:24:18 [INFO] GET /api/users/18 200 9ms
2025-01-15 16:24:29 [WARN] JWT token expires in less than 60 seconds for user 143
2025-01-15 16:24:35 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 16:24:35 [DEBUG] Rows returned: 35
2025-01-15 16:24:41 [INFO] GET /api/settings 200 10ms
2025-01-15 16:24:44 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 16:24:44 [DEBUG] Rows returned: 6
2025-01-15 16:24:51 [INFO] GET /api/notifications 200 29ms
2025-01-15 16:24:53 [INFO] GET /api/users 200 79ms
2025-01-15 16:25:04 [INFO] POST /api/roles 201 58ms
2025-01-15 16:25:12 [INFO] GET /api/analytics/dashboard 200 565ms
2025-01-15 16:25:25 [INFO] POST /api/auth/refresh 200 80ms
2025-01-15 16:25:39 [INFO] GET /api/users?page=5&limit=25 200 54ms
2025-01-15 16:25:43 [INFO] PUT /api/settings 200 34ms
2025-01-15 16:25:51 [INFO] GET /api/health 200 3ms
2025-01-15 16:25:55 [INFO] GET /api/users/177 200 10ms
2025-01-15 16:26:02 [WARN] Redis reconnection attempt 85/5
2025-01-15 16:26:10 [INFO] PUT /api/users/3 200 67ms
2025-01-15 16:26:13 [INFO] GET /api/users/81 200 19ms
2025-01-15 16:26:25 [INFO] GET /api/users?role=editor 200 38ms
2025-01-15 16:26:29 [INFO] GET /api/notifications 200 28ms
2025-01-15 16:26:43 [INFO] POST /api/auth/login 401 87ms
2025-01-15 16:26:48 [INFO] GET /api/health 200 2ms
2025-01-15 16:26:50 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 16:26:50 [DEBUG] Rows returned: 47
2025-01-15 16:26:57 [WARN] S3 upload retry after timeout (1505ms)
2025-01-15 16:27:07 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 16:27:22 [INFO] POST /api/auth/login 401 53ms
2025-01-15 16:27:34 [INFO] GET /api/users 200 39ms
2025-01-15 16:27:44 [INFO] DELETE /api/users/176 204 23ms
2025-01-15 16:27:56 [INFO] PUT /api/settings 200 30ms
2025-01-15 16:28:07 [INFO] GET /api/roles 200 15ms
2025-01-15 16:28:17 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 16:28:23 [INFO] POST /api/uploads 201 1800ms
2025-01-15 16:28:35 [INFO] GET /api/notifications 200 11ms
2025-01-15 16:28:38 [INFO] POST /api/auth/refresh 200 68ms
2025-01-15 16:28:49 [INFO] GET /api/health 200 3ms
2025-01-15 16:29:03 [INFO] POST /api/users 201 137ms
2025-01-15 16:29:18 [INFO] GET /api/health 200 2ms
2025-01-15 16:29:31 [INFO] GET /api/roles 200 7ms
2025-01-15 16:29:40 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 16:29:41 [INFO] GET /api/notifications 200 13ms
2025-01-15 16:29:54 [INFO] DELETE /api/users/157 204 22ms
2025-01-15 16:29:59 [WARN] Deprecated API version v1 called by client client-6
2025-01-15 16:30:07 [INFO] GET /api/users?page=5&limit=25 200 52ms
2025-01-15 16:30:22 [INFO] PUT /api/users/57 200 80ms
2025-01-15 16:30:36 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 16:30:36 [DEBUG] Rows returned: 32
2025-01-15 16:30:45 [INFO] GET /api/health 200 3ms
2025-01-15 16:30:53 [WARN] Slow query detected: SELECT COUNT(*) FROM users GROUP BY role_id (took 952ms)
2025-01-15 16:30:57 [INFO] GET /api/health 200 1ms
2025-01-15 16:30:58 [INFO] POST /api/uploads 201 775ms
2025-01-15 16:31:09 [INFO] GET /api/health 200 2ms
2025-01-15 16:31:11 [INFO] POST /api/auth/login 401 91ms
2025-01-15 16:31:25 [INFO] GET /api/users/129 404 12ms
2025-01-15 16:31:31 [INFO] POST /api/users 201 106ms
2025-01-15 16:31:38 [INFO] GET /api/users?role=moderator 200 27ms
2025-01-15 16:31:51 [INFO] POST /api/auth/refresh 200 62ms
2025-01-15 16:32:03 [INFO] GET /api/settings 200 8ms
2025-01-15 16:32:16 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 16:32:16 [DEBUG] Rows returned: 0
2025-01-15 16:32:27 [INFO] GET /api/users?role=moderator 200 26ms
2025-01-15 16:32:38 [WARN] JWT token expires in less than 60 seconds for user 150
2025-01-15 16:32:46 [INFO] GET /api/users?page=1&limit=25 200 49ms
2025-01-15 16:32:51 [INFO] PUT /api/settings 200 35ms
2025-01-15 16:32:59 [INFO] POST /api/auth/refresh 200 68ms
2025-01-15 16:33:06 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 16:33:09 [INFO] POST /api/auth/login 200 205ms
2025-01-15 16:33:11 [INFO] GET /api/users/160 404 18ms
2025-01-15 16:33:26 [INFO] POST /api/uploads 201 1043ms
2025-01-15 16:33:27 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 16:33:28 [INFO] PUT /api/users/3 200 71ms
2025-01-15 16:33:35 [INFO] POST /api/users 201 113ms
2025-01-15 16:33:46 [INFO] GET /api/users/136 404 13ms
2025-01-15 16:33:59 [INFO] GET /api/health 200 1ms
2025-01-15 16:34:06 [INFO] GET /api/roles 200 7ms
2025-01-15 16:34:09 [INFO] GET /api/roles 200 10ms
2025-01-15 16:34:22 [WARN] Rate limit approaching for IP 192.168.6.138 (94/100 requests in window)
2025-01-15 16:34:27 [INFO] GET /api/health 200 1ms
2025-01-15 16:34:38 [WARN] Redis reconnection attempt 92/5
2025-01-15 16:34:42 [INFO] GET /api/notifications 200 27ms
2025-01-15 16:34:50 [INFO] GET /api/users?page=2&limit=25 200 38ms
2025-01-15 16:34:57 [INFO] GET /api/analytics/dashboard 200 296ms
2025-01-15 16:35:01 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 16:35:02 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 16:35:02 [DEBUG] Rows returned: 22
2025-01-15 16:35:06 [INFO] POST /api/auth/login 401 66ms
2025-01-15 16:35:13 [INFO] GET /api/roles 200 6ms
2025-01-15 16:35:24 [INFO] GET /api/health 200 1ms
2025-01-15 16:35:39 [INFO] GET /api/users 200 54ms
2025-01-15 16:35:42 [INFO] GET /api/roles 200 12ms
2025-01-15 16:35:54 [INFO] GET /api/roles 200 9ms
2025-01-15 16:36:00 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 16:36:12 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 16:36:12 [DEBUG] Rows returned: 40
2025-01-15 16:36:27 [INFO] GET /api/roles 200 14ms
2025-01-15 16:36:39 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 16:36:39 [DEBUG] Rows returned: 9
2025-01-15 16:36:51 [INFO] GET /api/roles 200 7ms
2025-01-15 16:36:54 [INFO] GET /api/analytics/dashboard 200 496ms
2025-01-15 16:36:55 [INFO] PUT /api/users/45 200 46ms
2025-01-15 16:37:04 [INFO] GET /api/health 200 1ms
2025-01-15 16:37:05 [INFO] POST /api/auth/login 200 197ms
2025-01-15 16:37:09 [INFO] GET /api/health 200 3ms
2025-01-15 16:37:20 [INFO] POST /api/users 201 122ms
2025-01-15 16:37:33 [INFO] GET /api/health 200 2ms
2025-01-15 16:37:48 [INFO] GET /api/health 200 3ms
2025-01-15 16:37:51 [INFO] GET /api/users?page=5&limit=25 200 26ms
2025-01-15 16:37:52 [INFO] GET /api/analytics/dashboard 200 261ms
2025-01-15 16:37:54 [INFO] POST /api/users 201 139ms
2025-01-15 16:37:58 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 16:37:58 [DEBUG] Rows returned: 12
2025-01-15 16:38:11 [INFO] GET /api/health 200 3ms
2025-01-15 16:38:19 [INFO] GET /api/users/28 200 17ms
2025-01-15 16:38:29 [INFO] GET /api/notifications 200 25ms
2025-01-15 16:38:32 [INFO] GET /api/health 200 3ms
2025-01-15 16:38:39 [INFO] GET /api/health 200 2ms
2025-01-15 16:38:41 [INFO] POST /api/uploads 201 1431ms
2025-01-15 16:38:46 [INFO] POST /api/auth/login 401 88ms
2025-01-15 16:38:51 [INFO] GET /api/health 200 1ms
2025-01-15 16:38:54 [INFO] GET /api/users/166 200 9ms
2025-01-15 16:39:00 [INFO] GET /api/settings 200 5ms
2025-01-15 16:39:10 [INFO] POST /api/auth/refresh 200 69ms
2025-01-15 16:39:11 [INFO] POST /api/users 409 13ms
2025-01-15 16:39:15 [WARN] JWT token expires in less than 60 seconds for user 70
2025-01-15 16:39:21 [INFO] GET /api/health 200 2ms
2025-01-15 16:39:31 [INFO] GET /api/users/98 404 9ms
2025-01-15 16:39:33 [INFO] GET /api/users/82 404 14ms
2025-01-15 16:39:42 [INFO] GET /api/health 200 3ms
2025-01-15 16:39:47 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 16:39:47 [DEBUG] New record created: id=261
2025-01-15 16:39:52 [INFO] POST /api/auth/login 401 77ms
2025-01-15 16:40:00 [INFO] GET /api/users 200 54ms
2025-01-15 16:40:05 [INFO] DELETE /api/users/113 204 23ms
2025-01-15 16:40:15 [INFO] POST /api/roles 201 57ms
2025-01-15 16:40:20 [INFO] POST /api/auth/login 200 132ms
2025-01-15 16:40:34 [INFO] GET /api/users?role=viewer 200 23ms
2025-01-15 16:40:43 [INFO] POST /api/auth/refresh 200 44ms
2025-01-15 16:40:53 [WARN] Request body exceeded soft limit (1040KB)
2025-01-15 16:40:57 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 16:40:57 [DEBUG] Rows returned: 43
2025-01-15 16:41:09 [INFO] GET /api/health 200 1ms
2025-01-15 16:41:22 [INFO] GET /api/users 200 58ms
2025-01-15 16:41:29 [INFO] POST /api/roles 201 45ms
2025-01-15 16:41:39 [INFO] GET /api/health 200 2ms
2025-01-15 16:41:41 [INFO] GET /api/health 200 3ms
2025-01-15 16:41:54 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 16:41:54 [DEBUG] New record created: id=470
2025-01-15 16:41:58 [INFO] GET /api/analytics/dashboard 200 744ms
2025-01-15 16:42:11 [INFO] POST /api/auth/refresh 200 30ms
2025-01-15 16:42:20 [INFO] GET /api/health 200 2ms
2025-01-15 16:42:25 [INFO] GET /api/users/141 200 13ms
2025-01-15 16:42:32 [INFO] GET /api/users 200 40ms
2025-01-15 16:42:39 [INFO] GET /api/users/186 404 9ms
2025-01-15 16:42:54 [INFO] GET /api/users/82 200 16ms
2025-01-15 16:43:06 [INFO] GET /api/notifications 200 10ms
2025-01-15 16:43:10 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 16:43:10 [DEBUG] Rows returned: 0
2025-01-15 16:43:12 [INFO] GET /api/users?role=editor 200 28ms
2025-01-15 16:43:19 [INFO] GET /api/users?role=viewer 200 33ms
2025-01-15 16:43:34 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 16:43:34 [DEBUG] Rows returned: 27
2025-01-15 16:43:42 [INFO] GET /api/users 200 33ms
2025-01-15 16:43:47 [INFO] GET /api/health 200 3ms
2025-01-15 16:43:48 [INFO] GET /api/health 200 3ms
2025-01-15 16:44:01 [INFO] GET /api/users/177 200 12ms
2025-01-15 16:44:10 [INFO] POST /api/roles 201 39ms
2025-01-15 16:44:11 [INFO] GET /api/notifications 200 32ms
2025-01-15 16:44:17 [WARN] JWT token expires in less than 60 seconds for user 57
2025-01-15 16:44:23 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 16:44:25 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 16:44:36 [INFO] GET /api/users/161 200 16ms
2025-01-15 16:44:46 [INFO] POST /api/auth/login 200 218ms
2025-01-15 16:44:56 [INFO] GET /api/users 200 26ms
2025-01-15 16:44:57 [INFO] POST /api/uploads 201 677ms
2025-01-15 16:44:58 [INFO] POST /api/users 409 23ms
2025-01-15 16:45:00 [INFO] POST /api/users 201 127ms
2025-01-15 16:45:01 [INFO] POST /api/auth/login 401 83ms
2025-01-15 16:45:06 [INFO] GET /api/users 200 53ms
2025-01-15 16:45:13 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 16:45:19 [INFO] GET /api/users?page=3&limit=25 200 56ms
2025-01-15 16:45:33 [INFO] DELETE /api/users/90 204 35ms
2025-01-15 16:45:40 [INFO] POST /api/users 409 24ms
2025-01-15 16:45:51 [WARN] Request body exceeded soft limit (3778KB)
2025-01-15 16:46:05 [INFO] GET /api/users/160 200 19ms
2025-01-15 16:46:14 [INFO] GET /api/health 200 2ms
2025-01-15 16:46:27 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 16:46:27 [DEBUG] Rows returned: 29
2025-01-15 16:46:41 [INFO] POST /api/users 409 21ms
2025-01-15 16:46:42 [INFO] GET /api/users/131 404 17ms
2025-01-15 16:46:50 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 16:46:55 [INFO] POST /api/auth/login 401 69ms
2025-01-15 16:46:57 [INFO] GET /api/users?role=moderator 200 34ms
2025-01-15 16:47:09 [INFO] GET /api/health 200 1ms
2025-01-15 16:47:15 [INFO] POST /api/users 409 19ms
2025-01-15 16:47:26 [INFO] GET /api/health 200 1ms
2025-01-15 16:47:28 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 16:47:36 [INFO] GET /api/health 200 3ms
2025-01-15 16:47:45 [INFO] POST /api/users 201 134ms
2025-01-15 16:47:49 [INFO] GET /api/users?role=viewer 200 31ms
2025-01-15 16:48:02 [INFO] GET /api/users/136 200 18ms
2025-01-15 16:48:11 [INFO] POST /api/auth/login 200 188ms
2025-01-15 16:48:25 [INFO] GET /api/users/12 404 10ms
2025-01-15 16:48:39 [INFO] GET /api/health 200 2ms
2025-01-15 16:48:43 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 16:48:45 [INFO] GET /api/health 200 1ms
2025-01-15 16:48:49 [INFO] GET /api/health 200 1ms
2025-01-15 16:49:01 [INFO] POST /api/roles 201 45ms
2025-01-15 16:49:09 [INFO] GET /api/notifications 200 16ms
2025-01-15 16:49:12 [INFO] PUT /api/users/27 200 77ms
2025-01-15 16:49:22 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 16:49:22 [DEBUG] Rows returned: 5
2025-01-15 16:49:24 [INFO] GET /api/health 200 1ms
2025-01-15 16:49:25 [INFO] GET /api/analytics/dashboard 200 708ms
2025-01-15 16:49:37 [INFO] POST /api/auth/refresh 200 79ms
2025-01-15 16:49:49 [INFO] POST /api/auth/login 200 113ms
2025-01-15 16:50:01 [INFO] GET /api/users/149 404 16ms
2025-01-15 16:50:07 [INFO] GET /api/health 200 1ms
2025-01-15 16:50:18 [INFO] PUT /api/users/113 200 61ms
2025-01-15 16:50:27 [INFO] GET /api/users/6 404 16ms
2025-01-15 16:50:36 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 16:50:36 [DEBUG] Rows returned: 33
2025-01-15 16:50:48 [INFO] POST /api/users 201 87ms
2025-01-15 16:51:00 [INFO] GET /api/users/107 404 8ms
2025-01-15 16:51:09 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 16:51:09 [DEBUG] Rows returned: 49
2025-01-15 16:51:19 [INFO] POST /api/users 201 129ms
2025-01-15 16:51:24 [INFO] GET /api/users/138 404 13ms
2025-01-15 16:51:38 [INFO] POST /api/auth/refresh 200 41ms
2025-01-15 16:51:51 [INFO] GET /api/health 200 2ms
2025-01-15 16:52:05 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 16:52:19 [INFO] POST /api/users 201 100ms
2025-01-15 16:52:33 [INFO] GET /api/settings 200 11ms
2025-01-15 16:52:42 [INFO] POST /api/auth/refresh 200 31ms
2025-01-15 16:52:49 [INFO] GET /api/health 200 3ms
2025-01-15 16:53:00 [INFO] POST /api/auth/login 401 96ms
2025-01-15 16:53:12 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 16:53:12 [DEBUG] New record created: id=95
2025-01-15 16:53:18 [INFO] GET /api/users/105 404 14ms
2025-01-15 16:53:20 [INFO] GET /api/health 200 1ms
2025-01-15 16:53:34 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 16:53:49 [INFO] GET /api/health 200 2ms
2025-01-15 16:54:03 [INFO] GET /api/users/159 404 10ms
2025-01-15 16:54:08 [INFO] POST /api/roles 201 31ms
2025-01-15 16:54:09 [INFO] GET /api/users/190 404 9ms
2025-01-15 16:54:23 [INFO] DELETE /api/users/12 204 31ms
2025-01-15 16:54:38 [INFO] GET /api/analytics/dashboard 200 597ms
2025-01-15 16:54:50 [INFO] DELETE /api/users/60 204 29ms
2025-01-15 16:54:59 [INFO] GET /api/health 200 2ms
2025-01-15 16:55:14 [INFO] GET /api/roles 200 13ms
2025-01-15 16:55:28 [INFO] GET /api/health 200 2ms
2025-01-15 16:55:42 [WARN] Deprecated API version v1 called by client client-5
2025-01-15 16:55:44 [WARN] JWT token expires in less than 60 seconds for user 130
2025-01-15 16:55:46 [INFO] GET /api/roles 200 15ms
2025-01-15 16:55:59 [INFO] POST /api/users 409 14ms
2025-01-15 16:56:04 [INFO] GET /api/health 200 2ms
2025-01-15 16:56:17 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 16:56:17 [DEBUG] Rows returned: 49
2025-01-15 16:56:22 [INFO] POST /api/auth/refresh 200 52ms
2025-01-15 16:56:24 [INFO] GET /api/health 200 3ms
2025-01-15 16:56:32 [INFO] POST /api/auth/login 200 158ms
2025-01-15 16:56:40 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 16:56:40 [DEBUG] Rows returned: 13
2025-01-15 16:56:42 [INFO] POST /api/roles 201 58ms
2025-01-15 16:56:47 [INFO] GET /api/health 200 2ms
2025-01-15 16:56:56 [INFO] GET /api/health 200 3ms
2025-01-15 16:57:04 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 16:57:04 [DEBUG] Rows returned: 3
2025-01-15 16:57:07 [INFO] GET /api/users?role=moderator 200 27ms
2025-01-15 16:57:10 [INFO] GET /api/health 200 1ms
2025-01-15 16:57:19 [INFO] POST /api/roles 201 57ms
2025-01-15 16:57:24 [INFO] POST /api/auth/refresh 200 39ms
2025-01-15 16:57:32 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 16:57:42 [INFO] GET /api/notifications 200 11ms
2025-01-15 16:57:49 [INFO] GET /api/health 200 3ms
2025-01-15 16:57:50 [INFO] GET /api/health 200 3ms
2025-01-15 16:58:05 [WARN] Request body exceeded soft limit (2427KB)
2025-01-15 16:58:06 [INFO] GET /api/health 200 1ms
2025-01-15 16:58:16 [INFO] GET /api/users/84 200 13ms
2025-01-15 16:58:29 [INFO] PUT /api/users/175 200 68ms
2025-01-15 16:58:30 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 16:58:30 [DEBUG] New record created: id=354
2025-01-15 16:58:45 [INFO] GET /api/users?role=viewer 200 28ms
2025-01-15 16:58:59 [INFO] GET /api/health 200 1ms
2025-01-15 16:59:07 [INFO] POST /api/auth/login 200 152ms
2025-01-15 16:59:10 [INFO] POST /api/users 409 13ms
2025-01-15 16:59:12 [INFO] GET /api/health 200 2ms
2025-01-15 16:59:26 [INFO] GET /api/analytics/dashboard 200 309ms
2025-01-15 16:59:33 [INFO] POST /api/roles 201 48ms
2025-01-15 16:59:38 [INFO] GET /api/health 200 2ms
2025-01-15 16:59:48 [INFO] GET /api/users 200 78ms
2025-01-15 16:59:55 [WARN] Slow query detected: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $ (took 1497ms)
2025-01-15 17:00:10 [INFO] POST /api/auth/login 200 115ms
2025-01-15 17:00:17 [INFO] GET /api/users/116 200 11ms
2025-01-15 17:00:30 [ERROR] Worker process crashed. Restarting...
2025-01-15 17:00:31 [WARN] Memory usage at 89% of allocated heap
2025-01-15 17:00:38 [INFO] GET /api/users/113 404 12ms
2025-01-15 17:00:51 [INFO] DELETE /api/users/143 204 27ms
2025-01-15 17:01:01 [INFO] POST /api/auth/login 200 115ms
2025-01-15 17:01:04 [INFO] GET /api/health 200 3ms
2025-01-15 17:01:16 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 17:01:16 [DEBUG] New record created: id=216
2025-01-15 17:01:18 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 17:01:30 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 17:01:30 [DEBUG] New record created: id=286
2025-01-15 17:01:42 [INFO] GET /api/analytics/dashboard 200 786ms
2025-01-15 17:01:44 [INFO] GET /api/health 200 1ms
2025-01-15 17:01:50 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 17:02:03 [INFO] POST /api/auth/login 401 103ms
2025-01-15 17:02:11 [INFO] GET /api/users?role=moderator 200 32ms
2025-01-15 17:02:22 [INFO] PUT /api/users/151 200 79ms
2025-01-15 17:02:34 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 17:02:34 [DEBUG] Rows returned: 1
2025-01-15 17:02:42 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 17:02:42 [DEBUG] New record created: id=489
2025-01-15 17:02:51 [INFO] GET /api/health 200 2ms
2025-01-15 17:03:05 [INFO] GET /api/health 200 1ms
2025-01-15 17:03:06 [INFO] GET /api/users/145 404 8ms
2025-01-15 17:03:09 [INFO] GET /api/users/96 200 6ms
2025-01-15 17:03:14 [INFO] GET /api/settings 200 7ms
2025-01-15 17:03:20 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 17:03:23 [INFO] GET /api/health 200 3ms
2025-01-15 17:03:36 [INFO] GET /api/users 200 43ms
2025-01-15 17:03:42 [INFO] GET /api/health 200 3ms
2025-01-15 17:03:57 [INFO] POST /api/auth/login 200 149ms
2025-01-15 17:04:10 [INFO] GET /api/health 200 1ms
2025-01-15 17:04:25 [INFO] DELETE /api/users/101 204 33ms
2025-01-15 17:04:28 [INFO] POST /api/uploads 201 1602ms
2025-01-15 17:04:39 [INFO] POST /api/users 201 100ms
2025-01-15 17:04:54 [INFO] POST /api/auth/refresh 200 55ms
2025-01-15 17:05:00 [WARN] S3 upload retry after timeout (1559ms)
2025-01-15 17:05:07 [INFO] GET /api/analytics/dashboard 200 580ms
2025-01-15 17:05:12 [INFO] GET /api/health 200 2ms
2025-01-15 17:05:23 [INFO] PUT /api/users/115 200 90ms
2025-01-15 17:05:25 [INFO] POST /api/users 409 17ms
2025-01-15 17:05:27 [INFO] DELETE /api/users/185 204 50ms
2025-01-15 17:05:34 [INFO] GET /api/health 200 2ms
2025-01-15 17:05:42 [INFO] GET /api/notifications 200 22ms
2025-01-15 17:05:44 [INFO] GET /api/health 200 1ms
2025-01-15 17:05:56 [INFO] PUT /api/settings 200 34ms
2025-01-15 17:05:57 [INFO] GET /api/settings 200 7ms
2025-01-15 17:06:02 [INFO] POST /api/users 409 21ms
2025-01-15 17:06:14 [INFO] GET /api/users?role=admin 200 18ms
2025-01-15 17:06:19 [INFO] POST /api/users 201 110ms
2025-01-15 17:06:30 [INFO] GET /api/health 200 3ms
2025-01-15 17:06:44 [INFO] GET /api/settings 200 12ms
2025-01-15 17:06:54 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 17:07:03 [INFO] GET /api/roles 200 6ms
2025-01-15 17:07:13 [INFO] GET /api/health 200 1ms
2025-01-15 17:07:20 [INFO] POST /api/auth/login 200 160ms
2025-01-15 17:07:33 [INFO] GET /api/settings 200 6ms
2025-01-15 17:07:39 [INFO] GET /api/health 200 1ms
2025-01-15 17:07:42 [INFO] POST /api/uploads 201 1063ms
2025-01-15 17:07:43 [INFO] GET /api/health 200 2ms
2025-01-15 17:07:54 [INFO] GET /api/users?page=5&limit=25 200 35ms
2025-01-15 17:08:07 [INFO] POST /api/auth/login 401 101ms
2025-01-15 17:08:20 [INFO] GET /api/notifications 200 14ms
2025-01-15 17:08:31 [INFO] POST /api/users 409 20ms
2025-01-15 17:08:43 [INFO] GET /api/settings 200 7ms
2025-01-15 17:08:46 [INFO] GET /api/users?page=5&limit=25 200 36ms
2025-01-15 17:08:52 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 17:08:52 [DEBUG] Rows returned: 40
2025-01-15 17:08:59 [INFO] POST /api/roles 201 56ms
2025-01-15 17:09:03 [INFO] GET /api/roles 200 7ms
2025-01-15 17:09:16 [INFO] GET /api/roles 200 14ms
2025-01-15 17:09:19 [INFO] GET /api/health 200 1ms
2025-01-15 17:09:33 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 17:09:33 [DEBUG] Rows returned: 8
2025-01-15 17:09:40 [INFO] GET /api/roles 200 10ms
2025-01-15 17:09:47 [INFO] GET /api/users/123 200 5ms
2025-01-15 17:09:59 [INFO] GET /api/users/13 200 12ms
2025-01-15 17:10:03 [INFO] PUT /api/users/138 200 50ms
2025-01-15 17:10:08 [INFO] GET /api/health 200 1ms
2025-01-15 17:10:10 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 17:10:21 [INFO] POST /api/auth/login 200 207ms
2025-01-15 17:10:35 [INFO] GET /api/health 200 2ms
2025-01-15 17:10:42 [INFO] GET /api/health 200 2ms
2025-01-15 17:10:47 [INFO] GET /api/notifications 200 10ms
2025-01-15 17:10:57 [INFO] POST /api/auth/refresh 200 57ms
2025-01-15 17:10:59 [INFO] POST /api/auth/login 401 64ms
2025-01-15 17:11:03 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 17:11:08 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 17:11:08 [DEBUG] Rows returned: 19
2025-01-15 17:11:11 [WARN] Rate limit approaching for IP 192.168.5.231 (89/100 requests in window)
2025-01-15 17:11:19 [INFO] POST /api/auth/login 200 207ms
2025-01-15 17:11:34 [WARN] Slow query detected: SELECT * FROM users WHERE role_id = $1 AND active = true (took 1718ms)
2025-01-15 17:11:35 [INFO] GET /api/health 200 2ms
2025-01-15 17:11:48 [INFO] GET /api/users?role=admin 200 32ms
2025-01-15 17:11:56 [INFO] GET /api/users/127 200 14ms
2025-01-15 17:12:08 [INFO] POST /api/users 409 19ms
2025-01-15 17:12:13 [INFO] GET /api/health 200 1ms
2025-01-15 17:12:26 [INFO] DELETE /api/users/69 204 44ms
2025-01-15 17:12:32 [INFO] GET /api/health 200 3ms
2025-01-15 17:12:46 [INFO] GET /api/roles 200 10ms
2025-01-15 17:13:00 [INFO] POST /api/uploads 201 780ms
2025-01-15 17:13:07 [INFO] GET /api/users 200 37ms
2025-01-15 17:13:16 [INFO] GET /api/roles 200 14ms
2025-01-15 17:13:22 [INFO] GET /api/users?role=viewer 200 38ms
2025-01-15 17:13:27 [INFO] POST /api/auth/login 200 182ms
2025-01-15 17:13:40 [INFO] GET /api/health 200 3ms
2025-01-15 17:13:42 [INFO] POST /api/auth/login 401 102ms
2025-01-15 17:13:54 [INFO] DELETE /api/users/117 204 26ms
2025-01-15 17:14:02 [INFO] POST /api/auth/login 200 206ms
2025-01-15 17:14:07 [INFO] GET /api/health 200 2ms
2025-01-15 17:14:10 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 17:14:10 [DEBUG] Rows returned: 48
2025-01-15 17:14:14 [INFO] GET /api/users/95 200 16ms
2025-01-15 17:14:28 [INFO] PUT /api/settings 200 29ms
2025-01-15 17:14:36 [INFO] POST /api/users 409 19ms
2025-01-15 17:14:42 [INFO] POST /api/auth/refresh 200 48ms
2025-01-15 17:14:46 [INFO] POST /api/auth/login 401 79ms
2025-01-15 17:14:58 [INFO] GET /api/roles 200 5ms
2025-01-15 17:15:05 [INFO] POST /api/auth/refresh 200 55ms
2025-01-15 17:15:13 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 17:15:13 [DEBUG] Rows returned: 35
2025-01-15 17:15:28 [INFO] POST /api/users 409 18ms
2025-01-15 17:15:41 [INFO] GET /api/health 200 3ms
2025-01-15 17:15:50 [INFO] PUT /api/users/129 200 42ms
2025-01-15 17:15:57 [INFO] PUT /api/users/147 200 59ms
2025-01-15 17:16:08 [INFO] GET /api/health 200 3ms
2025-01-15 17:16:17 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 17:16:17 [DEBUG] New record created: id=437
2025-01-15 17:16:25 [ERROR] Worker process crashed. Restarting...
2025-01-15 17:16:39 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 17:16:49 [INFO] GET /api/users/178 404 12ms
2025-01-15 17:17:00 [INFO] GET /api/health 200 2ms
2025-01-15 17:17:13 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 17:17:13 [DEBUG] Rows returned: 34
2025-01-15 17:17:27 [INFO] POST /api/auth/refresh 200 43ms
2025-01-15 17:17:30 [INFO] GET /api/health 200 1ms
2025-01-15 17:17:37 [INFO] GET /api/health 200 3ms
2025-01-15 17:17:52 [WARN] Slow query detected: SELECT * FROM permissions WHERE role_id = $1 (took 692ms)
2025-01-15 17:18:02 [INFO] GET /api/health 200 1ms
2025-01-15 17:18:10 [INFO] POST /api/users 201 109ms
2025-01-15 17:18:18 [INFO] GET /api/health 200 3ms
2025-01-15 17:18:23 [INFO] GET /api/settings 200 8ms
2025-01-15 17:18:35 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 17:18:35 [DEBUG] New record created: id=401
2025-01-15 17:18:46 [INFO] GET /api/users/173 200 14ms
2025-01-15 17:18:57 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 17:19:10 [INFO] POST /api/auth/login 401 72ms
2025-01-15 17:19:12 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 17:19:12 [DEBUG] New record created: id=274
2025-01-15 17:19:16 [INFO] GET /api/roles 200 8ms
2025-01-15 17:19:25 [WARN] Memory usage at 79% of allocated heap
2025-01-15 17:19:34 [INFO] GET /api/analytics/dashboard 200 585ms
2025-01-15 17:19:45 [INFO] DELETE /api/users/174 204 48ms
2025-01-15 17:19:56 [INFO] GET /api/users 200 74ms
2025-01-15 17:20:06 [WARN] Rate limit exceeded for IP 192.168.2.85. Returning 429.
2025-01-15 17:20:14 [INFO] PUT /api/settings 200 22ms
2025-01-15 17:20:22 [INFO] GET /api/health 200 1ms
2025-01-15 17:20:23 [INFO] POST /api/uploads 201 826ms
2025-01-15 17:20:30 [INFO] POST /api/users 409 15ms
2025-01-15 17:20:41 [INFO] GET /api/health 200 2ms
2025-01-15 17:20:55 [INFO] GET /api/notifications 200 24ms
2025-01-15 17:20:58 [INFO] GET /api/settings 200 9ms
2025-01-15 17:21:00 [INFO] POST /api/uploads 201 1903ms
2025-01-15 17:21:02 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 17:21:02 [DEBUG] Rows returned: 7
2025-01-15 17:21:05 [INFO] GET /api/health 200 2ms
2025-01-15 17:21:12 [INFO] POST /api/uploads 201 991ms
2025-01-15 17:21:22 [INFO] GET /api/users 200 37ms
2025-01-15 17:21:33 [WARN] Memory usage at 87% of allocated heap
2025-01-15 17:21:42 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 17:21:42 [DEBUG] Rows returned: 0
2025-01-15 17:21:44 [INFO] POST /api/roles 201 40ms
2025-01-15 17:21:55 [INFO] GET /api/health 200 1ms
2025-01-15 17:22:02 [INFO] GET /api/settings 200 12ms
2025-01-15 17:22:08 [INFO] POST /api/users 409 24ms
2025-01-15 17:22:15 [INFO] GET /api/health 200 3ms
2025-01-15 17:22:16 [INFO] POST /api/auth/login 200 133ms
2025-01-15 17:22:31 [INFO] GET /api/health 200 1ms
2025-01-15 17:22:38 [INFO] POST /api/roles 201 44ms
2025-01-15 17:22:50 [INFO] GET /api/health 200 2ms
2025-01-15 17:22:59 [INFO] GET /api/health 200 3ms
2025-01-15 17:23:08 [INFO] GET /api/health 200 2ms
2025-01-15 17:23:21 [WARN] Slow query detected: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $ (took 1119ms)
2025-01-15 17:23:35 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 17:23:35 [DEBUG] Rows returned: 31
2025-01-15 17:23:39 [INFO] GET /api/roles 200 7ms
2025-01-15 17:23:43 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 17:23:48 [INFO] POST /api/users 201 142ms
2025-01-15 17:24:03 [INFO] GET /api/health 200 3ms
2025-01-15 17:24:18 [INFO] GET /api/users 200 58ms
2025-01-15 17:24:25 [INFO] POST /api/auth/login 401 99ms
2025-01-15 17:24:32 [INFO] POST /api/auth/refresh 200 42ms
2025-01-15 17:24:47 [INFO] PUT /api/settings 200 55ms
2025-01-15 17:24:51 [INFO] POST /api/uploads 201 1638ms
2025-01-15 17:25:00 [INFO] GET /api/analytics/dashboard 200 644ms
2025-01-15 17:25:01 [INFO] DELETE /api/users/66 204 36ms
2025-01-15 17:25:15 [INFO] GET /api/health 200 3ms
2025-01-15 17:25:29 [INFO] GET /api/users?role=editor 200 17ms
2025-01-15 17:25:32 [ERROR] Database connection timeout after 5000ms
2025-01-15 17:25:37 [INFO] POST /api/auth/refresh 200 76ms
2025-01-15 17:25:49 [WARN] Memory usage at 84% of allocated heap
2025-01-15 17:25:54 [INFO] PUT /api/users/133 200 49ms
2025-01-15 17:26:09 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 17:26:09 [DEBUG] New record created: id=290
2025-01-15 17:26:12 [INFO] PUT /api/settings 200 44ms
2025-01-15 17:26:17 [INFO] POST /api/users 201 99ms
2025-01-15 17:26:18 [INFO] DELETE /api/users/87 204 38ms
2025-01-15 17:26:33 [INFO] POST /api/auth/login 401 83ms
2025-01-15 17:26:42 [WARN] Request body exceeded soft limit (3795KB)
2025-01-15 17:26:45 [INFO] GET /api/health 200 1ms
2025-01-15 17:26:53 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 17:27:04 [WARN] JWT token expires in less than 60 seconds for user 123
2025-01-15 17:27:07 [INFO] GET /api/health 200 3ms
2025-01-15 17:27:22 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 17:27:36 [INFO] GET /api/health 200 2ms
2025-01-15 17:27:40 [INFO] GET /api/health 200 2ms
2025-01-15 17:27:48 [INFO] POST /api/users 409 16ms
2025-01-15 17:27:56 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 17:27:56 [DEBUG] Rows returned: 25
2025-01-15 17:27:58 [INFO] GET /api/analytics/dashboard 200 373ms
2025-01-15 17:28:00 [INFO] GET /api/users?page=4&limit=25 200 30ms
2025-01-15 17:28:13 [INFO] POST /api/users 409 12ms
2025-01-15 17:28:23 [INFO] GET /api/analytics/dashboard 200 241ms
2025-01-15 17:28:27 [INFO] POST /api/users 409 24ms
2025-01-15 17:28:32 [INFO] GET /api/health 200 2ms
2025-01-15 17:28:33 [INFO] POST /api/uploads 201 1145ms
2025-01-15 17:28:35 [WARN] Slow query detected: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY creat (took 1263ms)
2025-01-15 17:28:36 [ERROR] Deadlock detected in transaction tx-41312
2025-01-15 17:28:36 [ERROR] Stack trace:
    at Layer.handle (node_modules/express/lib/router/layer.js:190)
    at validateRequest (src/middleware/validation.ts:206)
    at AuthService.validateToken (src/services/auth.service.ts:108)
    at RoleService.getPermissions (src/services/role.service.ts:140)
2025-01-15 17:28:37 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 17:28:37 [DEBUG] Rows returned: 35
2025-01-15 17:28:50 [INFO] GET /api/health 200 3ms
2025-01-15 17:28:52 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 17:28:52 [DEBUG] Rows returned: 20
2025-01-15 17:29:07 [INFO] GET /api/health 200 2ms
2025-01-15 17:29:12 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 17:29:19 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 17:29:29 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 17:29:29 [DEBUG] Rows returned: 3
2025-01-15 17:29:40 [INFO] GET /api/analytics/dashboard 200 211ms
2025-01-15 17:29:50 [INFO] GET /api/health 200 2ms
2025-01-15 17:29:52 [INFO] GET /api/health 200 3ms
2025-01-15 17:30:01 [INFO] GET /api/users/139 200 17ms
2025-01-15 17:30:08 [INFO] GET /api/health 200 3ms
2025-01-15 17:30:20 [INFO] GET /api/notifications 200 30ms
2025-01-15 17:30:32 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 17:30:32 [DEBUG] Rows returned: 28
2025-01-15 17:30:41 [INFO] POST /api/users 201 123ms
2025-01-15 17:30:43 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 17:30:57 [INFO] DELETE /api/users/88 204 26ms
2025-01-15 17:30:58 [WARN] S3 upload retry after timeout (914ms)
2025-01-15 17:31:11 [INFO] GET /api/health 200 2ms
2025-01-15 17:31:12 [INFO] PUT /api/settings 200 30ms
2025-01-15 17:31:13 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 17:31:15 [INFO] POST /api/users 201 92ms
2025-01-15 17:31:21 [INFO] POST /api/uploads 201 833ms
2025-01-15 17:31:34 [INFO] POST /api/users 409 22ms
2025-01-15 17:31:35 [INFO] POST /api/auth/refresh 200 31ms
2025-01-15 17:31:41 [INFO] GET /api/analytics/dashboard 200 688ms
2025-01-15 17:31:46 [INFO] GET /api/roles 200 13ms
2025-01-15 17:31:57 [INFO] GET /api/health 200 1ms
2025-01-15 17:32:12 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 17:32:14 [INFO] GET /api/users/75 200 15ms
2025-01-15 17:32:26 [INFO] GET /api/roles 200 11ms
2025-01-15 17:32:29 [INFO] GET /api/health 200 1ms
2025-01-15 17:32:33 [INFO] GET /api/settings 200 8ms
2025-01-15 17:32:34 [INFO] POST /api/auth/login 200 133ms
2025-01-15 17:32:40 [INFO] POST /api/uploads 201 1295ms
2025-01-15 17:32:49 [INFO] GET /api/users?role=moderator 200 16ms
2025-01-15 17:32:56 [INFO] POST /api/auth/login 401 66ms
2025-01-15 17:33:08 [INFO] GET /api/users/166 200 5ms
2025-01-15 17:33:18 [INFO] GET /api/users/3 404 8ms
2025-01-15 17:33:28 [INFO] POST /api/users 409 14ms
2025-01-15 17:33:34 [INFO] PUT /api/settings 200 32ms
2025-01-15 17:33:47 [WARN] Deprecated API version v1 called by client client-19
2025-01-15 17:33:48 [INFO] POST /api/uploads 201 1449ms
2025-01-15 17:33:54 [WARN] JWT token expires in less than 60 seconds for user 12
2025-01-15 17:34:00 [INFO] POST /api/uploads 201 1174ms
2025-01-15 17:34:04 [INFO] GET /api/users/143 404 9ms
2025-01-15 17:34:16 [INFO] POST /api/auth/login 200 154ms
2025-01-15 17:34:21 [INFO] GET /api/health 200 2ms
2025-01-15 17:34:34 [INFO] POST /api/auth/login 200 194ms
2025-01-15 17:34:37 [INFO] PUT /api/settings 200 46ms
2025-01-15 17:34:44 [INFO] POST /api/auth/login 401 89ms
2025-01-15 17:34:53 [INFO] POST /api/auth/refresh 200 70ms
2025-01-15 17:34:56 [INFO] GET /api/health 200 2ms
2025-01-15 17:34:57 [INFO] GET /api/users?page=5&limit=25 200 48ms
2025-01-15 17:34:58 [INFO] PUT /api/users/175 200 68ms
2025-01-15 17:35:02 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 17:35:02 [DEBUG] Rows returned: 5
2025-01-15 17:35:09 [INFO] GET /api/users/81 404 13ms
2025-01-15 17:35:18 [INFO] GET /api/users 200 41ms
2025-01-15 17:35:23 [INFO] DELETE /api/users/152 204 34ms
2025-01-15 17:35:33 [INFO] POST /api/auth/login 200 124ms
2025-01-15 17:35:44 [INFO] GET /api/health 200 3ms
2025-01-15 17:35:59 [INFO] GET /api/users 200 61ms
2025-01-15 17:36:14 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 17:36:14 [DEBUG] Rows returned: 33
2025-01-15 17:36:25 [INFO] POST /api/auth/login 200 248ms
2025-01-15 17:36:29 [INFO] POST /api/auth/login 200 182ms
2025-01-15 17:36:41 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 17:36:52 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 17:36:52 [DEBUG] Rows returned: 25
2025-01-15 17:37:01 [WARN] Deprecated API version v1 called by client client-16
2025-01-15 17:37:03 [INFO] DELETE /api/users/2 204 25ms
2025-01-15 17:37:06 [INFO] GET /api/users?page=2&limit=25 200 38ms
2025-01-15 17:37:10 [INFO] GET /api/health 200 1ms
2025-01-15 17:37:22 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 17:37:22 [DEBUG] Rows returned: 30
2025-01-15 17:37:26 [INFO] GET /api/health 200 1ms
2025-01-15 17:37:30 [INFO] POST /api/auth/login 200 147ms
2025-01-15 17:37:44 [INFO] POST /api/users 201 130ms
2025-01-15 17:37:59 [INFO] GET /api/health 200 2ms
2025-01-15 17:38:06 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 17:38:17 [INFO] POST /api/users 409 15ms
2025-01-15 17:38:21 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 17:38:21 [DEBUG] Rows returned: 41
2025-01-15 17:38:24 [INFO] DELETE /api/users/176 204 38ms
2025-01-15 17:38:26 [INFO] GET /api/health 200 1ms
2025-01-15 17:38:30 [INFO] GET /api/health 200 1ms
2025-01-15 17:38:39 [INFO] POST /api/users 201 89ms
2025-01-15 17:38:49 [INFO] POST /api/users 201 122ms
2025-01-15 17:39:03 [INFO] GET /api/users/85 200 9ms
2025-01-15 17:39:18 [INFO] POST /api/auth/refresh 200 74ms
2025-01-15 17:39:28 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 17:39:37 [WARN] Rate limit approaching for IP 192.168.7.202 (89/100 requests in window)
2025-01-15 17:39:50 [INFO] GET /api/health 200 3ms
2025-01-15 17:40:02 [INFO] GET /api/health 200 1ms
2025-01-15 17:40:10 [INFO] POST /api/auth/refresh 200 56ms
2025-01-15 17:40:25 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 17:40:25 [DEBUG] Rows returned: 2
2025-01-15 17:40:32 [INFO] POST /api/roles 201 58ms
2025-01-15 17:40:33 [INFO] GET /api/users?page=4&limit=25 200 27ms
2025-01-15 17:40:39 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 17:40:39 [DEBUG] New record created: id=369
2025-01-15 17:40:48 [INFO] GET /api/health 200 1ms
2025-01-15 17:40:59 [INFO] GET /api/users 200 71ms
2025-01-15 17:41:00 [INFO] GET /api/analytics/dashboard 200 684ms
2025-01-15 17:41:13 [INFO] GET /api/health 200 3ms
2025-01-15 17:41:16 [INFO] POST /api/auth/login 401 50ms
2025-01-15 17:41:30 [WARN] Rate limit exceeded for IP 192.168.4.181. Returning 429.
2025-01-15 17:41:44 [INFO] GET /api/health 200 2ms
2025-01-15 17:41:59 [WARN] Memory usage at 89% of allocated heap
2025-01-15 17:42:07 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 17:42:09 [INFO] PUT /api/users/151 200 74ms
2025-01-15 17:42:21 [INFO] PUT /api/settings 200 52ms
2025-01-15 17:42:28 [INFO] PUT /api/settings 200 38ms
2025-01-15 17:42:38 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 17:42:38 [DEBUG] Rows returned: 13
2025-01-15 17:42:41 [INFO] GET /api/health 200 2ms
2025-01-15 17:42:46 [INFO] POST /api/users 201 112ms
2025-01-15 17:43:01 [INFO] POST /api/users 201 148ms
2025-01-15 17:43:14 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 17:43:14 [DEBUG] Rows returned: 6
2025-01-15 17:43:20 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 17:43:20 [DEBUG] New record created: id=223
2025-01-15 17:43:24 [INFO] GET /api/health 200 3ms
2025-01-15 17:43:32 [INFO] POST /api/users 409 19ms
2025-01-15 17:43:40 [INFO] POST /api/users 409 25ms
2025-01-15 17:43:42 [INFO] GET /api/health 200 3ms
2025-01-15 17:43:51 [INFO] POST /api/users 201 149ms
2025-01-15 17:44:02 [INFO] GET /api/users?role=viewer 200 27ms
2025-01-15 17:44:11 [INFO] GET /api/users/188 200 16ms
2025-01-15 17:44:18 [INFO] GET /api/settings 200 5ms
2025-01-15 17:44:31 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 17:44:31 [DEBUG] New record created: id=269
2025-01-15 17:44:42 [INFO] GET /api/roles 200 15ms
2025-01-15 17:44:51 [INFO] GET /api/health 200 1ms
2025-01-15 17:44:58 [INFO] GET /api/health 200 1ms
2025-01-15 17:45:12 [INFO] GET /api/settings 200 11ms
2025-01-15 17:45:19 [INFO] GET /api/users/108 404 13ms
2025-01-15 17:45:31 [INFO] GET /api/notifications 200 25ms
2025-01-15 17:45:42 [WARN] Request body exceeded soft limit (1910KB)
2025-01-15 17:45:50 [INFO] GET /api/health 200 3ms
2025-01-15 17:45:58 [INFO] POST /api/auth/login 401 57ms
2025-01-15 17:46:04 [INFO] POST /api/auth/login 200 127ms
2025-01-15 17:46:07 [INFO] GET /api/roles 200 13ms
2025-01-15 17:46:17 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 17:46:18 [INFO] PUT /api/users/52 200 67ms
2025-01-15 17:46:19 [INFO] DELETE /api/users/82 204 43ms
2025-01-15 17:46:21 [INFO] DELETE /api/users/105 204 48ms
2025-01-15 17:46:31 [INFO] GET /api/roles 200 15ms
2025-01-15 17:46:38 [INFO] GET /api/users 200 59ms
2025-01-15 17:46:48 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 17:46:49 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 17:46:59 [INFO] POST /api/auth/login 401 110ms
2025-01-15 17:47:09 [INFO] GET /api/settings 200 10ms
2025-01-15 17:47:12 [INFO] GET /api/users/54 404 17ms
2025-01-15 17:47:17 [INFO] POST /api/roles 201 43ms
2025-01-15 17:47:23 [INFO] GET /api/health 200 2ms
2025-01-15 17:47:36 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 17:47:45 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 17:47:50 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 17:47:50 [DEBUG] Rows returned: 37
2025-01-15 17:48:04 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 17:48:04 [DEBUG] New record created: id=73
2025-01-15 17:48:07 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 17:48:07 [DEBUG] Rows returned: 0
2025-01-15 17:48:10 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 17:48:15 [INFO] GET /api/users 200 58ms
2025-01-15 17:48:25 [ERROR] Unhandled exception in POST /api/users: TimeoutError
2025-01-15 17:48:25 [ERROR] Stack trace:
    at AuthController.login (src/controllers/auth.controller.ts:59)
    at RoleService.getPermissions (src/services/role.service.ts:298)
    at UserService.findById (src/services/user.service.ts:235)
    at AuthService.validateToken (src/services/auth.service.ts:245)
2025-01-15 17:48:33 [INFO] POST /api/auth/login 401 96ms
2025-01-15 17:48:35 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 17:48:35 [DEBUG] Rows returned: 32
2025-01-15 17:48:50 [INFO] GET /api/roles 200 5ms
2025-01-15 17:48:59 [INFO] POST /api/users 201 130ms
2025-01-15 17:49:11 [INFO] GET /api/roles 200 8ms
2025-01-15 17:49:22 [INFO] GET /api/health 200 1ms
2025-01-15 17:49:37 [INFO] GET /api/users?page=5&limit=25 200 42ms
2025-01-15 17:49:40 [INFO] GET /api/analytics/dashboard 200 654ms
2025-01-15 17:49:44 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 17:49:44 [DEBUG] Rows returned: 25
2025-01-15 17:49:47 [INFO] GET /api/health 200 1ms
2025-01-15 17:49:58 [WARN] Rate limit approaching for IP 192.168.9.237 (82/100 requests in window)
2025-01-15 17:50:03 [INFO] GET /api/health 200 2ms
2025-01-15 17:50:17 [INFO] GET /api/users?role=viewer 200 34ms
2025-01-15 17:50:26 [INFO] GET /api/health 200 1ms
2025-01-15 17:50:34 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 17:50:45 [INFO] POST /api/auth/refresh 200 40ms
2025-01-15 17:50:49 [INFO] GET /api/settings 200 10ms
2025-01-15 17:51:03 [INFO] POST /api/uploads 201 1874ms
2025-01-15 17:51:18 [INFO] POST /api/auth/refresh 200 34ms
2025-01-15 17:51:29 [INFO] GET /api/health 200 2ms
2025-01-15 17:51:37 [INFO] PUT /api/users/152 200 74ms
2025-01-15 17:51:47 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 17:51:47 [DEBUG] Rows returned: 47
2025-01-15 17:51:51 [INFO] GET /api/users/91 200 20ms
2025-01-15 17:52:01 [INFO] GET /api/settings 200 11ms
2025-01-15 17:52:04 [INFO] POST /api/uploads 201 1548ms
2025-01-15 17:52:12 [INFO] GET /api/notifications 200 31ms
2025-01-15 17:52:20 [INFO] POST /api/users 201 103ms
2025-01-15 17:52:22 [WARN] S3 upload retry after timeout (1594ms)
2025-01-15 17:52:37 [INFO] POST /api/uploads 201 1546ms
2025-01-15 17:52:50 [INFO] GET /api/health 200 2ms
2025-01-15 17:52:57 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 17:52:58 [INFO] GET /api/health 200 1ms
2025-01-15 17:53:06 [INFO] DELETE /api/users/124 204 37ms
2025-01-15 17:53:09 [INFO] PUT /api/settings 200 52ms
2025-01-15 17:53:20 [WARN] Request body exceeded soft limit (3090KB)
2025-01-15 17:53:27 [INFO] POST /api/auth/refresh 200 80ms
2025-01-15 17:53:39 [INFO] GET /api/health 200 1ms
2025-01-15 17:53:45 [INFO] POST /api/auth/refresh 200 45ms
2025-01-15 17:53:57 [INFO] POST /api/users 409 20ms
2025-01-15 17:54:03 [INFO] GET /api/users 200 68ms
2025-01-15 17:54:18 [INFO] POST /api/users 201 141ms
2025-01-15 17:54:28 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 17:54:28 [DEBUG] Rows returned: 14
2025-01-15 17:54:37 [INFO] GET /api/roles 200 10ms
2025-01-15 17:54:46 [INFO] GET /api/users/20 404 12ms
2025-01-15 17:55:01 [INFO] GET /api/users 200 39ms
2025-01-15 17:55:12 [INFO] GET /api/health 200 1ms
2025-01-15 17:55:16 [INFO] POST /api/auth/refresh 200 79ms
2025-01-15 17:55:25 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 17:55:25 [DEBUG] Rows returned: 2
2025-01-15 17:55:35 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 17:55:35 [DEBUG] Rows returned: 39
2025-01-15 17:55:43 [INFO] POST /api/users 201 125ms
2025-01-15 17:55:50 [INFO] GET /api/roles 200 9ms
2025-01-15 17:55:51 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 17:55:54 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 17:55:54 [DEBUG] Rows returned: 13
2025-01-15 17:56:07 [INFO] PUT /api/users/31 200 71ms
2025-01-15 17:56:13 [INFO] POST /api/users 409 17ms
2025-01-15 17:56:15 [INFO] POST /api/uploads 201 779ms
2025-01-15 17:56:25 [INFO] GET /api/health 200 2ms
2025-01-15 17:56:34 [INFO] POST /api/roles 201 44ms
2025-01-15 17:56:37 [INFO] POST /api/auth/login 200 240ms
2025-01-15 17:56:43 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 17:56:52 [INFO] POST /api/auth/login 401 76ms
2025-01-15 17:56:57 [INFO] POST /api/auth/login 200 145ms
2025-01-15 17:57:09 [INFO] GET /api/settings 200 12ms
2025-01-15 17:57:14 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 17:57:16 [INFO] POST /api/auth/refresh 200 40ms
2025-01-15 17:57:31 [INFO] GET /api/notifications 200 28ms
2025-01-15 17:57:40 [INFO] POST /api/roles 201 47ms
2025-01-15 17:57:51 [INFO] GET /api/users 200 38ms
2025-01-15 17:58:03 [INFO] POST /api/auth/refresh 200 67ms
2025-01-15 17:58:16 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 17:58:16 [DEBUG] New record created: id=324
2025-01-15 17:58:23 [INFO] DELETE /api/users/52 204 33ms
2025-01-15 17:58:37 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 17:58:37 [DEBUG] Rows returned: 1
2025-01-15 17:58:47 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 17:58:54 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 17:58:54 [DEBUG] New record created: id=109
2025-01-15 17:59:03 [INFO] GET /api/health 200 2ms
2025-01-15 17:59:10 [INFO] GET /api/users/154 404 14ms
2025-01-15 17:59:17 [WARN] Slow query detected: INSERT INTO users (username, email, role_id) VALUES ($1, $2, (took 941ms)
2025-01-15 17:59:30 [INFO] GET /api/health 200 1ms
2025-01-15 17:59:33 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 17:59:38 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 17:59:38 [DEBUG] New record created: id=70
2025-01-15 17:59:40 [INFO] GET /api/health 200 1ms
2025-01-15 17:59:52 [INFO] POST /api/auth/login 401 112ms
2025-01-15 17:59:58 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 17:59:58 [DEBUG] Rows returned: 6
2025-01-15 18:00:06 [INFO] GET /api/health 200 3ms
2025-01-15 18:00:08 [INFO] POST /api/roles 201 47ms
2025-01-15 18:00:13 [INFO] POST /api/users 409 12ms
2025-01-15 18:00:21 [INFO] POST /api/auth/login 200 135ms
2025-01-15 18:00:35 [INFO] GET /api/health 200 1ms
2025-01-15 18:00:37 [INFO] DELETE /api/users/126 204 26ms
2025-01-15 18:00:39 [INFO] GET /api/users?page=5&limit=25 200 46ms
2025-01-15 18:00:45 [INFO] POST /api/users 409 24ms
2025-01-15 18:00:52 [INFO] GET /api/health 200 2ms
2025-01-15 18:01:05 [INFO] PUT /api/settings 200 55ms
2025-01-15 18:01:11 [INFO] POST /api/users 409 12ms
2025-01-15 18:01:23 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 18:01:37 [WARN] Memory usage at 87% of allocated heap
2025-01-15 18:01:46 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 18:01:51 [INFO] GET /api/users/96 200 11ms
2025-01-15 18:01:54 [INFO] GET /api/users/67 404 16ms
2025-01-15 18:02:02 [INFO] GET /api/users?role=admin 200 37ms
2025-01-15 18:02:03 [INFO] GET /api/settings 200 12ms
2025-01-15 18:02:11 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 18:02:11 [DEBUG] Rows returned: 6
2025-01-15 18:02:20 [INFO] GET /api/notifications 200 13ms
2025-01-15 18:02:32 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 18:02:32 [DEBUG] Rows returned: 15
2025-01-15 18:02:34 [INFO] GET /api/settings 200 6ms
2025-01-15 18:02:39 [INFO] GET /api/analytics/dashboard 200 306ms
2025-01-15 18:02:52 [INFO] POST /api/uploads 201 592ms
2025-01-15 18:03:02 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 18:03:02 [DEBUG] Rows returned: 33
2025-01-15 18:03:08 [INFO] POST /api/users 201 132ms
2025-01-15 18:03:19 [INFO] GET /api/health 200 3ms
2025-01-15 18:03:23 [INFO] GET /api/users/96 200 11ms
2025-01-15 18:03:24 [INFO] GET /api/users 200 36ms
2025-01-15 18:03:33 [INFO] GET /api/users?role=viewer 200 36ms
2025-01-15 18:03:39 [WARN] Rate limit exceeded for IP 192.168.2.25. Returning 429.
2025-01-15 18:03:47 [INFO] GET /api/users?role=viewer 200 38ms
2025-01-15 18:03:57 [INFO] GET /api/health 200 1ms
2025-01-15 18:04:01 [INFO] GET /api/health 200 3ms
2025-01-15 18:04:04 [INFO] POST /api/users 201 120ms
2025-01-15 18:04:08 [INFO] GET /api/health 200 3ms
2025-01-15 18:04:11 [INFO] POST /api/users 409 14ms
2025-01-15 18:04:22 [INFO] PUT /api/settings 200 27ms
2025-01-15 18:04:35 [INFO] POST /api/uploads 201 1679ms
2025-01-15 18:04:37 [INFO] POST /api/users 409 22ms
2025-01-15 18:04:39 [INFO] GET /api/health 200 1ms
2025-01-15 18:04:43 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 18:04:49 [INFO] GET /api/health 200 2ms
2025-01-15 18:05:00 [INFO] POST /api/users 201 144ms
2025-01-15 18:05:07 [INFO] POST /api/roles 201 30ms
2025-01-15 18:05:10 [INFO] GET /api/notifications 200 18ms
2025-01-15 18:05:13 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 18:05:13 [DEBUG] Rows returned: 37
2025-01-15 18:05:19 [INFO] POST /api/auth/refresh 200 47ms
2025-01-15 18:05:30 [INFO] GET /api/users?page=2&limit=25 200 47ms
2025-01-15 18:05:37 [INFO] GET /api/health 200 1ms
2025-01-15 18:05:43 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 18:05:43 [DEBUG] Rows returned: 25
2025-01-15 18:05:49 [INFO] GET /api/health 200 3ms
2025-01-15 18:06:03 [INFO] GET /api/analytics/dashboard 200 578ms
2025-01-15 18:06:16 [INFO] GET /api/notifications 200 19ms
2025-01-15 18:06:18 [INFO] GET /api/users?page=4&limit=25 200 48ms
2025-01-15 18:06:21 [INFO] POST /api/auth/refresh 200 57ms
2025-01-15 18:06:33 [INFO] DELETE /api/users/87 204 38ms
2025-01-15 18:06:45 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 18:06:45 [DEBUG] Rows returned: 8
2025-01-15 18:06:58 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 18:07:07 [INFO] GET /api/health 200 3ms
2025-01-15 18:07:11 [INFO] PUT /api/users/182 200 77ms
2025-01-15 18:07:14 [INFO] GET /api/users?role=admin 200 35ms
2025-01-15 18:07:22 [INFO] GET /api/health 200 3ms
2025-01-15 18:07:37 [INFO] PUT /api/users/191 200 57ms
2025-01-15 18:07:41 [WARN] Memory usage at 82% of allocated heap
2025-01-15 18:07:54 [INFO] POST /api/uploads 201 1463ms
2025-01-15 18:08:04 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 18:08:14 [INFO] GET /api/health 200 3ms
2025-01-15 18:08:27 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 18:08:27 [DEBUG] Rows returned: 6
2025-01-15 18:08:33 [INFO] GET /api/health 200 3ms
2025-01-15 18:08:42 [INFO] POST /api/auth/login 200 122ms
2025-01-15 18:08:43 [INFO] GET /api/analytics/dashboard 200 588ms
2025-01-15 18:08:44 [INFO] POST /api/users 409 18ms
2025-01-15 18:08:53 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 18:08:53 [DEBUG] Rows returned: 35
2025-01-15 18:09:08 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 18:09:08 [DEBUG] New record created: id=121
2025-01-15 18:09:15 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 18:09:19 [INFO] GET /api/users/74 404 17ms
2025-01-15 18:09:32 [INFO] POST /api/auth/refresh 200 71ms
2025-01-15 18:09:37 [INFO] GET /api/health 200 3ms
2025-01-15 18:09:47 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 18:10:02 [INFO] GET /api/health 200 3ms
2025-01-15 18:10:04 [INFO] GET /api/settings 200 8ms
2025-01-15 18:10:11 [INFO] GET /api/health 200 2ms
2025-01-15 18:10:20 [INFO] GET /api/health 200 1ms
2025-01-15 18:10:31 [INFO] POST /api/auth/login 401 108ms
2025-01-15 18:10:33 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 18:10:33 [DEBUG] Rows returned: 43
2025-01-15 18:10:34 [INFO] POST /api/uploads 201 951ms
2025-01-15 18:10:44 [INFO] GET /api/users/100 404 13ms
2025-01-15 18:10:57 [INFO] GET /api/health 200 1ms
2025-01-15 18:10:59 [INFO] DELETE /api/users/146 204 21ms
2025-01-15 18:11:12 [INFO] GET /api/health 200 1ms
2025-01-15 18:11:16 [INFO] GET /api/roles 200 12ms
2025-01-15 18:11:27 [INFO] GET /api/health 200 3ms
2025-01-15 18:11:32 [INFO] GET /api/users/73 404 16ms
2025-01-15 18:11:45 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:11:45 [DEBUG] Rows returned: 46
2025-01-15 18:11:46 [WARN] Request body exceeded soft limit (1246KB)
2025-01-15 18:11:53 [INFO] POST /api/roles 201 33ms
2025-01-15 18:12:07 [INFO] POST /api/users 409 23ms
2025-01-15 18:12:21 [INFO] GET /api/users/104 404 17ms
2025-01-15 18:12:31 [INFO] POST /api/roles 201 46ms
2025-01-15 18:12:40 [INFO] GET /api/health 200 2ms
2025-01-15 18:12:45 [INFO] POST /api/users 201 105ms
2025-01-15 18:12:47 [INFO] GET /api/analytics/dashboard 200 302ms
2025-01-15 18:12:51 [WARN] Request body exceeded soft limit (4559KB)
2025-01-15 18:12:55 [INFO] GET /api/health 200 3ms
2025-01-15 18:12:57 [INFO] POST /api/roles 201 59ms
2025-01-15 18:13:08 [INFO] GET /api/health 200 1ms
2025-01-15 18:13:23 [INFO] GET /api/users/75 200 9ms
2025-01-15 18:13:37 [INFO] POST /api/roles 201 34ms
2025-01-15 18:13:50 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 18:14:00 [INFO] POST /api/uploads 201 1117ms
2025-01-15 18:14:10 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 18:14:13 [INFO] POST /api/roles 201 35ms
2025-01-15 18:14:28 [INFO] GET /api/users?role=moderator 200 36ms
2025-01-15 18:14:35 [WARN] Rate limit exceeded for IP 192.168.7.141. Returning 429.
2025-01-15 18:14:38 [INFO] GET /api/health 200 2ms
2025-01-15 18:14:50 [INFO] GET /api/users/1 200 14ms
2025-01-15 18:14:58 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:14:58 [DEBUG] Rows returned: 45
2025-01-15 18:15:06 [INFO] PUT /api/settings 200 53ms
2025-01-15 18:15:21 [WARN] Request body exceeded soft limit (978KB)
2025-01-15 18:15:27 [INFO] GET /api/users?role=moderator 200 36ms
2025-01-15 18:15:42 [INFO] GET /api/users?page=2&limit=25 200 36ms
2025-01-15 18:15:50 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:15:50 [DEBUG] Rows returned: 29
2025-01-15 18:15:53 [INFO] POST /api/users 201 126ms
2025-01-15 18:15:54 [INFO] GET /api/health 200 1ms
2025-01-15 18:15:59 [INFO] GET /api/health 200 3ms
2025-01-15 18:16:14 [INFO] DELETE /api/users/2 204 40ms
2025-01-15 18:16:21 [INFO] GET /api/health 200 2ms
2025-01-15 18:16:22 [INFO] GET /api/health 200 3ms
2025-01-15 18:16:30 [INFO] GET /api/health 200 1ms
2025-01-15 18:16:45 [INFO] POST /api/auth/login 401 62ms
2025-01-15 18:16:53 [INFO] POST /api/users 201 101ms
2025-01-15 18:16:57 [INFO] GET /api/users/32 404 10ms
2025-01-15 18:17:01 [INFO] POST /api/users 201 99ms
2025-01-15 18:17:06 [INFO] GET /api/roles 200 13ms
2025-01-15 18:17:10 [INFO] PUT /api/settings 200 20ms
2025-01-15 18:17:15 [INFO] POST /api/uploads 201 737ms
2025-01-15 18:17:19 [INFO] GET /api/users/181 404 13ms
2025-01-15 18:17:30 [INFO] GET /api/users?role=viewer 200 19ms
2025-01-15 18:17:33 [INFO] GET /api/health 200 3ms
2025-01-15 18:17:43 [INFO] GET /api/health 200 3ms
2025-01-15 18:17:55 [WARN] Deprecated API version v1 called by client client-8
2025-01-15 18:18:10 [INFO] GET /api/users/7 200 14ms
2025-01-15 18:18:25 [INFO] GET /api/health 200 2ms
2025-01-15 18:18:29 [INFO] PUT /api/settings 200 26ms
2025-01-15 18:18:44 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 18:18:52 [INFO] POST /api/auth/refresh 200 32ms
2025-01-15 18:18:55 [INFO] GET /api/notifications 200 22ms
2025-01-15 18:18:59 [INFO] GET /api/health 200 2ms
2025-01-15 18:19:14 [INFO] GET /api/health 200 3ms
2025-01-15 18:19:24 [INFO] GET /api/health 200 3ms
2025-01-15 18:19:27 [INFO] PUT /api/settings 200 35ms
2025-01-15 18:19:41 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 18:19:51 [INFO] GET /api/users?role=viewer 200 30ms
2025-01-15 18:20:04 [INFO] GET /api/settings 200 9ms
2025-01-15 18:20:07 [INFO] GET /api/health 200 3ms
2025-01-15 18:20:08 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 18:20:08 [DEBUG] Rows returned: 9
2025-01-15 18:20:17 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 18:20:17 [DEBUG] New record created: id=269
2025-01-15 18:20:18 [INFO] GET /api/users 200 54ms
2025-01-15 18:20:22 [INFO] GET /api/roles 200 6ms
2025-01-15 18:20:29 [INFO] POST /api/auth/refresh 200 56ms
2025-01-15 18:20:40 [INFO] POST /api/roles 201 52ms
2025-01-15 18:20:44 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 18:20:44 [DEBUG] New record created: id=193
2025-01-15 18:20:48 [INFO] POST /api/auth/login 200 201ms
2025-01-15 18:20:53 [INFO] POST /api/auth/refresh 200 50ms
2025-01-15 18:21:06 [INFO] GET /api/health 200 1ms
2025-01-15 18:21:15 [INFO] POST /api/users 409 15ms
2025-01-15 18:21:19 [INFO] GET /api/health 200 1ms
2025-01-15 18:21:27 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 18:21:29 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 18:21:29 [DEBUG] Rows returned: 15
2025-01-15 18:21:43 [INFO] GET /api/users/84 404 15ms
2025-01-15 18:21:48 [INFO] GET /api/health 200 3ms
2025-01-15 18:22:03 [INFO] POST /api/users 409 15ms
2025-01-15 18:22:08 [INFO] POST /api/auth/refresh 200 44ms
2025-01-15 18:22:19 [INFO] GET /api/users?role=viewer 200 20ms
2025-01-15 18:22:34 [INFO] GET /api/users/83 200 17ms
2025-01-15 18:22:38 [INFO] GET /api/health 200 1ms
2025-01-15 18:22:53 [INFO] GET /api/health 200 3ms
2025-01-15 18:23:03 [INFO] POST /api/users 409 15ms
2025-01-15 18:23:13 [INFO] POST /api/users 201 132ms
2025-01-15 18:23:21 [INFO] POST /api/users 409 15ms
2025-01-15 18:23:36 [INFO] PUT /api/settings 200 45ms
2025-01-15 18:23:40 [ERROR] Database connection timeout after 5000ms
2025-01-15 18:23:50 [INFO] GET /api/users 200 36ms
2025-01-15 18:23:53 [INFO] GET /api/users/172 404 17ms
2025-01-15 18:23:57 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 18:24:03 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 18:24:03 [DEBUG] Rows returned: 38
2025-01-15 18:24:11 [INFO] GET /api/users 200 36ms
2025-01-15 18:24:23 [INFO] GET /api/users?role=admin 200 19ms
2025-01-15 18:24:26 [INFO] GET /api/health 200 2ms
2025-01-15 18:24:38 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 18:24:50 [INFO] GET /api/notifications 200 29ms
2025-01-15 18:24:55 [INFO] POST /api/auth/refresh 200 30ms
2025-01-15 18:25:00 [INFO] GET /api/health 200 2ms
2025-01-15 18:25:12 [INFO] GET /api/health 200 1ms
2025-01-15 18:25:15 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:25:15 [DEBUG] Rows returned: 24
2025-01-15 18:25:26 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 18:25:26 [DEBUG] Rows returned: 50
2025-01-15 18:25:35 [INFO] GET /api/health 200 2ms
2025-01-15 18:25:41 [INFO] POST /api/auth/refresh 200 58ms
2025-01-15 18:25:42 [INFO] GET /api/health 200 1ms
2025-01-15 18:25:52 [INFO] GET /api/users?page=1&limit=25 200 53ms
2025-01-15 18:26:00 [INFO] POST /api/auth/login 401 57ms
2025-01-15 18:26:06 [INFO] GET /api/analytics/dashboard 200 328ms
2025-01-15 18:26:07 [INFO] GET /api/health 200 1ms
2025-01-15 18:26:16 [INFO] GET /api/users?role=admin 200 36ms
2025-01-15 18:26:18 [INFO] GET /api/health 200 3ms
2025-01-15 18:26:19 [INFO] DELETE /api/users/18 204 35ms
2025-01-15 18:26:30 [INFO] POST /api/auth/refresh 200 70ms
2025-01-15 18:26:37 [INFO] DELETE /api/users/35 204 41ms
2025-01-15 18:26:45 [INFO] GET /api/users?page=1&limit=25 200 33ms
2025-01-15 18:26:52 [INFO] GET /api/health 200 3ms
2025-01-15 18:27:04 [INFO] GET /api/notifications 200 25ms
2025-01-15 18:27:06 [INFO] POST /api/users 201 82ms
2025-01-15 18:27:07 [INFO] DELETE /api/users/117 204 38ms
2025-01-15 18:27:20 [INFO] POST /api/users 201 98ms
2025-01-15 18:27:25 [INFO] PUT /api/settings 200 33ms
2025-01-15 18:27:28 [ERROR] Deadlock detected in transaction tx-96390
2025-01-15 18:27:28 [ERROR] Stack trace:
    at Router.handle (node_modules/express/lib/router/index.js:46)
    at authenticate (src/middleware/auth.ts:184)
    at validateRequest (src/middleware/validation.ts:117)
    at AuthController.login (src/controllers/auth.controller.ts:278)
2025-01-15 18:27:31 [INFO] GET /api/users/200 404 14ms
2025-01-15 18:27:44 [INFO] POST /api/auth/login 401 105ms
2025-01-15 18:27:52 [INFO] GET /api/health 200 1ms
2025-01-15 18:28:06 [INFO] GET /api/health 200 1ms
2025-01-15 18:28:19 [INFO] POST /api/users 409 17ms
2025-01-15 18:28:32 [WARN] JWT token expires in less than 60 seconds for user 67
2025-01-15 18:28:41 [INFO] POST /api/roles 201 40ms
2025-01-15 18:28:46 [INFO] GET /api/health 200 3ms
2025-01-15 18:28:51 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:28:51 [DEBUG] Rows returned: 1
2025-01-15 18:28:56 [INFO] POST /api/users 201 96ms
2025-01-15 18:29:06 [INFO] POST /api/auth/login 200 136ms
2025-01-15 18:29:20 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 18:29:20 [DEBUG] Rows returned: 49
2025-01-15 18:29:23 [INFO] GET /api/health 200 2ms
2025-01-15 18:29:35 [INFO] PUT /api/settings 200 48ms
2025-01-15 18:29:45 [INFO] GET /api/health 200 2ms
2025-01-15 18:29:56 [INFO] GET /api/health 200 1ms
2025-01-15 18:29:58 [INFO] GET /api/users/78 404 8ms
2025-01-15 18:30:01 [INFO] PUT /api/users/75 200 75ms
2025-01-15 18:30:15 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 18:30:15 [DEBUG] Rows returned: 42
2025-01-15 18:30:27 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 18:30:42 [INFO] GET /api/analytics/dashboard 200 582ms
2025-01-15 18:30:44 [INFO] GET /api/health 200 2ms
2025-01-15 18:30:56 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 18:30:56 [DEBUG] Rows returned: 1
2025-01-15 18:31:00 [INFO] PUT /api/settings 200 38ms
2025-01-15 18:31:08 [INFO] POST /api/users 201 136ms
2025-01-15 18:31:19 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 18:31:19 [DEBUG] New record created: id=405
2025-01-15 18:31:20 [WARN] Memory usage at 89% of allocated heap
2025-01-15 18:31:27 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 18:31:27 [DEBUG] Rows returned: 8
2025-01-15 18:31:41 [INFO] GET /api/health 200 3ms
2025-01-15 18:31:48 [INFO] GET /api/users/18 404 8ms
2025-01-15 18:32:02 [WARN] Slow query detected: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY creat (took 1684ms)
2025-01-15 18:32:15 [WARN] Redis reconnection attempt 94/5
2025-01-15 18:32:18 [WARN] Redis reconnection attempt 100/5
2025-01-15 18:32:32 [INFO] GET /api/roles 200 14ms
2025-01-15 18:32:35 [INFO] GET /api/users?page=5&limit=25 200 28ms
2025-01-15 18:32:37 [INFO] GET /api/health 200 1ms
2025-01-15 18:32:42 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:32:42 [DEBUG] Rows returned: 36
2025-01-15 18:32:57 [INFO] GET /api/users 200 31ms
2025-01-15 18:33:12 [INFO] POST /api/auth/login 200 235ms
2025-01-15 18:33:24 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 18:33:24 [DEBUG] Rows returned: 41
2025-01-15 18:33:25 [INFO] GET /api/users 200 41ms
2025-01-15 18:33:36 [INFO] POST /api/roles 201 34ms
2025-01-15 18:33:42 [INFO] GET /api/notifications 200 20ms
2025-01-15 18:33:46 [INFO] GET /api/users/71 404 12ms
2025-01-15 18:33:54 [INFO] GET /api/notifications 200 29ms
2025-01-15 18:34:05 [INFO] POST /api/auth/login 200 172ms
2025-01-15 18:34:13 [INFO] POST /api/auth/refresh 200 35ms
2025-01-15 18:34:28 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 18:34:28 [DEBUG] New record created: id=286
2025-01-15 18:34:41 [WARN] Rate limit approaching for IP 192.168.9.178 (97/100 requests in window)
2025-01-15 18:34:43 [INFO] GET /api/users/94 404 16ms
2025-01-15 18:34:50 [INFO] GET /api/settings 200 12ms
2025-01-15 18:34:56 [INFO] GET /api/notifications 200 23ms
2025-01-15 18:34:58 [INFO] GET /api/users 200 46ms
2025-01-15 18:35:07 [INFO] PUT /api/users/66 200 44ms
2025-01-15 18:35:17 [INFO] GET /api/users?role=editor 200 26ms
2025-01-15 18:35:21 [INFO] DELETE /api/users/64 204 25ms
2025-01-15 18:35:28 [INFO] POST /api/users 201 122ms
2025-01-15 18:35:37 [INFO] GET /api/users?role=viewer 200 28ms
2025-01-15 18:35:46 [INFO] PUT /api/users/2 200 49ms
2025-01-15 18:35:59 [INFO] PUT /api/users/41 200 70ms
2025-01-15 18:36:12 [INFO] GET /api/settings 200 10ms
2025-01-15 18:36:14 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 18:36:14 [DEBUG] Rows returned: 45
2025-01-15 18:36:15 [INFO] POST /api/users 201 134ms
2025-01-15 18:36:17 [WARN] Slow query detected: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1 (took 1256ms)
2025-01-15 18:36:32 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 18:36:32 [DEBUG] Rows returned: 40
2025-01-15 18:36:40 [INFO] GET /api/health 200 1ms
2025-01-15 18:36:49 [INFO] GET /api/health 200 1ms
2025-01-15 18:36:57 [INFO] GET /api/health 200 2ms
2025-01-15 18:37:05 [WARN] Rate limit approaching for IP 192.168.9.75 (84/100 requests in window)
2025-01-15 18:37:14 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 18:37:15 [INFO] GET /api/health 200 3ms
2025-01-15 18:37:29 [INFO] PUT /api/users/76 200 53ms
2025-01-15 18:37:44 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 18:37:44 [DEBUG] Rows returned: 22
2025-01-15 18:37:56 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 18:37:56 [DEBUG] Rows returned: 42
2025-01-15 18:38:04 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 18:38:15 [INFO] POST /api/auth/login 200 202ms
2025-01-15 18:38:22 [INFO] GET /api/health 200 2ms
2025-01-15 18:38:27 [INFO] PUT /api/settings 200 35ms
2025-01-15 18:38:31 [INFO] GET /api/roles 200 10ms
2025-01-15 18:38:34 [INFO] POST /api/roles 201 42ms
2025-01-15 18:38:47 [INFO] PUT /api/users/178 200 45ms
2025-01-15 18:38:57 [INFO] GET /api/roles 200 5ms
2025-01-15 18:39:03 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 18:39:03 [DEBUG] Rows returned: 42
2025-01-15 18:39:07 [INFO] GET /api/users/86 404 9ms
2025-01-15 18:39:09 [WARN] Deprecated API version v1 called by client client-5
2025-01-15 18:39:10 [INFO] POST /api/users 201 106ms
2025-01-15 18:39:21 [INFO] POST /api/auth/refresh 200 43ms
2025-01-15 18:39:25 [INFO] GET /api/notifications 200 25ms
2025-01-15 18:39:40 [INFO] POST /api/users 409 22ms
2025-01-15 18:39:48 [INFO] GET /api/roles 200 11ms
2025-01-15 18:39:59 [INFO] POST /api/roles 201 31ms
2025-01-15 18:40:14 [INFO] GET /api/analytics/dashboard 200 633ms
2025-01-15 18:40:20 [INFO] GET /api/notifications 200 27ms
2025-01-15 18:40:26 [INFO] GET /api/settings 200 9ms
2025-01-15 18:40:27 [INFO] GET /api/users 200 59ms
2025-01-15 18:40:34 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:40:34 [DEBUG] Rows returned: 19
2025-01-15 18:40:45 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 18:40:45 [DEBUG] Rows returned: 20
2025-01-15 18:40:47 [INFO] POST /api/uploads 201 926ms
2025-01-15 18:41:01 [INFO] GET /api/users/103 404 18ms
2025-01-15 18:41:13 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 18:41:19 [INFO] GET /api/health 200 3ms
2025-01-15 18:41:34 [INFO] PUT /api/settings 200 25ms
2025-01-15 18:41:49 [INFO] GET /api/users 200 77ms
2025-01-15 18:41:59 [INFO] GET /api/users/142 200 8ms
2025-01-15 18:42:11 [INFO] POST /api/roles 201 63ms
2025-01-15 18:42:22 [ERROR] Worker process crashed. Restarting...
2025-01-15 18:42:37 [WARN] Rate limit exceeded for IP 192.168.1.160. Returning 429.
2025-01-15 18:42:45 [INFO] GET /api/users/63 200 10ms
2025-01-15 18:42:54 [WARN] Slow query detected: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1 (took 1915ms)
2025-01-15 18:43:00 [INFO] GET /api/health 200 3ms
2025-01-15 18:43:05 [INFO] GET /api/health 200 3ms
2025-01-15 18:43:10 [INFO] GET /api/health 200 1ms
2025-01-15 18:43:24 [INFO] DELETE /api/users/19 204 31ms
2025-01-15 18:43:35 [INFO] PUT /api/users/173 200 79ms
2025-01-15 18:43:42 [INFO] PUT /api/users/155 200 72ms
2025-01-15 18:43:47 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 18:43:58 [INFO] DELETE /api/users/122 204 40ms
2025-01-15 18:43:59 [INFO] GET /api/health 200 1ms
2025-01-15 18:44:06 [INFO] GET /api/health 200 2ms
2025-01-15 18:44:14 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:44:14 [DEBUG] Rows returned: 32
2025-01-15 18:44:22 [INFO] POST /api/users 201 110ms
2025-01-15 18:44:29 [INFO] GET /api/users?page=4&limit=25 200 35ms
2025-01-15 18:44:37 [WARN] Rate limit exceeded for IP 192.168.3.109. Returning 429.
2025-01-15 18:44:46 [INFO] PUT /api/users/115 200 65ms
2025-01-15 18:45:00 [INFO] POST /api/users 409 19ms
2025-01-15 18:45:10 [INFO] GET /api/users?role=admin 200 25ms
2025-01-15 18:45:16 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 18:45:16 [DEBUG] Rows returned: 29
2025-01-15 18:45:19 [INFO] PUT /api/settings 200 21ms
2025-01-15 18:45:28 [INFO] GET /api/health 200 3ms
2025-01-15 18:45:34 [WARN] Redis reconnection attempt 82/5
2025-01-15 18:45:49 [WARN] Request body exceeded soft limit (1639KB)
2025-01-15 18:46:03 [INFO] POST /api/auth/login 200 236ms
2025-01-15 18:46:11 [INFO] GET /api/users/79 404 8ms
2025-01-15 18:46:25 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 18:46:25 [DEBUG] Rows returned: 0
2025-01-15 18:46:37 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 18:46:42 [INFO] POST /api/users 409 25ms
2025-01-15 18:46:48 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 18:46:48 [DEBUG] Rows returned: 40
2025-01-15 18:46:52 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 18:46:52 [DEBUG] New record created: id=351
2025-01-15 18:46:56 [INFO] GET /api/users/188 404 18ms
2025-01-15 18:46:57 [INFO] GET /api/notifications 200 18ms
2025-01-15 18:47:00 [INFO] GET /api/health 200 1ms
2025-01-15 18:47:03 [INFO] PUT /api/users/105 200 80ms
2025-01-15 18:47:12 [INFO] POST /api/users 409 16ms
2025-01-15 18:47:13 [WARN] Memory usage at 93% of allocated heap
2025-01-15 18:47:21 [WARN] Memory usage at 95% of allocated heap
2025-01-15 18:47:32 [WARN] Deprecated API version v1 called by client client-18
2025-01-15 18:47:38 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 18:47:44 [INFO] GET /api/users?role=admin 200 27ms
2025-01-15 18:47:55 [INFO] POST /api/uploads 201 1552ms
2025-01-15 18:47:59 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 18:48:08 [INFO] POST /api/roles 201 65ms
2025-01-15 18:48:15 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 18:48:15 [DEBUG] Rows returned: 31
2025-01-15 18:48:19 [INFO] POST /api/auth/login 200 139ms
2025-01-15 18:48:20 [INFO] GET /api/health 200 2ms
2025-01-15 18:48:28 [INFO] GET /api/analytics/dashboard 200 362ms
2025-01-15 18:48:41 [INFO] GET /api/health 200 2ms
2025-01-15 18:48:54 [INFO] GET /api/health 200 3ms
2025-01-15 18:48:58 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 18:48:58 [DEBUG] Rows returned: 16
2025-01-15 18:49:03 [INFO] POST /api/auth/login 401 54ms
2025-01-15 18:49:09 [INFO] POST /api/roles 201 32ms
2025-01-15 18:49:19 [INFO] GET /api/roles 200 5ms
2025-01-15 18:49:20 [INFO] GET /api/roles 200 5ms
2025-01-15 18:49:32 [INFO] DELETE /api/users/190 204 47ms
2025-01-15 18:49:42 [INFO] GET /api/users?page=2&limit=25 200 60ms
2025-01-15 18:49:57 [INFO] POST /api/auth/login 401 94ms
2025-01-15 18:49:59 [INFO] POST /api/users 201 123ms
2025-01-15 18:50:00 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 18:50:00 [DEBUG] New record created: id=98
2025-01-15 18:50:05 [INFO] DELETE /api/users/17 204 39ms
2025-01-15 18:50:10 [INFO] GET /api/health 200 3ms
2025-01-15 18:50:21 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 18:50:34 [INFO] GET /api/users?role=admin 200 18ms
2025-01-15 18:50:37 [INFO] GET /api/users?page=3&limit=25 200 35ms
2025-01-15 18:50:44 [INFO] POST /api/auth/refresh 200 57ms
2025-01-15 18:50:58 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 18:50:58 [DEBUG] New record created: id=462
2025-01-15 18:51:09 [INFO] GET /api/users 200 39ms
2025-01-15 18:51:18 [INFO] GET /api/users?page=3&limit=25 200 30ms
2025-01-15 18:51:23 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 18:51:23 [DEBUG] Rows returned: 2
2025-01-15 18:51:36 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 18:51:36 [DEBUG] Rows returned: 5
2025-01-15 18:51:46 [INFO] GET /api/users/21 404 13ms
2025-01-15 18:52:00 [INFO] DELETE /api/users/177 204 49ms
2025-01-15 18:52:13 [INFO] GET /api/analytics/dashboard 200 666ms
2025-01-15 18:52:17 [INFO] GET /api/roles 200 6ms
2025-01-15 18:52:28 [INFO] GET /api/analytics/dashboard 200 635ms
2025-01-15 18:52:33 [INFO] GET /api/health 200 1ms
2025-01-15 18:52:46 [INFO] GET /api/notifications 200 35ms
2025-01-15 18:52:57 [INFO] POST /api/users 409 17ms
2025-01-15 18:52:59 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 18:52:59 [DEBUG] Rows returned: 15
2025-01-15 18:53:00 [INFO] GET /api/health 200 1ms
2025-01-15 18:53:15 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 18:53:15 [DEBUG] Rows returned: 4
2025-01-15 18:53:22 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 18:53:22 [DEBUG] Rows returned: 19
2025-01-15 18:53:28 [INFO] GET /api/users?role=editor 200 36ms
2025-01-15 18:53:40 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 18:53:40 [DEBUG] Rows returned: 14
2025-01-15 18:53:51 [INFO] GET /api/health 200 1ms
2025-01-15 18:54:04 [INFO] DELETE /api/users/199 204 36ms
2025-01-15 18:54:10 [INFO] GET /api/health 200 1ms
2025-01-15 18:54:21 [INFO] POST /api/users 201 111ms
2025-01-15 18:54:28 [INFO] GET /api/users 200 36ms
2025-01-15 18:54:41 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:54:41 [DEBUG] Rows returned: 15
2025-01-15 18:54:46 [INFO] GET /api/users?page=4&limit=25 200 49ms
2025-01-15 18:54:54 [INFO] PUT /api/settings 200 38ms
2025-01-15 18:55:04 [INFO] POST /api/roles 201 35ms
2025-01-15 18:55:13 [INFO] GET /api/health 200 1ms
2025-01-15 18:55:24 [INFO] POST /api/auth/login 401 60ms
2025-01-15 18:55:39 [INFO] POST /api/users 409 13ms
2025-01-15 18:55:50 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 18:55:50 [DEBUG] Rows returned: 1
2025-01-15 18:55:57 [INFO] GET /api/settings 200 7ms
2025-01-15 18:56:04 [WARN] Deprecated API version v1 called by client client-4
2025-01-15 18:56:15 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 18:56:15 [DEBUG] Rows returned: 3
2025-01-15 18:56:27 [INFO] DELETE /api/users/159 204 23ms
2025-01-15 18:56:37 [INFO] POST /api/auth/login 200 213ms
2025-01-15 18:56:41 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 18:56:41 [DEBUG] Rows returned: 49
2025-01-15 18:56:49 [INFO] GET /api/health 200 3ms
2025-01-15 18:57:00 [INFO] GET /api/health 200 3ms
2025-01-15 18:57:12 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 18:57:12 [DEBUG] Rows returned: 5
2025-01-15 18:57:18 [INFO] GET /api/health 200 1ms
2025-01-15 18:57:23 [INFO] GET /api/users 200 33ms
2025-01-15 18:57:36 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 18:57:36 [DEBUG] Rows returned: 33
2025-01-15 18:57:40 [INFO] POST /api/uploads 201 1134ms
2025-01-15 18:57:51 [INFO] GET /api/users 200 50ms
2025-01-15 18:57:59 [INFO] GET /api/health 200 1ms
2025-01-15 18:58:03 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 18:58:03 [DEBUG] Rows returned: 17
2025-01-15 18:58:04 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 18:58:04 [DEBUG] Rows returned: 50
2025-01-15 18:58:08 [INFO] POST /api/auth/refresh 200 70ms
2025-01-15 18:58:10 [INFO] POST /api/users 201 144ms
2025-01-15 18:58:12 [INFO] DELETE /api/users/141 204 25ms
2025-01-15 18:58:14 [INFO] GET /api/users?role=editor 200 23ms
2025-01-15 18:58:21 [INFO] POST /api/uploads 201 505ms
2025-01-15 18:58:23 [INFO] POST /api/uploads 201 855ms
2025-01-15 18:58:24 [INFO] GET /api/health 200 3ms
2025-01-15 18:58:28 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:58:28 [DEBUG] Rows returned: 48
2025-01-15 18:58:39 [INFO] GET /api/users/186 404 14ms
2025-01-15 18:58:53 [INFO] POST /api/uploads 201 1002ms
2025-01-15 18:59:05 [INFO] GET /api/health 200 2ms
2025-01-15 18:59:13 [INFO] GET /api/users 200 30ms
2025-01-15 18:59:18 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 18:59:18 [DEBUG] Rows returned: 49
2025-01-15 18:59:19 [WARN] Slow query detected: SELECT * FROM permissions WHERE role_id = $1 (took 533ms)
2025-01-15 18:59:30 [INFO] PUT /api/settings 200 33ms
2025-01-15 18:59:38 [INFO] GET /api/users?page=5&limit=25 200 30ms
2025-01-15 18:59:48 [INFO] POST /api/roles 201 56ms
2025-01-15 18:59:58 [INFO] PUT /api/settings 200 44ms
2025-01-15 19:00:12 [INFO] POST /api/users 409 12ms
2025-01-15 19:00:16 [INFO] GET /api/users/177 404 14ms
2025-01-15 19:00:20 [INFO] POST /api/auth/login 200 197ms
2025-01-15 19:00:35 [INFO] GET /api/health 200 3ms
2025-01-15 19:00:39 [WARN] Deprecated API version v1 called by client client-18
2025-01-15 19:00:51 [INFO] GET /api/users 200 68ms
2025-01-15 19:01:02 [WARN] Memory usage at 87% of allocated heap
2025-01-15 19:01:09 [INFO] PUT /api/users/1 200 44ms
2025-01-15 19:01:22 [INFO] GET /api/users/176 404 18ms
2025-01-15 19:01:33 [INFO] POST /api/users 409 22ms
2025-01-15 19:01:42 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 19:01:57 [WARN] Memory usage at 87% of allocated heap
2025-01-15 19:02:06 [WARN] Slow query detected: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $ (took 1072ms)
2025-01-15 19:02:10 [INFO] PUT /api/settings 200 34ms
2025-01-15 19:02:22 [INFO] GET /api/health 200 2ms
2025-01-15 19:02:32 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 19:02:47 [INFO] GET /api/users?role=editor 200 17ms
2025-01-15 19:02:48 [WARN] Slow query detected: SELECT * FROM users WHERE role_id = $1 AND active = true (took 1821ms)
2025-01-15 19:02:51 [INFO] GET /api/roles 200 8ms
2025-01-15 19:02:52 [INFO] GET /api/users/115 404 15ms
2025-01-15 19:02:58 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 19:02:58 [DEBUG] New record created: id=363
2025-01-15 19:03:10 [INFO] GET /api/health 200 3ms
2025-01-15 19:03:19 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 19:03:27 [INFO] GET /api/health 200 3ms
2025-01-15 19:03:37 [INFO] PUT /api/settings 200 28ms
2025-01-15 19:03:39 [INFO] GET /api/users/72 404 14ms
2025-01-15 19:03:45 [INFO] GET /api/users/142 404 14ms
2025-01-15 19:03:47 [INFO] GET /api/users?role=editor 200 28ms
2025-01-15 19:03:51 [INFO] GET /api/health 200 1ms
2025-01-15 19:04:01 [INFO] GET /api/users?page=2&limit=25 200 51ms
2025-01-15 19:04:03 [INFO] POST /api/roles 201 61ms
2025-01-15 19:04:18 [INFO] GET /api/users/23 200 6ms
2025-01-15 19:04:25 [INFO] POST /api/users 409 16ms
2025-01-15 19:04:36 [INFO] GET /api/health 200 2ms
2025-01-15 19:04:38 [INFO] GET /api/analytics/dashboard 200 317ms
2025-01-15 19:04:45 [INFO] PUT /api/users/108 200 44ms
2025-01-15 19:04:53 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 19:04:53 [DEBUG] New record created: id=218
2025-01-15 19:04:58 [INFO] GET /api/users 200 55ms
2025-01-15 19:05:09 [INFO] GET /api/users?page=3&limit=25 200 58ms
2025-01-15 19:05:22 [INFO] DELETE /api/users/88 204 41ms
2025-01-15 19:05:32 [WARN] Redis reconnection attempt 88/5
2025-01-15 19:05:47 [INFO] GET /api/users?role=moderator 200 17ms
2025-01-15 19:06:01 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 19:06:01 [DEBUG] Rows returned: 11
2025-01-15 19:06:07 [INFO] GET /api/users/162 200 18ms
2025-01-15 19:06:22 [INFO] GET /api/users/181 404 14ms
2025-01-15 19:06:35 [INFO] POST /api/uploads 201 1725ms
2025-01-15 19:06:40 [INFO] GET /api/users/54 404 11ms
2025-01-15 19:06:42 [INFO] PUT /api/users/199 200 55ms
2025-01-15 19:06:43 [INFO] GET /api/health 200 2ms
2025-01-15 19:06:53 [INFO] GET /api/users?role=admin 200 28ms
2025-01-15 19:07:05 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 19:07:05 [DEBUG] Rows returned: 50
2025-01-15 19:07:15 [INFO] POST /api/users 201 102ms
2025-01-15 19:07:27 [INFO] GET /api/analytics/dashboard 200 295ms
2025-01-15 19:07:34 [INFO] GET /api/users/18 200 20ms
2025-01-15 19:07:38 [WARN] JWT token expires in less than 60 seconds for user 181
2025-01-15 19:07:53 [INFO] POST /api/users 201 114ms
2025-01-15 19:07:55 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 19:07:55 [DEBUG] New record created: id=500
2025-01-15 19:08:08 [INFO] GET /api/health 200 1ms
2025-01-15 19:08:21 [INFO] GET /api/health 200 2ms
2025-01-15 19:08:32 [WARN] Rate limit exceeded for IP 192.168.7.81. Returning 429.
2025-01-15 19:08:43 [INFO] GET /api/health 200 2ms
2025-01-15 19:08:48 [INFO] POST /api/uploads 201 822ms
2025-01-15 19:09:00 [INFO] GET /api/users?page=4&limit=25 200 51ms
2025-01-15 19:09:06 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 19:09:06 [DEBUG] Rows returned: 7
2025-01-15 19:09:17 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 19:09:17 [DEBUG] Rows returned: 42
2025-01-15 19:09:19 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 19:09:21 [INFO] GET /api/users?page=2&limit=25 200 54ms
2025-01-15 19:09:22 [INFO] POST /api/users 201 87ms
2025-01-15 19:09:31 [WARN] Rate limit exceeded for IP 192.168.2.7. Returning 429.
2025-01-15 19:09:41 [INFO] GET /api/settings 200 7ms
2025-01-15 19:09:45 [INFO] POST /api/auth/login 200 144ms
2025-01-15 19:09:58 [INFO] GET /api/users?page=5&limit=25 200 49ms
2025-01-15 19:10:00 [INFO] GET /api/users/17 200 5ms
2025-01-15 19:10:14 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 19:10:27 [INFO] GET /api/health 200 1ms
2025-01-15 19:10:32 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 19:10:32 [DEBUG] New record created: id=200
2025-01-15 19:10:33 [INFO] POST /api/users 409 23ms
2025-01-15 19:10:37 [INFO] POST /api/roles 201 46ms
2025-01-15 19:10:41 [INFO] GET /api/users/189 404 17ms
2025-01-15 19:10:46 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 19:10:46 [DEBUG] New record created: id=272
2025-01-15 19:10:59 [INFO] GET /api/health 200 2ms
2025-01-15 19:11:02 [INFO] POST /api/uploads 201 773ms
2025-01-15 19:11:11 [INFO] GET /api/health 200 2ms
2025-01-15 19:11:25 [INFO] GET /api/health 200 3ms
2025-01-15 19:11:39 [INFO] POST /api/uploads 201 1057ms
2025-01-15 19:11:54 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 19:12:07 [WARN] Request body exceeded soft limit (3816KB)
2025-01-15 19:12:08 [INFO] GET /api/users/141 404 8ms
2025-01-15 19:12:21 [INFO] GET /api/settings 200 12ms
2025-01-15 19:12:25 [WARN] Memory usage at 87% of allocated heap
2025-01-15 19:12:33 [INFO] PUT /api/settings 200 21ms
2025-01-15 19:12:40 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 19:12:40 [DEBUG] Rows returned: 44
2025-01-15 19:12:54 [INFO] GET /api/health 200 1ms
2025-01-15 19:13:08 [INFO] GET /api/health 200 2ms
2025-01-15 19:13:18 [INFO] GET /api/roles 200 6ms
2025-01-15 19:13:19 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 19:13:26 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 19:13:26 [DEBUG] Rows returned: 41
2025-01-15 19:13:32 [INFO] GET /api/notifications 200 22ms
2025-01-15 19:13:40 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 19:13:50 [INFO] GET /api/health 200 3ms
2025-01-15 19:13:53 [INFO] PUT /api/users/95 200 73ms
2025-01-15 19:13:59 [INFO] GET /api/roles 200 11ms
2025-01-15 19:14:06 [INFO] GET /api/health 200 3ms
2025-01-15 19:14:19 [WARN] JWT token expires in less than 60 seconds for user 19
2025-01-15 19:14:27 [INFO] GET /api/health 200 3ms
2025-01-15 19:14:37 [INFO] GET /api/users?role=admin 200 16ms
2025-01-15 19:14:51 [INFO] GET /api/users 200 45ms
2025-01-15 19:15:05 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 19:15:05 [DEBUG] Rows returned: 27
2025-01-15 19:15:17 [INFO] POST /api/auth/login 200 163ms
2025-01-15 19:15:26 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 19:15:30 [INFO] GET /api/health 200 2ms
2025-01-15 19:15:44 [INFO] GET /api/users 200 45ms
2025-01-15 19:15:53 [INFO] GET /api/health 200 1ms
2025-01-15 19:16:07 [INFO] GET /api/health 200 2ms
2025-01-15 19:16:16 [INFO] PUT /api/settings 200 33ms
2025-01-15 19:16:17 [INFO] GET /api/health 200 3ms
2025-01-15 19:16:32 [INFO] GET /api/users?page=4&limit=25 200 47ms
2025-01-15 19:16:41 [INFO] GET /api/analytics/dashboard 200 535ms
2025-01-15 19:16:48 [INFO] PUT /api/users/192 200 56ms
2025-01-15 19:16:53 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 19:17:04 [INFO] POST /api/auth/login 200 159ms
2025-01-15 19:17:06 [INFO] POST /api/users 201 136ms
2025-01-15 19:17:17 [INFO] GET /api/analytics/dashboard 200 425ms
2025-01-15 19:17:31 [INFO] POST /api/auth/refresh 200 59ms
2025-01-15 19:17:39 [INFO] GET /api/health 200 1ms
2025-01-15 19:17:50 [INFO] POST /api/users 201 136ms
2025-01-15 19:17:59 [INFO] GET /api/users 200 41ms
2025-01-15 19:18:12 [INFO] GET /api/users?page=3&limit=25 200 40ms
2025-01-15 19:18:17 [INFO] GET /api/health 200 3ms
2025-01-15 19:18:23 [INFO] GET /api/users?page=4&limit=25 200 41ms
2025-01-15 19:18:38 [INFO] GET /api/health 200 1ms
2025-01-15 19:18:51 [INFO] GET /api/health 200 2ms
2025-01-15 19:18:58 [INFO] POST /api/uploads 201 1043ms
2025-01-15 19:19:12 [INFO] GET /api/analytics/dashboard 200 282ms
2025-01-15 19:19:17 [INFO] GET /api/users?page=1&limit=25 200 29ms
2025-01-15 19:19:23 [INFO] GET /api/health 200 1ms
2025-01-15 19:19:34 [INFO] GET /api/health 200 1ms
2025-01-15 19:19:44 [INFO] GET /api/users 200 79ms
2025-01-15 19:19:49 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 19:19:49 [DEBUG] Rows returned: 23
2025-01-15 19:19:56 [INFO] GET /api/notifications 200 33ms
2025-01-15 19:20:01 [INFO] GET /api/notifications 200 17ms
2025-01-15 19:20:07 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 19:20:15 [INFO] GET /api/settings 200 5ms
2025-01-15 19:20:27 [INFO] POST /api/roles 201 34ms
2025-01-15 19:20:29 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 19:20:38 [INFO] POST /api/auth/login 200 240ms
2025-01-15 19:20:40 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 19:20:40 [DEBUG] Rows returned: 32
2025-01-15 19:20:44 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 19:20:44 [DEBUG] Rows returned: 50
2025-01-15 19:20:59 [INFO] POST /api/auth/login 401 110ms
2025-01-15 19:21:07 [INFO] GET /api/users/131 200 20ms
2025-01-15 19:21:18 [INFO] POST /api/auth/refresh 200 72ms
2025-01-15 19:21:29 [INFO] GET /api/health 200 2ms
2025-01-15 19:21:38 [INFO] GET /api/health 200 3ms
2025-01-15 19:21:48 [INFO] GET /api/users?page=3&limit=25 200 50ms
2025-01-15 19:21:54 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 19:21:59 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 19:21:59 [DEBUG] Rows returned: 14
2025-01-15 19:22:11 [INFO] POST /api/users 409 23ms
2025-01-15 19:22:26 [INFO] GET /api/health 200 3ms
2025-01-15 19:22:30 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 19:22:30 [DEBUG] Rows returned: 11
2025-01-15 19:22:45 [INFO] GET /api/roles 200 8ms
2025-01-15 19:23:00 [INFO] POST /api/auth/login 200 224ms
2025-01-15 19:23:05 [INFO] DELETE /api/users/55 204 34ms
2025-01-15 19:23:17 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 19:23:17 [DEBUG] Rows returned: 10
2025-01-15 19:23:22 [INFO] POST /api/roles 201 50ms
2025-01-15 19:23:32 [INFO] GET /api/users/5 404 16ms
2025-01-15 19:23:40 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 19:23:40 [DEBUG] Rows returned: 5
2025-01-15 19:23:49 [WARN] Request body exceeded soft limit (1238KB)
2025-01-15 19:24:04 [INFO] GET /api/notifications 200 14ms
2025-01-15 19:24:10 [INFO] PUT /api/users/69 200 74ms
2025-01-15 19:24:24 [INFO] PUT /api/users/160 200 84ms
2025-01-15 19:24:26 [INFO] PUT /api/settings 200 23ms
2025-01-15 19:24:39 [INFO] POST /api/roles 201 65ms
2025-01-15 19:24:46 [INFO] GET /api/notifications 200 21ms
2025-01-15 19:24:59 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 19:25:08 [INFO] GET /api/users/151 404 16ms
2025-01-15 19:25:21 [WARN] Rate limit approaching for IP 192.168.1.188 (81/100 requests in window)
2025-01-15 19:25:35 [INFO] GET /api/roles 200 7ms
2025-01-15 19:25:37 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 19:25:37 [DEBUG] Rows returned: 36
2025-01-15 19:25:45 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 19:25:58 [INFO] GET /api/health 200 3ms
2025-01-15 19:26:10 [WARN] Rate limit exceeded for IP 192.168.6.40. Returning 429.
2025-01-15 19:26:15 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 19:26:15 [DEBUG] Rows returned: 12
2025-01-15 19:26:19 [INFO] GET /api/users?page=1&limit=25 200 29ms
2025-01-15 19:26:25 [INFO] PUT /api/users/16 200 40ms
2025-01-15 19:26:33 [INFO] GET /api/users/172 200 18ms
2025-01-15 19:26:39 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 19:26:50 [INFO] GET /api/health 200 2ms
2025-01-15 19:26:58 [INFO] POST /api/auth/login 401 88ms
2025-01-15 19:27:00 [INFO] GET /api/health 200 3ms
2025-01-15 19:27:03 [INFO] GET /api/users/37 404 17ms
2025-01-15 19:27:08 [INFO] GET /api/users 200 64ms
2025-01-15 19:27:23 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 19:27:23 [DEBUG] Rows returned: 1
2025-01-15 19:27:30 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 19:27:31 [INFO] GET /api/notifications 200 31ms
2025-01-15 19:27:36 [INFO] GET /api/users/104 404 16ms
2025-01-15 19:27:51 [INFO] GET /api/users/163 200 17ms
2025-01-15 19:27:54 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 19:27:54 [DEBUG] Rows returned: 39
2025-01-15 19:28:04 [INFO] GET /api/health 200 1ms
2025-01-15 19:28:05 [INFO] GET /api/roles 200 5ms
2025-01-15 19:28:11 [INFO] POST /api/users 201 96ms
2025-01-15 19:28:24 [INFO] POST /api/auth/refresh 200 39ms
2025-01-15 19:28:25 [INFO] POST /api/auth/refresh 200 61ms
2025-01-15 19:28:37 [INFO] PUT /api/users/143 200 49ms
2025-01-15 19:28:47 [INFO] POST /api/roles 201 51ms
2025-01-15 19:28:58 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 19:28:59 [INFO] GET /api/health 200 1ms
2025-01-15 19:29:04 [INFO] POST /api/users 409 23ms
2025-01-15 19:29:17 [INFO] POST /api/roles 201 55ms
2025-01-15 19:29:29 [ERROR] Database connection timeout after 5000ms
2025-01-15 19:29:38 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 19:29:42 [INFO] POST /api/auth/login 200 134ms
2025-01-15 19:29:46 [INFO] GET /api/analytics/dashboard 200 555ms
2025-01-15 19:29:53 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 19:30:03 [INFO] GET /api/health 200 1ms
2025-01-15 19:30:07 [INFO] GET /api/users 200 78ms
2025-01-15 19:30:17 [INFO] GET /api/users/26 200 17ms
2025-01-15 19:30:18 [WARN] JWT token expires in less than 60 seconds for user 55
2025-01-15 19:30:27 [INFO] GET /api/users?role=viewer 200 33ms
2025-01-15 19:30:40 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 19:30:45 [INFO] GET /api/settings 200 12ms
2025-01-15 19:30:58 [INFO] GET /api/users 200 53ms
2025-01-15 19:31:01 [INFO] GET /api/settings 200 12ms
2025-01-15 19:31:05 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 19:31:11 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 19:31:11 [DEBUG] New record created: id=386
2025-01-15 19:31:23 [INFO] GET /api/health 200 3ms
2025-01-15 19:31:30 [INFO] GET /api/health 200 3ms
2025-01-15 19:31:42 [INFO] GET /api/health 200 2ms
2025-01-15 19:31:49 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 19:31:49 [DEBUG] New record created: id=353
2025-01-15 19:32:04 [INFO] POST /api/uploads 201 1576ms
2025-01-15 19:32:19 [INFO] POST /api/uploads 201 947ms
2025-01-15 19:32:22 [INFO] PUT /api/users/11 200 72ms
2025-01-15 19:32:28 [INFO] POST /api/roles 201 56ms
2025-01-15 19:32:39 [INFO] GET /api/health 200 2ms
2025-01-15 19:32:52 [INFO] GET /api/analytics/dashboard 200 533ms
2025-01-15 19:33:06 [INFO] GET /api/users?role=admin 200 26ms
2025-01-15 19:33:17 [INFO] GET /api/analytics/dashboard 200 362ms
2025-01-15 19:33:32 [INFO] PUT /api/settings 200 49ms
2025-01-15 19:33:37 [INFO] GET /api/users/181 200 17ms
2025-01-15 19:33:48 [INFO] GET /api/health 200 1ms
2025-01-15 19:33:55 [INFO] GET /api/users/192 404 17ms
2025-01-15 19:34:03 [INFO] GET /api/users?role=viewer 200 28ms
2025-01-15 19:34:09 [INFO] GET /api/health 200 1ms
2025-01-15 19:34:22 [INFO] POST /api/auth/login 401 101ms
2025-01-15 19:34:30 [INFO] POST /api/auth/login 401 76ms
2025-01-15 19:34:36 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 19:34:36 [DEBUG] New record created: id=81
2025-01-15 19:34:50 [INFO] PUT /api/users/10 200 76ms
2025-01-15 19:34:58 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 19:34:58 [DEBUG] New record created: id=138
2025-01-15 19:35:13 [INFO] POST /api/users 201 107ms
2025-01-15 19:35:18 [INFO] GET /api/health 200 3ms
2025-01-15 19:35:21 [INFO] POST /api/auth/login 401 116ms
2025-01-15 19:35:34 [INFO] GET /api/users 200 25ms
2025-01-15 19:35:47 [INFO] POST /api/roles 201 51ms
2025-01-15 19:36:01 [INFO] DELETE /api/users/96 204 43ms
2025-01-15 19:36:09 [INFO] GET /api/users?page=3&limit=25 200 51ms
2025-01-15 19:36:24 [INFO] DELETE /api/users/150 204 21ms
2025-01-15 19:36:34 [INFO] GET /api/health 200 2ms
2025-01-15 19:36:48 [INFO] POST /api/auth/login 200 134ms
2025-01-15 19:36:49 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 19:36:49 [DEBUG] Rows returned: 13
2025-01-15 19:36:56 [WARN] Memory usage at 79% of allocated heap
2025-01-15 19:37:04 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 19:37:04 [DEBUG] Rows returned: 9
2025-01-15 19:37:17 [INFO] GET /api/users 200 45ms
2025-01-15 19:37:29 [INFO] GET /api/health 200 3ms
2025-01-15 19:37:43 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 19:37:43 [DEBUG] New record created: id=175
2025-01-15 19:37:57 [INFO] GET /api/analytics/dashboard 200 762ms
2025-01-15 19:38:00 [INFO] POST /api/users 409 18ms
2025-01-15 19:38:04 [WARN] Deprecated API version v1 called by client client-1
2025-01-15 19:38:14 [INFO] GET /api/health 200 1ms
2025-01-15 19:38:28 [INFO] GET /api/users?role=admin 200 31ms
2025-01-15 19:38:30 [INFO] GET /api/users?page=2&limit=25 200 42ms
2025-01-15 19:38:35 [INFO] POST /api/roles 201 43ms
2025-01-15 19:38:46 [INFO] GET /api/roles 200 15ms
2025-01-15 19:38:59 [INFO] GET /api/users?role=moderator 200 29ms
2025-01-15 19:39:07 [INFO] POST /api/auth/login 200 109ms
2025-01-15 19:39:15 [INFO] GET /api/users?role=viewer 200 35ms
2025-01-15 19:39:29 [INFO] POST /api/auth/login 401 63ms
2025-01-15 19:39:35 [INFO] GET /api/health 200 3ms
2025-01-15 19:39:38 [WARN] Slow query detected: DELETE FROM sessions WHERE expires_at < NOW() (took 844ms)
2025-01-15 19:39:52 [INFO] PUT /api/users/93 200 47ms
2025-01-15 19:39:53 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 19:39:53 [DEBUG] Rows returned: 7
2025-01-15 19:39:59 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 19:39:59 [DEBUG] Rows returned: 29
2025-01-15 19:40:13 [INFO] POST /api/roles 201 34ms
2025-01-15 19:40:27 [INFO] GET /api/health 200 2ms
2025-01-15 19:40:39 [INFO] POST /api/users 201 139ms
2025-01-15 19:40:48 [INFO] GET /api/roles 200 9ms
2025-01-15 19:40:59 [WARN] JWT token expires in less than 60 seconds for user 55
2025-01-15 19:41:09 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 19:41:09 [DEBUG] New record created: id=171
2025-01-15 19:41:23 [INFO] GET /api/users?page=5&limit=25 200 26ms
2025-01-15 19:41:37 [INFO] GET /api/health 200 3ms
2025-01-15 19:41:47 [INFO] GET /api/health 200 2ms
2025-01-15 19:41:55 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 19:42:09 [INFO] GET /api/notifications 200 11ms
2025-01-15 19:42:12 [INFO] GET /api/health 200 3ms
2025-01-15 19:42:25 [WARN] Rate limit approaching for IP 192.168.3.62 (86/100 requests in window)
2025-01-15 19:42:30 [INFO] GET /api/users/65 404 15ms
2025-01-15 19:42:41 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 19:42:53 [ERROR] Database connection timeout after 5000ms
2025-01-15 19:42:59 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 19:43:05 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 19:43:17 [INFO] GET /api/health 200 1ms
2025-01-15 19:43:19 [INFO] PUT /api/users/156 200 41ms
2025-01-15 19:43:21 [INFO] PUT /api/settings 200 26ms
2025-01-15 19:43:29 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 19:43:29 [DEBUG] Rows returned: 29
2025-01-15 19:43:39 [INFO] GET /api/health 200 2ms
2025-01-15 19:43:49 [INFO] POST /api/uploads 201 1140ms
2025-01-15 19:43:55 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 19:43:55 [DEBUG] Rows returned: 45
2025-01-15 19:43:58 [INFO] GET /api/users?page=5&limit=25 200 52ms
2025-01-15 19:44:06 [INFO] DELETE /api/users/91 204 35ms
2025-01-15 19:44:10 [INFO] GET /api/users?page=1&limit=25 200 56ms
2025-01-15 19:44:11 [INFO] POST /api/users 201 90ms
2025-01-15 19:44:15 [INFO] GET /api/users?page=5&limit=25 200 25ms
2025-01-15 19:44:17 [INFO] GET /api/users 200 35ms
2025-01-15 19:44:25 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 19:44:29 [INFO] DELETE /api/users/81 204 33ms
2025-01-15 19:44:37 [INFO] GET /api/health 200 1ms
2025-01-15 19:44:49 [INFO] GET /api/health 200 2ms
2025-01-15 19:45:00 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 19:45:00 [DEBUG] Rows returned: 49
2025-01-15 19:45:11 [INFO] GET /api/users?page=4&limit=25 200 26ms
2025-01-15 19:45:20 [INFO] GET /api/users?role=moderator 200 38ms
2025-01-15 19:45:28 [INFO] GET /api/health 200 2ms
2025-01-15 19:45:40 [INFO] GET /api/health 200 1ms
2025-01-15 19:45:43 [INFO] GET /api/health 200 3ms
2025-01-15 19:45:50 [INFO] GET /api/settings 200 7ms
2025-01-15 19:45:54 [INFO] GET /api/health 200 1ms
2025-01-15 19:45:56 [INFO] POST /api/users 409 12ms
2025-01-15 19:46:11 [INFO] GET /api/analytics/dashboard 200 513ms
2025-01-15 19:46:18 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 19:46:33 [INFO] PUT /api/users/47 200 57ms
2025-01-15 19:46:38 [WARN] Rate limit approaching for IP 192.168.9.171 (90/100 requests in window)
2025-01-15 19:46:42 [INFO] GET /api/health 200 1ms
2025-01-15 19:46:46 [INFO] POST /api/uploads 201 1979ms
2025-01-15 19:46:53 [INFO] GET /api/users/138 404 9ms
2025-01-15 19:46:58 [INFO] POST /api/users 201 113ms
2025-01-15 19:47:09 [INFO] PUT /api/users/63 200 43ms
2025-01-15 19:47:24 [INFO] POST /api/users 409 16ms
2025-01-15 19:47:39 [INFO] PUT /api/users/1 200 58ms
2025-01-15 19:47:47 [WARN] Slow query detected: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY creat (took 1473ms)
2025-01-15 19:47:51 [INFO] GET /api/health 200 2ms
2025-01-15 19:47:54 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 19:47:54 [DEBUG] Rows returned: 0
2025-01-15 19:48:02 [INFO] GET /api/analytics/dashboard 200 389ms
2025-01-15 19:48:04 [INFO] GET /api/users 200 28ms
2025-01-15 19:48:15 [INFO] GET /api/notifications 200 17ms
2025-01-15 19:48:30 [INFO] GET /api/health 200 1ms
2025-01-15 19:48:37 [INFO] GET /api/health 200 3ms
2025-01-15 19:48:43 [INFO] GET /api/health 200 2ms
2025-01-15 19:48:53 [INFO] POST /api/roles 201 32ms
2025-01-15 19:48:59 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 19:48:59 [DEBUG] Rows returned: 48
2025-01-15 19:49:03 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 19:49:03 [DEBUG] Rows returned: 24
2025-01-15 19:49:16 [WARN] S3 upload retry after timeout (1456ms)
2025-01-15 19:49:30 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 19:49:30 [DEBUG] Rows returned: 45
2025-01-15 19:49:40 [INFO] GET /api/users 200 60ms
2025-01-15 19:49:50 [INFO] POST /api/auth/login 200 200ms
2025-01-15 19:49:58 [WARN] JWT token expires in less than 60 seconds for user 164
2025-01-15 19:50:13 [INFO] POST /api/users 201 131ms
2025-01-15 19:50:26 [INFO] POST /api/users 409 10ms
2025-01-15 19:50:35 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 19:50:35 [DEBUG] Rows returned: 23
2025-01-15 19:50:48 [INFO] GET /api/health 200 2ms
2025-01-15 19:50:57 [INFO] GET /api/notifications 200 30ms
2025-01-15 19:50:59 [INFO] GET /api/users?page=3&limit=25 200 30ms
2025-01-15 19:51:07 [INFO] GET /api/roles 200 6ms
2025-01-15 19:51:08 [INFO] GET /api/health 200 3ms
2025-01-15 19:51:10 [INFO] GET /api/users/39 200 7ms
2025-01-15 19:51:20 [INFO] GET /api/notifications 200 28ms
2025-01-15 19:51:21 [WARN] Deprecated API version v1 called by client client-16
2025-01-15 19:51:22 [INFO] GET /api/notifications 200 19ms
2025-01-15 19:51:24 [INFO] POST /api/auth/login 200 200ms
2025-01-15 19:51:29 [INFO] DELETE /api/users/195 204 27ms
2025-01-15 19:51:37 [INFO] GET /api/roles 200 12ms
2025-01-15 19:51:45 [INFO] GET /api/health 200 2ms
2025-01-15 19:51:59 [INFO] POST /api/auth/login 200 183ms
2025-01-15 19:52:10 [INFO] GET /api/health 200 3ms
2025-01-15 19:52:23 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 19:52:23 [DEBUG] Rows returned: 40
2025-01-15 19:52:34 [INFO] GET /api/health 200 1ms
2025-01-15 19:52:45 [INFO] GET /api/health 200 1ms
2025-01-15 19:52:46 [INFO] POST /api/users 409 20ms
2025-01-15 19:53:01 [INFO] GET /api/health 200 2ms
2025-01-15 19:53:16 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 19:53:31 [INFO] GET /api/users 200 71ms
2025-01-15 19:53:44 [INFO] GET /api/users/139 404 14ms
2025-01-15 19:53:45 [INFO] GET /api/health 200 2ms
2025-01-15 19:53:48 [INFO] POST /api/auth/refresh 200 75ms
2025-01-15 19:54:03 [INFO] GET /api/analytics/dashboard 200 310ms
2025-01-15 19:54:04 [INFO] GET /api/settings 200 12ms
2025-01-15 19:54:10 [INFO] GET /api/users?page=4&limit=25 200 34ms
2025-01-15 19:54:19 [INFO] POST /api/auth/refresh 200 73ms
2025-01-15 19:54:29 [INFO] GET /api/notifications 200 34ms
2025-01-15 19:54:33 [INFO] PUT /api/settings 200 53ms
2025-01-15 19:54:47 [INFO] POST /api/auth/login 401 73ms
2025-01-15 19:55:02 [INFO] GET /api/health 200 3ms
2025-01-15 19:55:14 [INFO] GET /api/health 200 1ms
2025-01-15 19:55:18 [INFO] POST /api/auth/login 401 106ms
2025-01-15 19:55:33 [INFO] POST /api/auth/refresh 200 32ms
2025-01-15 19:55:46 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 19:55:56 [INFO] GET /api/health 200 2ms
2025-01-15 19:55:59 [INFO] GET /api/analytics/dashboard 200 271ms
2025-01-15 19:56:10 [INFO] GET /api/health 200 1ms
2025-01-15 19:56:18 [INFO] GET /api/health 200 2ms
2025-01-15 19:56:20 [INFO] PUT /api/settings 200 22ms
2025-01-15 19:56:27 [INFO] POST /api/users 409 17ms
2025-01-15 19:56:31 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 19:56:32 [INFO] GET /api/health 200 1ms
2025-01-15 19:56:42 [INFO] DELETE /api/users/65 204 20ms
2025-01-15 19:56:55 [INFO] GET /api/health 200 3ms
2025-01-15 19:57:10 [INFO] PUT /api/settings 200 41ms
2025-01-15 19:57:18 [INFO] POST /api/auth/login 200 178ms
2025-01-15 19:57:20 [INFO] GET /api/users?role=moderator 200 16ms
2025-01-15 19:57:33 [INFO] GET /api/roles 200 13ms
2025-01-15 19:57:41 [INFO] GET /api/health 200 2ms
2025-01-15 19:57:45 [INFO] GET /api/settings 200 7ms
2025-01-15 19:57:51 [INFO] POST /api/roles 201 45ms
2025-01-15 19:57:59 [INFO] POST /api/roles 201 31ms
2025-01-15 19:58:07 [INFO] POST /api/auth/login 401 100ms
2025-01-15 19:58:08 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 19:58:08 [DEBUG] Rows returned: 14
2025-01-15 19:58:20 [INFO] POST /api/users 201 89ms
2025-01-15 19:58:35 [INFO] GET /api/users/160 200 17ms
2025-01-15 19:58:42 [WARN] S3 upload retry after timeout (1655ms)
2025-01-15 19:58:57 [INFO] GET /api/health 200 2ms
2025-01-15 19:59:01 [INFO] GET /api/health 200 3ms
2025-01-15 19:59:03 [INFO] POST /api/users 409 15ms
2025-01-15 19:59:13 [INFO] GET /api/health 200 2ms
2025-01-15 19:59:28 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 19:59:28 [DEBUG] Rows returned: 19
2025-01-15 19:59:33 [INFO] GET /api/health 200 3ms
2025-01-15 19:59:42 [INFO] GET /api/analytics/dashboard 200 280ms
2025-01-15 19:59:54 [INFO] GET /api/notifications 200 31ms
2025-01-15 19:59:56 [INFO] GET /api/health 200 1ms
2025-01-15 20:00:08 [INFO] GET /api/health 200 2ms
2025-01-15 20:00:13 [INFO] GET /api/roles 200 13ms
2025-01-15 20:00:21 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 20:00:21 [DEBUG] Rows returned: 44
2025-01-15 20:00:23 [INFO] GET /api/roles 200 12ms
2025-01-15 20:00:29 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:00:29 [DEBUG] Rows returned: 49
2025-01-15 20:00:31 [INFO] POST /api/auth/login 200 170ms
2025-01-15 20:00:34 [INFO] GET /api/health 200 1ms
2025-01-15 20:00:48 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:00:48 [DEBUG] Rows returned: 30
2025-01-15 20:00:57 [WARN] Deprecated API version v1 called by client client-1
2025-01-15 20:01:05 [INFO] DELETE /api/users/177 204 37ms
2025-01-15 20:01:17 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 20:01:17 [DEBUG] Rows returned: 3
2025-01-15 20:01:30 [INFO] GET /api/roles 200 7ms
2025-01-15 20:01:34 [INFO] GET /api/analytics/dashboard 200 550ms
2025-01-15 20:01:43 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 20:01:54 [INFO] GET /api/users/94 404 17ms
2025-01-15 20:02:01 [INFO] GET /api/analytics/dashboard 200 332ms
2025-01-15 20:02:07 [INFO] POST /api/users 201 99ms
2025-01-15 20:02:16 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 20:02:16 [DEBUG] Rows returned: 8
2025-01-15 20:02:20 [INFO] POST /api/users 201 114ms
2025-01-15 20:02:30 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 20:02:43 [INFO] GET /api/users?role=editor 200 18ms
2025-01-15 20:02:49 [INFO] GET /api/users?page=1&limit=25 200 52ms
2025-01-15 20:03:03 [INFO] PUT /api/settings 200 38ms
2025-01-15 20:03:13 [INFO] GET /api/health 200 2ms
2025-01-15 20:03:25 [INFO] GET /api/health 200 2ms
2025-01-15 20:03:40 [INFO] POST /api/uploads 201 1343ms
2025-01-15 20:03:43 [INFO] GET /api/users?page=5&limit=25 200 59ms
2025-01-15 20:03:47 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 20:03:47 [DEBUG] New record created: id=203
2025-01-15 20:03:58 [INFO] GET /api/analytics/dashboard 200 644ms
2025-01-15 20:04:10 [INFO] GET /api/health 200 2ms
2025-01-15 20:04:13 [INFO] GET /api/health 200 2ms
2025-01-15 20:04:18 [INFO] POST /api/roles 201 69ms
2025-01-15 20:04:33 [INFO] GET /api/analytics/dashboard 200 687ms
2025-01-15 20:04:35 [INFO] POST /api/auth/login 200 232ms
2025-01-15 20:04:49 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:04:49 [DEBUG] Rows returned: 10
2025-01-15 20:04:59 [WARN] Slow query detected: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $ (took 853ms)
2025-01-15 20:05:07 [INFO] POST /api/auth/login 401 86ms
2025-01-15 20:05:08 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 20:05:08 [DEBUG] Rows returned: 44
2025-01-15 20:05:14 [INFO] GET /api/analytics/dashboard 200 371ms
2025-01-15 20:05:21 [INFO] POST /api/users 201 99ms
2025-01-15 20:05:36 [INFO] POST /api/auth/login 401 60ms
2025-01-15 20:05:48 [WARN] Slow query detected: SELECT * FROM users WHERE id = $1 (took 1690ms)
2025-01-15 20:05:56 [INFO] POST /api/users 409 18ms
2025-01-15 20:06:04 [WARN] Deprecated API version v1 called by client client-3
2025-01-15 20:06:07 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 20:06:17 [INFO] DELETE /api/users/195 204 33ms
2025-01-15 20:06:28 [INFO] GET /api/analytics/dashboard 200 455ms
2025-01-15 20:06:42 [INFO] POST /api/users 409 19ms
2025-01-15 20:06:50 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 20:06:57 [INFO] GET /api/users 200 63ms
2025-01-15 20:07:07 [INFO] GET /api/users 200 44ms
2025-01-15 20:07:21 [INFO] GET /api/users/166 200 9ms
2025-01-15 20:07:29 [INFO] DELETE /api/users/189 204 28ms
2025-01-15 20:07:40 [WARN] Memory usage at 94% of allocated heap
2025-01-15 20:07:52 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 20:07:52 [DEBUG] Rows returned: 27
2025-01-15 20:08:00 [WARN] Memory usage at 82% of allocated heap
2025-01-15 20:08:01 [INFO] PUT /api/users/190 200 51ms
2025-01-15 20:08:10 [INFO] DELETE /api/users/86 204 27ms
2025-01-15 20:08:24 [INFO] GET /api/health 200 3ms
2025-01-15 20:08:26 [INFO] GET /api/health 200 1ms
2025-01-15 20:08:27 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 20:08:32 [INFO] POST /api/users 409 18ms
2025-01-15 20:08:33 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 20:08:33 [DEBUG] New record created: id=241
2025-01-15 20:08:37 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 20:08:37 [DEBUG] Rows returned: 10
2025-01-15 20:08:38 [INFO] GET /api/users?page=1&limit=25 200 50ms
2025-01-15 20:08:39 [INFO] POST /api/users 201 142ms
2025-01-15 20:08:51 [INFO] GET /api/users?page=1&limit=25 200 42ms
2025-01-15 20:09:02 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 20:09:09 [INFO] GET /api/users/152 200 16ms
2025-01-15 20:09:23 [INFO] GET /api/users?role=admin 200 39ms
2025-01-15 20:09:32 [INFO] GET /api/users/64 200 16ms
2025-01-15 20:09:44 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 20:09:44 [DEBUG] Rows returned: 44
2025-01-15 20:09:49 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 20:10:04 [INFO] GET /api/health 200 1ms
2025-01-15 20:10:14 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 20:10:14 [DEBUG] Rows returned: 7
2025-01-15 20:10:20 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 20:10:20 [DEBUG] Rows returned: 22
2025-01-15 20:10:28 [WARN] Request body exceeded soft limit (2774KB)
2025-01-15 20:10:32 [INFO] POST /api/auth/login 401 59ms
2025-01-15 20:10:43 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 20:10:43 [DEBUG] New record created: id=386
2025-01-15 20:10:49 [INFO] GET /api/health 200 3ms
2025-01-15 20:10:56 [INFO] POST /api/users 201 135ms
2025-01-15 20:10:58 [INFO] POST /api/roles 201 68ms
2025-01-15 20:11:07 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 20:11:07 [DEBUG] New record created: id=464
2025-01-15 20:11:13 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 20:11:13 [DEBUG] Rows returned: 38
2025-01-15 20:11:21 [INFO] GET /api/users/79 200 18ms
2025-01-15 20:11:22 [WARN] Redis reconnection attempt 83/5
2025-01-15 20:11:35 [INFO] GET /api/users/13 404 10ms
2025-01-15 20:11:43 [INFO] GET /api/health 200 3ms
2025-01-15 20:11:52 [INFO] POST /api/uploads 201 1075ms
2025-01-15 20:12:05 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 20:12:14 [INFO] GET /api/notifications 200 26ms
2025-01-15 20:12:28 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 20:12:28 [DEBUG] Rows returned: 38
2025-01-15 20:12:29 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 20:12:38 [INFO] GET /api/health 200 2ms
2025-01-15 20:12:46 [INFO] GET /api/users 200 70ms
2025-01-15 20:12:54 [INFO] GET /api/health 200 2ms
2025-01-15 20:12:57 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 20:12:57 [DEBUG] Rows returned: 13
2025-01-15 20:13:03 [INFO] GET /api/health 200 3ms
2025-01-15 20:13:07 [INFO] POST /api/auth/login 200 249ms
2025-01-15 20:13:18 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 20:13:27 [INFO] POST /api/auth/refresh 200 60ms
2025-01-15 20:13:32 [INFO] POST /api/auth/login 401 97ms
2025-01-15 20:13:34 [INFO] GET /api/health 200 2ms
2025-01-15 20:13:47 [INFO] GET /api/users/22 404 13ms
2025-01-15 20:13:54 [INFO] PUT /api/settings 200 39ms
2025-01-15 20:13:58 [WARN] Rate limit approaching for IP 192.168.8.54 (98/100 requests in window)
2025-01-15 20:14:04 [INFO] GET /api/users?page=2&limit=25 200 40ms
2025-01-15 20:14:17 [INFO] GET /api/analytics/dashboard 200 404ms
2025-01-15 20:14:19 [INFO] POST /api/uploads 201 829ms
2025-01-15 20:14:33 [INFO] GET /api/users?page=2&limit=25 200 25ms
2025-01-15 20:14:47 [INFO] GET /api/roles 200 10ms
2025-01-15 20:15:01 [INFO] GET /api/users?role=admin 200 24ms
2025-01-15 20:15:11 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 20:15:26 [INFO] PUT /api/users/146 200 80ms
2025-01-15 20:15:34 [INFO] GET /api/notifications 200 22ms
2025-01-15 20:15:36 [INFO] GET /api/health 200 3ms
2025-01-15 20:15:40 [INFO] GET /api/health 200 1ms
2025-01-15 20:15:41 [INFO] GET /api/users/75 200 10ms
2025-01-15 20:15:51 [INFO] DELETE /api/users/5 204 23ms
2025-01-15 20:15:59 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 20:16:12 [INFO] GET /api/notifications 200 21ms
2025-01-15 20:16:14 [INFO] POST /api/auth/login 200 139ms
2025-01-15 20:16:22 [INFO] GET /api/health 200 3ms
2025-01-15 20:16:29 [INFO] POST /api/users 409 14ms
2025-01-15 20:16:33 [INFO] GET /api/health 200 2ms
2025-01-15 20:16:34 [INFO] POST /api/auth/refresh 200 53ms
2025-01-15 20:16:36 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 20:16:36 [DEBUG] New record created: id=338
2025-01-15 20:16:48 [INFO] GET /api/roles 200 5ms
2025-01-15 20:16:54 [INFO] POST /api/auth/login 200 129ms
2025-01-15 20:17:08 [INFO] GET /api/settings 200 9ms
2025-01-15 20:17:21 [INFO] PUT /api/settings 200 46ms
2025-01-15 20:17:23 [INFO] GET /api/analytics/dashboard 200 488ms
2025-01-15 20:17:28 [INFO] GET /api/health 200 3ms
2025-01-15 20:17:37 [INFO] POST /api/uploads 201 1983ms
2025-01-15 20:17:39 [INFO] POST /api/auth/refresh 200 49ms
2025-01-15 20:17:45 [INFO] GET /api/users/29 200 17ms
2025-01-15 20:17:56 [INFO] GET /api/settings 200 8ms
2025-01-15 20:18:07 [INFO] GET /api/health 200 2ms
2025-01-15 20:18:15 [WARN] Rate limit approaching for IP 192.168.2.213 (83/100 requests in window)
2025-01-15 20:18:21 [INFO] GET /api/health 200 2ms
2025-01-15 20:18:32 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 20:18:32 [DEBUG] New record created: id=205
2025-01-15 20:18:44 [INFO] POST /api/uploads 201 629ms
2025-01-15 20:18:45 [INFO] GET /api/users/72 200 7ms
2025-01-15 20:18:54 [INFO] POST /api/uploads 201 519ms
2025-01-15 20:19:00 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 20:19:01 [INFO] POST /api/auth/login 401 99ms
2025-01-15 20:19:09 [INFO] GET /api/notifications 200 10ms
2025-01-15 20:19:13 [INFO] GET /api/users?page=3&limit=25 200 45ms
2025-01-15 20:19:21 [INFO] POST /api/users 201 114ms
2025-01-15 20:19:34 [INFO] GET /api/roles 200 12ms
2025-01-15 20:19:39 [INFO] GET /api/settings 200 8ms
2025-01-15 20:19:43 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 20:19:43 [DEBUG] Rows returned: 14
2025-01-15 20:19:50 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 20:19:55 [INFO] POST /api/auth/login 200 198ms
2025-01-15 20:19:56 [INFO] POST /api/auth/login 401 79ms
2025-01-15 20:19:58 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 20:19:58 [DEBUG] New record created: id=73
2025-01-15 20:20:04 [INFO] POST /api/auth/login 200 120ms
2025-01-15 20:20:05 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 20:20:08 [INFO] POST /api/auth/login 200 105ms
2025-01-15 20:20:09 [INFO] POST /api/roles 201 68ms
2025-01-15 20:20:14 [INFO] GET /api/health 200 2ms
2025-01-15 20:20:27 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 20:20:41 [INFO] GET /api/roles 200 6ms
2025-01-15 20:20:49 [INFO] DELETE /api/users/104 204 21ms
2025-01-15 20:21:04 [INFO] GET /api/health 200 2ms
2025-01-15 20:21:05 [INFO] GET /api/health 200 2ms
2025-01-15 20:21:13 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 20:21:21 [INFO] GET /api/users/19 404 17ms
2025-01-15 20:21:33 [INFO] GET /api/health 200 1ms
2025-01-15 20:21:34 [INFO] GET /api/health 200 2ms
2025-01-15 20:21:39 [INFO] GET /api/users?page=4&limit=25 200 42ms
2025-01-15 20:21:43 [INFO] GET /api/notifications 200 21ms
2025-01-15 20:21:46 [INFO] GET /api/users/123 404 11ms
2025-01-15 20:21:52 [INFO] GET /api/health 200 3ms
2025-01-15 20:22:04 [INFO] GET /api/health 200 3ms
2025-01-15 20:22:07 [INFO] POST /api/auth/login 200 128ms
2025-01-15 20:22:19 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 20:22:19 [DEBUG] Rows returned: 29
2025-01-15 20:22:23 [INFO] POST /api/auth/refresh 200 74ms
2025-01-15 20:22:38 [INFO] GET /api/notifications 200 35ms
2025-01-15 20:22:50 [INFO] GET /api/health 200 2ms
2025-01-15 20:23:04 [INFO] GET /api/users?role=editor 200 19ms
2025-01-15 20:23:18 [INFO] POST /api/auth/login 200 166ms
2025-01-15 20:23:30 [INFO] DELETE /api/users/71 204 48ms
2025-01-15 20:23:43 [INFO] PUT /api/settings 200 47ms
2025-01-15 20:23:44 [INFO] POST /api/uploads 201 968ms
2025-01-15 20:23:58 [INFO] PUT /api/settings 200 44ms
2025-01-15 20:24:01 [INFO] POST /api/auth/login 200 167ms
2025-01-15 20:24:08 [INFO] PUT /api/users/152 200 46ms
2025-01-15 20:24:13 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 20:24:13 [DEBUG] Rows returned: 41
2025-01-15 20:24:19 [INFO] GET /api/health 200 3ms
2025-01-15 20:24:22 [INFO] GET /api/users/186 404 17ms
2025-01-15 20:24:25 [INFO] POST /api/users 201 83ms
2025-01-15 20:24:35 [WARN] Request body exceeded soft limit (1181KB)
2025-01-15 20:24:42 [INFO] GET /api/users/150 200 13ms
2025-01-15 20:24:55 [INFO] PUT /api/settings 200 25ms
2025-01-15 20:25:09 [INFO] GET /api/users 200 58ms
2025-01-15 20:25:23 [INFO] POST /api/auth/login 200 203ms
2025-01-15 20:25:31 [INFO] PUT /api/users/19 200 82ms
2025-01-15 20:25:36 [INFO] GET /api/analytics/dashboard 200 622ms
2025-01-15 20:25:50 [WARN] Deprecated API version v1 called by client client-5
2025-01-15 20:25:59 [INFO] POST /api/users 201 90ms
2025-01-15 20:26:08 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 20:26:08 [DEBUG] Rows returned: 18
2025-01-15 20:26:10 [INFO] GET /api/users/164 200 9ms
2025-01-15 20:26:14 [INFO] GET /api/users/177 404 11ms
2025-01-15 20:26:21 [INFO] GET /api/users?role=admin 200 29ms
2025-01-15 20:26:28 [INFO] DELETE /api/users/38 204 41ms
2025-01-15 20:26:30 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 20:26:30 [DEBUG] Rows returned: 14
2025-01-15 20:26:41 [INFO] GET /api/users?role=editor 200 40ms
2025-01-15 20:26:49 [WARN] Rate limit exceeded for IP 192.168.4.119. Returning 429.
2025-01-15 20:27:04 [INFO] POST /api/users 409 18ms
2025-01-15 20:27:09 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 20:27:22 [WARN] Request body exceeded soft limit (1109KB)
2025-01-15 20:27:35 [ERROR] Unhandled exception in DELETE /api/users/12: AuthenticationError
2025-01-15 20:27:35 [ERROR] Stack trace:
    at validateRequest (src/middleware/validation.ts:255)
    at Layer.handle (node_modules/express/lib/router/layer.js:53)
    at Router.handle (node_modules/express/lib/router/index.js:180)
2025-01-15 20:27:41 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 20:27:52 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 20:27:52 [DEBUG] Rows returned: 3
2025-01-15 20:28:05 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 20:28:05 [DEBUG] Rows returned: 44
2025-01-15 20:28:20 [INFO] GET /api/analytics/dashboard 200 253ms
2025-01-15 20:28:23 [WARN] S3 upload retry after timeout (1709ms)
2025-01-15 20:28:25 [INFO] POST /api/auth/login 200 137ms
2025-01-15 20:28:29 [INFO] POST /api/roles 201 69ms
2025-01-15 20:28:35 [INFO] PUT /api/settings 200 34ms
2025-01-15 20:28:47 [INFO] GET /api/settings 200 10ms
2025-01-15 20:29:00 [INFO] GET /api/settings 200 12ms
2025-01-15 20:29:05 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 20:29:05 [DEBUG] Rows returned: 4
2025-01-15 20:29:13 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 20:29:13 [DEBUG] Rows returned: 29
2025-01-15 20:29:14 [INFO] GET /api/notifications 200 22ms
2025-01-15 20:29:25 [INFO] POST /api/auth/login 401 96ms
2025-01-15 20:29:34 [INFO] POST /api/users 409 10ms
2025-01-15 20:29:43 [INFO] POST /api/auth/login 200 137ms
2025-01-15 20:29:53 [WARN] Memory usage at 82% of allocated heap
2025-01-15 20:30:08 [INFO] GET /api/notifications 200 15ms
2025-01-15 20:30:19 [INFO] POST /api/auth/login 401 94ms
2025-01-15 20:30:22 [INFO] GET /api/analytics/dashboard 200 659ms
2025-01-15 20:30:36 [INFO] POST /api/roles 201 34ms
2025-01-15 20:30:43 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 20:30:43 [DEBUG] New record created: id=300
2025-01-15 20:30:53 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 20:31:04 [INFO] GET /api/users/41 200 15ms
2025-01-15 20:31:06 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:31:06 [DEBUG] Rows returned: 1
2025-01-15 20:31:12 [INFO] GET /api/health 200 1ms
2025-01-15 20:31:21 [INFO] POST /api/roles 201 38ms
2025-01-15 20:31:28 [INFO] GET /api/health 200 1ms
2025-01-15 20:31:40 [INFO] PUT /api/users/108 200 48ms
2025-01-15 20:31:43 [INFO] GET /api/users 200 70ms
2025-01-15 20:31:58 [INFO] GET /api/roles 200 8ms
2025-01-15 20:32:06 [INFO] PUT /api/users/148 200 89ms
2025-01-15 20:32:16 [INFO] POST /api/uploads 201 1952ms
2025-01-15 20:32:23 [INFO] POST /api/auth/login 401 110ms
2025-01-15 20:32:35 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:32:35 [DEBUG] Rows returned: 15
2025-01-15 20:32:39 [INFO] GET /api/health 200 2ms
2025-01-15 20:32:45 [INFO] GET /api/roles 200 6ms
2025-01-15 20:32:52 [INFO] GET /api/settings 200 9ms
2025-01-15 20:32:57 [INFO] GET /api/health 200 2ms
2025-01-15 20:33:06 [INFO] GET /api/users?role=admin 200 28ms
2025-01-15 20:33:11 [INFO] POST /api/auth/login 401 50ms
2025-01-15 20:33:21 [INFO] GET /api/users/31 404 13ms
2025-01-15 20:33:35 [INFO] PUT /api/settings 200 32ms
2025-01-15 20:33:37 [INFO] POST /api/users 409 15ms
2025-01-15 20:33:49 [INFO] POST /api/users 409 16ms
2025-01-15 20:33:57 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 20:33:57 [DEBUG] Rows returned: 19
2025-01-15 20:34:01 [INFO] GET /api/roles 200 12ms
2025-01-15 20:34:08 [INFO] GET /api/users?role=editor 200 26ms
2025-01-15 20:34:09 [INFO] GET /api/health 200 1ms
2025-01-15 20:34:11 [WARN] Rate limit exceeded for IP 192.168.9.176. Returning 429.
2025-01-15 20:34:20 [INFO] POST /api/users 409 12ms
2025-01-15 20:34:28 [INFO] GET /api/settings 200 9ms
2025-01-15 20:34:43 [WARN] Redis reconnection attempt 83/5
2025-01-15 20:34:57 [WARN] Rate limit exceeded for IP 192.168.6.246. Returning 429.
2025-01-15 20:35:03 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 20:35:03 [DEBUG] Rows returned: 36
2025-01-15 20:35:10 [INFO] POST /api/auth/refresh 200 73ms
2025-01-15 20:35:14 [INFO] GET /api/health 200 3ms
2025-01-15 20:35:27 [INFO] GET /api/health 200 2ms
2025-01-15 20:35:34 [ERROR] Database connection timeout after 5000ms
2025-01-15 20:35:41 [INFO] GET /api/settings 200 6ms
2025-01-15 20:35:56 [INFO] POST /api/users 409 16ms
2025-01-15 20:36:03 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 20:36:16 [INFO] GET /api/health 200 2ms
2025-01-15 20:36:23 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 20:36:23 [DEBUG] Rows returned: 8
2025-01-15 20:36:34 [INFO] GET /api/settings 200 12ms
2025-01-15 20:36:39 [INFO] GET /api/users/190 404 17ms
2025-01-15 20:36:49 [INFO] GET /api/health 200 2ms
2025-01-15 20:36:59 [INFO] GET /api/health 200 3ms
2025-01-15 20:37:02 [INFO] GET /api/users?role=moderator 200 40ms
2025-01-15 20:37:16 [INFO] GET /api/health 200 1ms
2025-01-15 20:37:25 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 20:37:25 [DEBUG] Rows returned: 34
2025-01-15 20:37:40 [INFO] GET /api/users?page=5&limit=25 200 57ms
2025-01-15 20:37:47 [INFO] GET /api/users/140 404 17ms
2025-01-15 20:37:55 [INFO] DELETE /api/users/14 204 35ms
2025-01-15 20:37:59 [INFO] POST /api/roles 201 50ms
2025-01-15 20:38:07 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 20:38:07 [DEBUG] Rows returned: 42
2025-01-15 20:38:12 [INFO] GET /api/health 200 2ms
2025-01-15 20:38:17 [INFO] GET /api/users 200 78ms
2025-01-15 20:38:20 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 20:38:20 [DEBUG] New record created: id=247
2025-01-15 20:38:31 [INFO] GET /api/health 200 2ms
2025-01-15 20:38:36 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 20:38:49 [INFO] GET /api/users?page=4&limit=25 200 26ms
2025-01-15 20:39:04 [INFO] GET /api/health 200 2ms
2025-01-15 20:39:08 [INFO] GET /api/notifications 200 33ms
2025-01-15 20:39:09 [INFO] PUT /api/settings 200 52ms
2025-01-15 20:39:23 [INFO] GET /api/notifications 200 20ms
2025-01-15 20:39:30 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 20:39:30 [DEBUG] New record created: id=86
2025-01-15 20:39:37 [INFO] POST /api/roles 201 61ms
2025-01-15 20:39:51 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 20:40:02 [INFO] GET /api/health 200 2ms
2025-01-15 20:40:13 [INFO] GET /api/health 200 3ms
2025-01-15 20:40:16 [INFO] PUT /api/users/184 200 40ms
2025-01-15 20:40:20 [WARN] Request body exceeded soft limit (854KB)
2025-01-15 20:40:23 [INFO] POST /api/users 201 105ms
2025-01-15 20:40:26 [INFO] GET /api/users?role=viewer 200 24ms
2025-01-15 20:40:36 [INFO] GET /api/roles 200 7ms
2025-01-15 20:40:39 [INFO] GET /api/analytics/dashboard 200 634ms
2025-01-15 20:40:52 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:40:52 [DEBUG] Rows returned: 37
2025-01-15 20:40:56 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 20:40:56 [DEBUG] Rows returned: 23
2025-01-15 20:41:02 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:41:02 [DEBUG] Rows returned: 9
2025-01-15 20:41:03 [INFO] GET /api/users/121 404 11ms
2025-01-15 20:41:10 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 20:41:23 [INFO] POST /api/uploads 201 690ms
2025-01-15 20:41:34 [INFO] GET /api/health 200 2ms
2025-01-15 20:41:46 [INFO] POST /api/users 201 110ms
2025-01-15 20:41:57 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:41:57 [DEBUG] Rows returned: 23
2025-01-15 20:42:04 [INFO] POST /api/auth/login 401 50ms
2025-01-15 20:42:19 [INFO] GET /api/users?page=5&limit=25 200 46ms
2025-01-15 20:42:20 [INFO] POST /api/auth/login 401 50ms
2025-01-15 20:42:28 [INFO] POST /api/uploads 201 975ms
2025-01-15 20:42:39 [INFO] POST /api/auth/login 401 102ms
2025-01-15 20:42:40 [INFO] POST /api/users 409 22ms
2025-01-15 20:42:52 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 20:42:52 [DEBUG] New record created: id=267
2025-01-15 20:43:07 [WARN] Slow query detected: INSERT INTO users (username, email, role_id) VALUES ($1, $2, (took 1704ms)
2025-01-15 20:43:18 [INFO] GET /api/users/118 404 18ms
2025-01-15 20:43:33 [INFO] GET /api/users/88 200 6ms
2025-01-15 20:43:34 [INFO] PUT /api/users/65 200 42ms
2025-01-15 20:43:42 [INFO] GET /api/analytics/dashboard 200 386ms
2025-01-15 20:43:54 [INFO] PUT /api/users/176 200 77ms
2025-01-15 20:44:06 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 20:44:06 [DEBUG] Rows returned: 47
2025-01-15 20:44:16 [INFO] POST /api/auth/login 200 100ms
2025-01-15 20:44:30 [INFO] GET /api/health 200 1ms
2025-01-15 20:44:45 [INFO] GET /api/users 200 57ms
2025-01-15 20:44:49 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 20:44:49 [DEBUG] Rows returned: 47
2025-01-15 20:44:54 [INFO] GET /api/users 200 60ms
2025-01-15 20:45:00 [INFO] POST /api/uploads 201 1621ms
2025-01-15 20:45:15 [INFO] POST /api/auth/login 200 232ms
2025-01-15 20:45:29 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 20:45:29 [DEBUG] Rows returned: 1
2025-01-15 20:45:31 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 20:45:43 [INFO] GET /api/notifications 200 33ms
2025-01-15 20:45:58 [INFO] POST /api/auth/login 401 104ms
2025-01-15 20:46:13 [INFO] GET /api/health 200 2ms
2025-01-15 20:46:21 [INFO] GET /api/roles 200 12ms
2025-01-15 20:46:25 [INFO] POST /api/auth/refresh 200 61ms
2025-01-15 20:46:34 [WARN] Memory usage at 83% of allocated heap
2025-01-15 20:46:42 [INFO] GET /api/users 200 64ms
2025-01-15 20:46:51 [INFO] POST /api/auth/refresh 200 55ms
2025-01-15 20:47:00 [INFO] PUT /api/settings 200 24ms
2025-01-15 20:47:12 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 20:47:12 [DEBUG] Rows returned: 16
2025-01-15 20:47:14 [INFO] GET /api/health 200 1ms
2025-01-15 20:47:25 [INFO] POST /api/auth/login 401 100ms
2025-01-15 20:47:34 [INFO] PUT /api/users/20 200 59ms
2025-01-15 20:47:42 [WARN] S3 upload retry after timeout (1602ms)
2025-01-15 20:47:57 [INFO] GET /api/roles 200 10ms
2025-01-15 20:48:08 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 20:48:08 [DEBUG] Rows returned: 25
2025-01-15 20:48:21 [INFO] GET /api/settings 200 9ms
2025-01-15 20:48:30 [INFO] POST /api/auth/refresh 200 30ms
2025-01-15 20:48:42 [INFO] POST /api/auth/login 200 143ms
2025-01-15 20:48:43 [INFO] GET /api/users/186 404 12ms
2025-01-15 20:48:44 [INFO] DELETE /api/users/109 204 39ms
2025-01-15 20:48:51 [INFO] POST /api/users 201 90ms
2025-01-15 20:49:02 [INFO] GET /api/users/24 200 5ms
2025-01-15 20:49:03 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:49:03 [DEBUG] Rows returned: 6
2025-01-15 20:49:11 [INFO] GET /api/users?page=1&limit=25 200 48ms
2025-01-15 20:49:12 [INFO] POST /api/roles 201 70ms
2025-01-15 20:49:16 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 20:49:19 [INFO] GET /api/health 200 2ms
2025-01-15 20:49:25 [WARN] S3 upload retry after timeout (850ms)
2025-01-15 20:49:35 [INFO] GET /api/health 200 2ms
2025-01-15 20:49:47 [INFO] POST /api/users 409 18ms
2025-01-15 20:49:58 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:49:58 [DEBUG] Rows returned: 18
2025-01-15 20:50:00 [INFO] GET /api/users/90 404 12ms
2025-01-15 20:50:01 [WARN] Deprecated API version v1 called by client client-15
2025-01-15 20:50:08 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 20:50:08 [DEBUG] Rows returned: 38
2025-01-15 20:50:16 [INFO] GET /api/users/191 404 16ms
2025-01-15 20:50:22 [INFO] GET /api/users/118 200 6ms
2025-01-15 20:50:35 [INFO] POST /api/roles 201 62ms
2025-01-15 20:50:37 [INFO] GET /api/settings 200 5ms
2025-01-15 20:50:41 [WARN] Deprecated API version v1 called by client client-15
2025-01-15 20:50:47 [INFO] PUT /api/settings 200 31ms
2025-01-15 20:50:52 [INFO] DELETE /api/users/82 204 43ms
2025-01-15 20:51:02 [INFO] GET /api/users/24 404 13ms
2025-01-15 20:51:15 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 20:51:15 [DEBUG] Rows returned: 34
2025-01-15 20:51:20 [INFO] POST /api/auth/login 401 78ms
2025-01-15 20:51:34 [INFO] DELETE /api/users/92 204 36ms
2025-01-15 20:51:45 [INFO] POST /api/auth/refresh 200 74ms
2025-01-15 20:52:00 [INFO] GET /api/health 200 1ms
2025-01-15 20:52:15 [INFO] GET /api/health 200 1ms
2025-01-15 20:52:18 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 20:52:18 [DEBUG] Rows returned: 16
2025-01-15 20:52:21 [INFO] GET /api/analytics/dashboard 200 542ms
2025-01-15 20:52:35 [INFO] POST /api/uploads 201 708ms
2025-01-15 20:52:47 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 20:52:47 [DEBUG] Rows returned: 48
2025-01-15 20:53:00 [INFO] GET /api/roles 200 9ms
2025-01-15 20:53:07 [INFO] POST /api/users 409 13ms
2025-01-15 20:53:15 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 20:53:26 [INFO] POST /api/users 409 12ms
2025-01-15 20:53:34 [INFO] GET /api/users?role=admin 200 26ms
2025-01-15 20:53:47 [INFO] POST /api/users 409 24ms
2025-01-15 20:53:57 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 20:54:03 [INFO] POST /api/auth/refresh 200 45ms
2025-01-15 20:54:08 [INFO] PUT /api/settings 200 20ms
2025-01-15 20:54:20 [INFO] PUT /api/settings 200 41ms
2025-01-15 20:54:31 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 20:54:41 [INFO] POST /api/users 201 141ms
2025-01-15 20:54:51 [INFO] GET /api/users?page=1&limit=25 200 48ms
2025-01-15 20:54:58 [INFO] POST /api/auth/login 200 115ms
2025-01-15 20:55:11 [INFO] POST /api/auth/login 401 53ms
2025-01-15 20:55:25 [INFO] DELETE /api/users/27 204 24ms
2025-01-15 20:55:37 [INFO] POST /api/roles 201 43ms
2025-01-15 20:55:51 [INFO] POST /api/users 409 23ms
2025-01-15 20:56:02 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 20:56:07 [INFO] GET /api/users?page=1&limit=25 200 31ms
2025-01-15 20:56:10 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 20:56:19 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 20:56:19 [DEBUG] Rows returned: 34
2025-01-15 20:56:33 [INFO] GET /api/analytics/dashboard 200 626ms
2025-01-15 20:56:35 [INFO] POST /api/roles 201 55ms
2025-01-15 20:56:42 [INFO] POST /api/auth/login 401 116ms
2025-01-15 20:56:57 [INFO] POST /api/uploads 201 785ms
2025-01-15 20:56:59 [WARN] Redis reconnection attempt 98/5
2025-01-15 20:57:09 [WARN] S3 upload retry after timeout (1858ms)
2025-01-15 20:57:17 [INFO] GET /api/health 200 2ms
2025-01-15 20:57:20 [INFO] GET /api/users/172 200 19ms
2025-01-15 20:57:22 [INFO] GET /api/health 200 1ms
2025-01-15 20:57:26 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:57:26 [DEBUG] Rows returned: 13
2025-01-15 20:57:40 [INFO] POST /api/auth/login 200 132ms
2025-01-15 20:57:53 [INFO] GET /api/analytics/dashboard 200 637ms
2025-01-15 20:58:02 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 20:58:02 [DEBUG] Rows returned: 11
2025-01-15 20:58:10 [INFO] POST /api/auth/refresh 200 76ms
2025-01-15 20:58:14 [INFO] GET /api/notifications 200 17ms
2025-01-15 20:58:28 [INFO] GET /api/users/191 200 10ms
2025-01-15 20:58:39 [INFO] DELETE /api/users/69 204 35ms
2025-01-15 20:58:43 [INFO] POST /api/auth/login 401 107ms
2025-01-15 20:58:51 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 20:58:51 [DEBUG] Rows returned: 3
2025-01-15 20:58:56 [INFO] GET /api/users?role=viewer 200 30ms
2025-01-15 20:59:00 [INFO] POST /api/users 201 96ms
2025-01-15 20:59:03 [INFO] POST /api/auth/refresh 200 80ms
2025-01-15 20:59:08 [INFO] POST /api/users 201 117ms
2025-01-15 20:59:23 [INFO] PUT /api/settings 200 48ms
2025-01-15 20:59:38 [WARN] JWT token expires in less than 60 seconds for user 18
2025-01-15 20:59:44 [INFO] GET /api/health 200 2ms
2025-01-15 20:59:55 [INFO] GET /api/health 200 2ms
2025-01-15 21:00:02 [INFO] GET /api/health 200 2ms
2025-01-15 21:00:06 [INFO] GET /api/users?role=admin 200 23ms
2025-01-15 21:00:15 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 21:00:27 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 21:00:27 [DEBUG] Rows returned: 47
2025-01-15 21:00:31 [INFO] POST /api/users 409 19ms
2025-01-15 21:00:40 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 21:00:40 [DEBUG] Rows returned: 34
2025-01-15 21:00:48 [WARN] JWT token expires in less than 60 seconds for user 81
2025-01-15 21:00:58 [INFO] GET /api/health 200 3ms
2025-01-15 21:01:12 [INFO] POST /api/users 409 25ms
2025-01-15 21:01:19 [INFO] POST /api/uploads 201 621ms
2025-01-15 21:01:21 [INFO] GET /api/users 200 57ms
2025-01-15 21:01:22 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 21:01:34 [WARN] JWT token expires in less than 60 seconds for user 109
2025-01-15 21:01:43 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 21:01:43 [DEBUG] Rows returned: 35
2025-01-15 21:01:56 [ERROR] Worker process crashed. Restarting...
2025-01-15 21:02:00 [INFO] PUT /api/users/84 200 41ms
2025-01-15 21:02:03 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 21:02:03 [DEBUG] Rows returned: 31
2025-01-15 21:02:06 [INFO] POST /api/auth/refresh 200 53ms
2025-01-15 21:02:16 [INFO] PUT /api/settings 200 38ms
2025-01-15 21:02:22 [WARN] Deprecated API version v1 called by client client-1
2025-01-15 21:02:37 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 21:02:37 [DEBUG] Rows returned: 40
2025-01-15 21:02:44 [INFO] GET /api/users/114 200 16ms
2025-01-15 21:02:59 [INFO] GET /api/health 200 2ms
2025-01-15 21:03:14 [INFO] DELETE /api/users/160 204 42ms
2025-01-15 21:03:20 [INFO] GET /api/users?page=4&limit=25 200 58ms
2025-01-15 21:03:31 [ERROR] Worker process crashed. Restarting...
2025-01-15 21:03:45 [INFO] POST /api/users 409 25ms
2025-01-15 21:03:50 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 21:03:50 [DEBUG] Rows returned: 9
2025-01-15 21:03:51 [INFO] GET /api/health 200 1ms
2025-01-15 21:04:04 [INFO] GET /api/health 200 1ms
2025-01-15 21:04:12 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 21:04:27 [INFO] PUT /api/users/7 200 43ms
2025-01-15 21:04:31 [INFO] GET /api/health 200 2ms
2025-01-15 21:04:42 [INFO] GET /api/health 200 1ms
2025-01-15 21:04:54 [WARN] Rate limit exceeded for IP 192.168.5.3. Returning 429.
2025-01-15 21:04:59 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 21:04:59 [DEBUG] Rows returned: 36
2025-01-15 21:05:04 [INFO] GET /api/users/142 200 10ms
2025-01-15 21:05:10 [INFO] GET /api/users?role=admin 200 24ms
2025-01-15 21:05:25 [INFO] GET /api/health 200 3ms
2025-01-15 21:05:40 [INFO] POST /api/users 201 121ms
2025-01-15 21:05:45 [INFO] GET /api/users/142 200 11ms
2025-01-15 21:05:58 [INFO] DELETE /api/users/68 204 22ms
2025-01-15 21:06:02 [INFO] PUT /api/settings 200 47ms
2025-01-15 21:06:11 [INFO] POST /api/users 409 14ms
2025-01-15 21:06:13 [INFO] GET /api/health 200 1ms
2025-01-15 21:06:14 [INFO] GET /api/health 200 3ms
2025-01-15 21:06:16 [INFO] GET /api/health 200 3ms
2025-01-15 21:06:20 [INFO] DELETE /api/users/11 204 38ms
2025-01-15 21:06:34 [INFO] GET /api/users 200 59ms
2025-01-15 21:06:45 [INFO] GET /api/users/149 200 14ms
2025-01-15 21:06:58 [INFO] PUT /api/users/30 200 77ms
2025-01-15 21:06:59 [INFO] GET /api/users/172 200 15ms
2025-01-15 21:07:06 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 21:07:11 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 21:07:26 [INFO] PUT /api/settings 200 22ms
2025-01-15 21:07:32 [INFO] GET /api/health 200 1ms
2025-01-15 21:07:34 [INFO] PUT /api/users/41 200 57ms
2025-01-15 21:07:47 [INFO] GET /api/users?page=4&limit=25 200 29ms
2025-01-15 21:07:52 [INFO] GET /api/health 200 2ms
2025-01-15 21:08:05 [INFO] GET /api/users 200 47ms
2025-01-15 21:08:18 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 21:08:18 [DEBUG] Rows returned: 45
2025-01-15 21:08:32 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 21:08:32 [DEBUG] New record created: id=165
2025-01-15 21:08:34 [INFO] GET /api/health 200 3ms
2025-01-15 21:08:38 [INFO] GET /api/health 200 3ms
2025-01-15 21:08:40 [INFO] GET /api/users 200 37ms
2025-01-15 21:08:53 [INFO] GET /api/health 200 3ms
2025-01-15 21:09:00 [INFO] GET /api/health 200 1ms
2025-01-15 21:09:01 [INFO] POST /api/auth/refresh 200 68ms
2025-01-15 21:09:11 [INFO] PUT /api/settings 200 35ms
2025-01-15 21:09:25 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 21:09:29 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 21:09:29 [DEBUG] Rows returned: 1
2025-01-15 21:09:37 [INFO] GET /api/users?role=admin 200 33ms
2025-01-15 21:09:45 [INFO] GET /api/health 200 1ms
2025-01-15 21:09:50 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 21:09:50 [DEBUG] New record created: id=265
2025-01-15 21:09:54 [INFO] PUT /api/users/77 200 88ms
2025-01-15 21:10:01 [INFO] POST /api/uploads 201 1084ms
2025-01-15 21:10:16 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 21:10:16 [DEBUG] Rows returned: 33
2025-01-15 21:10:25 [INFO] POST /api/users 409 10ms
2025-01-15 21:10:39 [INFO] POST /api/users 409 14ms
2025-01-15 21:10:50 [INFO] GET /api/users?role=viewer 200 25ms
2025-01-15 21:11:04 [INFO] PUT /api/settings 200 46ms
2025-01-15 21:11:17 [INFO] PUT /api/users/80 200 67ms
2025-01-15 21:11:25 [INFO] PUT /api/users/141 200 65ms
2025-01-15 21:11:40 [INFO] PUT /api/users/38 200 41ms
2025-01-15 21:11:41 [INFO] DELETE /api/users/106 204 31ms
2025-01-15 21:11:50 [INFO] POST /api/auth/login 401 84ms
2025-01-15 21:11:52 [INFO] GET /api/analytics/dashboard 200 239ms
2025-01-15 21:11:59 [INFO] POST /api/auth/refresh 200 66ms
2025-01-15 21:12:07 [INFO] GET /api/users 200 57ms
2025-01-15 21:12:12 [INFO] GET /api/users/29 404 9ms
2025-01-15 21:12:18 [INFO] POST /api/uploads 201 1939ms
2025-01-15 21:12:25 [INFO] GET /api/health 200 1ms
2025-01-15 21:12:32 [INFO] GET /api/users/27 404 8ms
2025-01-15 21:12:46 [INFO] POST /api/auth/login 200 142ms
2025-01-15 21:12:53 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 21:12:53 [DEBUG] Rows returned: 50
2025-01-15 21:12:59 [INFO] GET /api/roles 200 7ms
2025-01-15 21:13:11 [INFO] DELETE /api/users/98 204 35ms
2025-01-15 21:13:19 [INFO] GET /api/roles 200 15ms
2025-01-15 21:13:24 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 21:13:24 [DEBUG] Rows returned: 17
2025-01-15 21:13:30 [INFO] GET /api/health 200 2ms
2025-01-15 21:13:41 [INFO] POST /api/auth/login 401 50ms
2025-01-15 21:13:55 [INFO] PUT /api/settings 200 51ms
2025-01-15 21:14:08 [INFO] DELETE /api/users/134 204 35ms
2025-01-15 21:14:23 [INFO] POST /api/users 201 106ms
2025-01-15 21:14:30 [INFO] GET /api/health 200 1ms
2025-01-15 21:14:39 [INFO] GET /api/users 200 26ms
2025-01-15 21:14:52 [INFO] GET /api/roles 200 15ms
2025-01-15 21:15:07 [WARN] Slow query detected: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1 (took 532ms)
2025-01-15 21:15:21 [INFO] GET /api/roles 200 12ms
2025-01-15 21:15:35 [INFO] GET /api/health 200 2ms
2025-01-15 21:15:50 [INFO] GET /api/settings 200 7ms
2025-01-15 21:16:00 [WARN] Memory usage at 85% of allocated heap
2025-01-15 21:16:12 [INFO] GET /api/health 200 2ms
2025-01-15 21:16:26 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 21:16:26 [DEBUG] Rows returned: 27
2025-01-15 21:16:29 [INFO] POST /api/users 409 13ms
2025-01-15 21:16:36 [WARN] Rate limit approaching for IP 192.168.4.70 (89/100 requests in window)
2025-01-15 21:16:49 [INFO] POST /api/users 409 23ms
2025-01-15 21:17:01 [INFO] DELETE /api/users/42 204 49ms
2025-01-15 21:17:13 [INFO] GET /api/analytics/dashboard 200 254ms
2025-01-15 21:17:15 [INFO] POST /api/auth/refresh 200 73ms
2025-01-15 21:17:27 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 21:17:27 [DEBUG] Rows returned: 41
2025-01-15 21:17:33 [INFO] GET /api/users/189 200 13ms
2025-01-15 21:17:47 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 21:17:58 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 21:17:58 [DEBUG] Rows returned: 15
2025-01-15 21:18:04 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 21:18:04 [DEBUG] New record created: id=453
2025-01-15 21:18:19 [INFO] GET /api/health 200 3ms
2025-01-15 21:18:23 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 21:18:23 [DEBUG] Rows returned: 10
2025-01-15 21:18:34 [INFO] GET /api/analytics/dashboard 200 703ms
2025-01-15 21:18:44 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 21:18:59 [INFO] GET /api/roles 200 6ms
2025-01-15 21:19:13 [INFO] GET /api/notifications 200 26ms
2025-01-15 21:19:27 [ERROR] Unhandled exception in POST /api/auth/refresh: UserNotFoundError
2025-01-15 21:19:27 [ERROR] Stack trace:
    at AuthService.validateToken (src/services/auth.service.ts:48)
    at authenticate (src/middleware/auth.ts:163)
    at processTicksAndRejections (node:internal/process/task_queues:215)
2025-01-15 21:19:32 [INFO] GET /api/users/27 200 19ms
2025-01-15 21:19:38 [INFO] GET /api/health 200 1ms
2025-01-15 21:19:50 [INFO] GET /api/health 200 2ms
2025-01-15 21:19:54 [WARN] Redis reconnection attempt 85/5
2025-01-15 21:20:03 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 21:20:03 [DEBUG] Rows returned: 31
2025-01-15 21:20:11 [INFO] GET /api/analytics/dashboard 200 548ms
2025-01-15 21:20:15 [INFO] GET /api/users/41 404 8ms
2025-01-15 21:20:24 [WARN] Rate limit exceeded for IP 192.168.10.249. Returning 429.
2025-01-15 21:20:31 [INFO] GET /api/health 200 3ms
2025-01-15 21:20:45 [INFO] PUT /api/users/147 200 44ms
2025-01-15 21:20:52 [INFO] GET /api/notifications 200 10ms
2025-01-15 21:20:56 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 21:20:56 [DEBUG] Rows returned: 30
2025-01-15 21:20:57 [INFO] GET /api/health 200 3ms
2025-01-15 21:21:07 [INFO] GET /api/health 200 1ms
2025-01-15 21:21:15 [INFO] DELETE /api/users/125 204 40ms
2025-01-15 21:21:24 [INFO] GET /api/health 200 2ms
2025-01-15 21:21:39 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 21:21:39 [DEBUG] Rows returned: 48
2025-01-15 21:21:52 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 21:22:01 [INFO] POST /api/users 201 118ms
2025-01-15 21:22:10 [INFO] POST /api/auth/login 401 102ms
2025-01-15 21:22:16 [INFO] GET /api/analytics/dashboard 200 604ms
2025-01-15 21:22:22 [INFO] POST /api/auth/login 401 85ms
2025-01-15 21:22:24 [INFO] GET /api/health 200 3ms
2025-01-15 21:22:27 [INFO] POST /api/auth/refresh 200 60ms
2025-01-15 21:22:37 [INFO] GET /api/users 200 73ms
2025-01-15 21:22:40 [INFO] GET /api/health 200 1ms
2025-01-15 21:22:43 [INFO] POST /api/users 409 16ms
2025-01-15 21:22:46 [INFO] GET /api/health 200 2ms
2025-01-15 21:22:57 [WARN] Memory usage at 82% of allocated heap
2025-01-15 21:23:12 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 21:23:12 [DEBUG] Rows returned: 29
2025-01-15 21:23:25 [INFO] GET /api/health 200 2ms
2025-01-15 21:23:38 [INFO] GET /api/health 200 3ms
2025-01-15 21:23:45 [INFO] GET /api/users/111 200 9ms
2025-01-15 21:23:50 [INFO] GET /api/analytics/dashboard 200 550ms
2025-01-15 21:24:02 [INFO] GET /api/analytics/dashboard 200 566ms
2025-01-15 21:24:16 [INFO] GET /api/health 200 1ms
2025-01-15 21:24:23 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 21:24:23 [DEBUG] Rows returned: 38
2025-01-15 21:24:38 [INFO] POST /api/users 201 107ms
2025-01-15 21:24:43 [INFO] POST /api/uploads 201 1564ms
2025-01-15 21:24:47 [INFO] DELETE /api/users/128 204 30ms
2025-01-15 21:25:00 [INFO] GET /api/users/10 404 15ms
2025-01-15 21:25:14 [INFO] GET /api/health 200 3ms
2025-01-15 21:25:26 [INFO] GET /api/health 200 1ms
2025-01-15 21:25:35 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 21:25:38 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 21:25:53 [INFO] GET /api/health 200 1ms
2025-01-15 21:26:05 [INFO] GET /api/roles 200 8ms
2025-01-15 21:26:16 [INFO] POST /api/uploads 201 1075ms
2025-01-15 21:26:22 [INFO] GET /api/users/33 200 5ms
2025-01-15 21:26:27 [INFO] POST /api/auth/refresh 200 60ms
2025-01-15 21:26:34 [INFO] POST /api/auth/login 200 175ms
2025-01-15 21:26:40 [INFO] GET /api/health 200 2ms
2025-01-15 21:26:45 [INFO] POST /api/users 201 149ms
2025-01-15 21:26:58 [INFO] PUT /api/settings 200 38ms
2025-01-15 21:26:59 [INFO] POST /api/users 201 134ms
2025-01-15 21:27:08 [INFO] PUT /api/settings 200 53ms
2025-01-15 21:27:17 [INFO] GET /api/settings 200 12ms
2025-01-15 21:27:27 [WARN] JWT token expires in less than 60 seconds for user 6
2025-01-15 21:27:31 [INFO] PUT /api/settings 200 46ms
2025-01-15 21:27:37 [INFO] GET /api/health 200 1ms
2025-01-15 21:27:48 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 21:27:48 [DEBUG] Rows returned: 8
2025-01-15 21:27:54 [INFO] POST /api/auth/login 401 101ms
2025-01-15 21:28:05 [INFO] POST /api/roles 201 35ms
2025-01-15 21:28:19 [INFO] GET /api/settings 200 7ms
2025-01-15 21:28:28 [INFO] PUT /api/settings 200 53ms
2025-01-15 21:28:34 [INFO] POST /api/users 201 99ms
2025-01-15 21:28:36 [INFO] GET /api/settings 200 12ms
2025-01-15 21:28:41 [INFO] POST /api/auth/login 401 93ms
2025-01-15 21:28:56 [INFO] GET /api/health 200 3ms
2025-01-15 21:29:01 [INFO] POST /api/auth/login 401 59ms
2025-01-15 21:29:09 [INFO] GET /api/analytics/dashboard 200 353ms
2025-01-15 21:29:21 [INFO] GET /api/health 200 1ms
2025-01-15 21:29:32 [INFO] POST /api/auth/refresh 200 44ms
2025-01-15 21:29:43 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 21:29:43 [DEBUG] New record created: id=229
2025-01-15 21:29:55 [INFO] POST /api/auth/refresh 200 76ms
2025-01-15 21:29:59 [INFO] GET /api/notifications 200 16ms
2025-01-15 21:30:09 [ERROR] Database connection timeout after 5000ms
2025-01-15 21:30:11 [INFO] GET /api/health 200 3ms
2025-01-15 21:30:23 [INFO] POST /api/auth/refresh 200 49ms
2025-01-15 21:30:28 [WARN] JWT token expires in less than 60 seconds for user 162
2025-01-15 21:30:33 [INFO] POST /api/auth/login 401 75ms
2025-01-15 21:30:41 [INFO] POST /api/auth/login 401 63ms
2025-01-15 21:30:42 [INFO] GET /api/analytics/dashboard 200 645ms
2025-01-15 21:30:52 [INFO] GET /api/health 200 2ms
2025-01-15 21:31:07 [INFO] PUT /api/users/177 200 68ms
2025-01-15 21:31:20 [INFO] GET /api/users 200 57ms
2025-01-15 21:31:30 [INFO] GET /api/users?role=moderator 200 17ms
2025-01-15 21:31:39 [INFO] POST /api/uploads 201 685ms
2025-01-15 21:31:49 [INFO] POST /api/uploads 201 1060ms
2025-01-15 21:31:53 [INFO] GET /api/health 200 2ms
2025-01-15 21:31:54 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 21:31:54 [DEBUG] Rows returned: 32
2025-01-15 21:32:00 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 21:32:00 [DEBUG] New record created: id=70
2025-01-15 21:32:07 [INFO] GET /api/users?role=editor 200 16ms
2025-01-15 21:32:16 [INFO] GET /api/health 200 3ms
2025-01-15 21:32:26 [INFO] GET /api/health 200 2ms
2025-01-15 21:32:31 [INFO] PUT /api/settings 200 34ms
2025-01-15 21:32:36 [INFO] GET /api/health 200 1ms
2025-01-15 21:32:42 [INFO] POST /api/auth/login 200 128ms
2025-01-15 21:32:45 [INFO] GET /api/health 200 3ms
2025-01-15 21:32:51 [INFO] DELETE /api/users/130 204 20ms
2025-01-15 21:33:00 [INFO] PUT /api/users/85 200 79ms
2025-01-15 21:33:05 [INFO] GET /api/health 200 2ms
2025-01-15 21:33:12 [INFO] GET /api/roles 200 6ms
2025-01-15 21:33:23 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 21:33:23 [DEBUG] Rows returned: 27
2025-01-15 21:33:25 [INFO] GET /api/users/87 404 17ms
2025-01-15 21:33:39 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 21:33:39 [DEBUG] Rows returned: 20
2025-01-15 21:33:45 [INFO] POST /api/auth/login 401 55ms
2025-01-15 21:33:46 [INFO] GET /api/health 200 2ms
2025-01-15 21:33:48 [INFO] PUT /api/settings 200 43ms
2025-01-15 21:33:51 [INFO] GET /api/health 200 2ms
2025-01-15 21:34:03 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 21:34:03 [DEBUG] Rows returned: 0
2025-01-15 21:34:05 [INFO] GET /api/health 200 3ms
2025-01-15 21:34:11 [INFO] GET /api/health 200 3ms
2025-01-15 21:34:17 [INFO] GET /api/health 200 2ms
2025-01-15 21:34:21 [INFO] GET /api/health 200 1ms
2025-01-15 21:34:23 [ERROR] Worker process crashed. Restarting...
2025-01-15 21:34:25 [WARN] Rate limit approaching for IP 192.168.1.99 (100/100 requests in window)
2025-01-15 21:34:35 [INFO] GET /api/health 200 1ms
2025-01-15 21:34:39 [WARN] Deprecated API version v1 called by client client-19
2025-01-15 21:34:46 [INFO] GET /api/users/129 200 7ms
2025-01-15 21:34:54 [INFO] GET /api/health 200 1ms
2025-01-15 21:35:04 [INFO] GET /api/health 200 3ms
2025-01-15 21:35:07 [INFO] GET /api/health 200 3ms
2025-01-15 21:35:22 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 21:35:22 [DEBUG] Rows returned: 1
2025-01-15 21:35:30 [WARN] Rate limit approaching for IP 192.168.2.40 (98/100 requests in window)
2025-01-15 21:35:43 [INFO] GET /api/settings 200 5ms
2025-01-15 21:35:53 [INFO] GET /api/health 200 2ms
2025-01-15 21:35:54 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 21:36:02 [INFO] GET /api/health 200 1ms
2025-01-15 21:36:17 [WARN] JWT token expires in less than 60 seconds for user 139
2025-01-15 21:36:18 [INFO] GET /api/users/18 404 10ms
2025-01-15 21:36:30 [INFO] DELETE /api/users/16 204 46ms
2025-01-15 21:36:36 [WARN] Request body exceeded soft limit (4035KB)
2025-01-15 21:36:50 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 21:36:50 [DEBUG] New record created: id=91
2025-01-15 21:37:05 [INFO] POST /api/users 201 108ms
2025-01-15 21:37:09 [INFO] GET /api/users?role=moderator 200 38ms
2025-01-15 21:37:24 [INFO] POST /api/auth/login 401 86ms
2025-01-15 21:37:38 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 21:37:45 [INFO] GET /api/notifications 200 28ms
2025-01-15 21:37:57 [INFO] GET /api/users/147 404 8ms
2025-01-15 21:38:02 [INFO] GET /api/users?page=1&limit=25 200 34ms
2025-01-15 21:38:15 [INFO] PUT /api/users/109 200 47ms
2025-01-15 21:38:22 [INFO] GET /api/health 200 1ms
2025-01-15 21:38:34 [INFO] GET /api/health 200 1ms
2025-01-15 21:38:39 [INFO] POST /api/auth/login 401 113ms
2025-01-15 21:38:54 [INFO] GET /api/users 200 52ms
2025-01-15 21:39:04 [INFO] GET /api/roles 200 11ms
2025-01-15 21:39:05 [INFO] GET /api/users?role=admin 200 19ms
2025-01-15 21:39:17 [WARN] Memory usage at 82% of allocated heap
2025-01-15 21:39:27 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 21:39:27 [DEBUG] Rows returned: 16
2025-01-15 21:39:30 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 21:39:32 [INFO] PUT /api/settings 200 42ms
2025-01-15 21:39:40 [WARN] JWT token expires in less than 60 seconds for user 117
2025-01-15 21:39:47 [INFO] GET /api/health 200 3ms
2025-01-15 21:39:49 [INFO] GET /api/health 200 2ms
2025-01-15 21:39:53 [INFO] POST /api/auth/login 200 234ms
2025-01-15 21:40:04 [INFO] GET /api/analytics/dashboard 200 527ms
2025-01-15 21:40:14 [WARN] Rate limit exceeded for IP 192.168.3.156. Returning 429.
2025-01-15 21:40:21 [INFO] POST /api/uploads 201 888ms
2025-01-15 21:40:26 [INFO] POST /api/users 201 132ms
2025-01-15 21:40:34 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 21:40:34 [DEBUG] Rows returned: 25
2025-01-15 21:40:40 [INFO] GET /api/analytics/dashboard 200 245ms
2025-01-15 21:40:43 [INFO] GET /api/users?page=2&limit=25 200 30ms
2025-01-15 21:40:55 [WARN] Deprecated API version v1 called by client client-5
2025-01-15 21:41:02 [INFO] GET /api/health 200 1ms
2025-01-15 21:41:11 [INFO] GET /api/notifications 200 22ms
2025-01-15 21:41:26 [INFO] POST /api/users 409 20ms
2025-01-15 21:41:39 [INFO] GET /api/users?page=3&limit=25 200 37ms
2025-01-15 21:41:52 [INFO] GET /api/users/132 404 14ms
2025-01-15 21:41:53 [INFO] PUT /api/settings 200 35ms
2025-01-15 21:41:56 [INFO] GET /api/users/2 404 17ms
2025-01-15 21:42:01 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 21:42:16 [INFO] GET /api/health 200 3ms
2025-01-15 21:42:20 [INFO] PUT /api/users/175 200 77ms
2025-01-15 21:42:33 [INFO] POST /api/roles 201 37ms
2025-01-15 21:42:40 [WARN] Rate limit exceeded for IP 192.168.4.126. Returning 429.
2025-01-15 21:42:42 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 21:42:42 [DEBUG] Rows returned: 43
2025-01-15 21:42:52 [INFO] POST /api/roles 201 59ms
2025-01-15 21:43:01 [INFO] GET /api/health 200 2ms
2025-01-15 21:43:14 [INFO] GET /api/users?role=moderator 200 24ms
2025-01-15 21:43:27 [WARN] Deprecated API version v1 called by client client-17
2025-01-15 21:43:31 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 21:43:31 [DEBUG] Rows returned: 40
2025-01-15 21:43:34 [INFO] POST /api/roles 201 70ms
2025-01-15 21:43:40 [INFO] GET /api/users/18 404 18ms
2025-01-15 21:43:49 [INFO] GET /api/health 200 3ms
2025-01-15 21:43:50 [INFO] DELETE /api/users/65 204 27ms
2025-01-15 21:43:59 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 21:43:59 [DEBUG] New record created: id=311
2025-01-15 21:44:07 [INFO] GET /api/roles 200 11ms
2025-01-15 21:44:14 [WARN] Slow query detected: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1 (took 563ms)
2025-01-15 21:44:16 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 21:44:16 [DEBUG] New record created: id=78
2025-01-15 21:44:27 [INFO] PUT /api/users/19 200 75ms
2025-01-15 21:44:33 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 21:44:33 [DEBUG] Rows returned: 23
2025-01-15 21:44:46 [INFO] GET /api/health 200 1ms
2025-01-15 21:44:53 [INFO] GET /api/users 200 41ms
2025-01-15 21:45:06 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 21:45:09 [INFO] PUT /api/settings 200 49ms
2025-01-15 21:45:14 [INFO] PUT /api/users/55 200 90ms
2025-01-15 21:45:24 [INFO] GET /api/health 200 1ms
2025-01-15 21:45:37 [INFO] GET /api/users?page=2&limit=25 200 42ms
2025-01-15 21:45:50 [INFO] POST /api/auth/refresh 200 59ms
2025-01-15 21:45:51 [INFO] GET /api/users 200 39ms
2025-01-15 21:45:56 [INFO] PUT /api/settings 200 42ms
2025-01-15 21:46:10 [INFO] POST /api/auth/login 401 117ms
2025-01-15 21:46:19 [INFO] GET /api/analytics/dashboard 200 333ms
2025-01-15 21:46:21 [INFO] GET /api/settings 200 9ms
2025-01-15 21:46:25 [INFO] DELETE /api/users/132 204 48ms
2025-01-15 21:46:30 [INFO] GET /api/users 200 35ms
2025-01-15 21:46:33 [INFO] PUT /api/settings 200 22ms
2025-01-15 21:46:48 [INFO] GET /api/health 200 1ms
2025-01-15 21:46:53 [INFO] GET /api/users/80 404 16ms
2025-01-15 21:47:01 [INFO] GET /api/analytics/dashboard 200 206ms
2025-01-15 21:47:09 [INFO] POST /api/auth/login 200 202ms
2025-01-15 21:47:10 [INFO] POST /api/auth/refresh 200 65ms
2025-01-15 21:47:24 [INFO] POST /api/users 409 16ms
2025-01-15 21:47:38 [INFO] GET /api/health 200 2ms
2025-01-15 21:47:52 [WARN] Rate limit exceeded for IP 192.168.5.196. Returning 429.
2025-01-15 21:48:05 [INFO] PUT /api/users/51 200 86ms
2025-01-15 21:48:18 [INFO] GET /api/settings 200 11ms
2025-01-15 21:48:25 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 21:48:25 [DEBUG] Rows returned: 2
2025-01-15 21:48:40 [INFO] GET /api/users?page=2&limit=25 200 37ms
2025-01-15 21:48:45 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 21:48:49 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 21:48:51 [WARN] Memory usage at 80% of allocated heap
2025-01-15 21:49:03 [INFO] POST /api/uploads 201 1949ms
2025-01-15 21:49:04 [INFO] DELETE /api/users/97 204 23ms
2025-01-15 21:49:06 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 21:49:06 [DEBUG] Rows returned: 21
2025-01-15 21:49:16 [INFO] GET /api/users?page=5&limit=25 200 41ms
2025-01-15 21:49:19 [INFO] DELETE /api/users/128 204 26ms
2025-01-15 21:49:32 [INFO] GET /api/health 200 1ms
2025-01-15 21:49:47 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 21:49:47 [DEBUG] Rows returned: 36
2025-01-15 21:49:55 [INFO] POST /api/auth/login 200 226ms
2025-01-15 21:50:03 [INFO] GET /api/settings 200 11ms
2025-01-15 21:50:05 [INFO] POST /api/roles 201 68ms
2025-01-15 21:50:07 [INFO] DELETE /api/users/199 204 40ms
2025-01-15 21:50:16 [INFO] GET /api/health 200 1ms
2025-01-15 21:50:23 [INFO] GET /api/health 200 1ms
2025-01-15 21:50:27 [INFO] PUT /api/settings 200 27ms
2025-01-15 21:50:33 [INFO] GET /api/health 200 1ms
2025-01-15 21:50:35 [INFO] DELETE /api/users/157 204 29ms
2025-01-15 21:50:44 [WARN] Memory usage at 90% of allocated heap
2025-01-15 21:50:46 [INFO] GET /api/settings 200 5ms
2025-01-15 21:51:00 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 21:51:00 [DEBUG] Rows returned: 6
2025-01-15 21:51:13 [WARN] Memory usage at 95% of allocated heap
2025-01-15 21:51:28 [INFO] GET /api/notifications 200 24ms
2025-01-15 21:51:38 [WARN] Request body exceeded soft limit (3730KB)
2025-01-15 21:51:39 [INFO] GET /api/health 200 1ms
2025-01-15 21:51:47 [INFO] POST /api/roles 201 53ms
2025-01-15 21:51:56 [INFO] GET /api/health 200 3ms
2025-01-15 21:52:06 [INFO] POST /api/users 409 25ms
2025-01-15 21:52:08 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 21:52:08 [DEBUG] Rows returned: 23
2025-01-15 21:52:14 [WARN] JWT token expires in less than 60 seconds for user 30
2025-01-15 21:52:25 [INFO] PUT /api/settings 200 33ms
2025-01-15 21:52:36 [INFO] GET /api/health 200 3ms
2025-01-15 21:52:50 [INFO] GET /api/health 200 1ms
2025-01-15 21:53:04 [WARN] Request body exceeded soft limit (3941KB)
2025-01-15 21:53:06 [INFO] GET /api/notifications 200 21ms
2025-01-15 21:53:15 [INFO] GET /api/analytics/dashboard 200 399ms
2025-01-15 21:53:29 [INFO] GET /api/roles 200 11ms
2025-01-15 21:53:33 [INFO] POST /api/auth/login 200 200ms
2025-01-15 21:53:46 [INFO] GET /api/health 200 2ms
2025-01-15 21:53:58 [INFO] POST /api/auth/refresh 200 69ms
2025-01-15 21:54:03 [INFO] GET /api/health 200 3ms
2025-01-15 21:54:08 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 21:54:22 [INFO] GET /api/roles 200 9ms
2025-01-15 21:54:23 [INFO] GET /api/health 200 1ms
2025-01-15 21:54:31 [INFO] PUT /api/settings 200 37ms
2025-01-15 21:54:42 [INFO] GET /api/health 200 3ms
2025-01-15 21:54:52 [INFO] DELETE /api/users/165 204 48ms
2025-01-15 21:54:53 [INFO] GET /api/users?page=4&limit=25 200 58ms
2025-01-15 21:54:54 [INFO] POST /api/uploads 201 1261ms
2025-01-15 21:55:09 [INFO] PUT /api/users/48 200 66ms
2025-01-15 21:55:19 [INFO] GET /api/notifications 200 25ms
2025-01-15 21:55:23 [INFO] GET /api/users 200 25ms
2025-01-15 21:55:35 [INFO] GET /api/health 200 1ms
2025-01-15 21:55:38 [INFO] GET /api/health 200 3ms
2025-01-15 21:55:43 [INFO] GET /api/health 200 2ms
2025-01-15 21:55:45 [INFO] POST /api/users 201 109ms
2025-01-15 21:55:59 [INFO] GET /api/settings 200 9ms
2025-01-15 21:56:14 [INFO] GET /api/roles 200 11ms
2025-01-15 21:56:28 [INFO] GET /api/users 200 56ms
2025-01-15 21:56:32 [INFO] GET /api/health 200 3ms
2025-01-15 21:56:42 [INFO] GET /api/users/86 404 17ms
2025-01-15 21:56:47 [INFO] GET /api/health 200 1ms
2025-01-15 21:56:48 [INFO] GET /api/health 200 1ms
2025-01-15 21:56:51 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 21:56:51 [DEBUG] Rows returned: 2
2025-01-15 21:56:59 [INFO] GET /api/health 200 1ms
2025-01-15 21:57:10 [INFO] GET /api/health 200 2ms
2025-01-15 21:57:12 [INFO] GET /api/notifications 200 28ms
2025-01-15 21:57:23 [INFO] GET /api/notifications 200 23ms
2025-01-15 21:57:25 [INFO] PUT /api/users/83 200 57ms
2025-01-15 21:57:37 [WARN] Redis reconnection attempt 91/5
2025-01-15 21:57:40 [INFO] GET /api/health 200 1ms
2025-01-15 21:57:52 [INFO] GET /api/notifications 200 34ms
2025-01-15 21:58:00 [INFO] GET /api/users/163 200 10ms
2025-01-15 21:58:04 [INFO] GET /api/health 200 2ms
2025-01-15 21:58:19 [INFO] PUT /api/users/146 200 52ms
2025-01-15 21:58:27 [INFO] GET /api/users?page=1&limit=25 200 38ms
2025-01-15 21:58:42 [WARN] JWT token expires in less than 60 seconds for user 149
2025-01-15 21:58:44 [INFO] GET /api/health 200 3ms
2025-01-15 21:58:57 [INFO] GET /api/health 200 3ms
2025-01-15 21:59:03 [INFO] GET /api/health 200 2ms
2025-01-15 21:59:04 [WARN] Redis reconnection attempt 100/5
2025-01-15 21:59:09 [INFO] PUT /api/users/3 200 73ms
2025-01-15 21:59:23 [INFO] GET /api/health 200 2ms
2025-01-15 21:59:27 [INFO] GET /api/users?role=viewer 200 24ms
2025-01-15 21:59:42 [INFO] POST /api/users 201 87ms
2025-01-15 21:59:52 [INFO] GET /api/users/116 404 12ms
2025-01-15 21:59:56 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 21:59:56 [DEBUG] Rows returned: 27
2025-01-15 22:00:04 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 22:00:04 [DEBUG] Rows returned: 47
2025-01-15 22:00:14 [INFO] GET /api/roles 200 13ms
2025-01-15 22:00:23 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 22:00:23 [DEBUG] Rows returned: 47
2025-01-15 22:00:33 [INFO] PUT /api/users/48 200 80ms
2025-01-15 22:00:48 [INFO] GET /api/health 200 2ms
2025-01-15 22:00:58 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 22:00:58 [DEBUG] Rows returned: 7
2025-01-15 22:01:10 [INFO] PUT /api/users/167 200 78ms
2025-01-15 22:01:20 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 22:01:20 [DEBUG] Rows returned: 24
2025-01-15 22:01:24 [INFO] PUT /api/settings 200 45ms
2025-01-15 22:01:30 [INFO] GET /api/health 200 3ms
2025-01-15 22:01:41 [INFO] GET /api/users?page=2&limit=25 200 54ms
2025-01-15 22:01:45 [WARN] Slow query detected: SELECT * FROM users WHERE id = $1 (took 598ms)
2025-01-15 22:01:46 [INFO] PUT /api/users/21 200 88ms
2025-01-15 22:01:58 [INFO] GET /api/health 200 3ms
2025-01-15 22:02:01 [INFO] GET /api/health 200 1ms
2025-01-15 22:02:06 [INFO] GET /api/users/178 404 11ms
2025-01-15 22:02:21 [WARN] Deprecated API version v1 called by client client-17
2025-01-15 22:02:34 [INFO] GET /api/health 200 3ms
2025-01-15 22:02:42 [INFO] GET /api/health 200 3ms
2025-01-15 22:02:55 [INFO] POST /api/users 201 110ms
2025-01-15 22:03:04 [INFO] GET /api/health 200 2ms
2025-01-15 22:03:18 [INFO] POST /api/users 409 14ms
2025-01-15 22:03:25 [WARN] Rate limit exceeded for IP 192.168.2.130. Returning 429.
2025-01-15 22:03:33 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 22:03:33 [DEBUG] New record created: id=451
2025-01-15 22:03:42 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 22:03:42 [DEBUG] Rows returned: 21
2025-01-15 22:03:57 [INFO] GET /api/users 200 32ms
2025-01-15 22:04:07 [INFO] PUT /api/settings 200 52ms
2025-01-15 22:04:15 [INFO] GET /api/users?role=viewer 200 32ms
2025-01-15 22:04:20 [INFO] GET /api/users/183 404 16ms
2025-01-15 22:04:30 [INFO] GET /api/roles 200 5ms
2025-01-15 22:04:34 [WARN] Slow query detected: SELECT * FROM permissions WHERE role_id = $1 (took 1145ms)
2025-01-15 22:04:48 [INFO] GET /api/notifications 200 34ms
2025-01-15 22:05:00 [INFO] POST /api/users 201 118ms
2025-01-15 22:05:08 [INFO] GET /api/health 200 2ms
2025-01-15 22:05:19 [INFO] GET /api/analytics/dashboard 200 384ms
2025-01-15 22:05:25 [INFO] GET /api/users/33 404 15ms
2025-01-15 22:05:28 [INFO] GET /api/health 200 3ms
2025-01-15 22:05:38 [INFO] GET /api/health 200 1ms
2025-01-15 22:05:46 [INFO] PUT /api/settings 200 23ms
2025-01-15 22:05:58 [INFO] GET /api/users?role=viewer 200 24ms
2025-01-15 22:06:08 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 22:06:08 [DEBUG] Rows returned: 29
2025-01-15 22:06:23 [INFO] GET /api/users/112 404 11ms
2025-01-15 22:06:34 [INFO] POST /api/auth/login 401 69ms
2025-01-15 22:06:40 [INFO] DELETE /api/users/88 204 44ms
2025-01-15 22:06:48 [INFO] GET /api/roles 200 9ms
2025-01-15 22:06:50 [INFO] GET /api/health 200 1ms
2025-01-15 22:06:58 [INFO] GET /api/analytics/dashboard 200 264ms
2025-01-15 22:07:03 [INFO] GET /api/health 200 1ms
2025-01-15 22:07:15 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 22:07:17 [INFO] GET /api/users 200 48ms
2025-01-15 22:07:23 [INFO] POST /api/roles 201 51ms
2025-01-15 22:07:38 [INFO] GET /api/health 200 2ms
2025-01-15 22:07:51 [INFO] GET /api/users/109 404 13ms
2025-01-15 22:08:04 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 22:08:13 [INFO] GET /api/health 200 3ms
2025-01-15 22:08:19 [INFO] GET /api/health 200 2ms
2025-01-15 22:08:32 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 22:08:32 [DEBUG] Rows returned: 1
2025-01-15 22:08:41 [INFO] GET /api/users 200 55ms
2025-01-15 22:08:43 [INFO] GET /api/users?role=moderator 200 25ms
2025-01-15 22:08:56 [INFO] GET /api/settings 200 11ms
2025-01-15 22:09:05 [INFO] GET /api/users 200 67ms
2025-01-15 22:09:16 [INFO] GET /api/notifications 200 12ms
2025-01-15 22:09:17 [INFO] POST /api/uploads 201 721ms
2025-01-15 22:09:23 [INFO] GET /api/health 200 1ms
2025-01-15 22:09:24 [INFO] POST /api/roles 201 42ms
2025-01-15 22:09:35 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 22:09:47 [INFO] GET /api/settings 200 5ms
2025-01-15 22:09:50 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 22:09:54 [INFO] POST /api/roles 201 58ms
2025-01-15 22:10:01 [INFO] GET /api/roles 200 8ms
2025-01-15 22:10:06 [INFO] GET /api/users/48 200 17ms
2025-01-15 22:10:13 [INFO] GET /api/roles 200 9ms
2025-01-15 22:10:27 [INFO] POST /api/auth/refresh 200 78ms
2025-01-15 22:10:35 [INFO] POST /api/auth/login 401 91ms
2025-01-15 22:10:44 [INFO] POST /api/uploads 201 1058ms
2025-01-15 22:10:54 [INFO] POST /api/roles 201 49ms
2025-01-15 22:11:09 [WARN] Request body exceeded soft limit (3179KB)
2025-01-15 22:11:22 [INFO] POST /api/roles 201 69ms
2025-01-15 22:11:27 [INFO] POST /api/users 201 81ms
2025-01-15 22:11:41 [INFO] GET /api/settings 200 11ms
2025-01-15 22:11:48 [INFO] GET /api/notifications 200 15ms
2025-01-15 22:12:02 [INFO] POST /api/users 201 129ms
2025-01-15 22:12:11 [INFO] POST /api/users 409 16ms
2025-01-15 22:12:15 [INFO] POST /api/uploads 201 1292ms
2025-01-15 22:12:26 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 22:12:35 [INFO] POST /api/roles 201 62ms
2025-01-15 22:12:39 [INFO] GET /api/roles 200 11ms
2025-01-15 22:12:50 [INFO] GET /api/health 200 2ms
2025-01-15 22:13:01 [INFO] GET /api/health 200 3ms
2025-01-15 22:13:08 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 22:13:08 [DEBUG] Rows returned: 50
2025-01-15 22:13:14 [INFO] GET /api/health 200 2ms
2025-01-15 22:13:23 [INFO] GET /api/health 200 1ms
2025-01-15 22:13:37 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 22:13:37 [DEBUG] Rows returned: 40
2025-01-15 22:13:49 [INFO] POST /api/auth/login 401 83ms
2025-01-15 22:13:53 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 22:13:57 [INFO] GET /api/health 200 2ms
2025-01-15 22:14:00 [INFO] POST /api/roles 201 57ms
2025-01-15 22:14:08 [INFO] GET /api/users/95 404 11ms
2025-01-15 22:14:14 [INFO] GET /api/settings 200 10ms
2025-01-15 22:14:21 [INFO] GET /api/users/61 404 16ms
2025-01-15 22:14:27 [INFO] GET /api/users/161 200 10ms
2025-01-15 22:14:41 [INFO] GET /api/settings 200 11ms
2025-01-15 22:14:53 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 22:14:57 [INFO] GET /api/health 200 3ms
2025-01-15 22:14:59 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 22:14:59 [DEBUG] Rows returned: 2
2025-01-15 22:15:00 [INFO] POST /api/users 201 114ms
2025-01-15 22:15:06 [INFO] POST /api/roles 201 69ms
2025-01-15 22:15:16 [INFO] POST /api/users 201 124ms
2025-01-15 22:15:26 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 22:15:26 [DEBUG] Rows returned: 7
2025-01-15 22:15:39 [INFO] GET /api/users?role=editor 200 24ms
2025-01-15 22:15:53 [INFO] GET /api/analytics/dashboard 200 426ms
2025-01-15 22:15:54 [INFO] GET /api/health 200 1ms
2025-01-15 22:16:01 [INFO] POST /api/auth/refresh 200 59ms
2025-01-15 22:16:03 [INFO] POST /api/auth/refresh 200 48ms
2025-01-15 22:16:07 [INFO] POST /api/users 201 91ms
2025-01-15 22:16:10 [INFO] POST /api/auth/login 401 72ms
2025-01-15 22:16:14 [INFO] GET /api/users/106 200 5ms
2025-01-15 22:16:21 [INFO] GET /api/health 200 2ms
2025-01-15 22:16:29 [INFO] GET /api/users?role=moderator 200 19ms
2025-01-15 22:16:44 [INFO] DELETE /api/users/104 204 24ms
2025-01-15 22:16:52 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 22:16:52 [DEBUG] Rows returned: 0
2025-01-15 22:16:53 [INFO] GET /api/health 200 2ms
2025-01-15 22:17:08 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 22:17:08 [DEBUG] Rows returned: 27
2025-01-15 22:17:17 [INFO] POST /api/auth/login 401 109ms
2025-01-15 22:17:19 [INFO] GET /api/health 200 1ms
2025-01-15 22:17:21 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 22:17:21 [DEBUG] Rows returned: 24
2025-01-15 22:17:29 [INFO] GET /api/health 200 3ms
2025-01-15 22:17:33 [INFO] GET /api/health 200 1ms
2025-01-15 22:17:39 [INFO] GET /api/health 200 1ms
2025-01-15 22:17:49 [INFO] GET /api/health 200 3ms
2025-01-15 22:18:04 [INFO] GET /api/users?page=5&limit=25 200 45ms
2025-01-15 22:18:06 [INFO] GET /api/health 200 2ms
2025-01-15 22:18:12 [INFO] GET /api/users 200 34ms
2025-01-15 22:18:26 [INFO] GET /api/notifications 200 18ms
2025-01-15 22:18:29 [INFO] GET /api/roles 200 6ms
2025-01-15 22:18:39 [INFO] GET /api/users 200 45ms
2025-01-15 22:18:51 [INFO] GET /api/notifications 200 11ms
2025-01-15 22:19:01 [INFO] POST /api/roles 201 44ms
2025-01-15 22:19:08 [INFO] DELETE /api/users/2 204 42ms
2025-01-15 22:19:21 [INFO] POST /api/roles 201 30ms
2025-01-15 22:19:31 [INFO] GET /api/health 200 2ms
2025-01-15 22:19:33 [INFO] GET /api/roles 200 5ms
2025-01-15 22:19:44 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 22:19:44 [DEBUG] Rows returned: 50
2025-01-15 22:19:52 [INFO] GET /api/roles 200 7ms
2025-01-15 22:19:58 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 22:20:01 [INFO] DELETE /api/users/55 204 34ms
2025-01-15 22:20:12 [INFO] GET /api/health 200 3ms
2025-01-15 22:20:18 [INFO] GET /api/users/117 404 15ms
2025-01-15 22:20:24 [INFO] PUT /api/settings 200 35ms
2025-01-15 22:20:25 [INFO] GET /api/health 200 1ms
2025-01-15 22:20:26 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 22:20:26 [DEBUG] Rows returned: 23
2025-01-15 22:20:41 [INFO] GET /api/health 200 1ms
2025-01-15 22:20:54 [INFO] POST /api/uploads 201 1499ms
2025-01-15 22:21:04 [INFO] POST /api/auth/login 200 232ms
2025-01-15 22:21:14 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 22:21:26 [INFO] POST /api/auth/login 200 138ms
2025-01-15 22:21:38 [INFO] PUT /api/users/95 200 82ms
2025-01-15 22:21:46 [INFO] GET /api/health 200 2ms
2025-01-15 22:22:00 [INFO] GET /api/settings 200 5ms
2025-01-15 22:22:08 [INFO] GET /api/users?role=editor 200 29ms
2025-01-15 22:22:10 [INFO] POST /api/users 409 22ms
2025-01-15 22:22:23 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 22:22:23 [DEBUG] Rows returned: 7
2025-01-15 22:22:32 [INFO] GET /api/health 200 3ms
2025-01-15 22:22:47 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 22:22:49 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 22:22:49 [DEBUG] Rows returned: 3
2025-01-15 22:23:03 [INFO] POST /api/users 201 147ms
2025-01-15 22:23:04 [INFO] GET /api/notifications 200 25ms
2025-01-15 22:23:17 [INFO] GET /api/roles 200 11ms
2025-01-15 22:23:26 [INFO] GET /api/users/27 404 18ms
2025-01-15 22:23:37 [INFO] GET /api/health 200 3ms
2025-01-15 22:23:52 [INFO] POST /api/auth/login 401 75ms
2025-01-15 22:24:03 [INFO] PUT /api/settings 200 27ms
2025-01-15 22:24:13 [INFO] GET /api/health 200 1ms
2025-01-15 22:24:14 [INFO] GET /api/users/53 404 11ms
2025-01-15 22:24:28 [WARN] S3 upload retry after timeout (1657ms)
2025-01-15 22:24:29 [INFO] GET /api/users?page=4&limit=25 200 42ms
2025-01-15 22:24:44 [INFO] GET /api/health 200 3ms
2025-01-15 22:24:51 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 22:24:57 [INFO] POST /api/uploads 201 1988ms
2025-01-15 22:25:05 [INFO] POST /api/auth/refresh 200 68ms
2025-01-15 22:25:09 [INFO] PUT /api/settings 200 39ms
2025-01-15 22:25:13 [INFO] GET /api/users?page=1&limit=25 200 36ms
2025-01-15 22:25:19 [INFO] GET /api/users 200 69ms
2025-01-15 22:25:26 [INFO] GET /api/health 200 2ms
2025-01-15 22:25:37 [INFO] POST /api/users 201 91ms
2025-01-15 22:25:47 [INFO] GET /api/settings 200 10ms
2025-01-15 22:25:51 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 22:26:02 [INFO] POST /api/uploads 201 1157ms
2025-01-15 22:26:13 [INFO] POST /api/users 201 109ms
2025-01-15 22:26:17 [INFO] GET /api/users?role=moderator 200 16ms
2025-01-15 22:26:20 [INFO] GET /api/roles 200 12ms
2025-01-15 22:26:29 [INFO] POST /api/users 409 16ms
2025-01-15 22:26:34 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 22:26:34 [DEBUG] Rows returned: 28
2025-01-15 22:26:38 [INFO] POST /api/users 409 17ms
2025-01-15 22:26:40 [INFO] POST /api/auth/refresh 200 30ms
2025-01-15 22:26:53 [INFO] GET /api/roles 200 15ms
2025-01-15 22:27:04 [INFO] GET /api/users?role=moderator 200 39ms
2025-01-15 22:27:18 [INFO] POST /api/auth/refresh 200 38ms
2025-01-15 22:27:29 [INFO] POST /api/roles 201 52ms
2025-01-15 22:27:33 [INFO] GET /api/users/18 200 16ms
2025-01-15 22:27:34 [INFO] GET /api/health 200 1ms
2025-01-15 22:27:49 [WARN] Rate limit exceeded for IP 192.168.5.132. Returning 429.
2025-01-15 22:28:00 [INFO] POST /api/auth/login 401 75ms
2025-01-15 22:28:10 [INFO] POST /api/uploads 201 1566ms
2025-01-15 22:28:19 [INFO] GET /api/health 200 3ms
2025-01-15 22:28:30 [WARN] Memory usage at 79% of allocated heap
2025-01-15 22:28:40 [INFO] GET /api/roles 200 5ms
2025-01-15 22:28:42 [INFO] GET /api/health 200 1ms
2025-01-15 22:28:51 [INFO] PUT /api/settings 200 29ms
2025-01-15 22:29:04 [INFO] GET /api/health 200 3ms
2025-01-15 22:29:14 [INFO] POST /api/auth/refresh 200 49ms
2025-01-15 22:29:27 [INFO] GET /api/users/26 200 20ms
2025-01-15 22:29:28 [INFO] GET /api/health 200 2ms
2025-01-15 22:29:36 [INFO] GET /api/users 200 43ms
2025-01-15 22:29:50 [WARN] Rate limit exceeded for IP 192.168.5.214. Returning 429.
2025-01-15 22:29:51 [WARN] Rate limit approaching for IP 192.168.5.204 (92/100 requests in window)
2025-01-15 22:29:55 [INFO] GET /api/health 200 1ms
2025-01-15 22:30:06 [INFO] GET /api/roles 200 14ms
2025-01-15 22:30:21 [INFO] GET /api/roles 200 11ms
2025-01-15 22:30:22 [INFO] GET /api/health 200 1ms
2025-01-15 22:30:37 [INFO] GET /api/users/14 200 16ms
2025-01-15 22:30:39 [INFO] GET /api/users?role=admin 200 35ms
2025-01-15 22:30:52 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 22:30:52 [DEBUG] Rows returned: 11
2025-01-15 22:30:53 [WARN] Rate limit exceeded for IP 192.168.2.125. Returning 429.
2025-01-15 22:30:54 [WARN] Deprecated API version v1 called by client client-4
2025-01-15 22:31:05 [INFO] POST /api/auth/login 200 232ms
2025-01-15 22:31:11 [ERROR] Worker process crashed. Restarting...
2025-01-15 22:31:13 [INFO] PUT /api/settings 200 55ms
2025-01-15 22:31:16 [INFO] GET /api/users?role=viewer 200 20ms
2025-01-15 22:31:19 [INFO] GET /api/settings 200 7ms
2025-01-15 22:31:29 [INFO] PUT /api/settings 200 27ms
2025-01-15 22:31:34 [INFO] GET /api/users/56 200 11ms
2025-01-15 22:31:44 [INFO] POST /api/users 409 10ms
2025-01-15 22:31:59 [INFO] POST /api/users 409 24ms
2025-01-15 22:32:04 [INFO] GET /api/health 200 1ms
2025-01-15 22:32:05 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 22:32:05 [DEBUG] New record created: id=381
2025-01-15 22:32:10 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 22:32:10 [DEBUG] Rows returned: 39
2025-01-15 22:32:19 [INFO] GET /api/notifications 200 29ms
2025-01-15 22:32:24 [INFO] POST /api/uploads 201 1728ms
2025-01-15 22:32:26 [INFO] POST /api/auth/login 200 126ms
2025-01-15 22:32:41 [INFO] GET /api/roles 200 8ms
2025-01-15 22:32:54 [INFO] GET /api/users/144 404 9ms
2025-01-15 22:32:58 [INFO] GET /api/users?role=editor 200 26ms
2025-01-15 22:33:05 [INFO] GET /api/health 200 3ms
2025-01-15 22:33:18 [INFO] DELETE /api/users/75 204 28ms
2025-01-15 22:33:33 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 22:33:33 [DEBUG] Rows returned: 46
2025-01-15 22:33:36 [INFO] GET /api/roles 200 12ms
2025-01-15 22:33:50 [INFO] DELETE /api/users/200 204 24ms
2025-01-15 22:33:56 [INFO] GET /api/roles 200 11ms
2025-01-15 22:34:04 [INFO] GET /api/health 200 2ms
2025-01-15 22:34:12 [INFO] POST /api/roles 201 42ms
2025-01-15 22:34:23 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-15 22:34:38 [INFO] GET /api/users 200 80ms
2025-01-15 22:34:41 [INFO] POST /api/auth/refresh 200 80ms
2025-01-15 22:34:46 [INFO] GET /api/health 200 1ms
2025-01-15 22:34:47 [INFO] PUT /api/users/179 200 44ms
2025-01-15 22:34:48 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 22:35:00 [INFO] GET /api/health 200 1ms
2025-01-15 22:35:05 [INFO] GET /api/health 200 1ms
2025-01-15 22:35:11 [INFO] POST /api/auth/login 401 105ms
2025-01-15 22:35:23 [INFO] GET /api/health 200 3ms
2025-01-15 22:35:33 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 22:35:36 [INFO] POST /api/auth/login 401 120ms
2025-01-15 22:35:42 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 22:35:51 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 22:35:51 [DEBUG] New record created: id=136
2025-01-15 22:36:04 [WARN] S3 upload retry after timeout (1080ms)
2025-01-15 22:36:11 [INFO] GET /api/analytics/dashboard 200 384ms
2025-01-15 22:36:22 [INFO] GET /api/health 200 2ms
2025-01-15 22:36:37 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 22:36:49 [INFO] GET /api/settings 200 8ms
2025-01-15 22:36:55 [INFO] POST /api/auth/refresh 200 30ms
2025-01-15 22:37:09 [INFO] GET /api/health 200 1ms
2025-01-15 22:37:21 [INFO] POST /api/roles 201 69ms
2025-01-15 22:37:31 [INFO] GET /api/health 200 2ms
2025-01-15 22:37:35 [INFO] GET /api/health 200 2ms
2025-01-15 22:37:42 [INFO] POST /api/auth/login 401 119ms
2025-01-15 22:37:57 [INFO] GET /api/users?role=viewer 200 34ms
2025-01-15 22:38:10 [INFO] GET /api/health 200 3ms
2025-01-15 22:38:15 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 22:38:27 [INFO] GET /api/users?page=3&limit=25 200 31ms
2025-01-15 22:38:31 [INFO] GET /api/health 200 1ms
2025-01-15 22:38:43 [INFO] GET /api/users?role=admin 200 24ms
2025-01-15 22:38:45 [INFO] PUT /api/users/169 200 87ms
2025-01-15 22:38:57 [WARN] Rate limit approaching for IP 192.168.7.128 (89/100 requests in window)
2025-01-15 22:39:01 [INFO] GET /api/users?page=3&limit=25 200 26ms
2025-01-15 22:39:06 [INFO] DELETE /api/users/128 204 27ms
2025-01-15 22:39:11 [INFO] GET /api/analytics/dashboard 200 403ms
2025-01-15 22:39:26 [WARN] Rate limit exceeded for IP 192.168.9.29. Returning 429.
2025-01-15 22:39:41 [INFO] GET /api/health 200 3ms
2025-01-15 22:39:55 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 22:39:55 [DEBUG] Rows returned: 36
2025-01-15 22:40:08 [INFO] POST /api/roles 201 38ms
2025-01-15 22:40:22 [INFO] POST /api/users 409 23ms
2025-01-15 22:40:26 [INFO] GET /api/health 200 2ms
2025-01-15 22:40:41 [INFO] GET /api/health 200 1ms
2025-01-15 22:40:43 [INFO] PUT /api/users/62 200 74ms
2025-01-15 22:40:52 [INFO] DELETE /api/users/14 204 45ms
2025-01-15 22:41:02 [INFO] GET /api/health 200 3ms
2025-01-15 22:41:16 [INFO] DELETE /api/users/137 204 45ms
2025-01-15 22:41:17 [INFO] POST /api/auth/login 401 54ms
2025-01-15 22:41:32 [INFO] GET /api/users/129 200 7ms
2025-01-15 22:41:44 [INFO] POST /api/uploads 201 775ms
2025-01-15 22:41:53 [INFO] POST /api/auth/login 401 110ms
2025-01-15 22:42:02 [INFO] PUT /api/users/48 200 76ms
2025-01-15 22:42:12 [INFO] GET /api/health 200 2ms
2025-01-15 22:42:16 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 22:42:16 [DEBUG] Rows returned: 31
2025-01-15 22:42:21 [INFO] PUT /api/users/79 200 46ms
2025-01-15 22:42:22 [INFO] GET /api/users/12 200 17ms
2025-01-15 22:42:23 [INFO] POST /api/roles 201 45ms
2025-01-15 22:42:29 [INFO] POST /api/auth/refresh 200 33ms
2025-01-15 22:42:41 [INFO] POST /api/users 201 125ms
2025-01-15 22:42:48 [INFO] GET /api/health 200 3ms
2025-01-15 22:42:56 [INFO] GET /api/users/126 200 20ms
2025-01-15 22:43:08 [INFO] POST /api/auth/refresh 200 77ms
2025-01-15 22:43:16 [WARN] Rate limit approaching for IP 192.168.8.119 (82/100 requests in window)
2025-01-15 22:43:25 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 22:43:30 [INFO] DELETE /api/users/10 204 23ms
2025-01-15 22:43:40 [INFO] GET /api/users?role=moderator 200 40ms
2025-01-15 22:43:54 [INFO] POST /api/auth/refresh 200 37ms
2025-01-15 22:44:03 [INFO] GET /api/health 200 3ms
2025-01-15 22:44:14 [INFO] GET /api/users/90 404 16ms
2025-01-15 22:44:20 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 22:44:22 [INFO] GET /api/health 200 3ms
2025-01-15 22:44:33 [INFO] POST /api/auth/login 200 192ms
2025-01-15 22:44:48 [INFO] POST /api/roles 201 67ms
2025-01-15 22:44:51 [INFO] GET /api/settings 200 11ms
2025-01-15 22:44:55 [INFO] POST /api/auth/login 401 56ms
2025-01-15 22:45:07 [INFO] GET /api/users/197 200 19ms
2025-01-15 22:45:16 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 22:45:16 [DEBUG] New record created: id=78
2025-01-15 22:45:27 [INFO] GET /api/health 200 2ms
2025-01-15 22:45:38 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 22:45:38 [DEBUG] Rows returned: 21
2025-01-15 22:45:51 [INFO] GET /api/users?role=viewer 200 29ms
2025-01-15 22:46:04 [WARN] Redis reconnection attempt 94/5
2025-01-15 22:46:19 [INFO] GET /api/health 200 3ms
2025-01-15 22:46:31 [INFO] GET /api/health 200 1ms
2025-01-15 22:46:44 [INFO] GET /api/users 200 74ms
2025-01-15 22:46:47 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 22:46:47 [DEBUG] Rows returned: 17
2025-01-15 22:46:48 [INFO] GET /api/health 200 3ms
2025-01-15 22:46:53 [INFO] GET /api/users/32 200 17ms
2025-01-15 22:46:55 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 22:46:55 [DEBUG] Rows returned: 42
2025-01-15 22:47:03 [INFO] GET /api/health 200 3ms
2025-01-15 22:47:08 [INFO] POST /api/auth/login 401 103ms
2025-01-15 22:47:13 [WARN] Rate limit exceeded for IP 192.168.5.77. Returning 429.
2025-01-15 22:47:21 [INFO] GET /api/health 200 1ms
2025-01-15 22:47:25 [INFO] GET /api/users?role=admin 200 36ms
2025-01-15 22:47:30 [INFO] GET /api/health 200 2ms
2025-01-15 22:47:44 [INFO] POST /api/auth/login 401 57ms
2025-01-15 22:47:57 [INFO] GET /api/users 200 31ms
2025-01-15 22:48:10 [INFO] PUT /api/settings 200 45ms
2025-01-15 22:48:24 [INFO] POST /api/roles 201 63ms
2025-01-15 22:48:26 [INFO] PUT /api/users/16 200 67ms
2025-01-15 22:48:39 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-15 22:48:51 [INFO] GET /api/users?page=2&limit=25 200 54ms
2025-01-15 22:48:57 [INFO] GET /api/analytics/dashboard 200 477ms
2025-01-15 22:49:01 [WARN] JWT token expires in less than 60 seconds for user 177
2025-01-15 22:49:07 [INFO] POST /api/users 201 106ms
2025-01-15 22:49:09 [INFO] GET /api/users?role=admin 200 18ms
2025-01-15 22:49:19 [INFO] GET /api/health 200 1ms
2025-01-15 22:49:30 [INFO] POST /api/auth/login 200 163ms
2025-01-15 22:49:42 [INFO] GET /api/settings 200 10ms
2025-01-15 22:49:56 [INFO] GET /api/users/173 200 10ms
2025-01-15 22:50:07 [INFO] GET /api/health 200 2ms
2025-01-15 22:50:18 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 22:50:29 [INFO] POST /api/auth/login 401 63ms
2025-01-15 22:50:40 [INFO] PUT /api/settings 200 29ms
2025-01-15 22:50:47 [INFO] GET /api/health 200 1ms
2025-01-15 22:50:56 [INFO] GET /api/users?role=editor 200 39ms
2025-01-15 22:51:09 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 22:51:21 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 22:51:21 [DEBUG] Rows returned: 3
2025-01-15 22:51:30 [INFO] PUT /api/settings 200 31ms
2025-01-15 22:51:43 [INFO] PUT /api/users/89 200 54ms
2025-01-15 22:51:57 [INFO] GET /api/users 200 66ms
2025-01-15 22:52:00 [INFO] GET /api/health 200 2ms
2025-01-15 22:52:01 [INFO] GET /api/health 200 3ms
2025-01-15 22:52:12 [INFO] GET /api/settings 200 10ms
2025-01-15 22:52:17 [INFO] GET /api/health 200 2ms
2025-01-15 22:52:32 [INFO] POST /api/users 409 25ms
2025-01-15 22:52:40 [INFO] GET /api/roles 200 14ms
2025-01-15 22:52:44 [INFO] POST /api/auth/login 401 105ms
2025-01-15 22:52:45 [INFO] POST /api/uploads 201 1109ms
2025-01-15 22:52:54 [INFO] POST /api/auth/refresh 200 61ms
2025-01-15 22:53:02 [INFO] POST /api/uploads 201 542ms
2025-01-15 22:53:12 [INFO] GET /api/users/6 404 15ms
2025-01-15 22:53:15 [INFO] GET /api/health 200 2ms
2025-01-15 22:53:28 [ERROR] Database connection timeout after 5000ms
2025-01-15 22:53:29 [INFO] PUT /api/settings 200 49ms
2025-01-15 22:53:30 [INFO] POST /api/users 201 93ms
2025-01-15 22:53:42 [INFO] PUT /api/users/32 200 53ms
2025-01-15 22:53:45 [INFO] DELETE /api/users/192 204 41ms
2025-01-15 22:53:56 [INFO] GET /api/notifications 200 24ms
2025-01-15 22:54:05 [INFO] POST /api/users 201 91ms
2025-01-15 22:54:18 [INFO] GET /api/health 200 3ms
2025-01-15 22:54:33 [INFO] POST /api/auth/login 401 89ms
2025-01-15 22:54:43 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 22:54:43 [DEBUG] Rows returned: 45
2025-01-15 22:54:53 [INFO] POST /api/auth/refresh 200 58ms
2025-01-15 22:55:05 [INFO] GET /api/users/127 404 15ms
2025-01-15 22:55:17 [INFO] DELETE /api/users/34 204 48ms
2025-01-15 22:55:18 [INFO] PUT /api/settings 200 50ms
2025-01-15 22:55:25 [INFO] POST /api/auth/login 401 55ms
2025-01-15 22:55:30 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 22:55:30 [DEBUG] Rows returned: 21
2025-01-15 22:55:41 [INFO] GET /api/users/42 200 7ms
2025-01-15 22:55:43 [WARN] Deprecated API version v1 called by client client-2
2025-01-15 22:55:54 [INFO] GET /api/users?role=viewer 200 40ms
2025-01-15 22:56:09 [INFO] POST /api/users 201 141ms
2025-01-15 22:56:22 [INFO] PUT /api/users/160 200 84ms
2025-01-15 22:56:27 [INFO] DELETE /api/users/164 204 43ms
2025-01-15 22:56:40 [INFO] POST /api/auth/refresh 200 56ms
2025-01-15 22:56:53 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 22:56:53 [DEBUG] New record created: id=90
2025-01-15 22:57:07 [WARN] Rate limit approaching for IP 192.168.3.98 (80/100 requests in window)
2025-01-15 22:57:12 [INFO] GET /api/roles 200 15ms
2025-01-15 22:57:25 [INFO] GET /api/users?role=moderator 200 26ms
2025-01-15 22:57:40 [INFO] DELETE /api/users/29 204 25ms
2025-01-15 22:57:41 [INFO] POST /api/uploads 201 1428ms
2025-01-15 22:57:45 [INFO] GET /api/settings 200 8ms
2025-01-15 22:57:59 [INFO] POST /api/auth/refresh 200 69ms
2025-01-15 22:58:07 [ERROR] Worker process crashed. Restarting...
2025-01-15 22:58:22 [ERROR] Worker process crashed. Restarting...
2025-01-15 22:58:33 [INFO] GET /api/health 200 3ms
2025-01-15 22:58:34 [INFO] POST /api/auth/login 401 57ms
2025-01-15 22:58:42 [INFO] GET /api/health 200 1ms
2025-01-15 22:58:55 [INFO] GET /api/settings 200 7ms
2025-01-15 22:58:59 [INFO] GET /api/users?role=moderator 200 19ms
2025-01-15 22:59:03 [INFO] GET /api/users?role=moderator 200 18ms
2025-01-15 22:59:11 [INFO] PUT /api/settings 200 32ms
2025-01-15 22:59:12 [INFO] GET /api/health 200 3ms
2025-01-15 22:59:21 [INFO] POST /api/auth/login 401 109ms
2025-01-15 22:59:27 [INFO] GET /api/roles 200 5ms
2025-01-15 22:59:35 [INFO] POST /api/uploads 201 1556ms
2025-01-15 22:59:47 [INFO] GET /api/health 200 2ms
2025-01-15 22:59:53 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 22:59:53 [DEBUG] Rows returned: 0
2025-01-15 23:00:03 [INFO] GET /api/users/78 404 12ms
2025-01-15 23:00:13 [INFO] GET /api/health 200 2ms
2025-01-15 23:00:16 [WARN] Request body exceeded soft limit (1958KB)
2025-01-15 23:00:23 [WARN] Rate limit approaching for IP 192.168.5.197 (84/100 requests in window)
2025-01-15 23:00:32 [INFO] GET /api/users?role=viewer 200 19ms
2025-01-15 23:00:34 [INFO] POST /api/auth/login 200 151ms
2025-01-15 23:00:48 [INFO] POST /api/roles 201 58ms
2025-01-15 23:00:53 [WARN] JWT token expires in less than 60 seconds for user 137
2025-01-15 23:00:59 [INFO] PUT /api/settings 200 45ms
2025-01-15 23:01:10 [INFO] GET /api/health 200 2ms
2025-01-15 23:01:18 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 23:01:18 [DEBUG] Rows returned: 18
2025-01-15 23:01:20 [INFO] PUT /api/settings 200 40ms
2025-01-15 23:01:24 [INFO] GET /api/users 200 61ms
2025-01-15 23:01:28 [INFO] GET /api/health 200 1ms
2025-01-15 23:01:35 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 23:01:35 [DEBUG] Rows returned: 43
2025-01-15 23:01:46 [INFO] POST /api/users 201 149ms
2025-01-15 23:01:47 [INFO] GET /api/health 200 3ms
2025-01-15 23:01:57 [INFO] GET /api/users?page=3&limit=25 200 50ms
2025-01-15 23:02:10 [INFO] POST /api/auth/login 401 78ms
2025-01-15 23:02:21 [WARN] Rate limit exceeded for IP 192.168.6.199. Returning 429.
2025-01-15 23:02:36 [INFO] POST /api/users 409 10ms
2025-01-15 23:02:37 [INFO] GET /api/users?role=viewer 200 18ms
2025-01-15 23:02:43 [INFO] POST /api/roles 201 54ms
2025-01-15 23:02:44 [INFO] POST /api/uploads 201 1505ms
2025-01-15 23:02:57 [INFO] POST /api/auth/login 401 53ms
2025-01-15 23:03:01 [WARN] Memory usage at 87% of allocated heap
2025-01-15 23:03:11 [INFO] POST /api/auth/login 401 106ms
2025-01-15 23:03:25 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 23:03:25 [DEBUG] Rows returned: 1
2025-01-15 23:03:37 [INFO] GET /api/users 200 56ms
2025-01-15 23:03:42 [WARN] Rate limit approaching for IP 192.168.4.64 (94/100 requests in window)
2025-01-15 23:03:52 [INFO] GET /api/analytics/dashboard 200 596ms
2025-01-15 23:04:01 [INFO] POST /api/auth/login 200 147ms
2025-01-15 23:04:15 [INFO] GET /api/users?page=3&limit=25 200 25ms
2025-01-15 23:04:27 [INFO] GET /api/users?page=4&limit=25 200 32ms
2025-01-15 23:04:36 [INFO] POST /api/uploads 201 637ms
2025-01-15 23:04:41 [INFO] GET /api/notifications 200 18ms
2025-01-15 23:04:43 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 23:04:52 [INFO] POST /api/users 409 15ms
2025-01-15 23:04:54 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 23:04:54 [DEBUG] New record created: id=154
2025-01-15 23:05:06 [INFO] GET /api/settings 200 10ms
2025-01-15 23:05:16 [INFO] GET /api/health 200 1ms
2025-01-15 23:05:24 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 23:05:24 [DEBUG] Rows returned: 13
2025-01-15 23:05:38 [WARN] Slow query detected: UPDATE users SET active = false WHERE id = $1 (took 1771ms)
2025-01-15 23:05:53 [INFO] GET /api/health 200 1ms
2025-01-15 23:05:59 [INFO] GET /api/health 200 3ms
2025-01-15 23:06:04 [INFO] POST /api/auth/refresh 200 30ms
2025-01-15 23:06:09 [INFO] POST /api/uploads 201 673ms
2025-01-15 23:06:24 [INFO] POST /api/roles 201 61ms
2025-01-15 23:06:39 [INFO] GET /api/health 200 3ms
2025-01-15 23:06:47 [INFO] GET /api/health 200 2ms
2025-01-15 23:07:02 [INFO] GET /api/analytics/dashboard 200 610ms
2025-01-15 23:07:16 [INFO] POST /api/auth/login 200 102ms
2025-01-15 23:07:25 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 23:07:25 [DEBUG] Rows returned: 41
2025-01-15 23:07:28 [INFO] POST /api/roles 201 34ms
2025-01-15 23:07:36 [INFO] POST /api/roles 201 38ms
2025-01-15 23:07:46 [INFO] GET /api/analytics/dashboard 200 506ms
2025-01-15 23:07:58 [INFO] POST /api/users 409 21ms
2025-01-15 23:08:10 [INFO] PUT /api/settings 200 53ms
2025-01-15 23:08:17 [INFO] GET /api/health 200 2ms
2025-01-15 23:08:18 [INFO] GET /api/analytics/dashboard 200 642ms
2025-01-15 23:08:22 [INFO] DELETE /api/users/42 204 27ms
2025-01-15 23:08:23 [INFO] POST /api/uploads 201 989ms
2025-01-15 23:08:27 [INFO] GET /api/health 200 1ms
2025-01-15 23:08:29 [WARN] Redis reconnection attempt 91/5
2025-01-15 23:08:35 [INFO] GET /api/users?role=editor 200 26ms
2025-01-15 23:08:38 [INFO] GET /api/users/88 404 11ms
2025-01-15 23:08:45 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 23:08:51 [INFO] GET /api/notifications 200 24ms
2025-01-15 23:09:01 [INFO] GET /api/health 200 1ms
2025-01-15 23:09:12 [INFO] GET /api/users/169 200 16ms
2025-01-15 23:09:19 [WARN] S3 upload retry after timeout (806ms)
2025-01-15 23:09:30 [INFO] POST /api/auth/refresh 200 73ms
2025-01-15 23:09:37 [WARN] Rate limit approaching for IP 192.168.10.29 (93/100 requests in window)
2025-01-15 23:09:42 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 23:09:42 [DEBUG] Rows returned: 45
2025-01-15 23:09:45 [INFO] POST /api/auth/login 200 210ms
2025-01-15 23:09:54 [INFO] GET /api/health 200 1ms
2025-01-15 23:10:02 [WARN] JWT token expires in less than 60 seconds for user 34
2025-01-15 23:10:13 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 23:10:27 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 23:10:27 [DEBUG] Rows returned: 8
2025-01-15 23:10:41 [INFO] POST /api/uploads 201 706ms
2025-01-15 23:10:56 [INFO] GET /api/users?page=5&limit=25 200 27ms
2025-01-15 23:11:07 [INFO] GET /api/users?page=2&limit=25 200 44ms
2025-01-15 23:11:21 [ERROR] Unhandled exception in GET /api/roles: ValidationError
2025-01-15 23:11:21 [ERROR] Stack trace:
    at validateRequest (src/middleware/validation.ts:118)
    at authenticate (src/middleware/auth.ts:190)
    at Layer.handle (node_modules/express/lib/router/layer.js:28)
    at AuthService.validateToken (src/services/auth.service.ts:277)
    at processTicksAndRejections (node:internal/process/task_queues:89)
    at Router.handle (node_modules/express/lib/router/index.js:157)
2025-01-15 23:11:25 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 23:11:25 [DEBUG] Rows returned: 8
2025-01-15 23:11:31 [INFO] POST /api/uploads 201 981ms
2025-01-15 23:11:32 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 23:11:32 [DEBUG] Rows returned: 20
2025-01-15 23:11:46 [INFO] GET /api/notifications 200 15ms
2025-01-15 23:11:47 [INFO] POST /api/roles 201 52ms
2025-01-15 23:11:48 [INFO] GET /api/users?page=2&limit=25 200 36ms
2025-01-15 23:11:57 [INFO] GET /api/settings 200 7ms
2025-01-15 23:12:02 [INFO] POST /api/roles 201 69ms
2025-01-15 23:12:03 [INFO] GET /api/users/172 404 18ms
2025-01-15 23:12:09 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 23:12:24 [INFO] GET /api/analytics/dashboard 200 646ms
2025-01-15 23:12:30 [INFO] POST /api/auth/refresh 200 38ms
2025-01-15 23:12:38 [INFO] DELETE /api/users/87 204 37ms
2025-01-15 23:12:53 [INFO] POST /api/auth/refresh 200 56ms
2025-01-15 23:13:00 [INFO] DELETE /api/users/149 204 43ms
2025-01-15 23:13:14 [INFO] GET /api/roles 200 7ms
2025-01-15 23:13:16 [INFO] GET /api/users/54 404 18ms
2025-01-15 23:13:20 [INFO] POST /api/auth/login 401 119ms
2025-01-15 23:13:30 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 23:13:30 [DEBUG] Rows returned: 32
2025-01-15 23:13:33 [INFO] GET /api/health 200 2ms
2025-01-15 23:13:41 [INFO] GET /api/settings 200 5ms
2025-01-15 23:13:45 [INFO] GET /api/users/177 404 15ms
2025-01-15 23:13:51 [INFO] GET /api/settings 200 12ms
2025-01-15 23:14:02 [WARN] Memory usage at 80% of allocated heap
2025-01-15 23:14:14 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 23:14:16 [INFO] GET /api/roles 200 9ms
2025-01-15 23:14:31 [INFO] GET /api/roles 200 7ms
2025-01-15 23:14:43 [INFO] GET /api/health 200 2ms
2025-01-15 23:14:53 [INFO] POST /api/users 201 139ms
2025-01-15 23:15:04 [INFO] POST /api/auth/refresh 200 40ms
2025-01-15 23:15:12 [INFO] GET /api/notifications 200 13ms
2025-01-15 23:15:13 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 23:15:17 [INFO] GET /api/users?page=1&limit=25 200 27ms
2025-01-15 23:15:27 [INFO] GET /api/users 200 65ms
2025-01-15 23:15:30 [INFO] POST /api/auth/login 401 92ms
2025-01-15 23:15:35 [INFO] POST /api/uploads 201 839ms
2025-01-15 23:15:44 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 23:15:44 [DEBUG] Rows returned: 41
2025-01-15 23:15:45 [INFO] GET /api/roles 200 7ms
2025-01-15 23:15:57 [INFO] POST /api/auth/login 200 172ms
2025-01-15 23:16:11 [INFO] GET /api/health 200 2ms
2025-01-15 23:16:16 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 23:16:16 [DEBUG] Rows returned: 12
2025-01-15 23:16:22 [INFO] GET /api/users?role=editor 200 39ms
2025-01-15 23:16:24 [INFO] GET /api/health 200 3ms
2025-01-15 23:16:30 [INFO] GET /api/analytics/dashboard 200 779ms
2025-01-15 23:16:36 [WARN] Request body exceeded soft limit (2293KB)
2025-01-15 23:16:48 [INFO] POST /api/users 409 18ms
2025-01-15 23:16:59 [INFO] GET /api/health 200 1ms
2025-01-15 23:17:05 [INFO] GET /api/roles 200 14ms
2025-01-15 23:17:16 [INFO] PUT /api/users/117 200 71ms
2025-01-15 23:17:23 [INFO] GET /api/roles 200 11ms
2025-01-15 23:17:28 [INFO] POST /api/users 409 12ms
2025-01-15 23:17:32 [INFO] GET /api/health 200 1ms
2025-01-15 23:17:35 [INFO] POST /api/users 201 105ms
2025-01-15 23:17:41 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 23:17:41 [DEBUG] New record created: id=209
2025-01-15 23:17:56 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 23:18:02 [INFO] POST /api/roles 201 65ms
2025-01-15 23:18:07 [INFO] POST /api/auth/login 401 56ms
2025-01-15 23:18:22 [INFO] POST /api/uploads 201 1325ms
2025-01-15 23:18:30 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 23:18:30 [DEBUG] Rows returned: 3
2025-01-15 23:18:38 [INFO] POST /api/roles 201 55ms
2025-01-15 23:18:45 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 23:18:45 [DEBUG] Rows returned: 35
2025-01-15 23:18:49 [INFO] GET /api/health 200 3ms
2025-01-15 23:18:56 [INFO] GET /api/users?page=5&limit=25 200 45ms
2025-01-15 23:19:02 [INFO] GET /api/users?role=moderator 200 33ms
2025-01-15 23:19:10 [INFO] GET /api/health 200 2ms
2025-01-15 23:19:17 [INFO] POST /api/users 201 137ms
2025-01-15 23:19:29 [INFO] GET /api/health 200 2ms
2025-01-15 23:19:33 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 23:19:45 [INFO] GET /api/health 200 2ms
2025-01-15 23:20:00 [INFO] PUT /api/settings 200 23ms
2025-01-15 23:20:12 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 23:20:12 [DEBUG] Rows returned: 11
2025-01-15 23:20:16 [INFO] GET /api/health 200 3ms
2025-01-15 23:20:20 [INFO] GET /api/roles 200 6ms
2025-01-15 23:20:21 [INFO] POST /api/roles 201 64ms
2025-01-15 23:20:22 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 23:20:35 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 23:20:35 [DEBUG] New record created: id=406
2025-01-15 23:20:44 [WARN] S3 upload retry after timeout (856ms)
2025-01-15 23:20:53 [WARN] S3 upload retry after timeout (963ms)
2025-01-15 23:21:07 [INFO] POST /api/uploads 201 1615ms
2025-01-15 23:21:11 [INFO] GET /api/users/102 404 15ms
2025-01-15 23:21:18 [INFO] POST /api/users 201 143ms
2025-01-15 23:21:28 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 23:21:30 [INFO] GET /api/users/129 404 8ms
2025-01-15 23:21:31 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 23:21:41 [INFO] POST /api/users 201 111ms
2025-01-15 23:21:55 [INFO] GET /api/health 200 3ms
2025-01-15 23:22:08 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 23:22:08 [DEBUG] Rows returned: 4
2025-01-15 23:22:13 [INFO] GET /api/health 200 3ms
2025-01-15 23:22:22 [INFO] POST /api/users 409 17ms
2025-01-15 23:22:24 [INFO] POST /api/auth/login 401 64ms
2025-01-15 23:22:27 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 23:22:28 [INFO] GET /api/health 200 1ms
2025-01-15 23:22:30 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-15 23:22:30 [DEBUG] Rows returned: 31
2025-01-15 23:22:41 [INFO] GET /api/settings 200 5ms
2025-01-15 23:22:53 [INFO] GET /api/settings 200 11ms
2025-01-15 23:23:07 [INFO] PUT /api/users/194 200 59ms
2025-01-15 23:23:16 [INFO] PUT /api/users/131 200 63ms
2025-01-15 23:23:31 [INFO] POST /api/roles 201 57ms
2025-01-15 23:23:41 [INFO] POST /api/auth/refresh 200 58ms
2025-01-15 23:23:42 [INFO] POST /api/users 201 112ms
2025-01-15 23:23:43 [INFO] DELETE /api/users/169 204 49ms
2025-01-15 23:23:55 [INFO] GET /api/settings 200 8ms
2025-01-15 23:23:58 [INFO] GET /api/health 200 3ms
2025-01-15 23:24:02 [INFO] GET /api/users/140 200 16ms
2025-01-15 23:24:05 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 23:24:05 [DEBUG] Rows returned: 10
2025-01-15 23:24:11 [INFO] GET /api/users 200 32ms
2025-01-15 23:24:13 [INFO] GET /api/settings 200 8ms
2025-01-15 23:24:16 [INFO] GET /api/health 200 2ms
2025-01-15 23:24:27 [INFO] GET /api/users/103 200 8ms
2025-01-15 23:24:29 [INFO] GET /api/health 200 2ms
2025-01-15 23:24:42 [INFO] GET /api/health 200 3ms
2025-01-15 23:24:49 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-15 23:24:50 [INFO] GET /api/users/86 404 14ms
2025-01-15 23:25:04 [INFO] POST /api/users 409 10ms
2025-01-15 23:25:07 [INFO] PUT /api/settings 200 50ms
2025-01-15 23:25:18 [INFO] GET /api/health 200 2ms
2025-01-15 23:25:22 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 23:25:22 [DEBUG] Rows returned: 18
2025-01-15 23:25:33 [INFO] PUT /api/users/20 200 43ms
2025-01-15 23:25:44 [INFO] POST /api/auth/refresh 200 63ms
2025-01-15 23:25:49 [INFO] POST /api/users 409 25ms
2025-01-15 23:25:57 [INFO] GET /api/analytics/dashboard 200 662ms
2025-01-15 23:26:07 [INFO] GET /api/health 200 3ms
2025-01-15 23:26:15 [INFO] POST /api/roles 201 44ms
2025-01-15 23:26:21 [INFO] GET /api/health 200 2ms
2025-01-15 23:26:24 [INFO] PUT /api/settings 200 55ms
2025-01-15 23:26:27 [INFO] GET /api/users/177 404 8ms
2025-01-15 23:26:33 [INFO] POST /api/users 409 10ms
2025-01-15 23:26:40 [INFO] GET /api/health 200 2ms
2025-01-15 23:26:49 [INFO] PUT /api/settings 200 21ms
2025-01-15 23:26:52 [INFO] POST /api/auth/login 200 220ms
2025-01-15 23:27:03 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 23:27:17 [WARN] Rate limit approaching for IP 192.168.8.13 (92/100 requests in window)
2025-01-15 23:27:27 [INFO] GET /api/notifications 200 30ms
2025-01-15 23:27:38 [INFO] GET /api/roles 200 5ms
2025-01-15 23:27:43 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 23:27:43 [DEBUG] New record created: id=400
2025-01-15 23:27:45 [WARN] Redis reconnection attempt 81/5
2025-01-15 23:27:57 [INFO] POST /api/auth/login 200 118ms
2025-01-15 23:28:07 [INFO] GET /api/health 200 1ms
2025-01-15 23:28:12 [INFO] GET /api/health 200 3ms
2025-01-15 23:28:15 [INFO] GET /api/health 200 2ms
2025-01-15 23:28:22 [INFO] GET /api/users/124 200 9ms
2025-01-15 23:28:37 [INFO] PUT /api/users/143 200 85ms
2025-01-15 23:28:43 [WARN] Memory usage at 79% of allocated heap
2025-01-15 23:28:46 [INFO] GET /api/users?page=5&limit=25 200 42ms
2025-01-15 23:28:55 [INFO] GET /api/analytics/dashboard 200 710ms
2025-01-15 23:28:58 [ERROR] Worker process crashed. Restarting...
2025-01-15 23:29:13 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 23:29:13 [DEBUG] Rows returned: 10
2025-01-15 23:29:25 [WARN] Slow query detected: DELETE FROM sessions WHERE expires_at < NOW() (took 797ms)
2025-01-15 23:29:38 [INFO] POST /api/uploads 201 1887ms
2025-01-15 23:29:46 [INFO] POST /api/uploads 201 1886ms
2025-01-15 23:29:52 [INFO] DELETE /api/users/155 204 43ms
2025-01-15 23:30:01 [INFO] POST /api/auth/refresh 200 60ms
2025-01-15 23:30:05 [INFO] DELETE /api/users/61 204 50ms
2025-01-15 23:30:12 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 23:30:12 [DEBUG] Rows returned: 6
2025-01-15 23:30:19 [INFO] DELETE /api/users/70 204 28ms
2025-01-15 23:30:31 [INFO] GET /api/health 200 1ms
2025-01-15 23:30:37 [INFO] PUT /api/users/66 200 66ms
2025-01-15 23:30:41 [INFO] GET /api/notifications 200 16ms
2025-01-15 23:30:45 [INFO] GET /api/users 200 48ms
2025-01-15 23:30:51 [INFO] GET /api/health 200 1ms
2025-01-15 23:31:03 [WARN] Memory usage at 77% of allocated heap
2025-01-15 23:31:09 [INFO] GET /api/settings 200 10ms
2025-01-15 23:31:17 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-15 23:31:17 [DEBUG] New record created: id=441
2025-01-15 23:31:31 [INFO] POST /api/uploads 201 1780ms
2025-01-15 23:31:44 [INFO] DELETE /api/users/130 204 22ms
2025-01-15 23:31:47 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 23:31:47 [DEBUG] Rows returned: 26
2025-01-15 23:31:52 [INFO] GET /api/health 200 3ms
2025-01-15 23:32:02 [INFO] GET /api/roles 200 7ms
2025-01-15 23:32:12 [INFO] GET /api/notifications 200 24ms
2025-01-15 23:32:24 [INFO] PUT /api/users/167 200 88ms
2025-01-15 23:32:35 [INFO] GET /api/users/93 404 8ms
2025-01-15 23:32:43 [INFO] GET /api/users/67 404 16ms
2025-01-15 23:32:47 [INFO] GET /api/health 200 2ms
2025-01-15 23:33:02 [INFO] DELETE /api/users/13 204 46ms
2025-01-15 23:33:17 [INFO] GET /api/roles 200 5ms
2025-01-15 23:33:29 [INFO] POST /api/users 201 110ms
2025-01-15 23:33:41 [INFO] POST /api/auth/login 200 112ms
2025-01-15 23:33:55 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 23:34:06 [INFO] POST /api/auth/login 401 53ms
2025-01-15 23:34:13 [INFO] GET /api/health 200 3ms
2025-01-15 23:34:24 [INFO] POST /api/auth/refresh 200 80ms
2025-01-15 23:34:26 [INFO] GET /api/analytics/dashboard 200 546ms
2025-01-15 23:34:27 [INFO] GET /api/roles 200 14ms
2025-01-15 23:34:28 [INFO] POST /api/users 409 16ms
2025-01-15 23:34:30 [INFO] GET /api/health 200 2ms
2025-01-15 23:34:33 [INFO] PUT /api/settings 200 34ms
2025-01-15 23:34:44 [INFO] POST /api/users 409 18ms
2025-01-15 23:34:56 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 23:34:56 [DEBUG] New record created: id=201
2025-01-15 23:34:59 [INFO] POST /api/auth/refresh 200 69ms
2025-01-15 23:35:09 [INFO] GET /api/health 200 2ms
2025-01-15 23:35:18 [INFO] GET /api/health 200 1ms
2025-01-15 23:35:19 [WARN] Rate limit approaching for IP 192.168.5.215 (88/100 requests in window)
2025-01-15 23:35:30 [INFO] GET /api/analytics/dashboard 200 633ms
2025-01-15 23:35:32 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 23:35:32 [DEBUG] Rows returned: 37
2025-01-15 23:35:38 [INFO] GET /api/users?role=viewer 200 25ms
2025-01-15 23:35:49 [INFO] POST /api/auth/login 401 114ms
2025-01-15 23:35:52 [INFO] GET /api/health 200 2ms
2025-01-15 23:36:02 [INFO] PUT /api/settings 200 48ms
2025-01-15 23:36:09 [INFO] POST /api/roles 201 53ms
2025-01-15 23:36:19 [INFO] GET /api/roles 200 5ms
2025-01-15 23:36:32 [INFO] DELETE /api/users/146 204 30ms
2025-01-15 23:36:45 [INFO] GET /api/health 200 3ms
2025-01-15 23:36:52 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 23:36:52 [DEBUG] Rows returned: 27
2025-01-15 23:37:04 [INFO] PUT /api/settings 200 39ms
2025-01-15 23:37:15 [INFO] POST /api/auth/login 200 120ms
2025-01-15 23:37:28 [INFO] GET /api/users 200 49ms
2025-01-15 23:37:31 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 23:37:31 [DEBUG] Rows returned: 19
2025-01-15 23:37:45 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 23:37:45 [DEBUG] Rows returned: 33
2025-01-15 23:37:46 [INFO] GET /api/health 200 1ms
2025-01-15 23:38:00 [INFO] GET /api/settings 200 10ms
2025-01-15 23:38:13 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 23:38:19 [INFO] DELETE /api/users/87 204 40ms
2025-01-15 23:38:23 [INFO] POST /api/auth/refresh 200 58ms
2025-01-15 23:38:35 [INFO] GET /api/health 200 3ms
2025-01-15 23:38:50 [INFO] GET /api/users?role=editor 200 23ms
2025-01-15 23:38:59 [INFO] GET /api/health 200 3ms
2025-01-15 23:39:05 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 23:39:05 [DEBUG] Rows returned: 9
2025-01-15 23:39:11 [INFO] POST /api/users 409 24ms
2025-01-15 23:39:24 [INFO] GET /api/users 200 74ms
2025-01-15 23:39:27 [INFO] GET /api/health 200 2ms
2025-01-15 23:39:37 [INFO] GET /api/health 200 1ms
2025-01-15 23:39:47 [INFO] POST /api/auth/login 401 100ms
2025-01-15 23:39:55 [INFO] GET /api/settings 200 5ms
2025-01-15 23:40:09 [INFO] GET /api/notifications 200 24ms
2025-01-15 23:40:10 [INFO] GET /api/roles 200 14ms
2025-01-15 23:40:22 [INFO] POST /api/users 201 120ms
2025-01-15 23:40:30 [INFO] GET /api/health 200 1ms
2025-01-15 23:40:44 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 23:40:44 [DEBUG] Rows returned: 4
2025-01-15 23:40:56 [ERROR] Failed to send email: SMTP connection refused
2025-01-15 23:40:59 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 23:40:59 [DEBUG] Rows returned: 4
2025-01-15 23:41:04 [INFO] POST /api/auth/login 401 84ms
2025-01-15 23:41:05 [INFO] POST /api/users 201 106ms
2025-01-15 23:41:10 [INFO] GET /api/health 200 1ms
2025-01-15 23:41:12 [INFO] GET /api/analytics/dashboard 200 659ms
2025-01-15 23:41:15 [INFO] POST /api/auth/login 200 229ms
2025-01-15 23:41:16 [INFO] PUT /api/settings 200 44ms
2025-01-15 23:41:17 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-15 23:41:22 [INFO] GET /api/notifications 200 23ms
2025-01-15 23:41:33 [INFO] GET /api/health 200 2ms
2025-01-15 23:41:34 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 23:41:34 [DEBUG] Rows returned: 1
2025-01-15 23:41:45 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 23:41:47 [INFO] POST /api/uploads 201 1901ms
2025-01-15 23:42:02 [INFO] GET /api/settings 200 11ms
2025-01-15 23:42:10 [WARN] JWT token expires in less than 60 seconds for user 90
2025-01-15 23:42:15 [INFO] GET /api/users 200 32ms
2025-01-15 23:42:25 [INFO] GET /api/roles 200 6ms
2025-01-15 23:42:40 [INFO] POST /api/auth/login 200 180ms
2025-01-15 23:42:46 [INFO] GET /api/users 200 69ms
2025-01-15 23:42:50 [INFO] GET /api/users/53 200 14ms
2025-01-15 23:43:01 [INFO] GET /api/users?role=admin 200 15ms
2025-01-15 23:43:04 [INFO] GET /api/health 200 1ms
2025-01-15 23:43:11 [INFO] GET /api/users/82 404 12ms
2025-01-15 23:43:25 [INFO] POST /api/auth/login 401 86ms
2025-01-15 23:43:34 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 23:43:38 [INFO] GET /api/settings 200 10ms
2025-01-15 23:43:52 [INFO] POST /api/users 409 15ms
2025-01-15 23:43:56 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 23:43:56 [DEBUG] Rows returned: 32
2025-01-15 23:44:06 [INFO] POST /api/auth/refresh 200 53ms
2025-01-15 23:44:15 [INFO] GET /api/roles 200 15ms
2025-01-15 23:44:30 [INFO] GET /api/health 200 3ms
2025-01-15 23:44:35 [INFO] GET /api/health 200 2ms
2025-01-15 23:44:37 [INFO] GET /api/users?role=admin 200 23ms
2025-01-15 23:44:43 [INFO] GET /api/health 200 2ms
2025-01-15 23:44:54 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-15 23:45:08 [INFO] GET /api/health 200 1ms
2025-01-15 23:45:13 [INFO] GET /api/health 200 3ms
2025-01-15 23:45:22 [INFO] POST /api/uploads 201 1511ms
2025-01-15 23:45:37 [INFO] GET /api/users/129 200 16ms
2025-01-15 23:45:50 [INFO] POST /api/roles 201 69ms
2025-01-15 23:46:01 [INFO] GET /api/health 200 2ms
2025-01-15 23:46:09 [INFO] GET /api/users?role=editor 200 37ms
2025-01-15 23:46:10 [INFO] POST /api/roles 201 60ms
2025-01-15 23:46:25 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 23:46:25 [DEBUG] Rows returned: 31
2025-01-15 23:46:29 [INFO] POST /api/auth/login 401 102ms
2025-01-15 23:46:31 [INFO] POST /api/roles 201 69ms
2025-01-15 23:46:34 [INFO] GET /api/health 200 3ms
2025-01-15 23:46:36 [INFO] GET /api/roles 200 7ms
2025-01-15 23:46:44 [INFO] POST /api/users 409 22ms
2025-01-15 23:46:52 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-15 23:46:52 [DEBUG] New record created: id=223
2025-01-15 23:47:07 [INFO] GET /api/users?page=4&limit=25 200 50ms
2025-01-15 23:47:16 [WARN] Rate limit approaching for IP 192.168.8.29 (90/100 requests in window)
2025-01-15 23:47:30 [INFO] POST /api/uploads 201 1658ms
2025-01-15 23:47:34 [INFO] DELETE /api/users/100 204 40ms
2025-01-15 23:47:35 [INFO] GET /api/users?page=4&limit=25 200 32ms
2025-01-15 23:47:49 [WARN] Connection pool exhausted, waiting for available connection
2025-01-15 23:48:04 [INFO] POST /api/users 201 131ms
2025-01-15 23:48:06 [INFO] GET /api/users/38 200 19ms
2025-01-15 23:48:20 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 23:48:29 [INFO] GET /api/health 200 3ms
2025-01-15 23:48:44 [INFO] GET /api/analytics/dashboard 200 693ms
2025-01-15 23:48:54 [INFO] GET /api/health 200 3ms
2025-01-15 23:49:05 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 23:49:05 [DEBUG] Rows returned: 47
2025-01-15 23:49:09 [INFO] POST /api/auth/login 401 70ms
2025-01-15 23:49:17 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 23:49:29 [INFO] GET /api/settings 200 6ms
2025-01-15 23:49:36 [INFO] DELETE /api/users/2 204 35ms
2025-01-15 23:49:41 [INFO] GET /api/health 200 1ms
2025-01-15 23:49:43 [INFO] GET /api/health 200 1ms
2025-01-15 23:49:53 [INFO] GET /api/health 200 2ms
2025-01-15 23:49:57 [INFO] GET /api/health 200 1ms
2025-01-15 23:50:10 [INFO] POST /api/auth/login 401 51ms
2025-01-15 23:50:17 [INFO] POST /api/auth/login 401 112ms
2025-01-15 23:50:25 [INFO] PUT /api/settings 200 53ms
2025-01-15 23:50:30 [INFO] GET /api/health 200 1ms
2025-01-15 23:50:43 [INFO] GET /api/health 200 3ms
2025-01-15 23:50:46 [INFO] GET /api/health 200 3ms
2025-01-15 23:50:49 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 23:51:03 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 23:51:03 [DEBUG] Rows returned: 13
2025-01-15 23:51:15 [INFO] GET /api/health 200 1ms
2025-01-15 23:51:26 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 23:51:26 [DEBUG] Rows returned: 26
2025-01-15 23:51:28 [INFO] GET /api/notifications 200 17ms
2025-01-15 23:51:42 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-15 23:51:51 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-15 23:51:51 [DEBUG] Rows returned: 8
2025-01-15 23:52:02 [INFO] GET /api/users?role=admin 200 18ms
2025-01-15 23:52:13 [WARN] Redis reconnection attempt 99/5
2025-01-15 23:52:20 [INFO] POST /api/auth/login 200 144ms
2025-01-15 23:52:29 [INFO] DELETE /api/users/41 204 38ms
2025-01-15 23:52:38 [INFO] GET /api/health 200 3ms
2025-01-15 23:52:39 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 23:52:39 [DEBUG] Rows returned: 42
2025-01-15 23:52:49 [INFO] GET /api/health 200 1ms
2025-01-15 23:52:55 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 23:53:06 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-15 23:53:06 [DEBUG] Rows returned: 12
2025-01-15 23:53:09 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 23:53:09 [DEBUG] Rows returned: 21
2025-01-15 23:53:12 [INFO] GET /api/health 200 2ms
2025-01-15 23:53:24 [INFO] POST /api/auth/refresh 200 80ms
2025-01-15 23:53:36 [INFO] GET /api/users?page=5&limit=25 200 28ms
2025-01-15 23:53:44 [INFO] GET /api/health 200 1ms
2025-01-15 23:53:56 [INFO] GET /api/health 200 2ms
2025-01-15 23:54:02 [INFO] PUT /api/settings 200 42ms
2025-01-15 23:54:05 [INFO] GET /api/health 200 3ms
2025-01-15 23:54:14 [INFO] GET /api/notifications 200 20ms
2025-01-15 23:54:16 [INFO] POST /api/auth/refresh 200 47ms
2025-01-15 23:54:26 [INFO] POST /api/auth/login 200 190ms
2025-01-15 23:54:34 [INFO] GET /api/users?page=2&limit=25 200 49ms
2025-01-15 23:54:36 [INFO] GET /api/health 200 3ms
2025-01-15 23:54:42 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 23:54:42 [DEBUG] Rows returned: 36
2025-01-15 23:54:53 [INFO] GET /api/health 200 1ms
2025-01-15 23:55:03 [INFO] GET /api/roles 200 15ms
2025-01-15 23:55:17 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-15 23:55:29 [INFO] GET /api/health 200 2ms
2025-01-15 23:55:37 [INFO] GET /api/health 200 2ms
2025-01-15 23:55:51 [INFO] DELETE /api/users/139 204 40ms
2025-01-15 23:55:57 [INFO] GET /api/users 200 63ms
2025-01-15 23:56:03 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-15 23:56:03 [DEBUG] Rows returned: 28
2025-01-15 23:56:12 [INFO] PUT /api/users/145 200 88ms
2025-01-15 23:56:16 [INFO] GET /api/health 200 1ms
2025-01-15 23:56:27 [INFO] POST /api/auth/login 401 91ms
2025-01-15 23:56:38 [INFO] GET /api/users 200 27ms
2025-01-15 23:56:53 [INFO] GET /api/health 200 1ms
2025-01-15 23:57:08 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-15 23:57:17 [WARN] Rate limit approaching for IP 192.168.1.195 (98/100 requests in window)
2025-01-15 23:57:24 [ERROR] Deadlock detected in transaction tx-39300
2025-01-15 23:57:24 [ERROR] Stack trace:
    at AuthController.login (src/controllers/auth.controller.ts:225)
    at Layer.handle (node_modules/express/lib/router/layer.js:257)
    at UserController.getUser (src/controllers/user.controller.ts:10)
    at Router.handle (node_modules/express/lib/router/index.js:245)
    at RoleService.getPermissions (src/services/role.service.ts:61)
2025-01-15 23:57:34 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-15 23:57:34 [DEBUG] Rows returned: 22
2025-01-15 23:57:41 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-15 23:57:41 [DEBUG] Rows returned: 31
2025-01-15 23:57:54 [INFO] PUT /api/users/151 200 70ms
2025-01-15 23:57:55 [INFO] POST /api/auth/login 200 162ms
2025-01-15 23:57:57 [INFO] PUT /api/settings 200 47ms
2025-01-15 23:58:12 [INFO] POST /api/uploads 201 1224ms
2025-01-15 23:58:21 [WARN] Request body exceeded soft limit (1274KB)
2025-01-15 23:58:31 [INFO] GET /api/health 200 2ms
2025-01-15 23:58:45 [INFO] GET /api/health 200 1ms
2025-01-15 23:58:51 [INFO] GET /api/analytics/dashboard 200 777ms
2025-01-15 23:58:57 [INFO] POST /api/roles 201 54ms
2025-01-15 23:58:59 [INFO] GET /api/health 200 3ms
2025-01-15 23:59:12 [INFO] GET /api/health 200 3ms
2025-01-15 23:59:23 [INFO] GET /api/users 200 57ms
2025-01-15 23:59:29 [INFO] POST /api/auth/refresh 200 76ms
2025-01-15 23:59:37 [INFO] POST /api/auth/login 200 108ms
2025-01-15 23:59:46 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-15 23:59:46 [DEBUG] Rows returned: 13
2025-01-15 23:59:48 [INFO] GET /api/users?role=moderator 200 17ms
2025-01-15 23:59:57 [INFO] GET /api/users/52 404 12ms
2025-01-16 00:00:00 [WARN] Redis reconnection attempt 100/5
2025-01-16 00:00:11 [INFO] GET /api/users?page=1&limit=25 200 43ms
2025-01-16 00:00:14 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 00:00:16 [INFO] GET /api/health 200 2ms
2025-01-16 00:00:26 [INFO] PUT /api/settings 200 28ms
2025-01-16 00:00:30 [INFO] POST /api/auth/refresh 200 54ms
2025-01-16 00:00:44 [INFO] POST /api/auth/login 200 151ms
2025-01-16 00:00:57 [WARN] Memory usage at 90% of allocated heap
2025-01-16 00:01:05 [INFO] PUT /api/users/6 200 52ms
2025-01-16 00:01:12 [INFO] GET /api/settings 200 12ms
2025-01-16 00:01:24 [INFO] POST /api/auth/login 200 230ms
2025-01-16 00:01:27 [INFO] GET /api/health 200 2ms
2025-01-16 00:01:29 [INFO] POST /api/roles 201 50ms
2025-01-16 00:01:31 [INFO] GET /api/users/20 404 14ms
2025-01-16 00:01:32 [INFO] POST /api/auth/refresh 200 34ms
2025-01-16 00:01:42 [INFO] POST /api/uploads 201 966ms
2025-01-16 00:01:43 [WARN] Redis reconnection attempt 81/5
2025-01-16 00:01:54 [INFO] GET /api/health 200 1ms
2025-01-16 00:02:01 [INFO] POST /api/auth/refresh 200 68ms
2025-01-16 00:02:15 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 00:02:28 [INFO] POST /api/users 409 24ms
2025-01-16 00:02:30 [INFO] POST /api/auth/login 200 166ms
2025-01-16 00:02:42 [INFO] POST /api/roles 201 52ms
2025-01-16 00:02:55 [INFO] POST /api/auth/refresh 200 73ms
2025-01-16 00:03:08 [WARN] Redis reconnection attempt 93/5
2025-01-16 00:03:10 [INFO] GET /api/health 200 2ms
2025-01-16 00:03:12 [INFO] GET /api/health 200 1ms
2025-01-16 00:03:26 [INFO] POST /api/auth/login 401 119ms
2025-01-16 00:03:40 [INFO] GET /api/users?role=moderator 200 38ms
2025-01-16 00:03:47 [INFO] GET /api/users 200 67ms
2025-01-16 00:03:54 [INFO] GET /api/health 200 3ms
2025-01-16 00:03:55 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-16 00:04:00 [INFO] GET /api/users 200 57ms
2025-01-16 00:04:07 [INFO] POST /api/roles 201 42ms
2025-01-16 00:04:19 [INFO] PUT /api/users/200 200 59ms
2025-01-16 00:04:29 [ERROR] Deadlock detected in transaction tx-17025
2025-01-16 00:04:29 [ERROR] Stack trace:
    at AuthService.validateToken (src/services/auth.service.ts:281)
    at validateRequest (src/middleware/validation.ts:78)
    at Layer.handle (node_modules/express/lib/router/layer.js:216)
    at Router.handle (node_modules/express/lib/router/index.js:108)
    at UserController.getUser (src/controllers/user.controller.ts:284)
2025-01-16 00:04:38 [INFO] PUT /api/users/43 200 69ms
2025-01-16 00:04:40 [INFO] GET /api/notifications 200 32ms
2025-01-16 00:04:55 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 00:04:55 [DEBUG] Rows returned: 24
2025-01-16 00:05:05 [WARN] Memory usage at 95% of allocated heap
2025-01-16 00:05:16 [INFO] GET /api/roles 200 11ms
2025-01-16 00:05:25 [INFO] PUT /api/users/32 200 86ms
2025-01-16 00:05:35 [WARN] Rate limit approaching for IP 192.168.4.36 (96/100 requests in window)
2025-01-16 00:05:39 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 00:05:53 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 00:05:53 [DEBUG] New record created: id=234
2025-01-16 00:05:58 [INFO] GET /api/roles 200 13ms
2025-01-16 00:06:13 [INFO] DELETE /api/users/22 204 21ms
2025-01-16 00:06:28 [INFO] POST /api/auth/login 200 140ms
2025-01-16 00:06:37 [INFO] GET /api/analytics/dashboard 200 209ms
2025-01-16 00:06:42 [ERROR] Deadlock detected in transaction tx-23141
2025-01-16 00:06:42 [ERROR] Stack trace:
    at Layer.handle (node_modules/express/lib/router/layer.js:197)
    at authenticate (src/middleware/auth.ts:40)
    at RoleService.getPermissions (src/services/role.service.ts:278)
    at UserService.findById (src/services/user.service.ts:223)
    at AuthService.validateToken (src/services/auth.service.ts:98)
    at validateRequest (src/middleware/validation.ts:286)
2025-01-16 00:06:49 [WARN] Deprecated API version v1 called by client client-2
2025-01-16 00:06:52 [INFO] GET /api/settings 200 12ms
2025-01-16 00:06:55 [INFO] POST /api/roles 201 55ms
2025-01-16 00:06:59 [INFO] PUT /api/users/63 200 58ms
2025-01-16 00:07:06 [INFO] GET /api/analytics/dashboard 200 726ms
2025-01-16 00:07:19 [INFO] PUT /api/users/180 200 78ms
2025-01-16 00:07:20 [INFO] POST /api/roles 201 66ms
2025-01-16 00:07:22 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 00:07:22 [DEBUG] Rows returned: 15
2025-01-16 00:07:27 [INFO] GET /api/health 200 3ms
2025-01-16 00:07:31 [INFO] GET /api/health 200 3ms
2025-01-16 00:07:32 [INFO] GET /api/users/16 404 14ms
2025-01-16 00:07:36 [INFO] GET /api/health 200 2ms
2025-01-16 00:07:39 [ERROR] Worker process crashed. Restarting...
2025-01-16 00:07:41 [INFO] GET /api/health 200 3ms
2025-01-16 00:07:56 [WARN] Request body exceeded soft limit (4689KB)
2025-01-16 00:08:05 [INFO] GET /api/users 200 72ms
2025-01-16 00:08:16 [INFO] GET /api/health 200 1ms
2025-01-16 00:08:30 [INFO] GET /api/health 200 1ms
2025-01-16 00:08:41 [INFO] GET /api/roles 200 13ms
2025-01-16 00:08:55 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 00:08:55 [DEBUG] Rows returned: 46
2025-01-16 00:09:02 [INFO] GET /api/health 200 1ms
2025-01-16 00:09:17 [INFO] GET /api/users/7 200 20ms
2025-01-16 00:09:26 [INFO] GET /api/users?role=editor 200 17ms
2025-01-16 00:09:33 [INFO] POST /api/users 409 16ms
2025-01-16 00:09:46 [INFO] PUT /api/users/89 200 40ms
2025-01-16 00:09:54 [INFO] GET /api/users/165 200 10ms
2025-01-16 00:10:04 [INFO] GET /api/health 200 2ms
2025-01-16 00:10:15 [WARN] Slow query detected: SELECT * FROM users WHERE role_id = $1 AND active = true (took 1188ms)
2025-01-16 00:10:26 [INFO] GET /api/users/128 404 15ms
2025-01-16 00:10:36 [INFO] GET /api/health 200 2ms
2025-01-16 00:10:41 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 00:10:41 [DEBUG] Rows returned: 10
2025-01-16 00:10:51 [WARN] Redis reconnection attempt 98/5
2025-01-16 00:11:00 [WARN] Redis reconnection attempt 96/5
2025-01-16 00:11:14 [INFO] POST /api/auth/login 200 140ms
2025-01-16 00:11:21 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 00:11:21 [DEBUG] New record created: id=221
2025-01-16 00:11:22 [INFO] GET /api/health 200 1ms
2025-01-16 00:11:30 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 00:11:30 [DEBUG] Rows returned: 8
2025-01-16 00:11:35 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 00:11:37 [INFO] PUT /api/settings 200 35ms
2025-01-16 00:11:51 [WARN] Rate limit exceeded for IP 192.168.3.125. Returning 429.
2025-01-16 00:12:00 [INFO] POST /api/roles 201 60ms
2025-01-16 00:12:11 [INFO] GET /api/roles 200 13ms
2025-01-16 00:12:24 [INFO] GET /api/notifications 200 10ms
2025-01-16 00:12:33 [INFO] GET /api/roles 200 11ms
2025-01-16 00:12:44 [INFO] POST /api/users 201 120ms
2025-01-16 00:12:57 [INFO] GET /api/users 200 79ms
2025-01-16 00:13:05 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 00:13:05 [DEBUG] Rows returned: 37
2025-01-16 00:13:06 [INFO] GET /api/health 200 1ms
2025-01-16 00:13:15 [INFO] PUT /api/users/120 200 46ms
2025-01-16 00:13:16 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 00:13:16 [DEBUG] Rows returned: 16
2025-01-16 00:13:21 [INFO] GET /api/settings 200 6ms
2025-01-16 00:13:33 [INFO] GET /api/users/125 404 8ms
2025-01-16 00:13:37 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 00:13:37 [DEBUG] Rows returned: 25
2025-01-16 00:13:46 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 00:13:46 [DEBUG] New record created: id=402
2025-01-16 00:13:51 [WARN] Redis reconnection attempt 86/5
2025-01-16 00:13:58 [INFO] GET /api/health 200 2ms
2025-01-16 00:14:05 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 00:14:19 [INFO] GET /api/health 200 2ms
2025-01-16 00:14:24 [INFO] GET /api/health 200 1ms
2025-01-16 00:14:28 [INFO] PUT /api/settings 200 28ms
2025-01-16 00:14:41 [INFO] GET /api/settings 200 9ms
2025-01-16 00:14:45 [INFO] GET /api/users?page=1&limit=25 200 33ms
2025-01-16 00:14:52 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 00:14:52 [DEBUG] Rows returned: 21
2025-01-16 00:15:00 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-16 00:15:09 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 00:15:17 [INFO] GET /api/roles 200 10ms
2025-01-16 00:15:21 [INFO] GET /api/roles 200 8ms
2025-01-16 00:15:22 [INFO] PUT /api/settings 200 43ms
2025-01-16 00:15:25 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 00:15:25 [DEBUG] Rows returned: 2
2025-01-16 00:15:34 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 00:15:34 [DEBUG] Rows returned: 12
2025-01-16 00:15:37 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 00:15:37 [DEBUG] New record created: id=478
2025-01-16 00:15:45 [INFO] GET /api/health 200 2ms
2025-01-16 00:15:57 [INFO] GET /api/health 200 1ms
2025-01-16 00:15:59 [INFO] PUT /api/settings 200 41ms
2025-01-16 00:16:04 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 00:16:15 [INFO] GET /api/health 200 2ms
2025-01-16 00:16:29 [INFO] GET /api/roles 200 11ms
2025-01-16 00:16:37 [INFO] PUT /api/settings 200 41ms
2025-01-16 00:16:47 [INFO] POST /api/auth/refresh 200 79ms
2025-01-16 00:17:02 [INFO] PUT /api/users/198 200 61ms
2025-01-16 00:17:10 [INFO] POST /api/auth/login 200 232ms
2025-01-16 00:17:24 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 00:17:37 [INFO] GET /api/analytics/dashboard 200 484ms
2025-01-16 00:17:52 [INFO] GET /api/analytics/dashboard 200 714ms
2025-01-16 00:18:03 [INFO] GET /api/health 200 2ms
2025-01-16 00:18:14 [INFO] GET /api/users/174 200 8ms
2025-01-16 00:18:21 [INFO] POST /api/auth/refresh 200 45ms
2025-01-16 00:18:26 [INFO] GET /api/health 200 1ms
2025-01-16 00:18:27 [INFO] GET /api/users?role=moderator 200 18ms
2025-01-16 00:18:30 [INFO] GET /api/analytics/dashboard 200 268ms
2025-01-16 00:18:39 [WARN] S3 upload retry after timeout (640ms)
2025-01-16 00:18:54 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 00:19:04 [WARN] S3 upload retry after timeout (1579ms)
2025-01-16 00:19:16 [INFO] POST /api/uploads 201 895ms
2025-01-16 00:19:24 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 00:19:24 [DEBUG] Rows returned: 45
2025-01-16 00:19:37 [INFO] POST /api/auth/refresh 200 63ms
2025-01-16 00:19:43 [INFO] POST /api/auth/login 200 131ms
2025-01-16 00:19:50 [INFO] GET /api/health 200 2ms
2025-01-16 00:19:55 [INFO] GET /api/users/70 404 8ms
2025-01-16 00:19:56 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 00:19:57 [INFO] GET /api/health 200 2ms
2025-01-16 00:20:04 [INFO] DELETE /api/users/199 204 43ms
2025-01-16 00:20:11 [INFO] GET /api/users 200 62ms
2025-01-16 00:20:18 [INFO] POST /api/users 409 14ms
2025-01-16 00:20:26 [WARN] Memory usage at 79% of allocated heap
2025-01-16 00:20:41 [INFO] PUT /api/users/106 200 57ms
2025-01-16 00:20:49 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 00:20:49 [DEBUG] Rows returned: 32
2025-01-16 00:21:04 [INFO] GET /api/health 200 3ms
2025-01-16 00:21:16 [ERROR] Unhandled exception in DELETE /api/users/171: UserNotFoundError
2025-01-16 00:21:16 [ERROR] Stack trace:
    at processTicksAndRejections (node:internal/process/task_queues:38)
    at RoleService.getPermissions (src/services/role.service.ts:230)
    at validateRequest (src/middleware/validation.ts:263)
    at Router.handle (node_modules/express/lib/router/index.js:245)
2025-01-16 00:21:18 [INFO] PUT /api/users/183 200 89ms
2025-01-16 00:21:29 [INFO] POST /api/roles 201 33ms
2025-01-16 00:21:44 [INFO] POST /api/auth/login 200 130ms
2025-01-16 00:21:48 [WARN] Request body exceeded soft limit (504KB)
2025-01-16 00:21:50 [ERROR] Deadlock detected in transaction tx-66357
2025-01-16 00:21:50 [ERROR] Stack trace:
    at validateRequest (src/middleware/validation.ts:161)
    at UserService.findById (src/services/user.service.ts:101)
    at authenticate (src/middleware/auth.ts:244)
    at Router.handle (node_modules/express/lib/router/index.js:90)
2025-01-16 00:22:00 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 00:22:00 [DEBUG] Rows returned: 44
2025-01-16 00:22:05 [INFO] POST /api/uploads 201 1973ms
2025-01-16 00:22:12 [INFO] POST /api/users 201 98ms
2025-01-16 00:22:24 [INFO] DELETE /api/users/19 204 38ms
2025-01-16 00:22:26 [INFO] POST /api/roles 201 38ms
2025-01-16 00:22:32 [INFO] POST /api/roles 201 40ms
2025-01-16 00:22:43 [INFO] PUT /api/users/112 200 84ms
2025-01-16 00:22:58 [INFO] GET /api/users?page=4&limit=25 200 29ms
2025-01-16 00:23:02 [INFO] PUT /api/settings 200 28ms
2025-01-16 00:23:05 [INFO] GET /api/health 200 3ms
2025-01-16 00:23:06 [INFO] GET /api/health 200 3ms
2025-01-16 00:23:13 [INFO] POST /api/auth/login 401 50ms
2025-01-16 00:23:19 [INFO] POST /api/users 409 23ms
2025-01-16 00:23:29 [INFO] GET /api/users?role=editor 200 38ms
2025-01-16 00:23:36 [WARN] JWT token expires in less than 60 seconds for user 9
2025-01-16 00:23:42 [INFO] POST /api/users 409 24ms
2025-01-16 00:23:56 [INFO] POST /api/uploads 201 1180ms
2025-01-16 00:24:10 [INFO] POST /api/auth/login 401 53ms
2025-01-16 00:24:18 [INFO] GET /api/users?page=4&limit=25 200 25ms
2025-01-16 00:24:24 [WARN] Rate limit exceeded for IP 192.168.1.144. Returning 429.
2025-01-16 00:24:26 [INFO] PUT /api/users/88 200 60ms
2025-01-16 00:24:35 [INFO] POST /api/users 201 135ms
2025-01-16 00:24:36 [INFO] POST /api/users 409 21ms
2025-01-16 00:24:38 [INFO] GET /api/settings 200 6ms
2025-01-16 00:24:52 [INFO] GET /api/analytics/dashboard 200 542ms
2025-01-16 00:24:56 [INFO] POST /api/users 409 18ms
2025-01-16 00:25:09 [INFO] GET /api/health 200 3ms
2025-01-16 00:25:20 [INFO] GET /api/users/160 200 10ms
2025-01-16 00:25:22 [INFO] GET /api/roles 200 9ms
2025-01-16 00:25:33 [INFO] GET /api/users?role=moderator 200 22ms
2025-01-16 00:25:36 [INFO] GET /api/health 200 1ms
2025-01-16 00:25:50 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 00:26:05 [INFO] GET /api/health 200 2ms
2025-01-16 00:26:06 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 00:26:06 [DEBUG] New record created: id=98
2025-01-16 00:26:07 [INFO] GET /api/notifications 200 28ms
2025-01-16 00:26:19 [INFO] PUT /api/settings 200 55ms
2025-01-16 00:26:29 [INFO] GET /api/health 200 3ms
2025-01-16 00:26:34 [INFO] POST /api/roles 201 55ms
2025-01-16 00:26:43 [INFO] PUT /api/settings 200 53ms
2025-01-16 00:26:57 [INFO] GET /api/notifications 200 30ms
2025-01-16 00:27:12 [ERROR] Unhandled exception in GET /api/users: AuthenticationError
2025-01-16 00:27:12 [ERROR] Stack trace:
    at AuthController.login (src/controllers/auth.controller.ts:293)
    at UserService.findById (src/services/user.service.ts:67)
    at validateRequest (src/middleware/validation.ts:34)
    at Layer.handle (node_modules/express/lib/router/layer.js:183)
2025-01-16 00:27:19 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-16 00:27:30 [INFO] GET /api/users/200 404 9ms
2025-01-16 00:27:37 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 00:27:42 [INFO] POST /api/users 201 117ms
2025-01-16 00:27:57 [INFO] POST /api/auth/refresh 200 62ms
2025-01-16 00:27:59 [INFO] GET /api/users?page=4&limit=25 200 35ms
2025-01-16 00:28:00 [INFO] GET /api/roles 200 10ms
2025-01-16 00:28:10 [INFO] POST /api/users 409 14ms
2025-01-16 00:28:11 [INFO] GET /api/users/186 200 16ms
2025-01-16 00:28:18 [WARN] Deprecated API version v1 called by client client-12
2025-01-16 00:28:29 [INFO] GET /api/health 200 2ms
2025-01-16 00:28:33 [WARN] S3 upload retry after timeout (1843ms)
2025-01-16 00:28:34 [INFO] POST /api/users 201 96ms
2025-01-16 00:28:47 [INFO] DELETE /api/users/6 204 28ms
2025-01-16 00:29:02 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 00:29:02 [DEBUG] New record created: id=300
2025-01-16 00:29:09 [INFO] POST /api/users 409 21ms
2025-01-16 00:29:23 [INFO] GET /api/health 200 2ms
2025-01-16 00:29:31 [INFO] POST /api/uploads 201 527ms
2025-01-16 00:29:43 [INFO] GET /api/notifications 200 11ms
2025-01-16 00:29:52 [INFO] GET /api/roles 200 15ms
2025-01-16 00:30:03 [INFO] GET /api/notifications 200 15ms
2025-01-16 00:30:04 [INFO] POST /api/auth/login 200 150ms
2025-01-16 00:30:07 [INFO] PUT /api/settings 200 47ms
2025-01-16 00:30:19 [INFO] DELETE /api/users/107 204 45ms
2025-01-16 00:30:22 [INFO] DELETE /api/users/66 204 26ms
2025-01-16 00:30:32 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 00:30:32 [DEBUG] Rows returned: 48
2025-01-16 00:30:38 [WARN] JWT token expires in less than 60 seconds for user 117
2025-01-16 00:30:46 [INFO] GET /api/health 200 2ms
2025-01-16 00:30:52 [INFO] GET /api/health 200 1ms
2025-01-16 00:30:55 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 00:30:55 [DEBUG] Rows returned: 48
2025-01-16 00:31:05 [INFO] POST /api/auth/refresh 200 47ms
2025-01-16 00:31:07 [ERROR] Database connection timeout after 5000ms
2025-01-16 00:31:19 [INFO] DELETE /api/users/189 204 33ms
2025-01-16 00:31:33 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 00:31:33 [DEBUG] Rows returned: 29
2025-01-16 00:31:47 [INFO] GET /api/users 200 72ms
2025-01-16 00:31:52 [INFO] POST /api/users 201 90ms
2025-01-16 00:32:03 [INFO] GET /api/health 200 2ms
2025-01-16 00:32:04 [INFO] GET /api/notifications 200 27ms
2025-01-16 00:32:07 [INFO] GET /api/users/165 200 20ms
2025-01-16 00:32:20 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 00:32:20 [DEBUG] Rows returned: 41
2025-01-16 00:32:24 [INFO] POST /api/roles 201 43ms
2025-01-16 00:32:34 [INFO] PUT /api/settings 200 28ms
2025-01-16 00:32:40 [INFO] GET /api/health 200 2ms
2025-01-16 00:32:48 [INFO] POST /api/users 409 21ms
2025-01-16 00:32:56 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 00:32:56 [DEBUG] Rows returned: 10
2025-01-16 00:32:58 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 00:32:58 [DEBUG] New record created: id=319
2025-01-16 00:33:13 [INFO] GET /api/users/26 200 14ms
2025-01-16 00:33:20 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-16 00:33:30 [INFO] GET /api/health 200 3ms
2025-01-16 00:33:43 [INFO] POST /api/uploads 201 532ms
2025-01-16 00:33:56 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 00:33:56 [DEBUG] Rows returned: 18
2025-01-16 00:34:04 [INFO] GET /api/settings 200 9ms
2025-01-16 00:34:12 [INFO] GET /api/health 200 1ms
2025-01-16 00:34:27 [INFO] DELETE /api/users/175 204 30ms
2025-01-16 00:34:31 [INFO] GET /api/users 200 51ms
2025-01-16 00:34:33 [INFO] GET /api/health 200 3ms
2025-01-16 00:34:44 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 00:34:44 [DEBUG] Rows returned: 37
2025-01-16 00:34:49 [INFO] POST /api/auth/refresh 200 72ms
2025-01-16 00:35:02 [INFO] GET /api/settings 200 11ms
2025-01-16 00:35:14 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 00:35:16 [INFO] POST /api/uploads 201 970ms
2025-01-16 00:35:27 [INFO] GET /api/users 200 38ms
2025-01-16 00:35:35 [INFO] POST /api/auth/login 401 114ms
2025-01-16 00:35:50 [INFO] GET /api/health 200 2ms
2025-01-16 00:36:05 [INFO] GET /api/health 200 2ms
2025-01-16 00:36:18 [WARN] S3 upload retry after timeout (1690ms)
2025-01-16 00:36:19 [INFO] GET /api/users/6 404 12ms
2025-01-16 00:36:22 [INFO] POST /api/auth/login 401 57ms
2025-01-16 00:36:29 [INFO] GET /api/users/83 200 15ms
2025-01-16 00:36:31 [INFO] GET /api/settings 200 11ms
2025-01-16 00:36:39 [INFO] GET /api/health 200 3ms
2025-01-16 00:36:44 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 00:36:44 [DEBUG] Rows returned: 32
2025-01-16 00:36:56 [INFO] POST /api/users 409 25ms
2025-01-16 00:37:10 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 00:37:10 [DEBUG] Rows returned: 18
2025-01-16 00:37:25 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-16 00:37:30 [INFO] GET /api/health 200 1ms
2025-01-16 00:37:44 [INFO] GET /api/users?page=1&limit=25 200 54ms
2025-01-16 00:37:47 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 00:37:47 [DEBUG] Rows returned: 11
2025-01-16 00:37:58 [INFO] GET /api/roles 200 8ms
2025-01-16 00:38:05 [INFO] POST /api/auth/refresh 200 58ms
2025-01-16 00:38:09 [INFO] POST /api/users 201 141ms
2025-01-16 00:38:15 [INFO] GET /api/users/3 200 19ms
2025-01-16 00:38:25 [INFO] GET /api/health 200 3ms
2025-01-16 00:38:40 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 00:38:40 [DEBUG] New record created: id=494
2025-01-16 00:38:49 [INFO] POST /api/auth/login 401 83ms
2025-01-16 00:38:56 [INFO] POST /api/auth/login 401 110ms
2025-01-16 00:38:59 [INFO] GET /api/health 200 3ms
2025-01-16 00:39:01 [INFO] POST /api/users 409 22ms
2025-01-16 00:39:08 [INFO] DELETE /api/users/189 204 24ms
2025-01-16 00:39:14 [INFO] GET /api/health 200 2ms
2025-01-16 00:39:29 [ERROR] Worker process crashed. Restarting...
2025-01-16 00:39:37 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 00:39:37 [DEBUG] Rows returned: 31
2025-01-16 00:39:41 [INFO] GET /api/health 200 3ms
2025-01-16 00:39:49 [INFO] DELETE /api/users/168 204 46ms
2025-01-16 00:39:56 [INFO] POST /api/auth/login 401 98ms
2025-01-16 00:39:58 [INFO] PUT /api/settings 200 26ms
2025-01-16 00:40:11 [INFO] POST /api/users 409 19ms
2025-01-16 00:40:16 [INFO] GET /api/users 200 65ms
2025-01-16 00:40:26 [INFO] GET /api/health 200 2ms
2025-01-16 00:40:41 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 00:40:48 [INFO] GET /api/users/14 404 14ms
2025-01-16 00:40:53 [INFO] GET /api/notifications 200 26ms
2025-01-16 00:40:55 [INFO] GET /api/users?page=4&limit=25 200 40ms
2025-01-16 00:41:05 [INFO] POST /api/users 409 20ms
2025-01-16 00:41:15 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 00:41:15 [DEBUG] Rows returned: 28
2025-01-16 00:41:23 [INFO] GET /api/users 200 58ms
2025-01-16 00:41:33 [INFO] GET /api/users 200 69ms
2025-01-16 00:41:43 [WARN] Request body exceeded soft limit (4998KB)
2025-01-16 00:41:57 [WARN] Slow query detected: SELECT * FROM users WHERE active = true ORDER BY created_at  (took 1645ms)
2025-01-16 00:42:04 [INFO] PUT /api/users/121 200 41ms
2025-01-16 00:42:07 [INFO] POST /api/auth/login 401 96ms
2025-01-16 00:42:15 [INFO] POST /api/users 201 114ms
2025-01-16 00:42:18 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 00:42:18 [DEBUG] Rows returned: 23
2025-01-16 00:42:20 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 00:42:20 [DEBUG] Rows returned: 50
2025-01-16 00:42:27 [INFO] GET /api/health 200 2ms
2025-01-16 00:42:34 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 00:42:34 [DEBUG] Rows returned: 21
2025-01-16 00:42:43 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 00:42:43 [DEBUG] New record created: id=162
2025-01-16 00:42:55 [INFO] POST /api/users 201 142ms
2025-01-16 00:43:06 [INFO] POST /api/auth/login 401 68ms
2025-01-16 00:43:15 [INFO] GET /api/health 200 3ms
2025-01-16 00:43:18 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 00:43:31 [INFO] POST /api/users 201 143ms
2025-01-16 00:43:33 [INFO] PUT /api/users/90 200 71ms
2025-01-16 00:43:36 [INFO] POST /api/roles 201 56ms
2025-01-16 00:43:41 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 00:43:41 [DEBUG] Rows returned: 2
2025-01-16 00:43:49 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 00:43:49 [DEBUG] New record created: id=175
2025-01-16 00:43:51 [INFO] GET /api/health 200 1ms
2025-01-16 00:44:00 [WARN] Slow query detected: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1 (took 1418ms)
2025-01-16 00:44:05 [INFO] GET /api/health 200 2ms
2025-01-16 00:44:18 [INFO] GET /api/users?role=admin 200 25ms
2025-01-16 00:44:27 [INFO] GET /api/health 200 3ms
2025-01-16 00:44:35 [INFO] GET /api/health 200 2ms
2025-01-16 00:44:40 [INFO] GET /api/users/151 200 18ms
2025-01-16 00:44:47 [INFO] POST /api/auth/login 200 184ms
2025-01-16 00:44:51 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 00:44:59 [INFO] POST /api/users 201 144ms
2025-01-16 00:45:01 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 00:45:01 [DEBUG] Rows returned: 22
2025-01-16 00:45:02 [INFO] GET /api/analytics/dashboard 200 710ms
2025-01-16 00:45:06 [INFO] GET /api/users?role=viewer 200 18ms
2025-01-16 00:45:16 [INFO] GET /api/users?role=admin 200 30ms
2025-01-16 00:45:19 [INFO] GET /api/health 200 1ms
2025-01-16 00:45:29 [INFO] GET /api/settings 200 6ms
2025-01-16 00:45:34 [INFO] GET /api/settings 200 11ms
2025-01-16 00:45:41 [INFO] POST /api/uploads 201 735ms
2025-01-16 00:45:51 [INFO] POST /api/auth/refresh 200 76ms
2025-01-16 00:45:55 [INFO] GET /api/users?page=5&limit=25 200 58ms
2025-01-16 00:46:01 [INFO] POST /api/roles 201 58ms
2025-01-16 00:46:03 [INFO] PUT /api/settings 200 36ms
2025-01-16 00:46:16 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 00:46:16 [DEBUG] Rows returned: 4
2025-01-16 00:46:31 [INFO] GET /api/settings 200 12ms
2025-01-16 00:46:36 [INFO] GET /api/analytics/dashboard 200 361ms
2025-01-16 00:46:38 [INFO] GET /api/notifications 200 21ms
2025-01-16 00:46:45 [WARN] Rate limit approaching for IP 192.168.9.194 (98/100 requests in window)
2025-01-16 00:46:53 [INFO] POST /api/uploads 201 1717ms
2025-01-16 00:46:54 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 00:46:54 [DEBUG] Rows returned: 3
2025-01-16 00:47:00 [INFO] GET /api/users?role=viewer 200 29ms
2025-01-16 00:47:04 [INFO] POST /api/uploads 201 1160ms
2025-01-16 00:47:16 [INFO] GET /api/settings 200 7ms
2025-01-16 00:47:21 [INFO] GET /api/analytics/dashboard 200 439ms
2025-01-16 00:47:25 [WARN] Slow query detected: SELECT * FROM users WHERE role_id = $1 AND active = true (took 988ms)
2025-01-16 00:47:40 [WARN] S3 upload retry after timeout (1409ms)
2025-01-16 00:47:52 [INFO] POST /api/auth/login 200 225ms
2025-01-16 00:48:05 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 00:48:05 [DEBUG] Rows returned: 30
2025-01-16 00:48:14 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 00:48:14 [DEBUG] New record created: id=124
2025-01-16 00:48:27 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 00:48:27 [DEBUG] Rows returned: 12
2025-01-16 00:48:35 [INFO] GET /api/health 200 2ms
2025-01-16 00:48:39 [INFO] GET /api/analytics/dashboard 200 727ms
2025-01-16 00:48:51 [INFO] POST /api/auth/login 401 113ms
2025-01-16 00:49:02 [INFO] GET /api/analytics/dashboard 200 211ms
2025-01-16 00:49:15 [INFO] GET /api/health 200 1ms
2025-01-16 00:49:26 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 00:49:32 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 00:49:32 [DEBUG] Rows returned: 45
2025-01-16 00:49:35 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 00:49:35 [DEBUG] New record created: id=362
2025-01-16 00:49:50 [ERROR] Deadlock detected in transaction tx-90236
2025-01-16 00:49:50 [ERROR] Stack trace:
    at RoleService.getPermissions (src/services/role.service.ts:85)
    at processTicksAndRejections (node:internal/process/task_queues:239)
    at authenticate (src/middleware/auth.ts:274)
    at Layer.handle (node_modules/express/lib/router/layer.js:91)
2025-01-16 00:49:56 [INFO] DELETE /api/users/5 204 29ms
2025-01-16 00:50:07 [INFO] GET /api/users?page=1&limit=25 200 29ms
2025-01-16 00:50:15 [INFO] PUT /api/users/150 200 57ms
2025-01-16 00:50:28 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 00:50:28 [DEBUG] New record created: id=96
2025-01-16 00:50:40 [INFO] GET /api/health 200 3ms
2025-01-16 00:50:48 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 00:50:48 [DEBUG] New record created: id=393
2025-01-16 00:50:57 [INFO] GET /api/analytics/dashboard 200 763ms
2025-01-16 00:51:10 [INFO] PUT /api/users/190 200 79ms
2025-01-16 00:51:21 [INFO] POST /api/auth/login 401 97ms
2025-01-16 00:51:22 [INFO] GET /api/health 200 3ms
2025-01-16 00:51:34 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 00:51:41 [INFO] GET /api/users/200 200 8ms
2025-01-16 00:51:47 [INFO] DELETE /api/users/142 204 46ms
2025-01-16 00:52:02 [INFO] GET /api/notifications 200 28ms
2025-01-16 00:52:17 [INFO] GET /api/health 200 1ms
2025-01-16 00:52:19 [INFO] GET /api/settings 200 8ms
2025-01-16 00:52:27 [INFO] DELETE /api/users/1 204 38ms
2025-01-16 00:52:28 [INFO] GET /api/health 200 3ms
2025-01-16 00:52:34 [INFO] GET /api/users 200 38ms
2025-01-16 00:52:48 [INFO] GET /api/notifications 200 15ms
2025-01-16 00:52:52 [INFO] POST /api/auth/login 401 101ms
2025-01-16 00:53:00 [INFO] GET /api/users?page=4&limit=25 200 40ms
2025-01-16 00:53:12 [WARN] Deprecated API version v1 called by client client-16
2025-01-16 00:53:13 [INFO] POST /api/users 409 20ms
2025-01-16 00:53:26 [INFO] POST /api/auth/refresh 200 61ms
2025-01-16 00:53:35 [INFO] GET /api/users?page=1&limit=25 200 58ms
2025-01-16 00:53:36 [INFO] GET /api/users/5 404 13ms
2025-01-16 00:53:37 [INFO] GET /api/health 200 3ms
2025-01-16 00:53:52 [INFO] GET /api/health 200 3ms
2025-01-16 00:53:56 [INFO] POST /api/auth/login 200 129ms
2025-01-16 00:53:58 [INFO] GET /api/users?page=4&limit=25 200 30ms
2025-01-16 00:54:02 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 00:54:02 [DEBUG] Rows returned: 45
2025-01-16 00:54:07 [INFO] GET /api/users?page=1&limit=25 200 44ms
2025-01-16 00:54:13 [INFO] GET /api/users 200 65ms
2025-01-16 00:54:21 [INFO] GET /api/settings 200 9ms
2025-01-16 00:54:31 [INFO] GET /api/health 200 3ms
2025-01-16 00:54:35 [INFO] GET /api/users?page=2&limit=25 200 50ms
2025-01-16 00:54:39 [INFO] POST /api/auth/login 200 142ms
2025-01-16 00:54:44 [INFO] GET /api/notifications 200 11ms
2025-01-16 00:54:53 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 00:54:59 [INFO] POST /api/roles 201 47ms
2025-01-16 00:55:10 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 00:55:21 [INFO] GET /api/health 200 2ms
2025-01-16 00:55:28 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 00:55:28 [DEBUG] Rows returned: 38
2025-01-16 00:55:29 [INFO] GET /api/health 200 3ms
2025-01-16 00:55:30 [INFO] PUT /api/users/152 200 84ms
2025-01-16 00:55:44 [WARN] Redis reconnection attempt 100/5
2025-01-16 00:55:45 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 00:55:45 [DEBUG] Rows returned: 7
2025-01-16 00:55:57 [INFO] GET /api/settings 200 6ms
2025-01-16 00:56:05 [INFO] GET /api/health 200 3ms
2025-01-16 00:56:14 [WARN] Request body exceeded soft limit (4969KB)
2025-01-16 00:56:21 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 00:56:21 [DEBUG] Rows returned: 11
2025-01-16 00:56:30 [INFO] GET /api/users 200 45ms
2025-01-16 00:56:35 [WARN] Request body exceeded soft limit (2294KB)
2025-01-16 00:56:37 [INFO] POST /api/auth/login 200 144ms
2025-01-16 00:56:50 [INFO] GET /api/health 200 3ms
2025-01-16 00:56:56 [WARN] S3 upload retry after timeout (1300ms)
2025-01-16 00:57:09 [INFO] POST /api/auth/refresh 200 78ms
2025-01-16 00:57:15 [INFO] GET /api/health 200 1ms
2025-01-16 00:57:30 [INFO] GET /api/roles 200 9ms
2025-01-16 00:57:44 [WARN] Memory usage at 83% of allocated heap
2025-01-16 00:57:47 [INFO] POST /api/roles 201 56ms
2025-01-16 00:57:59 [INFO] GET /api/users?page=5&limit=25 200 32ms
2025-01-16 00:58:13 [INFO] POST /api/auth/refresh 200 68ms
2025-01-16 00:58:22 [INFO] POST /api/auth/login 401 74ms
2025-01-16 00:58:35 [INFO] PUT /api/users/114 200 65ms
2025-01-16 00:58:50 [INFO] POST /api/users 409 23ms
2025-01-16 00:58:51 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 00:58:51 [DEBUG] Rows returned: 18
2025-01-16 00:59:02 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 00:59:09 [INFO] GET /api/roles 200 6ms
2025-01-16 00:59:13 [INFO] POST /api/roles 201 51ms
2025-01-16 00:59:20 [INFO] PUT /api/users/37 200 45ms
2025-01-16 00:59:24 [INFO] GET /api/users/177 404 9ms
2025-01-16 00:59:38 [INFO] GET /api/users?page=3&limit=25 200 34ms
2025-01-16 00:59:52 [INFO] GET /api/health 200 3ms
2025-01-16 01:00:03 [INFO] GET /api/roles 200 12ms
2025-01-16 01:00:06 [INFO] POST /api/users 201 119ms
2025-01-16 01:00:07 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 01:00:07 [DEBUG] New record created: id=386
2025-01-16 01:00:17 [INFO] GET /api/notifications 200 23ms
2025-01-16 01:00:25 [INFO] DELETE /api/users/63 204 24ms
2025-01-16 01:00:33 [INFO] POST /api/auth/login 401 92ms
2025-01-16 01:00:48 [INFO] GET /api/notifications 200 27ms
2025-01-16 01:00:56 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 01:00:56 [DEBUG] Rows returned: 48
2025-01-16 01:01:01 [INFO] POST /api/users 201 104ms
2025-01-16 01:01:14 [INFO] POST /api/auth/login 401 70ms
2025-01-16 01:01:28 [INFO] GET /api/health 200 2ms
2025-01-16 01:01:35 [INFO] PUT /api/settings 200 45ms
2025-01-16 01:01:46 [INFO] POST /api/auth/refresh 200 32ms
2025-01-16 01:01:50 [INFO] GET /api/users/183 404 15ms
2025-01-16 01:01:58 [INFO] GET /api/users?role=viewer 200 21ms
2025-01-16 01:02:07 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 01:02:11 [INFO] GET /api/users?role=admin 200 15ms
2025-01-16 01:02:13 [INFO] GET /api/roles 200 8ms
2025-01-16 01:02:20 [INFO] GET /api/users 200 58ms
2025-01-16 01:02:34 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 01:02:45 [INFO] GET /api/health 200 1ms
2025-01-16 01:02:47 [INFO] GET /api/roles 200 12ms
2025-01-16 01:02:56 [WARN] Deprecated API version v1 called by client client-19
2025-01-16 01:03:07 [INFO] POST /api/auth/login 401 80ms
2025-01-16 01:03:19 [INFO] GET /api/users 200 34ms
2025-01-16 01:03:26 [WARN] Rate limit exceeded for IP 192.168.8.142. Returning 429.
2025-01-16 01:03:28 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 01:03:28 [DEBUG] New record created: id=406
2025-01-16 01:03:31 [INFO] GET /api/health 200 2ms
2025-01-16 01:03:42 [INFO] DELETE /api/users/87 204 24ms
2025-01-16 01:03:44 [INFO] POST /api/roles 201 60ms
2025-01-16 01:03:58 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 01:04:06 [WARN] Slow query detected: SELECT * FROM users WHERE role_id = $1 AND active = true (took 578ms)
2025-01-16 01:04:12 [INFO] POST /api/auth/login 401 97ms
2025-01-16 01:04:13 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-16 01:04:28 [INFO] POST /api/roles 201 60ms
2025-01-16 01:04:32 [INFO] POST /api/auth/refresh 200 67ms
2025-01-16 01:04:33 [INFO] GET /api/health 200 1ms
2025-01-16 01:04:39 [INFO] GET /api/health 200 3ms
2025-01-16 01:04:50 [INFO] POST /api/auth/login 200 145ms
2025-01-16 01:05:01 [WARN] JWT token expires in less than 60 seconds for user 184
2025-01-16 01:05:10 [INFO] GET /api/health 200 3ms
2025-01-16 01:05:13 [INFO] POST /api/users 409 13ms
2025-01-16 01:05:28 [INFO] POST /api/users 409 14ms
2025-01-16 01:05:38 [INFO] POST /api/users 409 11ms
2025-01-16 01:05:40 [INFO] DELETE /api/users/141 204 44ms
2025-01-16 01:05:55 [INFO] DELETE /api/users/165 204 37ms
2025-01-16 01:06:02 [INFO] GET /api/health 200 2ms
2025-01-16 01:06:12 [INFO] POST /api/uploads 201 1788ms
2025-01-16 01:06:26 [INFO] GET /api/health 200 1ms
2025-01-16 01:06:38 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-16 01:06:42 [INFO] GET /api/users?page=1&limit=25 200 42ms
2025-01-16 01:06:56 [WARN] Redis reconnection attempt 81/5
2025-01-16 01:07:06 [INFO] PUT /api/users/30 200 46ms
2025-01-16 01:07:17 [INFO] GET /api/health 200 1ms
2025-01-16 01:07:30 [INFO] GET /api/settings 200 8ms
2025-01-16 01:07:34 [INFO] GET /api/users?page=5&limit=25 200 51ms
2025-01-16 01:07:39 [INFO] GET /api/users 200 26ms
2025-01-16 01:07:41 [INFO] GET /api/health 200 3ms
2025-01-16 01:07:45 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 01:07:48 [INFO] GET /api/health 200 2ms
2025-01-16 01:07:49 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 01:07:51 [ERROR] Failed to send email: SMTP connection refused
2025-01-16 01:07:53 [INFO] POST /api/roles 201 36ms
2025-01-16 01:07:54 [INFO] GET /api/users/177 200 14ms
2025-01-16 01:08:00 [INFO] GET /api/roles 200 14ms
2025-01-16 01:08:11 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 01:08:11 [DEBUG] Rows returned: 1
2025-01-16 01:08:20 [INFO] GET /api/health 200 2ms
2025-01-16 01:08:33 [INFO] GET /api/health 200 3ms
2025-01-16 01:08:39 [INFO] POST /api/auth/login 401 97ms
2025-01-16 01:08:41 [INFO] POST /api/auth/login 401 83ms
2025-01-16 01:08:43 [INFO] GET /api/health 200 2ms
2025-01-16 01:08:51 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 01:08:54 [INFO] POST /api/users 409 24ms
2025-01-16 01:09:02 [INFO] POST /api/roles 201 60ms
2025-01-16 01:09:04 [INFO] PUT /api/users/39 200 83ms
2025-01-16 01:09:14 [WARN] JWT token expires in less than 60 seconds for user 119
2025-01-16 01:09:29 [INFO] GET /api/notifications 200 33ms
2025-01-16 01:09:38 [INFO] GET /api/health 200 1ms
2025-01-16 01:09:46 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-16 01:09:58 [INFO] POST /api/users 409 19ms
2025-01-16 01:10:05 [INFO] GET /api/users/173 200 7ms
2025-01-16 01:10:20 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 01:10:20 [DEBUG] Rows returned: 16
2025-01-16 01:10:22 [INFO] GET /api/health 200 3ms
2025-01-16 01:10:28 [INFO] GET /api/users?role=admin 200 26ms
2025-01-16 01:10:36 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 01:10:36 [DEBUG] Rows returned: 12
2025-01-16 01:10:41 [INFO] GET /api/users/167 404 14ms
2025-01-16 01:10:56 [WARN] JWT token expires in less than 60 seconds for user 173
2025-01-16 01:10:59 [INFO] POST /api/uploads 201 1793ms
2025-01-16 01:11:13 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 01:11:13 [DEBUG] Rows returned: 10
2025-01-16 01:11:14 [WARN] Deprecated API version v1 called by client client-1
2025-01-16 01:11:24 [INFO] GET /api/users?role=editor 200 38ms
2025-01-16 01:11:25 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 01:11:25 [DEBUG] Rows returned: 35
2025-01-16 01:11:39 [WARN] Memory usage at 81% of allocated heap
2025-01-16 01:11:50 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 01:11:50 [DEBUG] Rows returned: 7
2025-01-16 01:11:55 [INFO] GET /api/health 200 2ms
2025-01-16 01:12:01 [INFO] GET /api/health 200 3ms
2025-01-16 01:12:08 [WARN] Rate limit exceeded for IP 192.168.9.38. Returning 429.
2025-01-16 01:12:11 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 01:12:11 [DEBUG] Rows returned: 27
2025-01-16 01:12:26 [INFO] POST /api/auth/login 200 189ms
2025-01-16 01:12:28 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 01:12:28 [DEBUG] Rows returned: 39
2025-01-16 01:12:31 [INFO] POST /api/auth/login 401 58ms
2025-01-16 01:12:45 [INFO] GET /api/health 200 2ms
2025-01-16 01:12:52 [INFO] PUT /api/users/195 200 67ms
2025-01-16 01:13:05 [INFO] GET /api/health 200 3ms
2025-01-16 01:13:18 [INFO] POST /api/auth/login 401 63ms
2025-01-16 01:13:20 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 01:13:28 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 01:13:39 [INFO] GET /api/health 200 3ms
2025-01-16 01:13:46 [INFO] GET /api/users?role=moderator 200 18ms
2025-01-16 01:13:55 [INFO] GET /api/health 200 3ms
2025-01-16 01:13:59 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-16 01:14:04 [INFO] GET /api/analytics/dashboard 200 428ms
2025-01-16 01:14:10 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-16 01:14:11 [INFO] POST /api/auth/login 401 96ms
2025-01-16 01:14:25 [INFO] GET /api/analytics/dashboard 200 204ms
2025-01-16 01:14:38 [INFO] GET /api/analytics/dashboard 200 730ms
2025-01-16 01:14:44 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 01:14:44 [DEBUG] New record created: id=343
2025-01-16 01:14:56 [INFO] GET /api/health 200 3ms
2025-01-16 01:14:57 [INFO] GET /api/users?page=4&limit=25 200 34ms
2025-01-16 01:15:06 [INFO] GET /api/roles 200 11ms
2025-01-16 01:15:15 [INFO] PUT /api/users/190 200 44ms
2025-01-16 01:15:22 [WARN] Rate limit approaching for IP 192.168.6.221 (88/100 requests in window)
2025-01-16 01:15:30 [INFO] PUT /api/settings 200 52ms
2025-01-16 01:15:43 [INFO] GET /api/users/39 404 17ms
2025-01-16 01:15:49 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 01:15:49 [DEBUG] New record created: id=126
2025-01-16 01:16:02 [INFO] GET /api/health 200 1ms
2025-01-16 01:16:06 [INFO] GET /api/users/48 200 20ms
2025-01-16 01:16:14 [INFO] GET /api/health 200 2ms
2025-01-16 01:16:27 [INFO] GET /api/health 200 1ms
2025-01-16 01:16:34 [INFO] POST /api/auth/refresh 200 35ms
2025-01-16 01:16:38 [INFO] POST /api/users 409 14ms
2025-01-16 01:16:42 [INFO] GET /api/analytics/dashboard 200 384ms
2025-01-16 01:16:57 [INFO] GET /api/health 200 3ms
2025-01-16 01:17:12 [INFO] POST /api/users 201 84ms
2025-01-16 01:17:20 [INFO] GET /api/analytics/dashboard 200 720ms
2025-01-16 01:17:28 [INFO] PUT /api/settings 200 23ms
2025-01-16 01:17:42 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 01:17:45 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 01:17:45 [DEBUG] Rows returned: 14
2025-01-16 01:17:59 [WARN] Slow query detected: DELETE FROM sessions WHERE expires_at < NOW() (took 1045ms)
2025-01-16 01:18:04 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 01:18:04 [DEBUG] New record created: id=300
2025-01-16 01:18:08 [INFO] GET /api/users?page=2&limit=25 200 58ms
2025-01-16 01:18:20 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 01:18:20 [DEBUG] Rows returned: 43
2025-01-16 01:18:33 [WARN] Rate limit exceeded for IP 192.168.2.62. Returning 429.
2025-01-16 01:18:44 [INFO] GET /api/users/8 404 11ms
2025-01-16 01:18:50 [WARN] Slow query detected: INSERT INTO users (username, email, role_id) VALUES ($1, $2, (took 832ms)
2025-01-16 01:19:02 [INFO] GET /api/health 200 1ms
2025-01-16 01:19:06 [INFO] POST /api/users 201 84ms
2025-01-16 01:19:15 [INFO] DELETE /api/users/135 204 21ms
2025-01-16 01:19:28 [INFO] GET /api/health 200 3ms
2025-01-16 01:19:38 [INFO] GET /api/settings 200 5ms
2025-01-16 01:19:47 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-16 01:19:49 [INFO] GET /api/users/109 404 14ms
2025-01-16 01:20:00 [INFO] GET /api/health 200 1ms
2025-01-16 01:20:06 [INFO] DELETE /api/users/20 204 29ms
2025-01-16 01:20:11 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 01:20:11 [DEBUG] New record created: id=336
2025-01-16 01:20:24 [INFO] GET /api/health 200 1ms
2025-01-16 01:20:33 [INFO] POST /api/auth/refresh 200 77ms
2025-01-16 01:20:46 [INFO] GET /api/users/25 404 15ms
2025-01-16 01:20:47 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 01:20:52 [INFO] POST /api/roles 201 31ms
2025-01-16 01:21:00 [INFO] GET /api/health 200 1ms
2025-01-16 01:21:01 [INFO] DELETE /api/users/92 204 36ms
2025-01-16 01:21:04 [INFO] GET /api/health 200 2ms
2025-01-16 01:21:13 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 01:21:13 [DEBUG] Rows returned: 7
2025-01-16 01:21:26 [INFO] POST /api/uploads 201 1159ms
2025-01-16 01:21:27 [INFO] GET /api/health 200 1ms
2025-01-16 01:21:39 [WARN] Memory usage at 80% of allocated heap
2025-01-16 01:21:51 [INFO] POST /api/auth/refresh 200 79ms
2025-01-16 01:21:56 [INFO] DELETE /api/users/56 204 44ms
2025-01-16 01:21:57 [INFO] POST /api/auth/login 401 101ms
2025-01-16 01:22:01 [INFO] GET /api/health 200 1ms
2025-01-16 01:22:03 [INFO] GET /api/users/184 200 8ms
2025-01-16 01:22:13 [INFO] DELETE /api/users/7 204 26ms
2025-01-16 01:22:25 [INFO] PUT /api/users/66 200 71ms
2025-01-16 01:22:33 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 01:22:33 [DEBUG] Rows returned: 0
2025-01-16 01:22:46 [WARN] JWT token expires in less than 60 seconds for user 14
2025-01-16 01:23:01 [INFO] GET /api/users?page=1&limit=25 200 55ms
2025-01-16 01:23:04 [INFO] GET /api/health 200 2ms
2025-01-16 01:23:07 [INFO] GET /api/health 200 2ms
2025-01-16 01:23:19 [INFO] POST /api/roles 201 45ms
2025-01-16 01:23:22 [INFO] GET /api/users?role=moderator 200 19ms
2025-01-16 01:23:32 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 01:23:32 [DEBUG] Rows returned: 21
2025-01-16 01:23:44 [INFO] GET /api/health 200 2ms
2025-01-16 01:23:57 [WARN] JWT token expires in less than 60 seconds for user 160
2025-01-16 01:24:03 [INFO] PUT /api/settings 200 40ms
2025-01-16 01:24:04 [WARN] Redis reconnection attempt 93/5
2025-01-16 01:24:11 [INFO] POST /api/auth/refresh 200 46ms
2025-01-16 01:24:16 [ERROR] Worker process crashed. Restarting...
2025-01-16 01:24:31 [WARN] Deprecated API version v1 called by client client-2
2025-01-16 01:24:38 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 01:24:38 [DEBUG] Rows returned: 38
2025-01-16 01:24:50 [INFO] DELETE /api/users/10 204 27ms
2025-01-16 01:25:05 [INFO] GET /api/users/78 200 6ms
2025-01-16 01:25:12 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 01:25:12 [DEBUG] Rows returned: 36
2025-01-16 01:25:14 [INFO] GET /api/health 200 2ms
2025-01-16 01:25:21 [INFO] GET /api/notifications 200 10ms
2025-01-16 01:25:22 [INFO] GET /api/health 200 1ms
2025-01-16 01:25:23 [INFO] POST /api/auth/login 401 109ms
2025-01-16 01:25:30 [INFO] PUT /api/users/76 200 50ms
2025-01-16 01:25:36 [INFO] POST /api/roles 201 55ms
2025-01-16 01:25:43 [INFO] POST /api/auth/refresh 200 42ms
2025-01-16 01:25:52 [INFO] GET /api/analytics/dashboard 200 291ms
2025-01-16 01:26:01 [INFO] GET /api/users/99 404 18ms
2025-01-16 01:26:12 [INFO] POST /api/uploads 201 1659ms
2025-01-16 01:26:18 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 01:26:22 [INFO] GET /api/health 200 2ms
2025-01-16 01:26:24 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 01:26:24 [DEBUG] Rows returned: 17
2025-01-16 01:26:32 [WARN] JWT token expires in less than 60 seconds for user 199
2025-01-16 01:26:46 [INFO] DELETE /api/users/32 204 35ms
2025-01-16 01:26:47 [INFO] POST /api/roles 201 62ms
2025-01-16 01:26:52 [WARN] Memory usage at 95% of allocated heap
2025-01-16 01:27:03 [INFO] POST /api/uploads 201 637ms
2025-01-16 01:27:17 [INFO] DELETE /api/users/114 204 50ms
2025-01-16 01:27:29 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 01:27:42 [INFO] PUT /api/settings 200 49ms
2025-01-16 01:27:54 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 01:27:56 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 01:28:11 [INFO] GET /api/health 200 3ms
2025-01-16 01:28:26 [WARN] Memory usage at 87% of allocated heap
2025-01-16 01:28:41 [INFO] GET /api/settings 200 12ms
2025-01-16 01:28:50 [INFO] GET /api/analytics/dashboard 200 606ms
2025-01-16 01:29:01 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 01:29:01 [DEBUG] Rows returned: 26
2025-01-16 01:29:14 [INFO] GET /api/settings 200 5ms
2025-01-16 01:29:20 [INFO] POST /api/users 201 92ms
2025-01-16 01:29:34 [INFO] GET /api/users/109 404 17ms
2025-01-16 01:29:42 [INFO] POST /api/auth/login 401 101ms
2025-01-16 01:29:55 [INFO] PUT /api/settings 200 32ms
2025-01-16 01:30:10 [INFO] POST /api/auth/login 200 247ms
2025-01-16 01:30:21 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 01:30:23 [INFO] GET /api/settings 200 10ms
2025-01-16 01:30:30 [INFO] GET /api/health 200 2ms
2025-01-16 01:30:36 [INFO] GET /api/health 200 3ms
2025-01-16 01:30:49 [INFO] GET /api/settings 200 5ms
2025-01-16 01:31:00 [INFO] GET /api/roles 200 6ms
2025-01-16 01:31:05 [INFO] POST /api/auth/refresh 200 53ms
2025-01-16 01:31:17 [INFO] GET /api/users/93 200 13ms
2025-01-16 01:31:27 [INFO] PUT /api/settings 200 40ms
2025-01-16 01:31:30 [INFO] PUT /api/users/126 200 87ms
2025-01-16 01:31:39 [INFO] GET /api/users?role=viewer 200 27ms
2025-01-16 01:31:53 [WARN] Request body exceeded soft limit (3235KB)
2025-01-16 01:32:03 [INFO] GET /api/health 200 1ms
2025-01-16 01:32:16 [INFO] POST /api/auth/refresh 200 38ms
2025-01-16 01:32:25 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 01:32:25 [DEBUG] Rows returned: 49
2025-01-16 01:32:28 [INFO] GET /api/settings 200 9ms
2025-01-16 01:32:42 [WARN] Rate limit exceeded for IP 192.168.7.210. Returning 429.
2025-01-16 01:32:55 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 01:32:55 [DEBUG] Rows returned: 50
2025-01-16 01:33:06 [INFO] POST /api/auth/refresh 200 64ms
2025-01-16 01:33:09 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 01:33:23 [INFO] GET /api/health 200 2ms
2025-01-16 01:33:27 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 01:33:27 [DEBUG] Rows returned: 3
2025-01-16 01:33:35 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 01:33:35 [DEBUG] Rows returned: 6
2025-01-16 01:33:42 [INFO] GET /api/analytics/dashboard 200 462ms
2025-01-16 01:33:45 [INFO] GET /api/users/108 404 9ms
2025-01-16 01:33:55 [INFO] PUT /api/users/175 200 61ms
2025-01-16 01:33:56 [INFO] GET /api/health 200 3ms
2025-01-16 01:34:04 [INFO] GET /api/health 200 2ms
2025-01-16 01:34:14 [INFO] GET /api/users 200 29ms
2025-01-16 01:34:20 [INFO] GET /api/analytics/dashboard 200 721ms
2025-01-16 01:34:23 [INFO] GET /api/analytics/dashboard 200 736ms
2025-01-16 01:34:25 [INFO] POST /api/roles 201 43ms
2025-01-16 01:34:38 [INFO] DELETE /api/users/46 204 47ms
2025-01-16 01:34:50 [INFO] GET /api/roles 200 13ms
2025-01-16 01:34:51 [INFO] POST /api/auth/login 200 130ms
2025-01-16 01:34:53 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 01:34:53 [DEBUG] New record created: id=343
2025-01-16 01:35:07 [INFO] GET /api/roles 200 6ms
2025-01-16 01:35:16 [INFO] POST /api/auth/refresh 200 57ms
2025-01-16 01:35:31 [INFO] GET /api/users?page=2&limit=25 200 26ms
2025-01-16 01:35:44 [INFO] DELETE /api/users/145 204 39ms
2025-01-16 01:35:51 [ERROR] Failed to send email: SMTP connection refused
2025-01-16 01:36:06 [INFO] PUT /api/users/143 200 62ms
2025-01-16 01:36:21 [INFO] GET /api/health 200 3ms
2025-01-16 01:36:36 [ERROR] Failed to send email: SMTP connection refused
2025-01-16 01:36:48 [INFO] POST /api/roles 201 45ms
2025-01-16 01:36:49 [INFO] GET /api/health 200 3ms
2025-01-16 01:36:52 [INFO] GET /api/health 200 2ms
2025-01-16 01:37:05 [INFO] GET /api/users/117 200 17ms
2025-01-16 01:37:08 [INFO] GET /api/users?role=editor 200 28ms
2025-01-16 01:37:16 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 01:37:16 [DEBUG] New record created: id=192
2025-01-16 01:37:30 [INFO] GET /api/health 200 3ms
2025-01-16 01:37:35 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 01:37:35 [DEBUG] Rows returned: 32
2025-01-16 01:37:39 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 01:37:39 [DEBUG] New record created: id=252
2025-01-16 01:37:48 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 01:37:48 [DEBUG] Rows returned: 31
2025-01-16 01:37:58 [INFO] GET /api/health 200 3ms
2025-01-16 01:38:07 [INFO] GET /api/health 200 3ms
2025-01-16 01:38:17 [INFO] GET /api/health 200 3ms
2025-01-16 01:38:19 [INFO] GET /api/health 200 3ms
2025-01-16 01:38:26 [INFO] GET /api/notifications 200 25ms
2025-01-16 01:38:39 [INFO] PUT /api/settings 200 21ms
2025-01-16 01:38:47 [INFO] POST /api/users 409 22ms
2025-01-16 01:38:53 [INFO] POST /api/roles 201 44ms
2025-01-16 01:38:55 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 01:38:55 [DEBUG] Rows returned: 9
2025-01-16 01:38:56 [INFO] GET /api/roles 200 6ms
2025-01-16 01:39:06 [INFO] PUT /api/settings 200 35ms
2025-01-16 01:39:14 [INFO] POST /api/users 409 13ms
2025-01-16 01:39:19 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 01:39:32 [INFO] GET /api/health 200 1ms
2025-01-16 01:39:47 [INFO] GET /api/users/8 200 14ms
2025-01-16 01:39:53 [INFO] DELETE /api/users/24 204 21ms
2025-01-16 01:40:05 [INFO] GET /api/users/171 200 11ms
2025-01-16 01:40:07 [WARN] JWT token expires in less than 60 seconds for user 27
2025-01-16 01:40:19 [WARN] JWT token expires in less than 60 seconds for user 2
2025-01-16 01:40:21 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 01:40:31 [INFO] POST /api/users 409 18ms
2025-01-16 01:40:32 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 01:40:37 [INFO] GET /api/health 200 3ms
2025-01-16 01:40:44 [WARN] Slow query detected: INSERT INTO users (username, email, role_id) VALUES ($1, $2, (took 1631ms)
2025-01-16 01:40:56 [INFO] GET /api/roles 200 13ms
2025-01-16 01:41:08 [INFO] GET /api/health 200 1ms
2025-01-16 01:41:13 [INFO] GET /api/users/81 200 8ms
2025-01-16 01:41:23 [WARN] S3 upload retry after timeout (1132ms)
2025-01-16 01:41:37 [INFO] GET /api/analytics/dashboard 200 250ms
2025-01-16 01:41:51 [INFO] GET /api/notifications 200 20ms
2025-01-16 01:41:59 [INFO] GET /api/roles 200 11ms
2025-01-16 01:42:13 [INFO] GET /api/users 200 51ms
2025-01-16 01:42:26 [INFO] GET /api/analytics/dashboard 200 730ms
2025-01-16 01:42:29 [INFO] GET /api/analytics/dashboard 200 775ms
2025-01-16 01:42:38 [INFO] GET /api/health 200 1ms
2025-01-16 01:42:45 [INFO] POST /api/uploads 201 1522ms
2025-01-16 01:42:56 [INFO] GET /api/health 200 2ms
2025-01-16 01:43:02 [WARN] Slow query detected: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1 (took 648ms)
2025-01-16 01:43:07 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 01:43:07 [DEBUG] Rows returned: 19
2025-01-16 01:43:22 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 01:43:35 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 01:43:35 [DEBUG] New record created: id=325
2025-01-16 01:43:36 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 01:43:36 [DEBUG] Rows returned: 4
2025-01-16 01:43:42 [INFO] GET /api/health 200 1ms
2025-01-16 01:43:50 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 01:43:50 [DEBUG] Rows returned: 26
2025-01-16 01:44:03 [INFO] GET /api/health 200 2ms
2025-01-16 01:44:12 [INFO] PUT /api/settings 200 29ms
2025-01-16 01:44:17 [INFO] GET /api/settings 200 7ms
2025-01-16 01:44:31 [WARN] Slow query detected: SELECT * FROM permissions WHERE role_id = $1 (took 1082ms)
2025-01-16 01:44:40 [INFO] GET /api/roles 200 14ms
2025-01-16 01:44:48 [INFO] DELETE /api/users/153 204 33ms
2025-01-16 01:45:00 [INFO] GET /api/users 200 80ms
2025-01-16 01:45:08 [INFO] GET /api/health 200 2ms
2025-01-16 01:45:09 [INFO] GET /api/analytics/dashboard 200 668ms
2025-01-16 01:45:15 [INFO] GET /api/health 200 1ms
2025-01-16 01:45:27 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 01:45:27 [DEBUG] Rows returned: 0
2025-01-16 01:45:42 [INFO] GET /api/analytics/dashboard 200 719ms
2025-01-16 01:45:47 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-16 01:45:54 [WARN] JWT token expires in less than 60 seconds for user 46
2025-01-16 01:46:03 [INFO] GET /api/health 200 2ms
2025-01-16 01:46:13 [INFO] GET /api/health 200 2ms
2025-01-16 01:46:17 [INFO] GET /api/settings 200 7ms
2025-01-16 01:46:25 [WARN] Deprecated API version v1 called by client client-15
2025-01-16 01:46:26 [INFO] GET /api/health 200 3ms
2025-01-16 01:46:36 [INFO] GET /api/users 200 69ms
2025-01-16 01:46:44 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 01:46:44 [DEBUG] Rows returned: 37
2025-01-16 01:46:56 [INFO] GET /api/health 200 3ms
2025-01-16 01:46:57 [INFO] POST /api/users 409 11ms
2025-01-16 01:47:06 [INFO] GET /api/users/191 404 16ms
2025-01-16 01:47:07 [INFO] GET /api/analytics/dashboard 200 613ms
2025-01-16 01:47:21 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 01:47:21 [DEBUG] Rows returned: 3
2025-01-16 01:47:33 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 01:47:33 [DEBUG] Rows returned: 15
2025-01-16 01:47:41 [INFO] GET /api/users?page=5&limit=25 200 31ms
2025-01-16 01:47:47 [INFO] POST /api/auth/refresh 200 75ms
2025-01-16 01:47:54 [INFO] GET /api/settings 200 11ms
2025-01-16 01:48:09 [INFO] GET /api/health 200 1ms
2025-01-16 01:48:16 [INFO] GET /api/health 200 1ms
2025-01-16 01:48:19 [INFO] GET /api/health 200 1ms
2025-01-16 01:48:33 [INFO] GET /api/analytics/dashboard 200 351ms
2025-01-16 01:48:36 [INFO] GET /api/roles 200 5ms
2025-01-16 01:48:43 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 01:48:43 [DEBUG] Rows returned: 39
2025-01-16 01:48:51 [INFO] POST /api/auth/refresh 200 64ms
2025-01-16 01:49:06 [INFO] POST /api/roles 201 70ms
2025-01-16 01:49:07 [INFO] GET /api/users?role=viewer 200 24ms
2025-01-16 01:49:11 [INFO] GET /api/health 200 3ms
2025-01-16 01:49:15 [WARN] Slow query detected: UPDATE users SET active = false WHERE id = $1 (took 1181ms)
2025-01-16 01:49:24 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 01:49:24 [DEBUG] Rows returned: 31
2025-01-16 01:49:39 [INFO] GET /api/roles 200 10ms
2025-01-16 01:49:49 [INFO] GET /api/health 200 2ms
2025-01-16 01:49:54 [INFO] PUT /api/settings 200 35ms
2025-01-16 01:49:55 [INFO] GET /api/health 200 3ms
2025-01-16 01:49:56 [INFO] POST /api/auth/refresh 200 37ms
2025-01-16 01:50:00 [INFO] GET /api/users 200 64ms
2025-01-16 01:50:09 [WARN] Deprecated API version v1 called by client client-17
2025-01-16 01:50:14 [INFO] POST /api/roles 201 62ms
2025-01-16 01:50:17 [INFO] GET /api/health 200 2ms
2025-01-16 01:50:21 [INFO] GET /api/users?page=5&limit=25 200 48ms
2025-01-16 01:50:23 [INFO] GET /api/users?page=2&limit=25 200 46ms
2025-01-16 01:50:26 [INFO] GET /api/users/24 200 20ms
2025-01-16 01:50:37 [INFO] GET /api/health 200 2ms
2025-01-16 01:50:38 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 01:50:38 [DEBUG] Rows returned: 13
2025-01-16 01:50:52 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 01:50:52 [DEBUG] Rows returned: 7
2025-01-16 01:51:07 [INFO] GET /api/roles 200 6ms
2025-01-16 01:51:21 [INFO] POST /api/users 201 113ms
2025-01-16 01:51:32 [WARN] Memory usage at 93% of allocated heap
2025-01-16 01:51:45 [INFO] GET /api/health 200 2ms
2025-01-16 01:51:52 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 01:51:52 [DEBUG] New record created: id=451
2025-01-16 01:52:05 [INFO] GET /api/settings 200 8ms
2025-01-16 01:52:14 [INFO] PUT /api/settings 200 29ms
2025-01-16 01:52:25 [INFO] PUT /api/users/155 200 43ms
2025-01-16 01:52:31 [INFO] POST /api/auth/login 401 69ms
2025-01-16 01:52:36 [INFO] GET /api/health 200 1ms
2025-01-16 01:52:40 [INFO] PUT /api/settings 200 40ms
2025-01-16 01:52:49 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 01:52:54 [INFO] GET /api/health 200 2ms
2025-01-16 01:52:59 [INFO] POST /api/auth/login 401 89ms
2025-01-16 01:53:14 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 01:53:14 [DEBUG] Rows returned: 44
2025-01-16 01:53:24 [ERROR] Database connection timeout after 5000ms
2025-01-16 01:53:25 [INFO] GET /api/health 200 3ms
2025-01-16 01:53:31 [ERROR] Database connection timeout after 5000ms
2025-01-16 01:53:39 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 01:53:47 [INFO] GET /api/health 200 1ms
2025-01-16 01:53:51 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-16 01:54:04 [INFO] GET /api/health 200 1ms
2025-01-16 01:54:18 [INFO] GET /api/notifications 200 31ms
2025-01-16 01:54:28 [INFO] POST /api/users 201 99ms
2025-01-16 01:54:36 [INFO] GET /api/health 200 3ms
2025-01-16 01:54:51 [INFO] POST /api/auth/login 200 110ms
2025-01-16 01:55:04 [INFO] POST /api/users 201 139ms
2025-01-16 01:55:10 [INFO] GET /api/notifications 200 16ms
2025-01-16 01:55:17 [INFO] GET /api/users?page=2&limit=25 200 58ms
2025-01-16 01:55:18 [INFO] GET /api/health 200 3ms
2025-01-16 01:55:21 [INFO] GET /api/users 200 30ms
2025-01-16 01:55:31 [INFO] GET /api/health 200 3ms
2025-01-16 01:55:40 [INFO] POST /api/auth/refresh 200 53ms
2025-01-16 01:55:42 [INFO] POST /api/auth/login 200 244ms
2025-01-16 01:55:51 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 01:55:51 [DEBUG] Rows returned: 26
2025-01-16 01:56:05 [INFO] POST /api/auth/refresh 200 71ms
2025-01-16 01:56:16 [INFO] POST /api/auth/login 401 51ms
2025-01-16 01:56:23 [INFO] GET /api/health 200 2ms
2025-01-16 01:56:37 [INFO] GET /api/health 200 3ms
2025-01-16 01:56:52 [INFO] POST /api/users 409 15ms
2025-01-16 01:56:58 [INFO] GET /api/roles 200 5ms
2025-01-16 01:57:05 [INFO] GET /api/users/174 200 9ms
2025-01-16 01:57:08 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 01:57:08 [DEBUG] Rows returned: 42
2025-01-16 01:57:18 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 01:57:18 [DEBUG] Rows returned: 38
2025-01-16 01:57:26 [INFO] GET /api/users/11 404 11ms
2025-01-16 01:57:31 [INFO] GET /api/health 200 2ms
2025-01-16 01:57:46 [INFO] POST /api/auth/refresh 200 64ms
2025-01-16 01:57:50 [INFO] POST /api/auth/login 401 67ms
2025-01-16 01:57:57 [INFO] GET /api/users/56 404 8ms
2025-01-16 01:58:04 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 01:58:04 [DEBUG] Rows returned: 46
2025-01-16 01:58:11 [INFO] GET /api/users?role=moderator 200 22ms
2025-01-16 01:58:22 [INFO] GET /api/analytics/dashboard 200 655ms
2025-01-16 01:58:31 [INFO] GET /api/users?role=editor 200 18ms
2025-01-16 01:58:34 [INFO] GET /api/notifications 200 19ms
2025-01-16 01:58:49 [INFO] GET /api/users?role=admin 200 35ms
2025-01-16 01:59:01 [INFO] GET /api/users/73 200 20ms
2025-01-16 01:59:12 [INFO] POST /api/users 201 115ms
2025-01-16 01:59:24 [INFO] PUT /api/users/29 200 50ms
2025-01-16 01:59:32 [INFO] GET /api/users 200 52ms
2025-01-16 01:59:35 [INFO] POST /api/roles 201 47ms
2025-01-16 01:59:47 [WARN] Memory usage at 89% of allocated heap
2025-01-16 01:59:50 [INFO] PUT /api/settings 200 40ms
2025-01-16 02:00:04 [INFO] POST /api/users 201 99ms
2025-01-16 02:00:09 [INFO] POST /api/auth/login 401 72ms
2025-01-16 02:00:19 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 02:00:19 [DEBUG] Rows returned: 10
2025-01-16 02:00:22 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 02:00:23 [INFO] GET /api/roles 200 7ms
2025-01-16 02:00:31 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 02:00:40 [INFO] POST /api/uploads 201 1761ms
2025-01-16 02:00:43 [INFO] GET /api/health 200 3ms
2025-01-16 02:00:54 [INFO] GET /api/health 200 3ms
2025-01-16 02:01:01 [INFO] GET /api/users?page=4&limit=25 200 57ms
2025-01-16 02:01:13 [INFO] GET /api/settings 200 5ms
2025-01-16 02:01:17 [INFO] GET /api/users?page=5&limit=25 200 28ms
2025-01-16 02:01:26 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 02:01:34 [INFO] GET /api/users?page=1&limit=25 200 28ms
2025-01-16 02:01:46 [INFO] POST /api/auth/login 401 54ms
2025-01-16 02:01:56 [INFO] GET /api/health 200 1ms
2025-01-16 02:02:01 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 02:02:01 [DEBUG] Rows returned: 36
2025-01-16 02:02:16 [INFO] GET /api/health 200 1ms
2025-01-16 02:02:17 [INFO] POST /api/auth/login 401 91ms
2025-01-16 02:02:22 [INFO] POST /api/roles 201 33ms
2025-01-16 02:02:24 [INFO] GET /api/notifications 200 30ms
2025-01-16 02:02:36 [INFO] GET /api/health 200 3ms
2025-01-16 02:02:41 [INFO] GET /api/health 200 3ms
2025-01-16 02:02:53 [INFO] GET /api/health 200 3ms
2025-01-16 02:02:56 [INFO] POST /api/uploads 201 615ms
2025-01-16 02:03:04 [INFO] GET /api/health 200 1ms
2025-01-16 02:03:07 [INFO] POST /api/auth/login 200 127ms
2025-01-16 02:03:08 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 02:03:08 [DEBUG] Rows returned: 40
2025-01-16 02:03:17 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 02:03:17 [DEBUG] Rows returned: 48
2025-01-16 02:03:32 [INFO] GET /api/users/127 404 18ms
2025-01-16 02:03:47 [INFO] POST /api/users 201 132ms
2025-01-16 02:03:52 [INFO] POST /api/auth/refresh 200 49ms
2025-01-16 02:04:06 [INFO] POST /api/roles 201 38ms
2025-01-16 02:04:21 [INFO] GET /api/users?page=2&limit=25 200 43ms
2025-01-16 02:04:29 [INFO] GET /api/health 200 3ms
2025-01-16 02:04:43 [INFO] GET /api/users/106 200 16ms
2025-01-16 02:04:55 [INFO] GET /api/users?page=3&limit=25 200 47ms
2025-01-16 02:05:05 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 02:05:05 [DEBUG] New record created: id=302
2025-01-16 02:05:20 [INFO] POST /api/users 409 21ms
2025-01-16 02:05:35 [INFO] GET /api/notifications 200 11ms
2025-01-16 02:05:48 [INFO] GET /api/health 200 2ms
2025-01-16 02:06:03 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 02:06:08 [INFO] POST /api/roles 201 67ms
2025-01-16 02:06:20 [INFO] POST /api/auth/refresh 200 74ms
2025-01-16 02:06:31 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 02:06:31 [DEBUG] Rows returned: 3
2025-01-16 02:06:36 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 02:06:51 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 02:06:51 [DEBUG] New record created: id=452
2025-01-16 02:07:05 [INFO] GET /api/health 200 3ms
2025-01-16 02:07:09 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 02:07:11 [INFO] GET /api/health 200 1ms
2025-01-16 02:07:12 [INFO] POST /api/auth/refresh 200 41ms
2025-01-16 02:07:22 [INFO] GET /api/settings 200 11ms
2025-01-16 02:07:33 [INFO] GET /api/users/33 404 13ms
2025-01-16 02:07:42 [INFO] PUT /api/settings 200 38ms
2025-01-16 02:07:51 [INFO] GET /api/health 200 3ms
2025-01-16 02:08:01 [INFO] GET /api/users?page=2&limit=25 200 41ms
2025-01-16 02:08:12 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-16 02:08:17 [INFO] GET /api/roles 200 5ms
2025-01-16 02:08:26 [INFO] GET /api/health 200 2ms
2025-01-16 02:08:40 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 02:08:40 [DEBUG] Rows returned: 46
2025-01-16 02:08:44 [INFO] PUT /api/settings 200 40ms
2025-01-16 02:08:59 [INFO] GET /api/roles 200 8ms
2025-01-16 02:09:11 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 02:09:11 [DEBUG] Rows returned: 9
2025-01-16 02:09:20 [INFO] GET /api/users/19 404 12ms
2025-01-16 02:09:31 [INFO] GET /api/notifications 200 18ms
2025-01-16 02:09:44 [INFO] POST /api/uploads 201 1801ms
2025-01-16 02:09:52 [INFO] GET /api/users 200 26ms
2025-01-16 02:10:02 [INFO] GET /api/health 200 2ms
2025-01-16 02:10:13 [INFO] POST /api/auth/refresh 200 75ms
2025-01-16 02:10:24 [INFO] GET /api/health 200 1ms
2025-01-16 02:10:27 [INFO] POST /api/auth/refresh 200 68ms
2025-01-16 02:10:36 [INFO] GET /api/analytics/dashboard 200 447ms
2025-01-16 02:10:44 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 02:10:44 [DEBUG] New record created: id=305
2025-01-16 02:10:52 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 02:10:52 [DEBUG] New record created: id=408
2025-01-16 02:11:03 [INFO] GET /api/settings 200 11ms
2025-01-16 02:11:13 [INFO] GET /api/health 200 3ms
2025-01-16 02:11:18 [INFO] GET /api/roles 200 10ms
2025-01-16 02:11:26 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-16 02:11:27 [INFO] GET /api/users?page=5&limit=25 200 45ms
2025-01-16 02:11:30 [INFO] POST /api/roles 201 53ms
2025-01-16 02:11:41 [INFO] DELETE /api/users/50 204 40ms
2025-01-16 02:11:49 [INFO] DELETE /api/users/19 204 46ms
2025-01-16 02:11:57 [INFO] POST /api/auth/login 200 218ms
2025-01-16 02:12:04 [INFO] GET /api/users 200 76ms
2025-01-16 02:12:05 [INFO] GET /api/health 200 1ms
2025-01-16 02:12:13 [INFO] POST /api/roles 201 59ms
2025-01-16 02:12:14 [INFO] GET /api/health 200 2ms
2025-01-16 02:12:16 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 02:12:16 [DEBUG] Rows returned: 14
2025-01-16 02:12:25 [INFO] GET /api/health 200 1ms
2025-01-16 02:12:39 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 02:12:39 [DEBUG] Rows returned: 12
2025-01-16 02:12:41 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 02:12:41 [DEBUG] Rows returned: 21
2025-01-16 02:12:56 [INFO] GET /api/analytics/dashboard 200 769ms
2025-01-16 02:13:04 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 02:13:04 [DEBUG] Rows returned: 10
2025-01-16 02:13:16 [INFO] GET /api/health 200 2ms
2025-01-16 02:13:21 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 02:13:21 [DEBUG] Rows returned: 49
2025-01-16 02:13:24 [INFO] GET /api/notifications 200 16ms
2025-01-16 02:13:26 [INFO] GET /api/users?page=2&limit=25 200 59ms
2025-01-16 02:13:34 [INFO] GET /api/health 200 3ms
2025-01-16 02:13:38 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 02:13:52 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 02:14:03 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 02:14:03 [DEBUG] Rows returned: 37
2025-01-16 02:14:15 [INFO] GET /api/roles 200 15ms
2025-01-16 02:14:20 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 02:14:20 [DEBUG] New record created: id=192
2025-01-16 02:14:21 [WARN] Rate limit exceeded for IP 192.168.2.217. Returning 429.
2025-01-16 02:14:27 [INFO] POST /api/auth/refresh 200 64ms
2025-01-16 02:14:30 [INFO] GET /api/users/8 404 18ms
2025-01-16 02:14:39 [INFO] POST /api/users 201 93ms
2025-01-16 02:14:44 [INFO] GET /api/users?page=1&limit=25 200 51ms
2025-01-16 02:14:57 [INFO] POST /api/auth/refresh 200 35ms
2025-01-16 02:15:09 [INFO] GET /api/roles 200 6ms
2025-01-16 02:15:10 [ERROR] Deadlock detected in transaction tx-59609
2025-01-16 02:15:10 [ERROR] Stack trace:
    at Router.handle (node_modules/express/lib/router/index.js:212)
    at validateRequest (src/middleware/validation.ts:195)
    at authenticate (src/middleware/auth.ts:244)
    at processTicksAndRejections (node:internal/process/task_queues:108)
    at Layer.handle (node_modules/express/lib/router/layer.js:81)
2025-01-16 02:15:20 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 02:15:20 [DEBUG] Rows returned: 19
2025-01-16 02:15:22 [INFO] GET /api/health 200 2ms
2025-01-16 02:15:23 [INFO] GET /api/users?role=admin 200 22ms
2025-01-16 02:15:27 [INFO] POST /api/roles 201 49ms
2025-01-16 02:15:39 [INFO] GET /api/health 200 2ms
2025-01-16 02:15:43 [INFO] GET /api/health 200 2ms
2025-01-16 02:15:47 [INFO] GET /api/health 200 1ms
2025-01-16 02:15:53 [INFO] POST /api/roles 201 63ms
2025-01-16 02:15:55 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 02:15:55 [DEBUG] Rows returned: 9
2025-01-16 02:16:05 [INFO] GET /api/settings 200 10ms
2025-01-16 02:16:19 [INFO] GET /api/users/13 404 9ms
2025-01-16 02:16:26 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 02:16:33 [INFO] GET /api/health 200 2ms
2025-01-16 02:16:34 [INFO] GET /api/users 200 54ms
2025-01-16 02:16:45 [INFO] GET /api/health 200 3ms
2025-01-16 02:16:59 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 02:16:59 [DEBUG] Rows returned: 38
2025-01-16 02:17:06 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 02:17:06 [DEBUG] Rows returned: 38
2025-01-16 02:17:16 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-16 02:17:27 [INFO] POST /api/auth/refresh 200 39ms
2025-01-16 02:17:30 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 02:17:30 [DEBUG] New record created: id=162
2025-01-16 02:17:31 [INFO] GET /api/analytics/dashboard 200 663ms
2025-01-16 02:17:45 [INFO] GET /api/notifications 200 34ms
2025-01-16 02:17:49 [INFO] PUT /api/settings 200 47ms
2025-01-16 02:17:52 [INFO] GET /api/roles 200 5ms
2025-01-16 02:18:06 [INFO] GET /api/health 200 1ms
2025-01-16 02:18:16 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 02:18:16 [DEBUG] Rows returned: 20
2025-01-16 02:18:21 [INFO] GET /api/users?role=viewer 200 18ms
2025-01-16 02:18:34 [ERROR] Database connection timeout after 5000ms
2025-01-16 02:18:48 [INFO] POST /api/auth/refresh 200 31ms
2025-01-16 02:18:57 [INFO] POST /api/uploads 201 1131ms
2025-01-16 02:19:07 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 02:19:07 [DEBUG] Rows returned: 41
2025-01-16 02:19:11 [INFO] POST /api/auth/login 401 85ms
2025-01-16 02:19:22 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 02:19:22 [DEBUG] Rows returned: 50
2025-01-16 02:19:26 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 02:19:26 [DEBUG] Rows returned: 36
2025-01-16 02:19:33 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 02:19:33 [DEBUG] Rows returned: 34
2025-01-16 02:19:35 [INFO] GET /api/health 200 1ms
2025-01-16 02:19:50 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 02:19:52 [INFO] GET /api/notifications 200 22ms
2025-01-16 02:20:05 [INFO] GET /api/health 200 3ms
2025-01-16 02:20:06 [INFO] POST /api/roles 201 52ms
2025-01-16 02:20:17 [INFO] GET /api/health 200 1ms
2025-01-16 02:20:23 [INFO] DELETE /api/users/158 204 35ms
2025-01-16 02:20:32 [INFO] GET /api/users/181 200 10ms
2025-01-16 02:20:39 [INFO] GET /api/health 200 3ms
2025-01-16 02:20:49 [INFO] PUT /api/settings 200 47ms
2025-01-16 02:21:03 [WARN] Rate limit approaching for IP 192.168.2.110 (100/100 requests in window)
2025-01-16 02:21:11 [INFO] GET /api/health 200 3ms
2025-01-16 02:21:14 [INFO] GET /api/health 200 2ms
2025-01-16 02:21:17 [ERROR] Unhandled exception in POST /api/auth/login: TimeoutError
2025-01-16 02:21:17 [ERROR] Stack trace:
    at Layer.handle (node_modules/express/lib/router/layer.js:140)
    at RoleService.getPermissions (src/services/role.service.ts:255)
    at AuthController.login (src/controllers/auth.controller.ts:258)
    at validateRequest (src/middleware/validation.ts:175)
    at UserService.findById (src/services/user.service.ts:257)
2025-01-16 02:21:20 [INFO] GET /api/health 200 1ms
2025-01-16 02:21:22 [INFO] GET /api/notifications 200 21ms
2025-01-16 02:21:32 [INFO] POST /api/auth/login 401 88ms
2025-01-16 02:21:43 [WARN] Request body exceeded soft limit (4645KB)
2025-01-16 02:21:46 [ERROR] Unhandled exception in GET /api/users/154: UserNotFoundError
2025-01-16 02:21:46 [ERROR] Stack trace:
    at UserController.getUser (src/controllers/user.controller.ts:236)
    at processTicksAndRejections (node:internal/process/task_queues:258)
    at AuthController.login (src/controllers/auth.controller.ts:252)
    at Router.handle (node_modules/express/lib/router/index.js:38)
    at AuthService.validateToken (src/services/auth.service.ts:282)
    at validateRequest (src/middleware/validation.ts:177)
2025-01-16 02:21:56 [INFO] POST /api/users 409 21ms
2025-01-16 02:22:08 [INFO] PUT /api/users/178 200 74ms
2025-01-16 02:22:21 [INFO] DELETE /api/users/134 204 23ms
2025-01-16 02:22:27 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 02:22:27 [DEBUG] Rows returned: 30
2025-01-16 02:22:34 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 02:22:34 [DEBUG] Rows returned: 43
2025-01-16 02:22:40 [INFO] GET /api/health 200 1ms
2025-01-16 02:22:44 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 02:22:44 [DEBUG] Rows returned: 23
2025-01-16 02:22:57 [ERROR] Unhandled exception in POST /api/users: AuthenticationError
2025-01-16 02:22:57 [ERROR] Stack trace:
    at processTicksAndRejections (node:internal/process/task_queues:246)
    at Router.handle (node_modules/express/lib/router/index.js:173)
    at UserController.getUser (src/controllers/user.controller.ts:95)
    at UserService.findById (src/services/user.service.ts:173)
2025-01-16 02:23:00 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 02:23:00 [DEBUG] Rows returned: 14
2025-01-16 02:23:03 [INFO] GET /api/roles 200 8ms
2025-01-16 02:23:13 [INFO] GET /api/analytics/dashboard 200 647ms
2025-01-16 02:23:16 [INFO] GET /api/analytics/dashboard 200 219ms
2025-01-16 02:23:17 [INFO] GET /api/roles 200 13ms
2025-01-16 02:23:18 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-16 02:23:26 [INFO] GET /api/health 200 3ms
2025-01-16 02:23:29 [INFO] POST /api/users 409 24ms
2025-01-16 02:23:41 [INFO] PUT /api/users/188 200 89ms
2025-01-16 02:23:48 [INFO] GET /api/health 200 1ms
2025-01-16 02:23:59 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 02:23:59 [DEBUG] New record created: id=287
2025-01-16 02:24:11 [INFO] GET /api/health 200 2ms
2025-01-16 02:24:20 [INFO] POST /api/users 201 90ms
2025-01-16 02:24:27 [ERROR] Worker process crashed. Restarting...
2025-01-16 02:24:41 [INFO] POST /api/auth/refresh 200 49ms
2025-01-16 02:24:54 [INFO] POST /api/roles 201 54ms
2025-01-16 02:25:08 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 02:25:08 [DEBUG] New record created: id=406
2025-01-16 02:25:19 [INFO] GET /api/analytics/dashboard 200 750ms
2025-01-16 02:25:27 [INFO] GET /api/health 200 3ms
2025-01-16 02:25:30 [INFO] GET /api/settings 200 7ms
2025-01-16 02:25:41 [INFO] GET /api/health 200 1ms
2025-01-16 02:25:52 [INFO] GET /api/health 200 2ms
2025-01-16 02:26:05 [INFO] GET /api/health 200 2ms
2025-01-16 02:26:17 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 02:26:30 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 02:26:30 [DEBUG] Rows returned: 17
2025-01-16 02:26:43 [INFO] GET /api/users/41 404 10ms
2025-01-16 02:26:46 [INFO] POST /api/uploads 201 1335ms
2025-01-16 02:27:00 [INFO] GET /api/roles 200 8ms
2025-01-16 02:27:09 [INFO] GET /api/users/144 200 18ms
2025-01-16 02:27:19 [INFO] PUT /api/users/155 200 44ms
2025-01-16 02:27:20 [WARN] Redis reconnection attempt 84/5
2025-01-16 02:27:29 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-16 02:27:38 [INFO] GET /api/analytics/dashboard 200 631ms
2025-01-16 02:27:49 [INFO] GET /api/health 200 2ms
2025-01-16 02:28:00 [WARN] Request body exceeded soft limit (2958KB)
2025-01-16 02:28:03 [INFO] POST /api/users 409 22ms
2025-01-16 02:28:16 [INFO] GET /api/users/24 200 8ms
2025-01-16 02:28:21 [INFO] POST /api/users 409 17ms
2025-01-16 02:28:34 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-16 02:28:39 [INFO] GET /api/health 200 2ms
2025-01-16 02:28:43 [INFO] GET /api/health 200 2ms
2025-01-16 02:28:46 [INFO] GET /api/health 200 1ms
2025-01-16 02:28:49 [INFO] GET /api/analytics/dashboard 200 772ms
2025-01-16 02:29:02 [WARN] Rate limit approaching for IP 192.168.2.176 (96/100 requests in window)
2025-01-16 02:29:17 [INFO] DELETE /api/users/12 204 50ms
2025-01-16 02:29:25 [INFO] POST /api/auth/login 200 130ms
2025-01-16 02:29:34 [INFO] GET /api/users 200 54ms
2025-01-16 02:29:37 [INFO] DELETE /api/users/27 204 50ms
2025-01-16 02:29:44 [INFO] POST /api/auth/refresh 200 43ms
2025-01-16 02:29:45 [INFO] PUT /api/users/28 200 71ms
2025-01-16 02:29:54 [INFO] GET /api/health 200 1ms
2025-01-16 02:30:02 [INFO] GET /api/health 200 3ms
2025-01-16 02:30:11 [INFO] GET /api/users/137 200 10ms
2025-01-16 02:30:12 [INFO] GET /api/health 200 2ms
2025-01-16 02:30:15 [INFO] GET /api/health 200 1ms
2025-01-16 02:30:30 [INFO] POST /api/uploads 201 1677ms
2025-01-16 02:30:36 [INFO] GET /api/users 200 63ms
2025-01-16 02:30:47 [INFO] GET /api/health 200 2ms
2025-01-16 02:30:49 [INFO] POST /api/users 409 10ms
2025-01-16 02:30:51 [INFO] POST /api/auth/refresh 200 66ms
2025-01-16 02:31:02 [INFO] GET /api/health 200 1ms
2025-01-16 02:31:16 [INFO] GET /api/health 200 3ms
2025-01-16 02:31:23 [INFO] DELETE /api/users/104 204 35ms
2025-01-16 02:31:26 [INFO] GET /api/health 200 1ms
2025-01-16 02:31:27 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 02:31:33 [INFO] GET /api/settings 200 8ms
2025-01-16 02:31:45 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 02:31:45 [DEBUG] Rows returned: 14
2025-01-16 02:31:49 [WARN] Deprecated API version v1 called by client client-5
2025-01-16 02:31:50 [INFO] GET /api/settings 200 12ms
2025-01-16 02:31:54 [INFO] GET /api/users?page=3&limit=25 200 31ms
2025-01-16 02:31:58 [INFO] POST /api/users 201 105ms
2025-01-16 02:31:59 [INFO] GET /api/health 200 3ms
2025-01-16 02:32:13 [WARN] Rate limit exceeded for IP 192.168.8.80. Returning 429.
2025-01-16 02:32:24 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 02:32:24 [DEBUG] Rows returned: 21
2025-01-16 02:32:28 [INFO] GET /api/users 200 67ms
2025-01-16 02:32:37 [WARN] Deprecated API version v1 called by client client-19
2025-01-16 02:32:38 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 02:32:38 [DEBUG] Rows returned: 50
2025-01-16 02:32:47 [INFO] POST /api/auth/login 200 192ms
2025-01-16 02:32:48 [INFO] POST /api/roles 201 47ms
2025-01-16 02:32:55 [INFO] GET /api/health 200 2ms
2025-01-16 02:33:04 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 02:33:04 [DEBUG] Rows returned: 45
2025-01-16 02:33:09 [INFO] POST /api/roles 201 36ms
2025-01-16 02:33:18 [INFO] PUT /api/settings 200 30ms
2025-01-16 02:33:19 [INFO] GET /api/users?page=4&limit=25 200 26ms
2025-01-16 02:33:33 [INFO] GET /api/analytics/dashboard 200 667ms
2025-01-16 02:33:39 [INFO] GET /api/settings 200 12ms
2025-01-16 02:33:50 [INFO] GET /api/health 200 2ms
2025-01-16 02:34:01 [INFO] POST /api/users 201 135ms
2025-01-16 02:34:07 [INFO] POST /api/uploads 201 520ms
2025-01-16 02:34:10 [INFO] GET /api/health 200 2ms
2025-01-16 02:34:24 [WARN] Redis reconnection attempt 87/5
2025-01-16 02:34:32 [INFO] POST /api/roles 201 39ms
2025-01-16 02:34:44 [WARN] JWT token expires in less than 60 seconds for user 17
2025-01-16 02:34:58 [INFO] GET /api/settings 200 5ms
2025-01-16 02:34:59 [INFO] PUT /api/settings 200 42ms
2025-01-16 02:35:04 [INFO] GET /api/users?role=viewer 200 40ms
2025-01-16 02:35:12 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 02:35:17 [INFO] GET /api/users/10 200 10ms
2025-01-16 02:35:22 [INFO] GET /api/notifications 200 31ms
2025-01-16 02:35:27 [INFO] POST /api/users 201 136ms
2025-01-16 02:35:32 [INFO] GET /api/users 200 36ms
2025-01-16 02:35:38 [INFO] GET /api/users?role=admin 200 23ms
2025-01-16 02:35:50 [INFO] POST /api/auth/login 401 53ms
2025-01-16 02:36:05 [INFO] POST /api/roles 201 47ms
2025-01-16 02:36:16 [INFO] POST /api/auth/login 200 109ms
2025-01-16 02:36:22 [INFO] GET /api/health 200 2ms
2025-01-16 02:36:31 [INFO] GET /api/users/115 404 11ms
2025-01-16 02:36:35 [INFO] GET /api/health 200 3ms
2025-01-16 02:36:47 [INFO] GET /api/users/7 404 14ms
2025-01-16 02:36:58 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 02:36:58 [DEBUG] Rows returned: 27
2025-01-16 02:37:00 [INFO] GET /api/users 200 42ms
2025-01-16 02:37:12 [INFO] GET /api/analytics/dashboard 200 768ms
2025-01-16 02:37:26 [INFO] POST /api/users 409 18ms
2025-01-16 02:37:41 [INFO] GET /api/users/167 200 9ms
2025-01-16 02:37:47 [INFO] GET /api/health 200 2ms
2025-01-16 02:37:49 [INFO] GET /api/notifications 200 18ms
2025-01-16 02:37:53 [INFO] POST /api/users 201 81ms
2025-01-16 02:37:57 [INFO] POST /api/uploads 201 1655ms
2025-01-16 02:37:59 [INFO] GET /api/users/145 404 10ms
2025-01-16 02:38:08 [INFO] GET /api/health 200 3ms
2025-01-16 02:38:21 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 02:38:25 [INFO] GET /api/health 200 3ms
2025-01-16 02:38:36 [INFO] GET /api/users 200 31ms
2025-01-16 02:38:48 [INFO] GET /api/analytics/dashboard 200 345ms
2025-01-16 02:39:00 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 02:39:00 [DEBUG] Rows returned: 37
2025-01-16 02:39:14 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 02:39:14 [DEBUG] Rows returned: 1
2025-01-16 02:39:20 [INFO] GET /api/analytics/dashboard 200 562ms
2025-01-16 02:39:28 [INFO] POST /api/roles 201 57ms
2025-01-16 02:39:38 [WARN] Rate limit approaching for IP 192.168.9.117 (93/100 requests in window)
2025-01-16 02:39:40 [INFO] GET /api/health 200 3ms
2025-01-16 02:39:46 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 02:39:46 [DEBUG] Rows returned: 26
2025-01-16 02:39:54 [INFO] GET /api/users?role=moderator 200 20ms
2025-01-16 02:40:04 [INFO] POST /api/auth/login 401 77ms
2025-01-16 02:40:07 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 02:40:14 [INFO] GET /api/users?role=admin 200 17ms
2025-01-16 02:40:25 [INFO] PUT /api/users/6 200 73ms
2025-01-16 02:40:36 [INFO] GET /api/health 200 1ms
2025-01-16 02:40:46 [INFO] GET /api/health 200 2ms
2025-01-16 02:40:53 [INFO] GET /api/health 200 3ms
2025-01-16 02:40:55 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 02:40:55 [DEBUG] Rows returned: 27
2025-01-16 02:40:56 [WARN] Rate limit approaching for IP 192.168.8.203 (80/100 requests in window)
2025-01-16 02:41:03 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 02:41:03 [DEBUG] Rows returned: 16
2025-01-16 02:41:15 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 02:41:15 [DEBUG] Rows returned: 15
2025-01-16 02:41:24 [INFO] PUT /api/users/20 200 58ms
2025-01-16 02:41:26 [INFO] GET /api/analytics/dashboard 200 775ms
2025-01-16 02:41:29 [INFO] GET /api/users/28 200 17ms
2025-01-16 02:41:44 [INFO] GET /api/health 200 1ms
2025-01-16 02:41:52 [INFO] POST /api/auth/refresh 200 76ms
2025-01-16 02:41:58 [INFO] GET /api/roles 200 9ms
2025-01-16 02:42:06 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 02:42:09 [INFO] DELETE /api/users/122 204 37ms
2025-01-16 02:42:23 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 02:42:28 [INFO] PUT /api/users/12 200 75ms
2025-01-16 02:42:39 [INFO] GET /api/notifications 200 21ms
2025-01-16 02:42:54 [INFO] GET /api/notifications 200 12ms
2025-01-16 02:43:03 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 02:43:03 [DEBUG] Rows returned: 48
2025-01-16 02:43:14 [INFO] POST /api/roles 201 63ms
2025-01-16 02:43:27 [INFO] GET /api/users/120 200 17ms
2025-01-16 02:43:28 [WARN] Redis reconnection attempt 86/5
2025-01-16 02:43:30 [INFO] PUT /api/users/116 200 77ms
2025-01-16 02:43:42 [INFO] GET /api/health 200 3ms
2025-01-16 02:43:46 [INFO] GET /api/notifications 200 28ms
2025-01-16 02:43:48 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 02:43:48 [DEBUG] Rows returned: 18
2025-01-16 02:43:56 [INFO] GET /api/settings 200 11ms
2025-01-16 02:44:05 [INFO] GET /api/health 200 1ms
2025-01-16 02:44:20 [INFO] GET /api/analytics/dashboard 200 699ms
2025-01-16 02:44:33 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 02:44:33 [DEBUG] New record created: id=102
2025-01-16 02:44:42 [INFO] GET /api/users?page=3&limit=25 200 57ms
2025-01-16 02:44:51 [INFO] POST /api/users 409 25ms
2025-01-16 02:44:53 [INFO] DELETE /api/users/63 204 49ms
2025-01-16 02:45:05 [INFO] GET /api/notifications 200 14ms
2025-01-16 02:45:14 [INFO] PUT /api/settings 200 46ms
2025-01-16 02:45:29 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 02:45:38 [INFO] GET /api/health 200 3ms
2025-01-16 02:45:40 [INFO] POST /api/uploads 201 1545ms
2025-01-16 02:45:51 [INFO] PUT /api/settings 200 54ms
2025-01-16 02:45:57 [WARN] S3 upload retry after timeout (1849ms)
2025-01-16 02:46:06 [INFO] POST /api/auth/login 401 90ms
2025-01-16 02:46:10 [INFO] GET /api/health 200 2ms
2025-01-16 02:46:20 [INFO] POST /api/users 201 136ms
2025-01-16 02:46:23 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 02:46:23 [DEBUG] New record created: id=262
2025-01-16 02:46:25 [INFO] GET /api/health 200 1ms
2025-01-16 02:46:31 [INFO] POST /api/users 409 25ms
2025-01-16 02:46:40 [INFO] GET /api/settings 200 5ms
2025-01-16 02:46:42 [INFO] GET /api/users/39 200 14ms
2025-01-16 02:46:50 [INFO] POST /api/users 409 14ms
2025-01-16 02:46:55 [INFO] POST /api/roles 201 41ms
2025-01-16 02:46:59 [INFO] GET /api/health 200 3ms
2025-01-16 02:47:10 [ERROR] Failed to send email: SMTP connection refused
2025-01-16 02:47:23 [INFO] POST /api/auth/login 401 92ms
2025-01-16 02:47:34 [INFO] DELETE /api/users/105 204 31ms
2025-01-16 02:47:47 [INFO] GET /api/users/179 200 13ms
2025-01-16 02:47:58 [INFO] POST /api/auth/login 401 110ms
2025-01-16 02:48:10 [INFO] GET /api/health 200 2ms
2025-01-16 02:48:17 [INFO] GET /api/health 200 3ms
2025-01-16 02:48:22 [INFO] GET /api/users?role=moderator 200 37ms
2025-01-16 02:48:30 [INFO] GET /api/health 200 2ms
2025-01-16 02:48:40 [INFO] PUT /api/settings 200 34ms
2025-01-16 02:48:47 [INFO] GET /api/notifications 200 19ms
2025-01-16 02:48:52 [INFO] GET /api/settings 200 11ms
2025-01-16 02:48:53 [INFO] GET /api/roles 200 7ms
2025-01-16 02:48:59 [INFO] GET /api/health 200 2ms
2025-01-16 02:49:07 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 02:49:07 [DEBUG] New record created: id=111
2025-01-16 02:49:15 [INFO] GET /api/health 200 1ms
2025-01-16 02:49:25 [INFO] GET /api/settings 200 6ms
2025-01-16 02:49:37 [INFO] DELETE /api/users/113 204 44ms
2025-01-16 02:49:40 [INFO] GET /api/health 200 1ms
2025-01-16 02:49:48 [INFO] POST /api/users 409 22ms
2025-01-16 02:49:54 [INFO] GET /api/users/4 404 17ms
2025-01-16 02:50:08 [INFO] GET /api/health 200 1ms
2025-01-16 02:50:19 [INFO] POST /api/users 201 101ms
2025-01-16 02:50:30 [INFO] GET /api/users?page=2&limit=25 200 47ms
2025-01-16 02:50:45 [INFO] POST /api/auth/login 200 193ms
2025-01-16 02:50:51 [INFO] GET /api/notifications 200 27ms
2025-01-16 02:50:53 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 02:51:07 [INFO] GET /api/health 200 2ms
2025-01-16 02:51:15 [INFO] POST /api/roles 201 55ms
2025-01-16 02:51:16 [INFO] GET /api/health 200 3ms
2025-01-16 02:51:23 [WARN] Rate limit approaching for IP 192.168.2.169 (90/100 requests in window)
2025-01-16 02:51:30 [INFO] POST /api/users 409 22ms
2025-01-16 02:51:40 [INFO] GET /api/settings 200 8ms
2025-01-16 02:51:44 [INFO] GET /api/health 200 2ms
2025-01-16 02:51:58 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 02:51:58 [DEBUG] Rows returned: 21
2025-01-16 02:52:06 [INFO] GET /api/users?page=1&limit=25 200 49ms
2025-01-16 02:52:15 [INFO] POST /api/users 409 16ms
2025-01-16 02:52:19 [INFO] GET /api/health 200 3ms
2025-01-16 02:52:22 [INFO] GET /api/health 200 2ms
2025-01-16 02:52:32 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 02:52:32 [DEBUG] Rows returned: 37
2025-01-16 02:52:39 [INFO] GET /api/users 200 54ms
2025-01-16 02:52:52 [INFO] POST /api/uploads 201 1092ms
2025-01-16 02:53:03 [INFO] POST /api/auth/login 401 106ms
2025-01-16 02:53:08 [INFO] POST /api/users 201 110ms
2025-01-16 02:53:22 [INFO] GET /api/users 200 38ms
2025-01-16 02:53:37 [INFO] POST /api/roles 201 40ms
2025-01-16 02:53:39 [INFO] GET /api/health 200 2ms
2025-01-16 02:53:53 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 02:53:53 [DEBUG] Rows returned: 28
2025-01-16 02:54:03 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 02:54:03 [DEBUG] Rows returned: 2
2025-01-16 02:54:11 [INFO] POST /api/auth/login 200 163ms
2025-01-16 02:54:12 [INFO] PUT /api/users/108 200 73ms
2025-01-16 02:54:16 [INFO] GET /api/users/166 200 6ms
2025-01-16 02:54:21 [INFO] POST /api/auth/login 200 197ms
2025-01-16 02:54:29 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 02:54:40 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 02:54:52 [INFO] POST /api/users 201 107ms
2025-01-16 02:55:00 [INFO] POST /api/auth/login 401 107ms
2025-01-16 02:55:10 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-16 02:55:11 [WARN] Redis reconnection attempt 89/5
2025-01-16 02:55:18 [INFO] GET /api/health 200 2ms
2025-01-16 02:55:25 [INFO] GET /api/users/61 404 15ms
2025-01-16 02:55:30 [INFO] GET /api/health 200 3ms
2025-01-16 02:55:37 [INFO] GET /api/health 200 3ms
2025-01-16 02:55:47 [INFO] GET /api/health 200 2ms
2025-01-16 02:55:51 [INFO] GET /api/users/77 200 12ms
2025-01-16 02:55:57 [INFO] PUT /api/settings 200 38ms
2025-01-16 02:56:02 [INFO] POST /api/users 409 14ms
2025-01-16 02:56:08 [INFO] GET /api/users?role=editor 200 32ms
2025-01-16 02:56:15 [INFO] PUT /api/settings 200 30ms
2025-01-16 02:56:24 [INFO] GET /api/users 200 80ms
2025-01-16 02:56:34 [INFO] GET /api/users/65 404 11ms
2025-01-16 02:56:42 [INFO] POST /api/uploads 201 1347ms
2025-01-16 02:56:51 [WARN] S3 upload retry after timeout (535ms)
2025-01-16 02:56:59 [INFO] GET /api/analytics/dashboard 200 395ms
2025-01-16 02:57:09 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 02:57:13 [INFO] GET /api/health 200 3ms
2025-01-16 02:57:24 [INFO] GET /api/users?role=moderator 200 30ms
2025-01-16 02:57:36 [INFO] GET /api/health 200 3ms
2025-01-16 02:57:49 [INFO] DELETE /api/users/24 204 22ms
2025-01-16 02:57:58 [INFO] POST /api/auth/login 401 102ms
2025-01-16 02:58:00 [INFO] DELETE /api/users/58 204 45ms
2025-01-16 02:58:09 [INFO] GET /api/health 200 1ms
2025-01-16 02:58:14 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 02:58:23 [INFO] GET /api/health 200 2ms
2025-01-16 02:58:29 [INFO] GET /api/health 200 2ms
2025-01-16 02:58:39 [INFO] GET /api/health 200 2ms
2025-01-16 02:58:44 [INFO] DELETE /api/users/66 204 23ms
2025-01-16 02:58:47 [INFO] POST /api/auth/refresh 200 64ms
2025-01-16 02:58:58 [INFO] GET /api/users/180 200 12ms
2025-01-16 02:59:13 [INFO] GET /api/notifications 200 35ms
2025-01-16 02:59:24 [INFO] GET /api/health 200 2ms
2025-01-16 02:59:25 [INFO] GET /api/users?page=5&limit=25 200 51ms
2025-01-16 02:59:35 [INFO] GET /api/users/154 200 11ms
2025-01-16 02:59:37 [INFO] GET /api/health 200 2ms
2025-01-16 02:59:40 [INFO] GET /api/health 200 1ms
2025-01-16 02:59:45 [INFO] GET /api/health 200 1ms
2025-01-16 03:00:00 [INFO] POST /api/auth/refresh 200 59ms
2025-01-16 03:00:07 [INFO] GET /api/users/167 200 19ms
2025-01-16 03:00:21 [WARN] S3 upload retry after timeout (704ms)
2025-01-16 03:00:22 [INFO] GET /api/roles 200 11ms
2025-01-16 03:00:29 [INFO] POST /api/users 409 23ms
2025-01-16 03:00:34 [INFO] PUT /api/users/20 200 80ms
2025-01-16 03:00:45 [WARN] JWT token expires in less than 60 seconds for user 66
2025-01-16 03:00:56 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 03:00:59 [INFO] GET /api/health 200 1ms
2025-01-16 03:01:03 [INFO] GET /api/health 200 3ms
2025-01-16 03:01:08 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 03:01:08 [DEBUG] Rows returned: 29
2025-01-16 03:01:19 [INFO] GET /api/roles 200 14ms
2025-01-16 03:01:33 [INFO] GET /api/health 200 3ms
2025-01-16 03:01:36 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 03:01:36 [DEBUG] New record created: id=358
2025-01-16 03:01:38 [INFO] GET /api/health 200 3ms
2025-01-16 03:01:42 [INFO] GET /api/health 200 1ms
2025-01-16 03:01:48 [INFO] GET /api/health 200 3ms
2025-01-16 03:01:53 [INFO] GET /api/health 200 2ms
2025-01-16 03:02:04 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 03:02:04 [DEBUG] Rows returned: 8
2025-01-16 03:02:18 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-16 03:02:32 [INFO] GET /api/health 200 3ms
2025-01-16 03:02:37 [WARN] JWT token expires in less than 60 seconds for user 159
2025-01-16 03:02:39 [INFO] GET /api/users?role=viewer 200 19ms
2025-01-16 03:02:50 [INFO] GET /api/users?page=3&limit=25 200 51ms
2025-01-16 03:03:02 [INFO] POST /api/users 201 82ms
2025-01-16 03:03:13 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 03:03:13 [DEBUG] Rows returned: 6
2025-01-16 03:03:15 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 03:03:15 [DEBUG] Rows returned: 22
2025-01-16 03:03:28 [INFO] PUT /api/users/164 200 61ms
2025-01-16 03:03:32 [INFO] GET /api/health 200 1ms
2025-01-16 03:03:34 [INFO] GET /api/roles 200 14ms
2025-01-16 03:03:47 [INFO] POST /api/users 201 112ms
2025-01-16 03:03:58 [INFO] GET /api/settings 200 10ms
2025-01-16 03:04:13 [WARN] JWT token expires in less than 60 seconds for user 10
2025-01-16 03:04:17 [INFO] GET /api/health 200 3ms
2025-01-16 03:04:29 [INFO] GET /api/health 200 1ms
2025-01-16 03:04:32 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 03:04:32 [DEBUG] New record created: id=500
2025-01-16 03:04:39 [INFO] GET /api/users?role=viewer 200 37ms
2025-01-16 03:04:45 [WARN] Request body exceeded soft limit (3327KB)
2025-01-16 03:05:00 [INFO] DELETE /api/users/59 204 38ms
2025-01-16 03:05:13 [INFO] GET /api/users/8 200 16ms
2025-01-16 03:05:26 [INFO] POST /api/auth/refresh 200 30ms
2025-01-16 03:05:37 [INFO] GET /api/health 200 2ms
2025-01-16 03:05:45 [INFO] GET /api/notifications 200 16ms
2025-01-16 03:05:46 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 03:05:46 [DEBUG] Rows returned: 35
2025-01-16 03:05:56 [INFO] GET /api/users?page=4&limit=25 200 26ms
2025-01-16 03:06:10 [INFO] POST /api/roles 201 50ms
2025-01-16 03:06:21 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 03:06:21 [DEBUG] Rows returned: 29
2025-01-16 03:06:22 [INFO] GET /api/health 200 1ms
2025-01-16 03:06:30 [INFO] POST /api/uploads 201 1565ms
2025-01-16 03:06:38 [INFO] GET /api/health 200 1ms
2025-01-16 03:06:51 [INFO] GET /api/users 200 56ms
2025-01-16 03:06:57 [INFO] GET /api/health 200 3ms
2025-01-16 03:07:12 [INFO] GET /api/roles 200 9ms
2025-01-16 03:07:16 [INFO] POST /api/auth/login 200 226ms
2025-01-16 03:07:20 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 03:07:20 [DEBUG] Rows returned: 9
2025-01-16 03:07:25 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 03:07:39 [INFO] GET /api/health 200 2ms
2025-01-16 03:07:40 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 03:07:51 [INFO] GET /api/analytics/dashboard 200 269ms
2025-01-16 03:07:54 [INFO] PUT /api/users/194 200 51ms
2025-01-16 03:08:04 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 03:08:04 [DEBUG] Rows returned: 4
2025-01-16 03:08:16 [INFO] GET /api/roles 200 15ms
2025-01-16 03:08:29 [ERROR] Deadlock detected in transaction tx-18687
2025-01-16 03:08:29 [ERROR] Stack trace:
    at Router.handle (node_modules/express/lib/router/index.js:103)
    at UserController.getUser (src/controllers/user.controller.ts:236)
    at validateRequest (src/middleware/validation.ts:184)
2025-01-16 03:08:36 [INFO] GET /api/health 200 3ms
2025-01-16 03:08:51 [INFO] GET /api/health 200 1ms
2025-01-16 03:08:52 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 03:08:52 [DEBUG] Rows returned: 47
2025-01-16 03:08:59 [INFO] GET /api/notifications 200 20ms
2025-01-16 03:09:02 [ERROR] Database connection timeout after 5000ms
2025-01-16 03:09:17 [INFO] GET /api/roles 200 11ms
2025-01-16 03:09:18 [INFO] GET /api/health 200 1ms
2025-01-16 03:09:27 [INFO] GET /api/health 200 1ms
2025-01-16 03:09:29 [INFO] POST /api/users 201 128ms
2025-01-16 03:09:43 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 03:09:51 [INFO] POST /api/auth/login 200 210ms
2025-01-16 03:09:59 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 03:10:08 [INFO] GET /api/users 200 26ms
2025-01-16 03:10:17 [DEBUG] Query executed: SELECT * FROM permissions WHERE role_id = $1
2025-01-16 03:10:17 [DEBUG] Rows returned: 39
2025-01-16 03:10:30 [WARN] Redis reconnection attempt 83/5
2025-01-16 03:10:37 [INFO] POST /api/auth/login 401 97ms
2025-01-16 03:10:45 [INFO] GET /api/health 200 2ms
2025-01-16 03:10:55 [INFO] DELETE /api/users/188 204 40ms
2025-01-16 03:11:03 [INFO] GET /api/health 200 2ms
2025-01-16 03:11:14 [INFO] GET /api/roles 200 6ms
2025-01-16 03:11:28 [ERROR] Deadlock detected in transaction tx-79370
2025-01-16 03:11:28 [ERROR] Stack trace:
    at Layer.handle (node_modules/express/lib/router/layer.js:32)
    at authenticate (src/middleware/auth.ts:285)
    at validateRequest (src/middleware/validation.ts:12)
    at AuthService.validateToken (src/services/auth.service.ts:157)
    at processTicksAndRejections (node:internal/process/task_queues:171)
2025-01-16 03:11:42 [INFO] GET /api/roles 200 14ms
2025-01-16 03:11:56 [INFO] GET /api/health 200 1ms
2025-01-16 03:11:59 [INFO] POST /api/auth/refresh 200 58ms
2025-01-16 03:12:05 [INFO] PUT /api/settings 200 47ms
2025-01-16 03:12:09 [INFO] GET /api/users?role=admin 200 19ms
2025-01-16 03:12:23 [ERROR] TLS handshake failed for upstream service auth-service.internal
2025-01-16 03:12:25 [INFO] POST /api/users 409 10ms
2025-01-16 03:12:34 [INFO] GET /api/health 200 1ms
2025-01-16 03:12:47 [WARN] Memory usage at 88% of allocated heap
2025-01-16 03:13:00 [INFO] GET /api/health 200 1ms
2025-01-16 03:13:07 [ERROR] Database connection timeout after 5000ms
2025-01-16 03:13:15 [INFO] POST /api/auth/login 200 244ms
2025-01-16 03:13:24 [INFO] GET /api/health 200 3ms
2025-01-16 03:13:38 [INFO] POST /api/auth/login 401 66ms
2025-01-16 03:13:40 [INFO] POST /api/auth/login 401 64ms
2025-01-16 03:13:42 [INFO] GET /api/health 200 3ms
2025-01-16 03:13:49 [INFO] POST /api/roles 201 45ms
2025-01-16 03:13:55 [INFO] GET /api/health 200 2ms
2025-01-16 03:14:02 [INFO] GET /api/users?role=moderator 200 20ms
2025-01-16 03:14:08 [INFO] POST /api/auth/refresh 200 67ms
2025-01-16 03:14:22 [INFO] GET /api/analytics/dashboard 200 786ms
2025-01-16 03:14:28 [INFO] POST /api/auth/login 200 163ms
2025-01-16 03:14:39 [INFO] GET /api/health 200 3ms
2025-01-16 03:14:45 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 03:14:45 [DEBUG] Rows returned: 43
2025-01-16 03:14:53 [INFO] GET /api/health 200 1ms
2025-01-16 03:14:59 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 03:14:59 [DEBUG] Rows returned: 39
2025-01-16 03:15:09 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 03:15:21 [INFO] GET /api/users/180 200 16ms
2025-01-16 03:15:32 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 03:15:36 [INFO] GET /api/health 200 3ms
2025-01-16 03:15:49 [INFO] POST /api/auth/login 200 147ms
2025-01-16 03:15:58 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 03:15:58 [DEBUG] New record created: id=94
2025-01-16 03:16:04 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 03:16:04 [DEBUG] Rows returned: 26
2025-01-16 03:16:11 [INFO] PUT /api/users/7 200 45ms
2025-01-16 03:16:22 [INFO] GET /api/roles 200 8ms
2025-01-16 03:16:29 [INFO] POST /api/auth/login 401 113ms
2025-01-16 03:16:37 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 03:16:42 [INFO] POST /api/roles 201 57ms
2025-01-16 03:16:50 [INFO] GET /api/users/138 404 11ms
2025-01-16 03:16:51 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 03:16:59 [INFO] PUT /api/settings 200 45ms
2025-01-16 03:17:08 [INFO] POST /api/roles 201 68ms
2025-01-16 03:17:20 [WARN] Rate limit exceeded for IP 192.168.2.108. Returning 429.
2025-01-16 03:17:25 [INFO] GET /api/notifications 200 24ms
2025-01-16 03:17:33 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 03:17:40 [INFO] GET /api/health 200 2ms
2025-01-16 03:17:54 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 03:18:09 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-16 03:18:23 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 03:18:23 [DEBUG] New record created: id=458
2025-01-16 03:18:29 [WARN] Rate limit approaching for IP 192.168.3.18 (95/100 requests in window)
2025-01-16 03:18:33 [INFO] POST /api/users 201 113ms
2025-01-16 03:18:44 [INFO] GET /api/users?role=admin 200 40ms
2025-01-16 03:18:59 [INFO] GET /api/users?role=admin 200 28ms
2025-01-16 03:19:06 [INFO] POST /api/auth/refresh 200 44ms
2025-01-16 03:19:15 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 03:19:15 [DEBUG] Rows returned: 11
2025-01-16 03:19:23 [INFO] GET /api/analytics/dashboard 200 558ms
2025-01-16 03:19:33 [INFO] POST /api/users 409 21ms
2025-01-16 03:19:36 [INFO] POST /api/uploads 201 531ms
2025-01-16 03:19:47 [INFO] GET /api/users?page=1&limit=25 200 56ms
2025-01-16 03:19:54 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 03:19:54 [DEBUG] Rows returned: 19
2025-01-16 03:20:01 [INFO] GET /api/roles 200 15ms
2025-01-16 03:20:03 [INFO] GET /api/users/75 404 17ms
2025-01-16 03:20:14 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 03:20:14 [DEBUG] Rows returned: 40
2025-01-16 03:20:17 [INFO] GET /api/health 200 3ms
2025-01-16 03:20:31 [DEBUG] Query executed: SELECT * FROM roles ORDER BY name
2025-01-16 03:20:31 [DEBUG] Rows returned: 33
2025-01-16 03:20:36 [INFO] GET /api/health 200 2ms
2025-01-16 03:20:44 [INFO] POST /api/auth/refresh 200 54ms
2025-01-16 03:20:55 [INFO] GET /api/users?role=admin 200 18ms
2025-01-16 03:21:06 [INFO] GET /api/roles 200 13ms
2025-01-16 03:21:07 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 03:21:07 [DEBUG] Rows returned: 50
2025-01-16 03:21:20 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-16 03:21:21 [INFO] GET /api/health 200 2ms
2025-01-16 03:21:35 [INFO] PUT /api/settings 200 55ms
2025-01-16 03:21:47 [INFO] POST /api/users 201 133ms
2025-01-16 03:21:52 [INFO] POST /api/auth/login 401 107ms
2025-01-16 03:21:55 [INFO] POST /api/users 409 23ms
2025-01-16 03:21:58 [ERROR] Circuit breaker OPEN for notification-service (5 failures in 30s)
2025-01-16 03:21:59 [DEBUG] Query executed: SELECT * FROM users WHERE id = $1
2025-01-16 03:21:59 [DEBUG] Rows returned: 33
2025-01-16 03:22:12 [INFO] GET /api/health 200 1ms
2025-01-16 03:22:18 [WARN] JWT token expires in less than 60 seconds for user 186
2025-01-16 03:22:29 [INFO] GET /api/health 200 1ms
2025-01-16 03:22:30 [WARN] Connection pool exhausted, waiting for available connection
2025-01-16 03:22:34 [INFO] GET /api/health 200 3ms
2025-01-16 03:22:42 [INFO] POST /api/auth/login 200 168ms
2025-01-16 03:22:44 [INFO] GET /api/users/149 200 5ms
2025-01-16 03:22:58 [INFO] GET /api/health 200 1ms
2025-01-16 03:23:06 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 03:23:17 [INFO] PUT /api/settings 200 46ms
2025-01-16 03:23:21 [INFO] DELETE /api/users/79 204 26ms
2025-01-16 03:23:30 [INFO] POST /api/uploads 201 1163ms
2025-01-16 03:23:36 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 03:23:36 [DEBUG] Rows returned: 39
2025-01-16 03:23:39 [INFO] GET /api/health 200 3ms
2025-01-16 03:23:43 [WARN] Deprecated API version v1 called by client client-17
2025-01-16 03:23:50 [DEBUG] Query executed: SELECT COUNT(*) FROM users GROUP BY role_id
2025-01-16 03:23:50 [DEBUG] Rows returned: 33
2025-01-16 03:24:04 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 03:24:04 [DEBUG] Rows returned: 5
2025-01-16 03:24:15 [INFO] GET /api/users?page=3&limit=25 200 38ms
2025-01-16 03:24:16 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 03:24:16 [DEBUG] New record created: id=350
2025-01-16 03:24:23 [INFO] GET /api/settings 200 9ms
2025-01-16 03:24:25 [INFO] GET /api/settings 200 7ms
2025-01-16 03:24:33 [INFO] GET /api/notifications 200 20ms
2025-01-16 03:24:47 [INFO] POST /api/uploads 201 1761ms
2025-01-16 03:24:49 [INFO] POST /api/users 409 19ms
2025-01-16 03:24:58 [DEBUG] Query executed: UPDATE users SET active = false WHERE id = $1
2025-01-16 03:25:08 [INFO] GET /api/users 200 36ms
2025-01-16 03:25:17 [WARN] Redis reconnection attempt 80/5
2025-01-16 03:25:26 [DEBUG] Query executed: SELECT * FROM users WHERE active = true ORDER BY created_at DESC LIMIT 50
2025-01-16 03:25:26 [DEBUG] Rows returned: 22
2025-01-16 03:25:34 [INFO] GET /api/health 200 1ms
2025-01-16 03:25:44 [WARN] Memory usage at 79% of allocated heap
2025-01-16 03:25:50 [ERROR] Unhandled exception in GET /api/users?page=1&limit=25: TimeoutError
2025-01-16 03:25:50 [ERROR] Stack trace:
    at authenticate (src/middleware/auth.ts:297)
    at UserService.findById (src/services/user.service.ts:66)
    at Layer.handle (node_modules/express/lib/router/layer.js:75)
    at Router.handle (node_modules/express/lib/router/index.js:118)
    at RoleService.getPermissions (src/services/role.service.ts:204)
2025-01-16 03:26:04 [INFO] POST /api/users 409 11ms
2025-01-16 03:26:05 [INFO] GET /api/users?page=4&limit=25 200 53ms
2025-01-16 03:26:20 [INFO] GET /api/roles 200 14ms
2025-01-16 03:26:26 [INFO] GET /api/health 200 2ms
2025-01-16 03:26:38 [INFO] POST /api/users 409 19ms
2025-01-16 03:26:46 [INFO] GET /api/users 200 53ms
2025-01-16 03:26:49 [DEBUG] Query executed: DELETE FROM sessions WHERE expires_at < NOW()
2025-01-16 03:26:50 [WARN] Rate limit approaching for IP 192.168.1.184 (93/100 requests in window)
2025-01-16 03:27:01 [INFO] GET /api/health 200 1ms
2025-01-16 03:27:10 [INFO] GET /api/roles 200 15ms
2025-01-16 03:27:13 [INFO] GET /api/health 200 2ms
2025-01-16 03:27:17 [INFO] POST /api/auth/login 401 111ms
2025-01-16 03:27:24 [INFO] POST /api/auth/refresh 200 38ms
2025-01-16 03:27:30 [INFO] POST /api/uploads 201 1237ms
2025-01-16 03:27:31 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 03:27:31 [DEBUG] Rows returned: 48
2025-01-16 03:27:38 [INFO] GET /api/notifications 200 19ms
2025-01-16 03:27:52 [ERROR] Unhandled exception in GET /api/analytics/dashboard: UserNotFoundError
2025-01-16 03:27:52 [ERROR] Stack trace:
    at validateRequest (src/middleware/validation.ts:145)
    at processTicksAndRejections (node:internal/process/task_queues:184)
    at AuthController.login (src/controllers/auth.controller.ts:137)
    at UserController.getUser (src/controllers/user.controller.ts:132)
2025-01-16 03:27:57 [INFO] GET /api/notifications 200 18ms
2025-01-16 03:28:08 [DEBUG] Query executed: INSERT INTO sessions (user_id, token, expires_at) VALUES ($1, $2, $3)
2025-01-16 03:28:08 [DEBUG] New record created: id=196
2025-01-16 03:28:13 [INFO] POST /api/roles 201 32ms
2025-01-16 03:28:19 [DEBUG] Query executed: SELECT * FROM users WHERE role_id = $1 AND active = true
2025-01-16 03:28:19 [DEBUG] Rows returned: 13
2025-01-16 03:28:32 [INFO] GET /api/users 200 79ms
2025-01-16 03:28:34 [INFO] GET /api/settings 200 12ms
2025-01-16 03:28:48 [INFO] GET /api/health 200 3ms
2025-01-16 03:28:58 [INFO] GET /api/settings 200 6ms
2025-01-16 03:29:09 [INFO] POST /api/users 201 138ms
2025-01-16 03:29:23 [WARN] JWT token expires in less than 60 seconds for user 179
2025-01-16 03:29:36 [INFO] PUT /api/users/98 200 74ms
2025-01-16 03:29:46 [ERROR] Redis connection lost. Attempting reconnect...
2025-01-16 03:29:48 [ERROR] S3 upload failed: AccessDenied for bucket myapp-uploads
2025-01-16 03:29:53 [ERROR] Out of memory in analytics aggregation pipeline
2025-01-16 03:30:02 [INFO] GET /api/notifications 200 30ms
2025-01-16 03:30:14 [INFO] GET /api/notifications 200 22ms
2025-01-16 03:30:19 [WARN] Deprecated API version v1 called by client client-3
2025-01-16 03:30:25 [INFO] GET /api/users/178 200 6ms
2025-01-16 03:30:36 [INFO] GET /api/health 200 2ms
2025-01-16 03:30:40 [DEBUG] Query executed: INSERT INTO users (username, email, role_id) VALUES ($1, $2, $3) RETURNING id
2025-01-16 03:30:40 [DEBUG] New record created: id=264
2025-01-16 03:30:41 [INFO] GET /api/analytics/dashboard 200 744ms
2025-01-16 03:30:54 [WARN] Deprecated API version v1 called by client client-19
2025-01-16 03:31:04 [INFO] GET /api/health 200 1ms
2025-01-16 03:31:15 [INFO] GET /api/notifications 200 25ms
2025-01-16 03:31:24 [INFO] PUT /api/users/28 200 77ms
2025-01-16 03:31:39 [INFO] POST /api/users 409 20ms
2025-01-16 03:31:49 [DEBUG] Query executed: UPDATE users SET email = $1, updated_at = NOW() WHERE id = $2
2025-01-16 03:31:52 [INFO] GET /api/health 200 3ms
2025-01-16 03:32:01 [INFO] POST /api/users 409 25ms
2025-01-16 03:32:03 [WARN] Request body exceeded soft limit (2818KB)
2025-01-16 03:32:06 [INFO] POST /api/auth/login 401 57ms
2025-01-16 03:32:09 [INFO] POST /api/auth/refresh 200 63ms
2025-01-16 03:32:21 [INFO] POST /api/auth/login 200 159ms
2025-01-16 03:32:35 [INFO] PUT /api/users/54 200 40ms
2025-01-16 03:32:38 [DEBUG] Query executed: SELECT * FROM audit_log WHERE created_at > $1 ORDER BY created_at DESC LIMIT 100
2025-01-16 03:32:38 [DEBUG] Rows returned: 24
2025-01-16 03:32:42 [INFO] GET /api/users?page=1&limit=25 200 50ms
2025-01-16 03:32:53 [INFO] POST /api/uploads 201 850ms
2025-01-16 03:32:59 [INFO] GET /api/users?page=3&limit=25 200 39ms
2025-01-16 03:33:05 [INFO] GET /api/health 200 1ms
